if(function(t){function e(t,e,l){var s=t[0],r=/er/.test(l)?_indeterminate:/bl/.test(l)?f:u,a=l==_update?{checked:s[u],disabled:s[f],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:s[r];if(/^(ch|di|in)/.test(l)&&!a)i(t,r);else if(/^(un|en|de)/.test(l)&&a)n(t,r);else if(l==_update)for(var o in a)a[o]?i(t,o,!0):n(t,o,!0);else e&&"toggle"!=l||(e||t[_callback]("ifClicked"),a?s[_type]!==c&&n(t,r):i(t,r))}function i(e,i,l){var p=e[0],g=e.parent(),m=i==u,v=i==_indeterminate,y=i==f,b=v?_determinate:m?d:"enabled",w=s(e,b+r(p[_type])),_=s(e,i+r(p[_type]));if(!0!==p[i]){if(!l&&i==u&&p[_type]==c&&p.name){var x=e.closest("form"),k='input[name="'+p.name+'"]',k=x.length?x.find(k):t(k);k.each(function(){this!==p&&t(this).data(o)&&n(t(this),i)})}v?(p[i]=!0,p[u]&&n(e,u,"force")):(l||(p[i]=!0),m&&p[_indeterminate]&&n(e,_indeterminate,!1)),a(e,m,i,l)}p[f]&&s(e,_cursor,!0)&&g.find("."+h).css(_cursor,"default"),g[_add](_||s(e,i)||""),g.attr("role")&&!v&&g.attr("aria-"+(y?f:u),"true"),g[_remove](w||s(e,b)||"")}function n(t,e,i){var n=t[0],l=t.parent(),o=e==u,c=e==_indeterminate,p=e==f,g=c?_determinate:o?d:"enabled",m=s(t,g+r(n[_type])),v=s(t,e+r(n[_type]));!1!==n[e]&&(!c&&i&&"force"!=i||(n[e]=!1),a(t,o,g,i)),!n[f]&&s(t,_cursor,!0)&&l.find("."+h).css(_cursor,"pointer"),l[_remove](v||s(t,e)||""),l.attr("role")&&!c&&l.attr("aria-"+(p?f:u),"false"),l[_add](m||s(t,g)||"")}function l(e,i){e.data(o)&&(e.parent().html(e.attr("style",e.data(o).s||"")),i&&e[_callback](i),e.off(".i").unwrap(),t(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i"))}function s(t,e,i){if(t.data(o))return t.data(o).o[e+(i?"":"Class")]}function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,i,n){n||(e&&t[_callback]("ifToggled"),t[_callback]("ifChanged")[_callback]("if"+r(i)))}var o="iCheck",h=o+"-helper",c="radio",u="checked",d="un"+u,f="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),t.fn[o]=function(s,r){var a='input[type="checkbox"], input[type="'+c+'"]',d=t(),p=function(e){e.each(function(){var e=t(this);d=e.is(a)?d.add(e):d.add(e.find(a))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(s))return s=s.toLowerCase(),p(this),d.each(function(){var i=t(this);"destroy"==s?l(i,"ifDestroyed"):e(i,!0,s),t.isFunction(r)&&r()});if("object"!=typeof s&&s)return this;var g=t.extend({checkedClass:u,disabledClass:f,indeterminateClass:_indeterminate,labelHover:!0},s),m=g.handle,v=g.hoverClass||"hover",y=g.focusClass||"focus",b=g.activeClass||"active",w=!!g.labelHover,_=g.labelHoverClass||"hover",x=0|(""+g.increaseArea).replace("%","");return"checkbox"!=m&&m!=c||(a='input[type="'+m+'"]'),-50>x&&(x=-50),p(this),d.each(function(){var s=t(this);l(s);var r=this,a=r.id,d=-x+"%",p=100+2*x+"%",p={position:"absolute",top:d,left:d,display:"block",width:p,height:p,margin:0,padding:0,background:"#fff",border:0,opacity:0},d=_mobile?{position:"absolute",visibility:"hidden"}:x?p:{position:"absolute",opacity:0},m="checkbox"==r[_type]?g.checkboxClass||"icheckbox":g.radioClass||"i"+c,k=t(_label+'[for="'+a+'"]').add(s.closest(_label)),C=!!g.aria,M=o+"-"+Math.random().toString(36).substr(2,6),S='<div class="'+m+'" '+(C?'role="'+r[_type]+'" ':"");C&&k.each(function(){S+='aria-labelledby="',this.id?S+=this.id:(this.id=M,S+=M),S+='"'}),S=s.wrap(S+"/>")[_callback]("ifCreated").parent().append(g.insert),p=t('<ins class="'+h+'"/>').css(p).appendTo(S),s.data(o,{o:g,s:s.attr("style")}).css(d),g.inheritClass&&S[_add](r.className||""),g.inheritID&&a&&S.attr("id",o+"-"+a),"static"==S.css("position")&&S.css("position","relative"),e(s,!0,_update),k.length&&k.on(_click+".i mouseover.i mouseout.i "+_touch,function(i){var n=i[_type],l=t(this);if(!r[f]){if(n==_click){if(t(i.target).is("a"))return;e(s,!1,!0)}else w&&(/ut|nd/.test(n)?(S[_remove](v),l[_remove](_)):(S[_add](v),l[_add](_)));if(!_mobile)return!1;i.stopPropagation()}}),s.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type];return t=t.keyCode,e!=_click&&("keydown"==e&&32==t?(r[_type]==c&&r[u]||(r[u]?n(s,u):i(s,u)),!1):void("keyup"==e&&r[_type]==c?!r[u]&&i(s,u):/us|ur/.test(e)&&S["blur"==e?_remove:_add](y)))}),p.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var i=t[_type],n=/wn|up/.test(i)?b:v;if(!r[f]){if(i==_click?e(s,!1,!0):(/wn|er|in/.test(i)?S[_add](n):S[_remove](n+" "+b),k.length&&w&&n==v&&k[/ut|nd/.test(i)?_remove:_add](_)),!_mobile)return!1;t.stopPropagation()}})})}}(window.jQuery||window.Zepto),!function(t,e){function i(t,e){p(t).push(e)}function n(n,l,s){var r=n.children(l.headerTag),a=n.children(l.bodyTag);r.length>a.length?B(Q,"contents"):r.length<a.length&&B(Q,"titles");var o=l.startIndex;if(s.stepCount=r.length,l.saveState&&t.cookie){var h=t.cookie(V+m(n)),c=parseInt(h,0);!isNaN(c)&&c<s.stepCount&&(o=c)}s.currentIndex=o,r.each(function(l){var s=t(this),r=a.eq(l),o=r.data("mode"),h=null==o?K.html:v(K,/^\s*$/.test(o)||isNaN(o)?o:parseInt(o,0)),c=h===K.html||r.data("url")===e?"":r.data("url"),u=h!==K.html&&"1"===r.data("loaded"),d=t.extend({},et,{title:s.html(),content:h===K.html?r.html():"",contentUrl:c,contentMode:h,contentLoaded:u});i(n,d)})}function l(t){t.triggerHandler("canceled")}function s(t,e){return t.currentIndex-e}function r(e,i){var n=o(e);e.unbind(n).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(n),e.removeClass(i.clearFixCssClass+" vertical");var l=e.find(".content > *");l.removeData("loaded").removeData("mode").removeData("url"),l.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),e.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var s=t('<{0} class="{1}"></{0}>'.format(e.get(0).tagName,e.attr("class"))),r=e._id();return null!=r&&""!==r&&s._id(r),s.html(e.find(".content").html()),e.after(s),e.remove(),s}function a(t,e){var i=t.find(".steps li").eq(e.currentIndex);t.triggerHandler("finishing",[e.currentIndex])?(i.addClass("done").removeClass("error"),t.triggerHandler("finished",[e.currentIndex])):i.addClass("error")}function o(t){var e=t.data("eventNamespace");return null==e&&(e="."+m(t),t.data("eventNamespace",e)),e}function h(t,e){var i=m(t);return t.find("#"+i+$+e)}function c(t,e){var i=m(t);return t.find("#"+i+Z+e)}function u(t,e){var i=m(t);return t.find("#"+i+G+e)}function d(t){return t.data("options")}function f(t){return t.data("state")}function p(t){return t.data("steps")}function g(t,e){var i=p(t);return(0>e||e>=i.length)&&B(X),i[e]}function m(t){var e=t.data("uid");return null==e&&(e=t._id(),null==e&&(e="steps-uid-".concat(q),t._id(e)),q++,t.data("uid",e)),e}function v(t,i){if(U("enumType",t),U("keyOrValue",i),"string"==typeof i){var n=t[i];return n===e&&B("The enum key '{0}' does not exist.",i),n}if("number"==typeof i){for(var l in t)if(t[l]===i)return i;B("Invalid enum value '{0}'.",i)}else B("Invalid key or value type.")}function y(t,e,i){return D(t,e,i,_(i,1))}function b(t,e,i){return D(t,e,i,s(i,1))}function w(t,e,i,n){if((0>n||n>=i.stepCount)&&B(X),!(e.forceMoveForward&&n<i.currentIndex)){var l=i.currentIndex;return t.triggerHandler("stepChanging",[i.currentIndex,n])?(i.currentIndex=n,O(t,e,i),F(t,e,i,l),E(t,e,i),S(t,e,i),W(t,e,i,n,l),t.triggerHandler("stepChanged",[n,l])):t.find(".steps li").eq(l).addClass("error"),!0}}function _(t,e){return t.currentIndex+e}function x(e){var i=t.extend(!0,{},it,e);return this.each(function(){var e=t(this),l={currentIndex:i.startIndex,currentStep:null,stepCount:0,transitionElement:null};e.data("options",i),e.data("state",l),e.data("steps",[]),n(e,i,l),L(e,i,l),P(e,i),i.autoFocus&&0===q&&h(e,i.startIndex).focus()})}function k(e,i,n,l,s){(0>l||l>n.stepCount)&&B(X),s=t.extend({},et,s),C(e,l,s),n.currentIndex!==n.stepCount&&n.currentIndex>=l&&(n.currentIndex++,O(e,i,n)),n.stepCount++;var r=e.find(".content"),a=t("<{0}>{1}</{0}>".format(i.headerTag,s.title)),o=t("<{0}></{0}>".format(i.bodyTag));return(null==s.contentMode||s.contentMode===K.html)&&o.html(s.content),0===l?r.prepend(o).prepend(a):c(e,l-1).after(o).after(a),H(e,n,o,l),j(e,i,n,a,l),A(e,i,n,l),l===n.currentIndex&&F(e,i,n),E(e,i,n),e}function C(t,e,i){p(t).splice(e,0,i)}function M(e){var i=t(this),n=d(i),l=f(i);if(n.suppressPaginationOnFocus&&i.find(":focus").is(":input"))return e.preventDefault(),!1;var s={left:37,right:39};e.keyCode===s.left?(e.preventDefault(),b(i,n,l)):e.keyCode===s.right&&(e.preventDefault(),y(i,n,l))}function S(e,i,n){if(n.stepCount>0){var l=g(e,n.currentIndex);if(!i.enableContentCache||!l.contentLoaded)switch(v(K,l.contentMode)){case K.iframe:e.find(".content > .body").eq(n.currentIndex).empty().html('<iframe src="'+l.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case K.async:var s=c(e,n.currentIndex)._aria("busy","true").empty().append(N(i.loadingTemplate,{text:i.labels.loading}));t.ajax({url:l.contentUrl,cache:!1}).done(function(t){s.empty().html(t)._aria("busy","false").data("loaded","1")})}}}function D(t,e,i,n){var l=i.currentIndex;if(n>=0&&n<i.stepCount&&!(e.forceMoveForward&&n<i.currentIndex)){var s=h(t,n),r=s.parent(),a=r.hasClass("disabled");return r._enableAria(),s.click(),l!==i.currentIndex||!a||(r._enableAria(!1),!1)}return!1}function T(e){e.preventDefault();var i=t(this),n=i.parent().parent().parent().parent(),s=d(n),r=f(n),o=i.attr("href");switch(o.substring(o.lastIndexOf("#")+1)){case"cancel":l(n);break;case"finish":a(n,r);break;case"next":y(n,s,r);break;case"previous":b(n,s,r)}}function E(t,e,i){if(e.enablePagination){var n=t.find(".actions a[href$='#finish']").parent(),l=t.find(".actions a[href$='#next']").parent();if(!e.forceMoveForward){var s=t.find(".actions a[href$='#previous']").parent();s._enableAria(i.currentIndex>0)}e.enableFinishButton&&e.showFinishButtonAlways?(n._enableAria(i.stepCount>0),l._enableAria(i.stepCount>1&&i.stepCount>i.currentIndex+1)):(n._showAria(e.enableFinishButton&&i.stepCount>=i.currentIndex+1),l._showAria(0===i.stepCount||i.stepCount>i.currentIndex+1)._enableAria(i.stepCount>i.currentIndex+1||!e.enableFinishButton))}}function F(e,i,n,l){var s=h(e,n.currentIndex),r=t('<span class="current-info audible">'+i.labels.current+" </span>"),a=e.find(".content > .title");if(null!=l){var o=h(e,l);o.parent().addClass("done").removeClass("error")._selectAria(!1),a.eq(l).removeClass("current").next(".body").removeClass("current"),r=o.find(".current-info"),s.focus()}s.prepend(r).parent()._selectAria().removeClass("done")._enableAria(),a.eq(n.currentIndex).addClass("current").next(".body").addClass("current")}function A(t,e,i,n){for(var l=m(t),s=n;s<i.stepCount;s++){var r=l+$+s,a=l+Z+s,o=l+G+s,h=t.find(".title").eq(s)._id(o);t.find(".steps a").eq(s)._id(r)._aria("controls",a).attr("href","#"+o).html(N(e.titleTemplate,{index:s+1,title:h.html()})),t.find(".body").eq(s)._id(a)._aria("labelledby",o)}}function P(t,e){var i=o(t);t.bind("canceled"+i,e.onCanceled),t.bind("finishing"+i,e.onFinishing),t.bind("finished"+i,e.onFinished),t.bind("stepChanging"+i,e.onStepChanging),t.bind("stepChanged"+i,e.onStepChanged),e.enableKeyNavigation&&t.bind("keyup"+i,M),t.find(".actions a").bind("click"+i,T)}function I(t,e,i,n){return!(0>n||n>=i.stepCount||i.currentIndex===n)&&(z(t,n),i.currentIndex>n&&(i.currentIndex--,O(t,e,i)),i.stepCount--,u(t,n).remove(),c(t,n).remove(),h(t,n).parent().remove(),0===n&&t.find(".steps li").first().addClass("first"),n===i.stepCount&&t.find(".steps li").eq(n).addClass("last"),A(t,e,i,n),E(t,e,i),!0)}function z(t,e){p(t).splice(e,1)}function L(e,i,n){var l='<{0} class="{1}">{2}</{0}>',s=v(J,i.stepsOrientation),r=s===J.vertical?" vertical":"",a=t(l.format(i.contentContainerTag,"content "+i.clearFixCssClass,e.html())),o=t(l.format(i.stepsContainerTag,"steps "+i.clearFixCssClass,'<ul role="tablist"></ul>')),h=a.children(i.headerTag),c=a.children(i.bodyTag);e.attr("role","application").empty().append(o).append(a).addClass(i.cssClass+" "+i.clearFixCssClass+r),c.each(function(i){H(e,n,t(this),i)}),h.each(function(l){j(e,i,n,t(this),l)}),F(e,i,n),R(e,i,n)}function H(t,e,i,n){var l=m(t),s=l+Z+n,r=l+G+n;i._id(s).attr("role","tabpanel")._aria("labelledby",r).addClass("body")._showAria(e.currentIndex===n)}function R(t,e,i){if(e.enablePagination){var n='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',l='<li><a href="#{0}" role="menuitem">{1}</a></li>',s="";e.forceMoveForward||(s+=l.format("previous",e.labels.previous)),s+=l.format("next",e.labels.next),e.enableFinishButton&&(s+=l.format("finish",e.labels.finish)),e.enableCancelButton&&(s+=l.format("cancel",e.labels.cancel)),t.append(n.format(e.actionContainerTag,e.clearFixCssClass,e.labels.pagination,s)),E(t,e,i),S(t,e,i)}}function N(t,i){for(var n=t.match(/#([a-z]*)#/gi),l=0;l<n.length;l++){var s=n[l],r=s.substring(1,s.length-1);i[r]===e&&B("The key '{0}' does not exist in the substitute collection!",r),t=t.replace(s,i[r])}return t}function j(e,i,n,l,s){var r=m(e),a=r+$+s,h=r+Z+s,c=r+G+s,u=e.find(".steps > ul"),d=N(i.titleTemplate,{index:s+1,title:l.html()}),f=t('<li role="tab"><a id="'+a+'" href="#'+c+'" aria-controls="'+h+'">'+d+"</a></li>");f._enableAria(i.enableAllSteps||n.currentIndex>s),n.currentIndex>s&&f.addClass("done"),l._id(c).attr("tabindex","-1").addClass("title"),0===s?u.prepend(f):u.find("li").eq(s-1).after(f),0===s&&u.find("li").removeClass("first").eq(s).addClass("first"),s===n.stepCount-1&&u.find("li").removeClass("last").eq(s).addClass("last"),f.children("a").bind("click"+o(e),Y)}function O(e,i,n){i.saveState&&t.cookie&&t.cookie(V+m(e),n.currentIndex)}function W(e,i,n,l,s){var r=e.find(".content > .body"),a=v(tt,i.transitionEffect),o=i.transitionEffectSpeed,h=r.eq(l),c=r.eq(s);switch(a){case tt.fade:case tt.slide:var u=a===tt.fade?"fadeOut":"slideUp",d=a===tt.fade?"fadeIn":"slideDown";n.transitionElement=h,c[u](o,function(){var e=t(this)._showAria(!1).parent().parent(),i=f(e);i.transitionElement&&(i.transitionElement[d](o,function(){t(this)._showAria()}),i.transitionElement=null)}).promise();break;case tt.slideLeft:var p=c.outerWidth(!0),g=l>s?-p:p,m=l>s?p:-p;c.animate({left:g},o,function(){t(this)._showAria(!1)}).promise(),h.css("left",m+"px")._showAria().animate({left:0},o).promise();break;default:c._showAria(!1),h._showAria()}}function Y(e){e.preventDefault();var i=t(this),n=i.parent().parent().parent().parent(),l=d(n),s=f(n),r=s.currentIndex;if(i.parent().is(":not(.disabled):not(.current)")){var a=i.attr("href"),o=parseInt(a.substring(a.lastIndexOf("-")+1),0);w(n,l,s,o)}return r===s.currentIndex?(h(n,r).focus(),!1):void 0}function B(t){throw arguments.length>1&&(t=t.format(Array.prototype.slice.call(arguments,1))),new Error(t)}function U(t,e){null==e&&B("The argument '{0}' is null or undefined.",t)}t.fn.extend({_aria:function(t,e){return this.attr("aria-"+t,e)},_removeAria:function(t){return this.removeAttr("aria-"+t)},_enableAria:function(t){return null==t||t?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(t){return null==t||t?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(t){return null==t||t?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(t){return t?this.attr("id",t):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var e=1===arguments.length&&t.isArray(arguments[0])?arguments[0]:arguments,i=this,n=0;n<e.length;n++){var l=new RegExp("\\{"+n+"\\}","gm");i=i.replace(l,e[n])}return i});var q=0,V="jQu3ry_5teps_St@te_",$="-t-",Z="-p-",G="-h-",X="Index out of range.",Q="One or more corresponding step {0} are missing.";t.fn.steps=function(e){return t.fn.steps[e]?t.fn.steps[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.steps"):x.apply(this,arguments)},t.fn.steps.add=function(t){var e=f(this);return k(this,d(this),e,e.stepCount,t)},t.fn.steps.destroy=function(){return r(this,d(this))},t.fn.steps.finish=function(){a(this,f(this))},t.fn.steps.getCurrentIndex=function(){return f(this).currentIndex},t.fn.steps.getCurrentStep=function(){return g(this,f(this).currentIndex)},t.fn.steps.getStep=function(t){return g(this,t)},t.fn.steps.insert=function(t,e){return k(this,d(this),f(this),t,e)},t.fn.steps.next=function(){return y(this,d(this),f(this))},t.fn.steps.previous=function(){return b(this,d(this),f(this))},t.fn.steps.remove=function(t){return I(this,d(this),f(this),t)},t.fn.steps.setStep=function(){throw new Error("Not yet implemented!")},t.fn.steps.skip=function(){throw new Error("Not yet implemented!")};var K=t.fn.steps.contentMode={html:0,iframe:1,async:2},J=t.fn.steps.stepsOrientation={horizontal:0,vertical:1},tt=t.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},et=t.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:K.html,contentLoaded:!1},it=t.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:J.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!0,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:tt.none,transitionEffectSpeed:200,onStepChanging:function(){return!0},onStepChanged:function(){},onCanceled:function(){},onFinishing:function(){return!0},onFinished:function(){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n;return!i.settings.submitHandler||(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),!1)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n,l,s,r,a,o,h=this[0];if(e)switch(n=t.data(h.form,"validator").settings,l=n.rules,s=t.validator.staticRules(h),e){case"add":t.extend(s,t.validator.normalizeRule(i)),delete s.messages,l[h.name]=s,i.messages&&(n.messages[h.name]=t.extend(n.messages[h.name],i.messages));break;case"remove":return i?(o={},t.each(i.split(/\s/),function(e,i){o[i]=s[i],delete s[i],"required"===i&&t(h).removeAttr("aria-required")}),o):(delete l[h.name],s)}return r=t.validator.normalizeRules(t.extend({},t.validator.classRules(h),t.validator.attributeRules(h),t.validator.dataRules(h),t.validator.staticRules(h)),h),r.required&&(a=r.required,delete r.required,r=t.extend({required:a},r),t(h).attr("aria-required","true")),r.remote&&(a=r.remote,delete r.remote,r=t.extend(r,{remote:a})),r}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,""),l=i.settings;l[n]&&!this.is(l.ignore)&&l[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})}),i=this.settings.rules,t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),n=this.validationTargetFor(i),l=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=t(n),l=this.check(n)!==!1,l?delete this.invalid[n.name]:this.invalid[n.name]=!0),t(e).attr("aria-invalid",!l),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),l},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!e.objectLength(t(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n=t(e),l=e.type;return"radio"===l||"checkbox"===l?t("input[name='"+e.name+"']:checked").val():"number"===l&&"undefined"!=typeof e.validity?!e.validity.badInput&&n.val():(i=n.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n,l,s=t(e).rules(),r=t.map(s,function(t,e){return e}).length,a=!1,o=this.elementValue(e);for(n in s){l={method:n,parameters:s[n]};try{if(i=t.validator.methods[n].call(this,o,e,l.parameters),"dependency-mismatch"===i&&1===r){a=!0;continue}if(a=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,l),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+l.method+"' method.",t),t}}if(!a)return this.objectLength(s)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),l=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):l.test(n)&&(n=t.validator.format(n.replace(l,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e,method:i.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n,l,s,r=this.errorsFor(e),a=this.idOrName(e),o=t(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=t("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(i||""),n=r,this.settings.wrapper&&(n=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e),r.is("label")?r.attr("for",a):0===r.parents("label[for='"+a+"']").length&&(s=r.attr("id"),o?o.match(new RegExp("\b"+s+"\b"))||(o+=" "+s):o=s,t(e).attr("aria-describedby",o),l=this.groups[e.name],l&&t.each(this.groups,function(e,i){i===l&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",r.attr("id"))}))),!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var i=this.idOrName(e),n=t(e).attr("aria-describedby"),l="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(l=l+", #"+n.replace(/\s+/g,", #")),this.errors().filter(l)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,
message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,n,l={},s=t(e),r=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(n=e.getAttribute(i),""===n&&(n=!0),n=!!n):n=s.attr(i),/min|max/.test(i)&&(null===r||/number|range|text/.test(r))&&(n=Number(n)),n||0===n?l[i]=n:r===i&&"range"!==r&&(l[i]=!0);return l.maxlength&&/-1|2147483647|524288/.test(l.maxlength)&&delete l.maxlength,l},dataRules:function(e){var i,n,l={},s=t(e);for(i in t.validator.methods)n=s.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==n&&(l[i]=n);return l},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,l){if(l===!1)return void delete e[n];if(l.param||l.depends){var s=!0;switch(typeof l.depends){case"string":s=!!t(l.depends,i.form).length;break;case"function":s=l.depends.call(i,i)}s?e[n]=void 0===l.param||l.param:delete e[n]}}),t.each(e,function(n,l){e[n]=t.isFunction(l)?l(i):l}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var l=t(i).val();return l&&l.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,n,l=0,s=0,r=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)n=t.charAt(i),s=parseInt(n,10),r&&(s*=2)>9&&(s-=9),l+=s,r=!r;return l%10===0},minlength:function(e,i,n){var l=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||l>=n},maxlength:function(e,i,n){var l=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||n>=l},rangelength:function(e,i,n){var l=t.isArray(e)?e.length:this.getLength(t.trim(e),i);return this.optional(i)||l>=n[0]&&l<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var l=t(n);return this.settings.onfocusout&&l.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===l.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var l,s,r=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,n="string"==typeof n&&{url:n}||n,r.old===e?r.valid:(r.old=e,l=this,this.startRequest(i),s={},s[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:s,context:l.currentForm,success:function(n){var s,a,o,h=n===!0||"true"===n;l.settings.messages[i.name].remote=r.originalMessage,h?(o=l.formSubmitted,l.prepareElement(i),l.formSubmitted=o,l.successList.push(i),delete l.invalid[i.name],l.showErrors()):(s={},a=n||l.defaultMessage(i,"remote"),s[i.name]=r.message=t.isFunction(a)?a(e):a,l.invalid[i.name]=!0,l.showErrors(s)),r.valid=h,l.stopRequest(i,h)}},n)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,n){var l=t.port;"abort"===t.mode&&(i[l]&&i[l].abort(),i[l]=n)}):(e=t.ajax,t.ajax=function(n){var l=("mode"in n?n:t.ajaxSettings).mode,s=("port"in n?n:t.ajaxSettings).port;return"abort"===l?(i[s]&&i[s].abort(),i[s]=e.apply(this,arguments),i[s]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var l=t(i.target);return l.is(e)?n.apply(l,arguments):void 0})}})}),function(){function t(e){var i=t.modules[e];if(!i)throw new Error('failed to require "'+e+'"');return"exports"in i||"function"!=typeof i.definition||(i.client=i.component=!0,i.definition.call(this,i.exports={},i),delete i.definition),i.exports}t.modules={},t.register=function(e,i){t.modules[e]={definition:i}},t.define=function(e,i){t.modules[e]={exports:i}},t.register("component~emitter@1.1.2",function(t,e){function i(t){if(t)return n(t)}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,l=0;l<i.length;l++)if(n=i[l],n===e||n.fn===e){i.splice(l,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,l=i.length;n<l;++n)i[n].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("dropzone",function(e,i){i.exports=t("dropzone/lib/dropzone.js")}),t.register("dropzone/lib/dropzone.js",function(e,i){(function(){var e,n,l,s,r,a,o,h,c={}.hasOwnProperty,u=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},d=[].slice;n="undefined"!=typeof Emitter&&null!==Emitter?Emitter:t("component~emitter@1.1.2"),o=function(){},e=function(t){function e(t,n){var l,s,r;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(e.instances.push(this),this.element.dropzone=this,l=null!=(r=e.optionsForElement(this.element))?r:{},this.options=i({},this.defaultOptions,l,null!=n?n:{}),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),this.options.previewsContainer?this.previewsContainer=e.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element,this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=e.getElements(this.options.clickable,"clickable")),this.init()}var i;return u(e,t),e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],e.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return o},forceFallback:!1,fallback:function(){var t,i,n,l,s,r;for(this.element.className=""+this.element.className+" dz-browser-not-supported",r=this.element.getElementsByTagName("div"),l=0,s=r.length;l<s;l++)t=r[l],/(^| )dz-message($| )/.test(t.className)&&(i=t,t.className="dz-message");return i||(i=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(i)),n=i.getElementsByTagName("span")[0],n&&(n.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},i=t.width/t.height,n=this.options.thumbnailWidth/this.options.thumbnailHeight,t.height<this.options.thumbnailHeight||t.width<this.options.thumbnailWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):i>n?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*n):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/n),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var i,n,l,s,r,a,o,h,c,u,d,f,p;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),t.previewElement=e.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),u=t.previewElement.querySelectorAll("[data-dz-name]"),s=0,o=u.length;s<o;s++)i=u[s],i.textContent=t.name;for(d=t.previewElement.querySelectorAll("[data-dz-size]"),r=0,h=d.length;r<h;r++)i=d[r],i.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=e.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),n=function(i){return function(n){return n.preventDefault(),n.stopPropagation(),t.status===e.UPLOADING?e.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(t)}):i.options.dictRemoveFileConfirmation?e.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(t)}):i.removeFile(t)}}(this),f=t.previewElement.querySelectorAll("[data-dz-remove]"),p=[],a=0,c=f.length;a<c;a++)l=f[a],p.push(l.addEventListener("click",n));return p},removedfile:function(t){var e;return null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,n,l,s,r;for(t.previewElement.classList.remove("dz-file-preview"),t.previewElement.classList.add("dz-image-preview"),s=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=[],n=0,l=s.length;n<l;n++)i=s[n],i.alt=t.name,r.push(i.src=e);return r},error:function(t,e){var i,n,l,s,r;for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),s=t.previewElement.querySelectorAll("[data-dz-errormessage]"),r=[],n=0,l=s.length;n<l;n++)i=s[n],r.push(i.textContent=e);return r},errormultiple:o,processing:function(t){if(t.previewElement.classList.add("dz-processing"),t._removeLink)return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:o,uploadprogress:function(t,e){var i,n,l,s,r;for(s=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),r=[],n=0,l=s.length;n<l;n++)i=s[n],r.push(i.style.width=""+e+"%");return r},totaluploadprogress:o,sending:o,sendingmultiple:o,success:function(t){return t.previewElement.classList.add("dz-success")},successmultiple:o,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:o,complete:function(t){if(t._removeLink)return t._removeLink.textContent=this.options.dictRemoveFile},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>\u2714</span></div>\n  <div class="dz-error-mark"><span>\u2718</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},i=function(){var t,e,i,n,l,s,r;for(n=arguments[0],i=2<=arguments.length?d.call(arguments,1):[],s=0,r=i.length;s<r;s++){e=i[s];for(t in e)l=e[t],n[t]=l}return n},e.prototype.getAcceptedFiles=function(){var t,e,i,n,l;for(n=this.files,l=[],e=0,i=n.length;e<i;e++)t=n[e],t.accepted&&l.push(t);return l},e.prototype.getRejectedFiles=function(){var t,e,i,n,l;for(n=this.files,l=[],e=0,i=n.length;e<i;e++)t=n[e],t.accepted||l.push(t);return l},e.prototype.getFilesWithStatus=function(t){var e,i,n,l,s;for(l=this.files,s=[],i=0,n=l.length;i<n;i++)e=l[i],e.status===t&&s.push(e);return s},e.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(e.QUEUED)},e.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(e.UPLOADING)},e.prototype.getActiveFiles=function(){var t,i,n,l,s;for(l=this.files,s=[],i=0,n=l.length;i<n;i++)t=l[i],t.status!==e.UPLOADING&&t.status!==e.QUEUED||s.push(t);return s},e.prototype.init=function(){var t,i,n,l,s,r,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(t){return function(){return t.hiddenFileInput&&document.body.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.body.appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,i,l,s;if(i=t.hiddenFileInput.files,i.length)for(l=0,s=i.length;l<s;l++)e=i[l],t.addFile(e);return n()})}}(this))(),this.URL=null!=(r=window.URL)?r:window.webkitURL,a=this.events,l=0,s=a.length;l<s;l++)t=a[l],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(){if(0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length)return setTimeout(function(){return t.emit("queuecomplete")},0)}}(this)),i=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(e){return i(e),t.emit("dragenter",e)}}(this),dragover:function(t){return function(e){var n;try{n=e.dataTransfer.effectAllowed}catch(t){}return e.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",i(e),t.emit("dragover",e)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(e){return i(e),t.drop(e)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(i){return t.listeners.push({element:i,events:{click:function(n){if(i!==t.element||n.target===t.element||e.elementInside(n.target,t.element.querySelector(".dz-message")))return t.hiddenFileInput.click()}}})}}(this)),this.enable(),this.options.init.call(this)},e.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,e.instances.splice(e.instances.indexOf(this),1)},e.prototype.updateTotalUploadProgress=function(){var t,e,i,n,l,s,r,a;if(n=0,i=0,t=this.getActiveFiles(),t.length){for(a=this.getActiveFiles(),s=0,r=a.length;s<r;s++)e=a[s],n+=e.upload.bytesSent,i+=e.upload.total;l=100*n/i}else l=100;return this.emit("totaluploadprogress",l,i,n)},e.prototype.getFallbackForm=function(){var t,i,n,l;return(t=this.getExistingFallback())?t:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',i=e.createElement(n),"FORM"!==this.element.tagName?(l=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),l.appendChild(i)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=l?l:i)},e.prototype.getExistingFallback=function(){var t,e,i,n,l,s;for(e=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},s=["div","form"],n=0,l=s.length;n<l;n++)if(i=s[n],t=e(this.element.getElementsByTagName(i)))return t},e.prototype.setupEventListeners=function(){var t,e,i,n,l,s,r;for(s=this.listeners,r=[],n=0,l=s.length;n<l;n++)t=s[n],r.push(function(){var n,l;n=t.events,l=[];for(e in n)i=n[e],l.push(t.element.addEventListener(e,i,!1));return l}());return r},e.prototype.removeEventListeners=function(){var t,e,i,n,l,s,r;for(s=this.listeners,r=[],n=0,l=s.length;n<l;n++)t=s[n],r.push(function(){var n,l;n=t.events,l=[];for(e in n)i=n[e],l.push(t.element.removeEventListener(e,i,!1));return l}());return r},e.prototype.disable=function(){var t,e,i,n,l;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),n=this.files,l=[],e=0,i=n.length;e<i;e++)t=n[e],l.push(this.cancelUpload(t));return l},e.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},e.prototype.filesize=function(t){var e;return t>=109951162777.6?(t/=109951162777.6,e="TiB"):t>=107374182.4?(t/=107374182.4,e="GiB"):t>=104857.6?(t/=104857.6,e="MiB"):t>=102.4?(t/=102.4,e="KiB"):(t*=10,e="b"),"<strong>"+Math.round(t)/10+"</strong> "+e},e.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},e.prototype.drop=function(t){var e,i;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,e.length&&(i=t.dataTransfer.items,i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)))},e.prototype.paste=function(t){var e,i;if(null!=(null!=t&&null!=(i=t.clipboardData)?i.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},e.prototype.handleFiles=function(t){var e,i,n,l;for(l=[],i=0,n=t.length;i<n;i++)e=t[i],l.push(this.addFile(e));return l},e.prototype._addFilesFromItems=function(t){var e,i,n,l,s;for(s=[],n=0,l=t.length;n<l;n++)i=t[n],null!=i.webkitGetAsEntry&&(e=i.webkitGetAsEntry())?e.isFile?s.push(this.addFile(i.getAsFile())):e.isDirectory?s.push(this._addFilesFromDirectory(e,e.name)):s.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?s.push(this.addFile(i.getAsFile())):s.push(void 0);return s},e.prototype._addFilesFromDirectory=function(t,e){var i,n;return i=t.createReader(),n=function(t){return function(i){var n,l,s;for(l=0,s=i.length;l<s;l++)n=i[l],n.isFile?n.file(function(i){if(!t.options.ignoreHiddenFiles||"."!==i.name.substring(0,1))return i.fullPath=""+e+"/"+i.name,t.addFile(i)}):n.isDirectory&&t._addFilesFromDirectory(n,""+e+"/"+n.name)}}(this),i.readEntries(n,function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0})},e.prototype.accept=function(t,i){return t.size>1024*this.options.maxFilesize*1024?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,i):i(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=e.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(i){return i?(t.accepted=!1,e._errorProcessing([t],i)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},e.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++)e=t[i],this.enqueueFile(e);return null},e.prototype.enqueueFile=function(t){if(t.status!==e.ADDED||t.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=e.QUEUED,this.options.autoProcessQueue)return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)},e.prototype._thumbnailQueue=[],e.prototype._processingThumbnail=!1,e.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)},e.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this))},e.prototype.removeFile=function(t){if(t.status===e.UPLOADING&&this.cancelUpload(t),this.files=h(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")},e.prototype.removeAllFiles=function(t){var i,n,l,s;for(null==t&&(t=!1),s=this.files.slice(),n=0,l=s.length;n<l;n++)i=s[n],(i.status!==e.UPLOADING||t)&&this.removeFile(i);return null},e.prototype.createThumbnail=function(t,e){var i;return i=new FileReader,i.onload=function(n){return function(){var l;return l=document.createElement("img"),l.onload=function(){var i,s,r,o,h,c,u,d;if(t.width=l.width,t.height=l.height,r=n.options.resize.call(n,t),null==r.trgWidth&&(r.trgWidth=n.options.thumbnailWidth),null==r.trgHeight&&(r.trgHeight=n.options.thumbnailHeight),i=document.createElement("canvas"),s=i.getContext("2d"),i.width=r.trgWidth,i.height=r.trgHeight,a(s,l,null!=(h=r.srcX)?h:0,null!=(c=r.srcY)?c:0,r.srcWidth,r.srcHeight,null!=(u=r.trgX)?u:0,null!=(d=r.trgY)?d:0,r.trgWidth,r.trgHeight),o=i.toDataURL("image/png"),n.emit("thumbnail",t,o),null!=e)return e()},l.src=i.result}}(this),i.readAsDataURL(t)},e.prototype.processQueue=function(){var t,e,i,n;if(e=this.options.parallelUploads,i=this.getUploadingFiles().length,t=i,!(i>=e)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-i));for(;t<e;){if(!n.length)return;this.processFile(n.shift()),t++}}},e.prototype.processFile=function(t){return this.processFiles([t])},e.prototype.processFiles=function(t){var i,n,l;for(n=0,l=t.length;n<l;n++)i=t[n],i.processing=!0,i.status=e.UPLOADING,this.emit("processing",i);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},e.prototype._getFilesWithXhr=function(t){var e,i;return i=function(){var i,n,l,s;for(l=this.files,s=[],i=0,n=l.length;i<n;i++)e=l[i],e.xhr===t&&s.push(e);return s}.call(this)},e.prototype.cancelUpload=function(t){var i,n,l,s,r,a,o;if(t.status===e.UPLOADING){for(n=this._getFilesWithXhr(t.xhr),l=0,r=n.length;l<r;l++)i=n[l],i.status=e.CANCELED;for(t.xhr.abort(),s=0,a=n.length;s<a;s++)i=n[s],this.emit("canceled",i);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(o=t.status)!==e.ADDED&&o!==e.QUEUED||(t.status=e.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},e.prototype.uploadFile=function(t){return this.uploadFiles([t])},e.prototype.uploadFiles=function(t){var n,l,s,r,a,o,h,c,u,d,f,p,g,m,v,y,b,w,_,x,k,C,M,S,D,T,E,F,A,P,I;for(y=new XMLHttpRequest,b=0,k=t.length;b<k;b++)n=t[b],n.xhr=y;y.open(this.options.method,this.options.url,!0),y.withCredentials=!!this.options.withCredentials,g=null,s=function(e){return function(){var i,l,s;for(s=[],i=0,l=t.length;i<l;i++)n=t[i],s.push(e._errorProcessing(t,g||e.options.dictResponseError.replace("{{statusCode}}",y.status),y));return s}}(this),m=function(e){return function(i){var l,s,r,a,o,h,c,u,d;if(null!=i)for(s=100*i.loaded/i.total,r=0,h=t.length;r<h;r++)n=t[r],n.upload={progress:s,total:i.total,bytesSent:i.loaded};else{for(l=!0,s=100,a=0,c=t.length;a<c;a++)n=t[a],100===n.upload.progress&&n.upload.bytesSent===n.upload.total||(l=!1),n.upload.progress=s,n.upload.bytesSent=n.upload.total;if(l)return}for(d=[],o=0,u=t.length;o<u;o++)n=t[o],d.push(e.emit("uploadprogress",n,s,n.upload.bytesSent));return d}}(this),y.onload=function(i){return function(n){var l;if(t[0].status!==e.CANCELED&&4===y.readyState){if(g=y.responseText,y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{g=JSON.parse(g)}catch(t){n=t,g="Invalid JSON response from server."}return m(),200<=(l=y.status)&&l<300?i._finished(t,g,n):s()}}}(this),y.onerror=function(){return function(){if(t[0].status!==e.CANCELED)return s()}}(this),p=null!=(E=y.upload)?E:y,p.onprogress=m,o={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(o,this.options.headers);for(r in o)a=o[r],y.setRequestHeader(r,a);if(l=new FormData,this.options.params){F=this.options.params;for(d in F)v=F[d],l.append(d,v)}for(w=0,C=t.length;w<C;w++)n=t[w],this.emit("sending",n,y,l);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,y,l),"FORM"===this.element.tagName)for(A=this.element.querySelectorAll("input, textarea, select, button"),_=0,M=A.length;_<M;_++)if(h=A[_],c=h.getAttribute("name"),u=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(P=h.options,x=0,S=P.length;x<S;x++)f=P[x],f.selected&&l.append(c,f.value);else(!u||"checkbox"!==(I=u.toLowerCase())&&"radio"!==I||h.checked)&&l.append(c,h.value);for(T=0,D=t.length;T<D;T++)n=t[T],l.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),n,n.name);return y.send(l)},e.prototype._finished=function(t,i,n){var l,s,r;for(s=0,r=t.length;s<r;s++)l=t[s],l.status=e.SUCCESS,this.emit("success",l,i,n),this.emit("complete",l);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,i,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},e.prototype._errorProcessing=function(t,i,n){var l,s,r;for(s=0,r=t.length;s<r;s++)l=t[s],l.status=e.ERROR,this.emit("error",l,i,n),this.emit("complete",l);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,i,n),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},e}(n),e.version="3.8.7",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[l(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");
return t.dropzone},e.autoDiscover=!0,e.discover=function(){var t,i,n,l,s,r;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],t=function(t){var e,i,l,s;for(s=[],i=0,l=t.length;i<l;i++)e=t[i],/(^| )dropzone($| )/.test(e.className)?s.push(n.push(e)):s.push(void 0);return s},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),r=[],l=0,s=n.length;l<s;l++)i=n[l],e.optionsForElement(i)!==!1?r.push(new e(i)):r.push(void 0);return r},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,i,n,l,s;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(s=e.blacklistedBrowsers,n=0,l=s.length;n<l;n++)i=s[n],i.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},h=function(t,e){var i,n,l,s;for(s=[],n=0,l=t.length;n<l;n++)i=t[n],i!==e&&s.push(i);return s},l=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},e.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},e.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},e.getElement=function(t,e){var i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},e.getElements=function(t,e){var i,n,l,s,r,a,o,h;if(t instanceof Array){l=[];try{for(s=0,a=t.length;s<a;s++)n=t[s],l.push(this.getElement(n,e))}catch(t){i=t,l=null}}else if("string"==typeof t)for(l=[],h=document.querySelectorAll(t),r=0,o=h.length;r<o;r++)n=h[r],l.push(n);else null!=t.nodeType&&(l=[t]);if(null==l||!l.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return l},e.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},e.isValidFile=function(t,e){var i,n,l,s,r;if(!e)return!0;for(e=e.split(","),n=t.type,i=n.replace(/\/.*$/,""),s=0,r=e.length;s<r;s++)if(l=e[s],l=l.trim(),"."===l.charAt(0)){if(t.name.toLowerCase().indexOf(l.toLowerCase(),t.name.length-l.length)!==-1)return!0}else if(/\/\*$/.test(l)){if(i===l.replace(/\/.*$/,""))return!0}else if(n===l)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof i&&null!==i?i.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",r=function(t){var e,i,n,l,s,r,a,o,h,c;for(a=t.naturalWidth,r=t.naturalHeight,i=document.createElement("canvas"),i.width=1,i.height=r,n=i.getContext("2d"),n.drawImage(t,0,0),l=n.getImageData(0,0,1,r).data,c=0,s=r,o=r;o>c;)e=l[4*(o-1)+3],0===e?s=o:c=o,o=s+c>>1;return h=o/r,0===h?1:h},a=function(t,e,i,n,l,s,a,o,h,c){var u;return u=r(e),t.drawImage(e,i,n,l,s,a,o,h,c/u)},s=function(t,e){var i,n,l,s,r,a,o,h,c;if(l=!1,c=!0,n=t.document,h=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",o=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",s=function(i){if("readystatechange"!==i.type||"complete"===n.readyState)return("load"===i.type?t:n)[o](a+i.type,s,!1),!l&&(l=!0)?e.call(t,i.type||i):void 0},r=function(){var t;try{h.doScroll("left")}catch(e){return t=e,void setTimeout(r,50)}return s("poll")},"complete"!==n.readyState){if(n.createEventObject&&h.doScroll){try{c=!t.frameElement}catch(t){}c&&r()}return n[i](a+"DOMContentLoaded",s,!1),n[i](a+"readystatechange",s,!1),t[i](a+"load",s,!1)}},e._autoDiscoverFunction=function(){if(e.autoDiscover)return e.discover()},s(window,e._autoDiscoverFunction)}).call(this)}),"object"==typeof exports?module.exports=t("dropzone"):"function"==typeof define&&define.amd?define([],function(){return t("dropzone")}):this.Dropzone=t("dropzone")}(),!function(t){"function"==typeof define&&define.amd?define(["jquery","codemirror"],t):t(window.jQuery,window.CodeMirror)}(function(t,e){"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var i,n,l=this.length>>>0,s=!1;for(1<arguments.length&&(n=e,s=!0),i=0;l>i;++i)this.hasOwnProperty(i)&&(s?n=t(n,this[i],i,this):(n=this[i],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return n});var i={bMac:navigator.appVersion.indexOf("Mac")>-1,bMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,bFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(t.fn.jquery),bCodeMirror:!!e},n=function(){var t=function(t){return function(e){return t===e}},e=function(t,e){return t===e},i=function(){return!0},n=function(){return!1},l=function(t){return function(){return!t.apply(t,arguments)}},s=function(t){return t};return{eq:t,eq2:e,ok:i,fail:n,not:l,self:s}}(),l=function(){var t=function(t){return t[0]},e=function(t){return t[t.length-1]},i=function(t){return t.slice(0,t.length-1)},l=function(t){return t.slice(1)},s=function(t,e){var i=t.indexOf(e);return-1===i?null:t[i+1]},r=function(t,e){var i=t.indexOf(e);return-1===i?null:t[i-1]},a=function(t,e){return e=e||n.self,t.reduce(function(t,i){return t+e(i)},0)},o=function(t){for(var e=[],i=-1,n=t.length;++i<n;)e[i]=t[i];return e},h=function(i,n){if(0===i.length)return[];var s=l(i);return s.reduce(function(t,i){var l=e(t);return n(e(l),i)?l[l.length]=i:t[t.length]=[i],t},[[t(i)]])},c=function(t){for(var e=[],i=0,n=t.length;n>i;i++)t[i]&&e.push(t[i]);return e};return{head:t,last:e,initial:i,tail:l,prev:r,next:s,sum:a,from:o,compact:c,clusterBy:h}}(),s=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},r=function(e){return e&&t(e).hasClass("note-control-sizing")},a=function(t){var e=function(e){return function(){return t.find(e)}};return{editor:function(){return t},dropzone:e(".note-dropzone"),toolbar:e(".note-toolbar"),editable:e(".note-editable"),codable:e(".note-codable"),statusbar:e(".note-statusbar"),popover:e(".note-popover"),handle:e(".note-handle"),dialog:e(".note-dialog")}},o=function(t){return function(e){return e&&e.nodeName===t}},h=function(t){return t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName)},c=function(t){return t&&/^UL|^OL/.test(t.nodeName)},u=function(t){return t&&/^TD|^TH/.test(t.nodeName)},d=function(t,i){for(;t;){if(i(t))return t;if(e(t))break;t=t.parentNode}return null},f=function(t,e){e=e||n.fail;var i=[];return d(t,function(t){return i.push(t),e(t)}),i},p=function(e,i){for(var n=f(e),l=i;l;l=l.parentNode)if(t.inArray(l,n)>-1)return l;return null},g=function(t,e){var i=[],n=!1,l=!1;return function s(r){if(r){if(r===t&&(n=!0),n&&!l&&i.push(r),r===e)return void(l=!0);for(var a=0,o=r.childNodes.length;o>a;a++)s(r.childNodes[a])}}(p(t,e)),i},m=function(t,e){e=e||n.fail;for(var i=[];t&&(i.push(t),!e(t));)t=t.previousSibling;return i},v=function(t,e){e=e||n.fail;for(var i=[];t&&(i.push(t),!e(t));)t=t.nextSibling;return i},y=function(t,e){var i=[];return e=e||n.ok,function n(l){t!==l&&e(l)&&i.push(l);for(var s=0,r=l.childNodes.length;r>s;s++)n(l.childNodes[s])}(t),i},b=function(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t},w=function(e,i){return t.each(i,function(t,i){e.appendChild(i)}),e},_=o("#text"),x=function(t){return _(t)?t.nodeValue.length:t.childNodes.length},k=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},C=function(e,i){var s=l.initial(f(i,n.eq(e)));return t.map(s,k).reverse()},M=function(t,e){for(var i=t,n=0,l=e.length;l>n;n++)i=i.childNodes[e[n]];return i},S=function(t,e){if(0===e)return t;if(e>=x(t))return t.nextSibling;if(_(t))return t.splitText(e);var i=t.childNodes[e];return t=b(t.cloneNode(!1),t),w(t,v(i))},D=function(t,e,i){var l=f(e,n.eq(t));return 1===l.length?S(e,i):l.reduce(function(t,n){var l=n.cloneNode(!1);return b(l,n),t===e&&(t=S(t,i)),w(l,v(t)),l})},T=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){var n,l,s=[];for(n=0,l=t.childNodes.length;l>n;n++)s.push(t.childNodes[n]);for(n=0,l=s.length;l>n;n++)i.insertBefore(s[n],t)}i.removeChild(t)}},E=function(t){return s.isTextarea(t[0])?t.val():t.html()};return{blank:i.bMSIE?"&nbsp;":"<br/>",emptyPara:"<p><br/></p>",isEditable:e,isControlSizing:r,buildLayoutInfo:a,isText:_,isPara:h,isList:c,isTable:o("TABLE"),isCell:u,isAnchor:o("A"),isDiv:o("DIV"),isLi:o("LI"),isSpan:o("SPAN"),isB:o("B"),isU:o("U"),isS:o("S"),isI:o("I"),isImg:o("IMG"),isTextarea:o("TEXTAREA"),ancestor:d,listAncestor:f,listNext:v,listPrev:m,listDescendant:y,commonAncestor:p,listBetween:g,insertAfter:b,position:k,makeOffsetPath:C,fromOffsetPath:M,split:D,remove:T,html:E}}(),r={version:"0.5.2",options:{width:null,height:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,codemirror:null,lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview"]],["help",["help"]]],oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onToolbarClick:null,keyMap:{pc:{"CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule"},mac:{"CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",clear:"Remove Font Style",height:"Line Height",name:"Font Family",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, or DailyMotion)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}},a=function(){var e=function(e){return t.Deferred(function(i){t.extend(new FileReader,{onload:function(t){var e=t.target.result;i.resolve(e)},onerror:function(){i.reject(this)}}).readAsDataURL(e)}).promise()},i=function(e){return t.Deferred(function(i){t("<img>").one("load",function(){i.resolve(t(this))}).one("error abort",function(){i.reject(t(this))}).css({display:"none"}).appendTo(document.body).attr("src",e)}).promise()};return{readFileAsDataURL:e,createImage:i}}(),o={isEdit:function(t){return-1!==[8,9,13,32].indexOf(t)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},h=function(){var e=function(e,n){if(i.jqueryVersion<1.9){var l={};return t.each(n,function(t,i){l[i]=e.css(i)}),l}return e.css.call(e,n)};this.stylePara=function(e,i){t.each(e.nodes(s.isPara),function(e,n){t(n).css(i)})},this.current=function(i,n){var l=t(s.isText(i.sc)?i.sc.parentNode:i.sc),r=["font-family","font-size","text-align","list-style-type","line-height"],a=e(l,r)||{};if(a["font-size"]=parseInt(a["font-size"],10),a["font-bold"]=document.queryCommandState("bold")?"bold":"normal",a["font-italic"]=document.queryCommandState("italic")?"italic":"normal",a["font-underline"]=document.queryCommandState("underline")?"underline":"normal",a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",i.isOnList()){var o=["circle","disc","disc-leading-zero","square"],h=t.inArray(a["list-style-type"],o)>-1;a["list-style"]=h?"unordered":"ordered"}else a["list-style"]="none";var c=s.ancestor(i.sc,s.isPara);if(c&&c.style["line-height"])a["line-height"]=c.style.lineHeight;else{var u=parseInt(a["line-height"],10)/parseInt(a["font-size"],10);a["line-height"]=u.toFixed(1)}return a.image=s.isImg(n)&&n,a.anchor=i.isOnAnchor()&&s.ancestor(i.sc,s.isAnchor),a.aAncestor=s.listAncestor(i.sc,s.isEditable),a}},c=function(){var e=!!document.createRange,i=function(t,e){var i,n,r=t.parentElement(),a=document.body.createTextRange(),o=l.from(r.childNodes);for(i=0;i<o.length;i++)if(!s.isText(o[i])){if(a.moveToElementText(o[i]),a.compareEndPoints("StartToStart",t)>=0)break;n=o[i]}if(0!==i&&s.isText(o[i-1])){var h=document.body.createTextRange(),c=null;h.moveToElementText(n||r),h.collapse(!n),c=n?n.nextSibling:r.firstChild;var u=t.duplicate();u.setEndPoint("StartToStart",h);for(var d=u.text.replace(/[\r\n]/g,"").length;d>c.nodeValue.length&&c.nextSibling;)d-=c.nodeValue.length,c=c.nextSibling;c.nodeValue,e&&c.nextSibling&&s.isText(c.nextSibling)&&d===c.nodeValue.length&&(d-=c.nodeValue.length,c=c.nextSibling),r=c,i=d}return{cont:r,offset:i}},r=function(t){var e=function(t,i){var r,a;if(s.isText(t)){var o=s.listPrev(t,n.not(s.isText)),h=l.last(o).previousSibling;r=h||t.parentNode,i+=l.sum(l.tail(o),s.length),a=!h}else{if(r=t.childNodes[i]||t,s.isText(r))return e(r,i);i=0,a=!1}return{cont:r,collapseToStart:a,offset:i}},i=document.body.createTextRange(),r=e(t.cont,t.offset);return i.moveToElementText(r.cont),i.collapse(r.collapseToStart),i.moveStart("character",r.offset),i},a=function(i,a,o,h){this.sc=i,this.so=a,this.ec=o,this.eo=h;var c=function(){if(e){var t=document.createRange();return t.setStart(i,a),t.setEnd(o,h),t}var n=r({cont:i,offset:a});return n.setEndPoint("EndToEnd",r({cont:o,offset:h})),n};this.select=function(){var t=c();if(e){var i=document.getSelection();i.rangeCount>0&&i.removeAllRanges(),i.addRange(t)}else t.select()},this.nodes=function(e){var r=s.listBetween(i,o),a=l.compact(t.map(r,function(t){return s.ancestor(t,e)}));return t.map(l.clusterBy(a,n.eq2),l.head)},this.commonAncestor=function(){return s.commonAncestor(i,o)};var u=function(t){return function(){var e=s.ancestor(i,t);return!!e&&e===s.ancestor(o,t)}};this.isOnEditable=u(s.isEditable),this.isOnList=u(s.isList),this.isOnAnchor=u(s.isAnchor),this.isOnCell=u(s.isCell),this.isCollapsed=function(){return i===o&&a===h},this.insertNode=function(t){var i=c();e?i.insertNode(t):i.pasteHTML(t.outerHTML)},this.toString=function(){var t=c();return e?t.toString():t.text},this.bookmark=function(t){return{s:{path:s.makeOffsetPath(t,i),offset:a},e:{path:s.makeOffsetPath(t,o),offset:h}}}};return{create:function(t,n,l,s){if(0===arguments.length)if(e){var r=document.getSelection();if(0===r.rangeCount)return null;var o=r.getRangeAt(0);t=o.startContainer,n=o.startOffset,l=o.endContainer,s=o.endOffset}else{var h=document.selection.createRange(),c=h.duplicate();c.collapse(!1);var u=h;u.collapse(!0);var d=i(u,!0),f=i(c,!1);t=d.cont,n=d.offset,l=f.cont,s=f.offset}else 2===arguments.length&&(l=t,s=n);return new a(t,n,l,s)},createFromNode:function(t){return this.create(t,0,t,1)},createFromBookmark:function(t,e){var i=s.fromOffsetPath(t,e.s.path),n=e.s.offset,l=s.fromOffsetPath(t,e.e.path),r=e.e.offset;return new a(i,n,l,r)}}}(),u=function(){this.tab=function(t,e){var i=s.ancestor(t.commonAncestor(),s.isCell),n=s.ancestor(i,s.isTable),r=s.listDescendant(n,s.isCell),a=l[e?"prev":"next"](r,i);a&&c.create(a,0).select()},this.createTable=function(e,i){for(var n,l=[],r=0;e>r;r++)l.push("<td>"+s.blank+"</td>");n=l.join("");for(var a,o=[],h=0;i>h;h++)o.push("<tr>"+n+"</tr>");a=o.join("");var c='<table class="table table-bordered">'+a+"</table>";return t(c)[0]}},d=function(){var e=new h,n=new u;this.saveRange=function(t){t.data("range",c.create())},this.restoreRange=function(t){var e=t.data("range");e&&e.select()},this.currentStyle=function(t){var i=c.create();return i.isOnEditable()&&e.current(i,t)},this.undo=function(t){t.data("NoteHistory").undo(t)},this.redo=function(t){t.data("NoteHistory").redo(t)};for(var l=this.recordUndo=function(t){t.data("NoteHistory").recordUndo(t)},r=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],o=0,d=r.length;d>o;o++)this[r[o]]=function(t){return function(e,i){l(e),document.execCommand(t,!1,i)}}(r[o]);var f=function(e,i,n){l(e);var r=new Array(n+1).join("&nbsp;");i.insertNode(t('<span id="noteTab">'+r+"</span>")[0]);var a=t("#noteTab").removeAttr("id");i=c.create(a[0],1),i.select(),s.remove(a[0])};this.tab=function(t,e){var i=c.create();i.isCollapsed()&&i.isOnCell()?n.tab(i):f(t,i,e.tabsize)},this.untab=function(){var t=c.create();t.isCollapsed()&&t.isOnCell()&&n.tab(t,!0)},this.insertImage=function(t,e){a.createImage(e).then(function(e){l(t),e.css({display:"",width:Math.min(t.width(),e.width())}),c.create().insertNode(e[0])}).fail(function(){var e=t.data("callbacks");e.onImageUploadError&&e.onImageUploadError()})},this.insertVideo=function(e,i){l(e);var n,s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=i.match(s),a=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/,o=i.match(a),h=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,u=i.match(h),d=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,f=i.match(d),p=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,g=i.match(p);if(r&&11===r[2].length){var m=r[2];n=t("<iframe>").attr("src","//www.youtube.com/embed/"+m).attr("width","640").attr("height","360")}else o&&o[0].length>0?n=t("<iframe>").attr("src",o[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true"):u&&u[0].length>0?n=t("<iframe>").attr("src",u[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed"):f&&f[3].length>0?n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+f[3]).attr("width","640").attr("height","360"):g&&g[2].length>0&&(n=t("<iframe>").attr("src","//www.dailymotion.com/embed/video/"+g[2]).attr("width","640").attr("height","360"));n&&(n.attr("frameborder",0),c.create().insertNode(n[0]))},this.formatBlock=function(t,e){l(t),e=i.bMSIE?"<"+e+">":e,document.execCommand("FormatBlock",!1,e)},this.formatPara=function(t){this.formatBlock(t,"P")};for(var o=1;6>=o;o++)this["formatH"+o]=function(t){return function(e){this.formatBlock(e,"H"+t)}}(o);this.fontSize=function(t,e){l(t),document.execCommand("fontSize",!1,3),i.bFF?t.find("font[size=3]").removeAttr("size").css("font-size",e+"px"):t.find("span").filter(function(){return"medium"===this.style.fontSize}).css("font-size",e+"px")},this.lineHeight=function(t,i){l(t),e.stylePara(c.create(),{lineHeight:i})},this.unlink=function(t){var e=c.create();if(e.isOnAnchor()){l(t);var i=s.ancestor(e.sc,s.isAnchor);e=c.createFromNode(i),e.select(),document.execCommand("unlink")}},this.createLink=function(e,n,r){var a=c.create();l(e);var o=n;if(-1!==n.indexOf("@")&&-1===n.indexOf(":")?o="mailto:"+n:-1===n.indexOf("://")&&(o="http://"+n),(i.bMSIE||i.bFF)&&a.isCollapsed()){a.insertNode(t('<A id="linkAnchor">'+n+"</A>")[0]);var h=t("#linkAnchor").attr("href",o).removeAttr("id");a=c.createFromNode(h[0]),a.select()}else document.execCommand("createlink",!1,o),a=c.create();t.each(a.nodes(s.isAnchor),function(e,i){r?t(i).attr("target","_blank"):t(i).removeAttr("target")})},this.getLinkInfo=function(){var e=c.create(),i=!0,n="";if(e.isOnAnchor()){var l=s.ancestor(e.sc,s.isAnchor);e=c.createFromNode(l),i="_blank"===t(l).attr("target"),n=l.href}return{text:e.toString(),url:n,newWindow:i}},this.getVideoInfo=function(){var t=c.create();if(t.isOnAnchor()){var e=s.ancestor(t.sc,s.isAnchor);t=c.createFromNode(e)}return{text:t.toString()}},this.color=function(t,e){var i=JSON.parse(e),n=i.foreColor,s=i.backColor;l(t),n&&document.execCommand("foreColor",!1,n),s&&document.execCommand("backColor",!1,s)},this.insertTable=function(t,e){l(t);var i=e.split("x");c.create().insertNode(n.createTable(i[0],i[1]))},this.floatMe=function(t,e,i){l(t),i.css("float",e)},this.resize=function(t,e,i){l(t),i.css({width:t.width()*e+"px",height:""})},this.resizeTo=function(t,e,i){var n;if(i){var l=t.y/t.x,s=e.data("ratio");n={width:s>l?t.x:t.y/s,height:s>l?t.x*s:t.y}}else n={width:t.x,height:t.y};e.css(n)},this.removeMedia=function(t,e,i){l(t),i.detach()}},f=function(){var t=[],e=[],i=function(t){var e=t[0],i=c.create();return{contents:t.html(),bookmark:i.bookmark(e),scrollTop:t.scrollTop()}},n=function(t,e){t.html(e.contents).scrollTop(e.scrollTop),c.createFromBookmark(t[0],e.bookmark).select()};this.undo=function(l){var s=i(l);0!==t.length&&(n(l,t.pop()),e.push(s))},this.redo=function(l){var s=i(l);0!==e.length&&(n(l,e.pop()),t.push(s))},this.recordUndo=function(n){e=[],t.push(i(n))}},p=function(){this.update=function(e,i){var n=function(e,i){e.find(".dropdown-menu li a").each(function(){var e=t(this).data("value")+""==i+"";this.className=e?"checked":""})},s=function(t,i){var n=e.find(t);n.toggleClass("active",i())},r=e.find(".note-fontname");if(r.length>0){var a=i["font-family"];a&&(a=l.head(a.split(",")),a=a.replace(/\'/g,""),r.find(".note-current-fontname").text(a),n(r,a))}var o=e.find(".note-fontsize");o.find(".note-current-fontsize").text(i["font-size"]),n(o,parseFloat(i["font-size"]));var h=e.find(".note-height");n(h,parseFloat(i["line-height"])),s('button[data-event="bold"]',function(){return"bold"===i["font-bold"]}),s('button[data-event="italic"]',function(){return"italic"===i["font-italic"]}),s('button[data-event="underline"]',function(){return"underline"===i["font-underline"]}),s('button[data-event="strikethrough"]',function(){return"strikethrough"===i["font-strikethrough"]}),s('button[data-event="justifyLeft"]',function(){return"left"===i["text-align"]||"start"===i["text-align"]}),s('button[data-event="justifyCenter"]',function(){return"center"===i["text-align"]}),s('button[data-event="justifyRight"]',function(){return"right"===i["text-align"]}),s('button[data-event="justifyFull"]',function(){return"justify"===i["text-align"]}),s('button[data-event="insertUnorderedList"]',function(){return"unordered"===i["list-style"]}),s('button[data-event="insertOrderedList"]',function(){return"ordered"===i["list-style"]})},this.updateRecentColor=function(e,i,n){var l=t(e).closest(".note-color"),s=l.find(".note-recent-color"),r=JSON.parse(s.attr("data-value"));r[i]=n,s.attr("data-value",JSON.stringify(r));var a="backColor"===i?"background-color":"color";s.find("i").css(a,n)},this.updateFullscreen=function(t,e){var i=t.find('button[data-event="fullscreen"]');i.toggleClass("active",e)},this.updateCodeview=function(t,e){var i=t.find('button[data-event="codeview"]');i.toggleClass("active",e)},this.activate=function(t){t.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(t){t.find("button").not('button[data-event="codeview"]').addClass("disabled")}},g=function(){var e=function(e,i){var n=t(i),l=n.position(),s=n.height();e.css({display:"block",left:l.left,top:l.top+s})};this.update=function(t,i){var n=t.find(".note-link-popover");if(i.anchor){var l=n.find("a");l.attr("href",i.anchor.href).html(i.anchor.href),e(n,i.anchor)}else n.hide();var s=t.find(".note-image-popover");i.image?e(s,i.image):s.hide()},this.hide=function(t){t.children().hide()}},m=function(){this.update=function(e,i){var n=e.find(".note-control-selection");if(i.image){var l=t(i.image),s=l.position(),r={w:l.width(),h:l.height()};n.css({display:"block",left:s.left,top:s.top,width:r.w,height:r.h}).data("target",i.image);var a=r.w+"x"+r.h;n.find(".note-control-selection-info").text(a)}else n.hide()},this.hide=function(t){t.children().hide()}},v=function(){var e=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)};this.showImageDialog=function(i,n){return t.Deferred(function(t){var l=n.find(".note-image-dialog"),s=n.find(".note-image-input"),r=n.find(".note-image-url"),a=n.find(".note-image-btn");l.one("shown.bs.modal",function(){s.replaceWith(s.clone().on("change",function(){l.modal("hide"),t.resolve(this.files)})),a.click(function(e){e.preventDefault(),l.modal("hide"),t.resolve(r.val())}),r.keyup(function(){e(a,r.val())}).val("").focus()}).one("hidden.bs.modal",function(){i.focus(),s.off("change"),r.off("keyup"),a.off("click")}).modal("show")})},this.showVideoDialog=function(i,n,l){return t.Deferred(function(t){var s=n.find(".note-video-dialog"),r=s.find(".note-video-url"),a=s.find(".note-video-btn");s.one("shown.bs.modal",function(){r.val(l.text).keyup(function(){e(a,r.val())}).trigger("keyup").trigger("focus"),a.click(function(e){e.preventDefault(),s.modal("hide"),t.resolve(r.val())})}).one("hidden.bs.modal",function(){i.focus(),r.off("keyup"),a.off("click")}).modal("show")})},this.showLinkDialog=function(i,n,l){return t.Deferred(function(t){var s=n.find(".note-link-dialog"),r=s.find(".note-link-text"),a=s.find(".note-link-url"),o=s.find(".note-link-btn"),h=s.find("input[type=checkbox]");s.one("shown.bs.modal",function(){r.val(l.text),a.keyup(function(){e(o,a.val()),l.text||r.val(a.val())}).val(l.url).trigger("focus"),h.prop("checked",l.newWindow),o.one("click",function(e){e.preventDefault(),s.modal("hide"),t.resolve(a.val(),h.is(":checked"))})}).one("hidden.bs.modal",function(){i.focus(),a.off("keyup")}).modal("show")}).promise()},this.showHelpDialog=function(t,e){var i=e.find(".note-help-dialog");i.one("hidden.bs.modal",function(){t.focus()}).modal("show")}},y=function(){var n=new d,r=new p,h=new g,c=new m,u=new v,y=function(e){var i=t(e).closest(".note-editor");return i.length>0&&s.buildLayoutInfo(i)},b=function(e,i){n.restoreRange(e);var l=e.data("callbacks");l.onImageUpload?l.onImageUpload(i,n,e):t.each(i,function(t,i){a.readFileAsDataURL(i).then(function(t){n.insertImage(e,t)}).fail(function(){l.onImageUploadError&&l.onImageUploadError()})})},w=function(t){s.isImg(t.target)&&t.preventDefault()},_=function(t){var e=y(t.currentTarget||t.target),i=n.currentStyle(t.target);i&&(r.update(e.toolbar(),i),h.update(e.popover(),i),c.update(e.handle(),i))},x=function(t){var e=y(t.currentTarget||t.target);h.hide(e.popover()),c.hide(e.handle())},k=function(t){var e=t.originalEvent;if(e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length){var i=y(t.currentTarget||t.target),n=l.head(e.clipboardData.items),s="file"===n.kind&&-1!==n.type.indexOf("image/");s&&b(i.editable(),[n.getAsFile()])}},C=function(e){if(s.isControlSizing(e.target)){var i=y(e.target),l=i.handle(),r=i.popover(),a=i.editable(),o=i.editor(),u=l.find(".note-control-selection").data("target"),d=t(u),f=d.offset(),p=t(document).scrollTop();o.on("mousemove",function(t){n.resizeTo({x:t.clientX-f.left,y:t.clientY-(f.top-p)},d,!t.shiftKey),c.update(l,{image:u}),h.update(r,{image:u})}).one("mouseup",function(){o.off("mousemove")}),d.data("ratio")||d.data("ratio",d.height()/d.width()),n.recordUndo(a),e.stopPropagation(),e.preventDefault()}},M=function(e){var i=t(e.target).closest("[data-event]");i.length>0&&e.preventDefault()},S=function(l){var a=t(l.target).closest("[data-event]");if(a.length>0){var o,h,c,d=a.attr("data-event"),f=a.attr("data-value"),p=y(l.target),g=p.editor(),m=p.toolbar(),v=p.dialog(),w=p.editable(),x=p.codable(),k=g.data("options");if(-1!==t.inArray(d,["resize","floatMe","removeMedia"])){var C=p.handle(),M=C.find(".note-control-selection");c=t(M.data("target"))}if(n[d]&&(w.trigger("focus"),n[d](w,f,c)),-1!==t.inArray(d,["backColor","foreColor"]))r.updateRecentColor(a[0],d,f);else if("showLinkDialog"===d){w.focus();var S=n.getLinkInfo();n.saveRange(w),u.showLinkDialog(w,v,S).then(function(t,e){n.restoreRange(w),n.createLink(w,t,e)})}else if("showImageDialog"===d)w.focus(),u.showImageDialog(w,v).then(function(t){"string"==typeof t?(n.restoreRange(w),n.insertImage(w,t)):b(w,t)});else if("showVideoDialog"===d){w.focus();var D=n.getVideoInfo();n.saveRange(w),u.showVideoDialog(w,v,D).then(function(t){n.restoreRange(w),n.insertVideo(w,t)})}else if("showHelpDialog"===d)u.showHelpDialog(w,v);else if("fullscreen"===d){var T=t("html, body"),E=function(t){g.css("width",t.w),w.css("height",t.h),x.css("height",t.h),x.data("cmEditor")&&x.data("cmEditor").setSize(null,t.h)};g.toggleClass("fullscreen");var F=g.hasClass("fullscreen");F?(w.data("orgHeight",w.css("height")),t(window).on("resize",function(){E({w:t(window).width(),h:t(window).height()-m.outerHeight()})}).trigger("resize"),T.css("overflow","hidden")):(t(window).off("resize"),E({w:k.width||"",h:w.data("orgHeight")}),T.css("overflow","auto")),r.updateFullscreen(m,F)}else if("codeview"===d){g.toggleClass("codeview");var A=g.hasClass("codeview");if(A){if(x.val(w.html()),x.height(w.height()),r.deactivate(m),x.focus(),i.bCodeMirror){h=e.fromTextArea(x[0],t.extend({mode:"text/html",lineNumbers:!0},k.codemirror));var P=g.data("options").codemirror.tern||!1;P&&(o=new e.TernServer(P),h.ternServer=o,h.on("cursorActivity",function(t){o.updateArgHints(t)})),h.setSize(null,w.outerHeight()),h.autoFormatRange&&h.autoFormatRange({line:0,ch:0},{line:h.lineCount(),ch:h.getTextArea().value.length}),x.data("cmEditor",h)}}else i.bCodeMirror&&(h=x.data("cmEditor"),x.val(h.getValue()),h.toTextArea()),w.html(x.val()||s.emptyPara),w.height(k.height?x.height():"auto"),r.activate(m),w.focus();r.updateCodeview(p.toolbar(),A)}_(l)}},D=24,T=function(e){var i=t(document),n=y(e.target).editable(),l=n.offset().top-i.scrollTop();i.on("mousemove",function(t){var e=t.clientY-(l+D);n.height(e)}).one("mouseup",function(){i.off("mousemove")}),e.stopPropagation(),e.preventDefault()},E=18,F=function(e){var i,n=t(e.target.parentNode),l=n.next(),s=n.find(".note-dimension-picker-mousecatcher"),r=n.find(".note-dimension-picker-highlighted"),a=n.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var o=t(e.target).offset();i={x:e.pageX-o.left,y:e.pageY-o.top}}else i={x:e.offsetX,y:e.offsetY};var h={c:Math.ceil(i.x/E)||1,r:Math.ceil(i.y/E)||1};r.css({width:h.c+"em",height:h.r+"em"}),s.attr("data-value",h.c+"x"+h.r),3<h.c&&h.c<10&&a.css({width:h.c+1+"em"}),3<h.r&&h.r<10&&a.css({height:h.r+1+"em"}),l.html(h.c+" x "+h.r)},A=function(e){var i=t(),n=e.dropzone,l=e.dropzone.find(".note-dropzone-message");t(document).on("dragenter",function(t){var s=e.editor.hasClass("codeview");s||0!==i.length||(e.editor.addClass("dragover"),n.width(e.editor.width()),n.height(e.editor.height()),l.text("Drag Image Here")),i=i.add(t.target)}).on("dragleave",function(t){i=i.not(t.target),0===i.length&&e.editor.removeClass("dragover");
}).on("drop",function(){i=t(),e.editor.removeClass("dragover")}),n.on("dragenter",function(){n.addClass("hover"),l.text("Drop Image")}).on("dragleave",function(){n.removeClass("hover"),l.text("Drag Image Here")}),n.on("drop",function(t){var e=t.originalEvent.dataTransfer;if(e&&e.files){var i=y(t.currentTarget||t.target);i.editable().focus(),b(i.editable(),e.files)}t.preventDefault()}).on("dragover",!1)};this.bindKeyMap=function(t,e){var i=t.editor,l=t.editable;l.on("keydown",function(t){var s=[];t.metaKey&&s.push("CMD"),t.ctrlKey&&s.push("CTRL"),t.shiftKey&&s.push("SHIFT");var r=o.nameFromCode[t.keyCode];r&&s.push(r);var a=e[s.join("+")];a?(t.preventDefault(),n[a](l,i.data("options"))):o.isEdit(t.keyCode)&&n.recordUndo(l)})},this.attach=function(t,e){this.bindKeyMap(t,e.keyMap[i.bMac?"mac":"pc"]),t.editable.on("mousedown",w),t.editable.on("keyup mouseup",_),t.editable.on("scroll",x),t.editable.on("paste",k),e.disableDragAndDrop||A(t),t.handle.on("mousedown",C),t.toolbar.on("click",S),t.popover.on("click",S),t.toolbar.on("mousedown",M),t.popover.on("mousedown",M),t.statusbar.on("mousedown",T);var l=t.toolbar,s=l.find(".note-dimension-picker-mousecatcher");if(s.on("mousemove",F),t.editable.on("blur",function(){n.saveRange(t.editable)}),t.editor.data("options",e),e.styleWithSpan&&!i.bMSIE&&setTimeout(function(){document.execCommand("styleWithCSS",0,!0)}),t.editable.data("NoteHistory",new f),e.onenter&&t.editable.keypress(function(t){t.keyCode===o.ENTER&&e.onenter(t)}),e.onfocus&&t.editable.focus(e.onfocus),e.onblur&&t.editable.blur(e.onblur),e.onkeyup&&t.editable.keyup(e.onkeyup),e.onkeydown&&t.editable.keydown(e.onkeydown),e.onpaste&&t.editable.on("paste",e.onpaste),e.onToolbarClick&&t.toolbar.click(e.onToolbarClick),e.onChange){var r=function(){e.onChange(t.editable,t.editable.html())};i.bMSIE?t.editable.on("DOMCharacterDataModified, DOMSubtreeModified, DOMNodeInserted",r):t.editable.on("input",r)}t.editable.data("callbacks",{onAutoSave:e.onAutoSave,onImageUpload:e.onImageUpload,onImageUploadError:e.onImageUploadError,onFileUpload:e.onFileUpload,onFileUploadError:e.onFileUpload})},this.dettach=function(t){t.editable.off(),t.toolbar.off(),t.handle.off(),t.popover.off()}},b=function(){var e,n,l,r,a;e={picture:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.image+'" data-event="showImageDialog" tabindex="-1"><i class="fa fa-picture-o icon-picture"></i></button>'},link:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.link.link+'" data-event="showLinkDialog" tabindex="-1"><i class="fa fa-link icon-link"></i></button>'},video:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.video.video+'" data-event="showVideoDialog" tabindex="-1"><i class="fa fa-youtube-play icon-play"></i></button>'},table:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+t.table.table+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-table icon-table"></i> <span class="caret"></span></button><ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>'},style:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+t.style.style+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-magic icon-magic"></i> <span class="caret"></span></button><ul class="dropdown-menu"><li><a data-event="formatBlock" data-value="p">'+t.style.normal+'</a></li><li><a data-event="formatBlock" data-value="blockquote"><blockquote>'+t.style.blockquote+'</blockquote></a></li><li><a data-event="formatBlock" data-value="pre">'+t.style.pre+'</a></li><li><a data-event="formatBlock" data-value="h1"><h1>'+t.style.h1+'</h1></a></li><li><a data-event="formatBlock" data-value="h2"><h2>'+t.style.h2+'</h2></a></li><li><a data-event="formatBlock" data-value="h3"><h3>'+t.style.h3+'</h3></a></li><li><a data-event="formatBlock" data-value="h4"><h4>'+t.style.h4+'</h4></a></li><li><a data-event="formatBlock" data-value="h5"><h5>'+t.style.h5+'</h5></a></li><li><a data-event="formatBlock" data-value="h6"><h6>'+t.style.h6+"</h6></a></li></ul>"},fontname:function(t){var e=["Serif","Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],i='<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+t.font.name+'" tabindex="-1"><span class="note-current-fontname">Arial</span> <b class="caret"></b></button>';i+='<ul class="dropdown-menu">';for(var n=0;n<e.length;n++)i+='<li><a data-event="fontName" data-value="'+e[n]+'"><i class="fa fa-check icon-ok"></i> '+e[n]+"</a></li>";return i+="</ul>"},fontsize:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+t.font.size+'" tabindex="-1"><span class="note-current-fontsize">11</span> <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="fontSize" data-value="8"><i class="fa fa-check icon-ok"></i> 8</a></li><li><a data-event="fontSize" data-value="9"><i class="fa fa-check icon-ok"></i> 9</a></li><li><a data-event="fontSize" data-value="10"><i class="fa fa-check icon-ok"></i> 10</a></li><li><a data-event="fontSize" data-value="11"><i class="fa fa-check icon-ok"></i> 11</a></li><li><a data-event="fontSize" data-value="12"><i class="fa fa-check icon-ok"></i> 12</a></li><li><a data-event="fontSize" data-value="14"><i class="fa fa-check icon-ok"></i> 14</a></li><li><a data-event="fontSize" data-value="18"><i class="fa fa-check icon-ok"></i> 18</a></li><li><a data-event="fontSize" data-value="24"><i class="fa fa-check icon-ok"></i> 24</a></li><li><a data-event="fontSize" data-value="36"><i class="fa fa-check icon-ok"></i> 36</a></li></ul>'},color:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small note-recent-color" title="'+t.color.recent+'" data-event="color" data-value=\'{"backColor":"yellow"}\' tabindex="-1"><i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i></button><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+t.color.more+'" data-toggle="dropdown" tabindex="-1"><span class="caret"></span></button><ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+t.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+t.color.transparent+'">'+t.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+t.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+t.color.reset+'">'+t.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>'},bold:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.font.bold+'" data-shortcut="Ctrl+B" data-mac-shortcut="\u2318+B" data-event="bold" tabindex="-1"><i class="fa fa-bold icon-bold"></i></button>'},italic:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.font.italic+'" data-shortcut="Ctrl+I" data-mac-shortcut="\u2318+I" data-event="italic" tabindex="-1"><i class="fa fa-italic icon-italic"></i></button>'},underline:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.font.underline+'" data-shortcut="Ctrl+U" data-mac-shortcut="\u2318+U" data-event="underline" tabindex="-1"><i class="fa fa-underline icon-underline"></i></button>'},strike:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.font.strike+'" data-event="strikethrough" tabindex="-1"><i class="fa fa-strikethrough icon-strikethrough"></i></button>'},clear:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.font.clear+'" data-shortcut="Ctrl+\\" data-mac-shortcut="\u2318+\\" data-event="removeFormat" tabindex="-1"><i class="fa fa-eraser icon-eraser"></i></button>'},ul:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.lists.unordered+'" data-shortcut="Ctrl+Shift+8" data-mac-shortcut="\u2318+\u21e7+7" data-event="insertUnorderedList" tabindex="-1"><i class="fa fa-list-ul icon-list-ul"></i></button>'},ol:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.lists.ordered+'" data-shortcut="Ctrl+Shift+7" data-mac-shortcut="\u2318+\u21e7+8" data-event="insertOrderedList" tabindex="-1"><i class="fa fa-list-ol icon-list-ol"></i></button>'},paragraph:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+t.paragraph.paragraph+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i>  <span class="caret"></span></button><div class="dropdown-menu"><div class="note-align btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.paragraph.left+'" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="\u2318+\u21e7+L" data-event="justifyLeft" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.paragraph.center+'" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="\u2318+\u21e7+E" data-event="justifyCenter" tabindex="-1"><i class="fa fa-align-center icon-align-center"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.paragraph.right+'" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="\u2318+\u21e7+R" data-event="justifyRight" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.paragraph.justify+'" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="\u2318+\u21e7+J" data-event="justifyFull" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button></div><div class="note-list btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.paragraph.outdent+'" data-shortcut="Ctrl+[" data-mac-shortcut="\u2318+[" data-event="outdent" tabindex="-1"><i class="fa fa-outdent icon-indent-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.paragraph.indent+'" data-shortcut="Ctrl+]" data-mac-shortcut="\u2318+]" data-event="indent" tabindex="-1"><i class="fa fa-indent icon-indent-right"></i></button></div></div>'},height:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+t.font.height+'" tabindex="-1"><i class="fa fa-text-height icon-text-height"></i>&nbsp; <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="lineHeight" data-value="1.0"><i class="fa fa-check icon-ok"></i> 1.0</a></li><li><a data-event="lineHeight" data-value="1.2"><i class="fa fa-check icon-ok"></i> 1.2</a></li><li><a data-event="lineHeight" data-value="1.4"><i class="fa fa-check icon-ok"></i> 1.4</a></li><li><a data-event="lineHeight" data-value="1.5"><i class="fa fa-check icon-ok"></i> 1.5</a></li><li><a data-event="lineHeight" data-value="1.6"><i class="fa fa-check icon-ok"></i> 1.6</a></li><li><a data-event="lineHeight" data-value="1.8"><i class="fa fa-check icon-ok"></i> 1.8</a></li><li><a data-event="lineHeight" data-value="2.0"><i class="fa fa-check icon-ok"></i> 2.0</a></li><li><a data-event="lineHeight" data-value="3.0"><i class="fa fa-check icon-ok"></i> 3.0</a></li></ul>'},help:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.options.help+'" data-event="showHelpDialog" tabindex="-1"><i class="fa fa-question icon-question"></i></button>'},fullscreen:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.options.fullscreen+'" data-event="fullscreen" tabindex="-1"><i class="fa fa-arrows-alt icon-fullscreen"></i></button>'},codeview:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.options.codeview+'" data-event="codeview" tabindex="-1"><i class="fa fa-code icon-code"></i></button>'},undo:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.history.undo+'" data-event="undo" tabindex="-1"><i class="fa fa-undo icon-undo"></i></button>'},redo:function(t){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+t.history.redo+'" data-event="redo" tabindex="-1"><i class="fa fa-repeat icon-repeat"></i></button>'}},n=function(t){return'<div class="note-popover"><div class="note-link-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-link-content"><a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.link.edit+'" data-event="showLinkDialog" tabindex="-1"><i class="fa fa-edit icon-edit"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.link.unlink+'" data-event="unlink" tabindex="-1"><i class="fa fa-unlink icon-unlink"></i></button></div></div></div><div class="note-image-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-image-content"><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.resizeFull+'" data-event="resize" data-value="1" tabindex="-1"><span class="note-fontsize-10">100%</span> </button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.resizeHalf+'" data-event="resize" data-value="0.5" tabindex="-1"><span class="note-fontsize-10">50%</span> </button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.resizeQuarter+'" data-event="resize" data-value="0.25" tabindex="-1"><span class="note-fontsize-10">25%</span> </button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.floatLeft+'" data-event="floatMe" data-value="left" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.floatRight+'" data-event="floatMe" data-value="right" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.floatNone+'" data-event="floatMe" data-value="none" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="'+t.image.remove+'" data-event="removeMedia" data-value="none" tabindex="-1"><i class="fa fa-trash-o icon-trash"></i></button></div></div></div></div>'};var l=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},o=function(t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+t.shortcut.textFormatting+"</th></tr></thead><tbody><tr><td>\u2318 + B</td><td>"+t.font.bold+"</td></tr><tr><td>\u2318 + I</td><td>"+t.font.italic+"</td></tr><tr><td>\u2318 + U</td><td>"+t.font.underline+"</td></tr><tr><td>\u2318 + \u21e7 + S</td><td>"+t.font.strike+"</td></tr><tr><td>\u2318 + \\</td><td>"+t.font.clear+"</td></tr></tr></tbody></table>"},h=function(t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+t.shortcut.action+"</th></tr></thead><tbody><tr><td>\u2318 + Z</td><td>"+t.history.undo+"</td></tr><tr><td>\u2318 + \u21e7 + Z</td><td>"+t.history.redo+"</td></tr><tr><td>\u2318 + ]</td><td>"+t.paragraph.indent+"</td></tr><tr><td>\u2318 + [</td><td>"+t.paragraph.outdent+"</td></tr><tr><td>\u2318 + ENTER</td><td>"+t.hr.insert+"</td></tr></tbody></table>"},c=function(t,e){var i='<table class="note-shortcut"><thead><tr><th></th><th>'+t.shortcut.extraKeys+"</th></tr></thead><tbody>";for(var n in e.extraKeys)e.extraKeys.hasOwnProperty(n)&&(i+="<tr><td>"+n+"</td><td>"+e.extraKeys[n]+"</td></tr>");return i+="</tbody></table>"},u=function(t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+t.shortcut.paragraphFormatting+"</th></tr></thead><tbody><tr><td>\u2318 + \u21e7 + L</td><td>"+t.paragraph.left+"</td></tr><tr><td>\u2318 + \u21e7 + E</td><td>"+t.paragraph.center+"</td></tr><tr><td>\u2318 + \u21e7 + R</td><td>"+t.paragraph.right+"</td></tr><tr><td>\u2318 + \u21e7 + J</td><td>"+t.paragraph.justify+"</td></tr><tr><td>\u2318 + \u21e7 + NUM7</td><td>"+t.lists.ordered+"</td></tr><tr><td>\u2318 + \u21e7 + NUM8</td><td>"+t.lists.unordered+"</td></tr></tbody></table>"},d=function(t){return'<table class="note-shortcut"><thead><tr><th></th><th>'+t.shortcut.documentStyle+"</th></tr></thead><tbody><tr><td>\u2318 + NUM0</td><td>"+t.style.normal+"</td></tr><tr><td>\u2318 + NUM1</td><td>"+t.style.h1+"</td></tr><tr><td>\u2318 + NUM2</td><td>"+t.style.h2+"</td></tr><tr><td>\u2318 + NUM3</td><td>"+t.style.h3+"</td></tr><tr><td>\u2318 + NUM4</td><td>"+t.style.h4+"</td></tr><tr><td>\u2318 + NUM5</td><td>"+t.style.h5+"</td></tr><tr><td>\u2318 + NUM6</td><td>"+t.style.h6+"</td></tr></tbody></table>"},f=function(t,e){var i='<table class="note-shortcut-layout"><tbody><tr><td>'+h(t,e)+"</td><td>"+o(t,e)+"</td></tr><tr><td>"+d(t,e)+"</td><td>"+u(t,e)+"</td></tr>";return e.extraKeys&&(i+='<tr><td colspan="2">'+c(t,e)+"</td></tr>"),i+="</tbody</table>"},p=function(t){return t.replace(/\u2318/g,"Ctrl").replace(/\u21e7/g,"Shift")};r=function(t,e){var n=function(){return'<div class="note-image-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4>'+t.image.insert+'</h4></div><div class="modal-body"><div class="row-fluid"><h5>'+t.image.selectFromFiles+'</h5><input class="note-image-input" type="file" name="files" accept="image/*" /><h5>'+t.image.url+'</h5><input class="note-image-url form-control span12" type="text" /></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-image-btn disabled" disabled="disabled">'+t.image.insert+"</button></div></div></div></div>"},l=function(){return'<div class="note-link-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4>'+t.link.insert+'</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>'+t.link.textToDisplay+'</label><input class="note-link-text form-control span12" disabled type="text" /></div><div class="form-group"><label>'+t.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(e.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+t.link.openInNewWindow+"</label></div>")+'</div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-link-btn disabled" disabled="disabled">'+t.link.insert+"</button></div></div></div></div>"},s=function(){return'<div class="note-video-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4>'+t.video.insert+'</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>'+t.video.url+'</label>&nbsp;<small class="text-muted">'+t.video.providers+'</small><input class="note-video-url form-control span12" type="text" /></div></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-video-btn disabled" disabled="disabled">'+t.video.insert+"</button></div></div></div></div>"},r=function(){return'<div class="note-help-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+t.shortcut.close+'</a><div class="title">'+t.shortcut.shortcuts+"</div>"+(i.bMac?f(t,e):p(f(t,e)))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.2</a> \xb7 <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> \xb7 <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p></div></div></div></div>'};return'<div class="note-dialog">'+n()+l()+s()+r()+"</div>"},a=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'};var g=function(e,n){e.find("button").each(function(e,n){var l=t(n),s=l.attr(i.bMac?"data-mac-shortcut":"data-shortcut");s&&l.attr("title",function(t,e){return e+" ("+s+")"})}).tooltip({container:"body",trigger:"hover",placement:n||"top"}).on("click",function(){t(this).tooltip("hide")})},m=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],v=function(e){e.find(".note-color-palette").each(function(){for(var e=t(this),i=e.attr("data-target-event"),n=[],l=0,s=m.length;s>l;l++){for(var r=m[l],a=[],o=0,h=r.length;h>o;o++){var c=r[o];a.push(['<button type="button" class="note-color-btn" style="background-color:',c,';" data-event="',i,'" data-value="',c,'" title="',c,'" data-toggle="button" tabindex="-1"></button>'].join(""))}n.push("<div>"+a.join("")+"</div>")}e.html(n.join(""))})};this.createLayout=function(i,o){var h=i.next();if(!h||!h.hasClass("note-editor")){var c=t('<div class="note-editor"></div>');o.width&&c.width(o.width),o.height>0&&t('<div class="note-statusbar">'+a()+"</div>").prependTo(c);var u=!i.is(":disabled"),d=t('<div class="note-editable" contentEditable="'+u+'"></div>').prependTo(c);o.height&&d.height(o.height),o.direction&&d.attr("dir",o.direction),d.html(s.html(i)||s.emptyPara),t('<textarea class="note-codable"></textarea>').prependTo(c);for(var f=t.summernote.lang[o.lang],p="",m=0,y=o.toolbar.length;y>m;m++){var b=o.toolbar[m];p+='<div class="note-'+b[0]+' btn-group">';for(var w=0,_=b[1].length;_>w;w++)p+=e[b[1][w]](f);p+="</div>"}p='<div class="note-toolbar btn-toolbar">'+p+"</div>";var x=t(p).prependTo(c);v(x),g(x,"bottom");var k=t(n(f)).prependTo(c);g(k),t(l()).prependTo(c);var C=t(r(f,o)).prependTo(c);C.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),t('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(c),c.insertAfter(i),i.hide()}},this.layoutInfoFromHolder=function(t){var e=t.next();if(e.hasClass("note-editor")){var i=s.buildLayoutInfo(e);for(var n in i)i.hasOwnProperty(n)&&(i[n]=i[n].call());return i}},this.removeLayout=function(t){var e=this.layoutInfoFromHolder(t);e&&(t.html(e.editable.html()),e.editor.remove(),t.show())}};t.summernote=t.summernote||{},t.extend(t.summernote,r);var w=new b,_=new y;t.fn.extend({summernote:function(e){if(e=t.extend({},t.summernote.options,e),this.each(function(i,n){var l=t(n);w.createLayout(l,e);var r=w.layoutInfoFromHolder(l);_.attach(r,e),s.isTextarea(l[0])&&l.closest("form").submit(function(){l.html(l.code())})}),this.first()&&e.focus){var i=w.layoutInfoFromHolder(this.first());i.editable.focus()}return this.length>0&&e.oninit&&e.oninit(),this},code:function(e){if(void 0===e){var n=this.first();if(0===n.length)return;var l=w.layoutInfoFromHolder(n);if(l&&l.editable){var s=l.editor.hasClass("codeview");return s&&i.bCodeMirror&&l.codable.data("cmEditor").save(),s?l.codable.val():l.editable.html()}return n.html()}return this.each(function(i,n){var l=w.layoutInfoFromHolder(t(n));l&&l.editable&&l.editable.html(e)}),this},destroy:function(){return this.each(function(e,i){var n=t(i),l=w.layoutInfoFromHolder(n);l&&l.editable&&(_.dettach(l),w.removeLayout(n))}),this}})}),!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(t){"use strict";var e=function(t){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,t&&(void 0!==t.toLowerCase?(t+="","#"===t.charAt(0)||3!==t.length&&6!==t.length||(t="#"+t),this.setColor(t)):void 0!==t.h&&(this.value=t))};e.prototype={constructor:e,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||void 0===t?1:void 0!==t.toLowerCase?parseFloat(t):1},setColor:function(t){t=t.toLowerCase(),this.value=this.stringToHSB(t)||{h:0,s:0,b:0,a:1}},stringToHSB:function(e){e=e.toLowerCase();var i=this,n=!1;return t.each(this.stringParsers,function(t,l){var s=l.re.exec(e),r=s&&l.parse.apply(i,[s]),a=l.format||"rgba";return!r||(n=a.match(/hsla?/)?i.RGBtoHSB.apply(i,i.HSLtoRGB.apply(i,r)):i.RGBtoHSB.apply(i,r),i.origFormat=a,!1)}),n},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,i,n){t||(t=this.value.h,e=this.value.s,i=this.value.b),t*=360;var l,s,r,a,o;return t=t%360/60,o=i*e,a=o*(1-Math.abs(t%2-1)),l=s=r=i-o,t=~~t,l+=[o,a,0,0,a,o][t],s+=[a,o,o,a,0,0][t],r+=[0,0,a,o,o,a][t],{r:Math.round(255*l),g:Math.round(255*s),b:Math.round(255*r),a:n||this.value.a}},toHex:function(t,e,i,n){var l=this.toRGB(t,e,i,n);return"#"+(1<<24|parseInt(l.r)<<16|parseInt(l.g)<<8|parseInt(l.b)).toString(16).substr(1)},toHSL:function(t,e,i,n){t=t||this.value.h,e=e||this.value.s,i=i||this.value.b,n=n||this.value.a;var l=t,s=(2-e)*i,r=e*i;return r/=s>0&&1>=s?s:2-s,s/=2,r>1&&(r=1),{h:isNaN(l)?0:l,s:isNaN(r)?0:r,l:isNaN(s)?0:s,a:isNaN(n)?0:n}},toAlias:function(t,e,i,n){var l=this.toHex(t,e,i,n);for(var s in this.colors)if(this.colors[s]==l)return s;return!1},RGBtoHSB:function(t,e,i,n){t/=255,e/=255,i/=255;var l,s,r,a;return r=Math.max(t,e,i),a=r-Math.min(t,e,i),l=0===a?null:r===t?(e-i)/a:r===e?(i-t)/a+2:(t-e)/a+4,l=(l+360)%6*60/360,s=0===a?0:a/r,{h:this._sanitizeNumber(l),s:s,b:r,a:this._sanitizeNumber(n)}},HueToRGB:function(t,e,i){return 0>i?i+=1:i>1&&(i-=1),1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t},HSLtoRGB:function(t,e,i,n){0>e&&(e=0);var l;l=.5>=i?i*(1+e):i+e-i*e;var s=2*i-l,r=t+1/3,a=t,o=t-1/3,h=Math.round(255*this.HueToRGB(s,l,r)),c=Math.round(255*this.HueToRGB(s,l,a)),u=Math.round(255*this.HueToRGB(s,l,o));return[h,c,u,this._sanitizeNumber(n)]},toString:function(t){switch(t=t||"rgba"){case"rgb":var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")";case"hsl":var i=this.toHSL();return"hsl("+Math.round(360*i.h)+","+Math.round(100*i.s)+"%,"+Math.round(100*i.l)+"%)";case"hsla":var i=this.toHSL();return"hsla("+Math.round(360*i.h)+","+Math.round(100*i.s)+"%,"+Math.round(100*i.l)+"%,"+i.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return!1}},stringParsers:[{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}},{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(t){var e=this.colorNameToHex(t[0])||"#000000",i=this.stringParsers[0].re.exec(e),n=i&&this.stringParsers[0].parse.apply(this,[i]);return n}}],colorNameToHex:function(t){return"undefined"!=typeof this.colors[t.toLowerCase()]&&this.colors[t.toLowerCase()]}};var i={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",
sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},n=function(n,l){this.element=t(n).addClass("colorpicker-element"),this.options=t.extend({},i,this.element.data(),l),this.component=this.options.component,this.component=this.component!==!1&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1&&t(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new e(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=t(this.options.template),this.picker.addClass(this.options.inline?"colorpicker-inline colorpicker-visible":"colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format)&&this.picker.addClass("colorpicker-with-alpha"),this.picker.on("mousedown.colorpicker touchstart.colorpicker",t.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:t("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":t.proxy(this.keyup,this)}),this.component===!1&&this.element.on({"focus.colorpicker":t.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":t.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":t.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":t.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":t.proxy(this.show,this),"focus.colorpicker":t.proxy(this.show,this)}),this.update(),t(t.proxy(function(){this.element.trigger("create")},this))};n.version="2.0.0-beta",n.Color=e,n.prototype={constructor:n,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component?this.component[t]():this.element[t]();this.picker.css({top:e.top+(this.component?this.component.outerHeight():this.element.outerHeight()),left:e.left})},show:function(e){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),t(window).on("resize.colorpicker",t.proxy(this.reposition,this)),!e||this.hasInput()&&"color"!==this.input.attr("type")||e.stopPropagation&&e.preventDefault&&(e.stopPropagation(),e.preventDefault()),this.options.inline===!1&&t(window.document).on({"mousedown.colorpicker":t.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),t(window).off("resize.colorpicker",this.reposition),t(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){return t=t||this.color.toString(this.format),this.input!==!1&&this.input.prop("value",t),t},updatePicker:function(t){void 0!==t&&(this.color=new e(t));var i=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");return 0!==n.length?(this.options.horizontal===!1?(i=this.options.sliders,n.eq(1).css("top",i.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",i.alpha.maxTop*(1-this.color.value.a))):(i=this.options.slidersHorz,n.eq(1).css("left",i.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",i.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:i.saturation.maxTop-this.color.value.b*i.saturation.maxTop,left:this.color.value.s*i.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t):void 0},updateComponent:function(t){if(t=t||this.color.toString(this.format),this.component!==!1){var e=this.component.find("i").eq(0);e.length>0?e.css({backgroundColor:t}):this.component.css({backgroundColor:t})}return t},update:function(t){var e=this.updateComponent();return(this.getValue(!1)!==!1||t===!0)&&(this.updateInput(e),this.updateData(e)),this.updatePicker(),e},setValue:function(t){this.color=new e(t),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){t=void 0===t?"#000000":t;var e;return e=this.hasInput()?this.input.val():this.element.data("color"),(void 0===e||""===e||null===e)&&(e=t),e},hasInput:function(){return this.input!==!1},isDisabled:function(){return!!this.hasInput()&&this.input.prop("disabled")===!0},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var i=t(e.target),n=i.closest("div"),l=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation"))this.currentSlider=t.extend({},l.saturation);else if(n.is(".colorpicker-hue"))this.currentSlider=t.extend({},l.hue);else{if(!n.is(".colorpicker-alpha"))return!1;this.currentSlider=t.extend({},l.alpha)}var s=n.offset();this.currentSlider.guide=n.find("i")[0].style,this.currentSlider.left=e.pageX-s.left,this.currentSlider.top=e.pageY-s.top,this.mousePointer={left:e.pageX,top:e.pageY},t(document).on({"mousemove.colorpicker":t.proxy(this.mousemove,this),"touchmove.colorpicker":t.proxy(this.mousemove,this),"mouseup.colorpicker":t.proxy(this.mouseup,this),"touchend.colorpicker":t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),i=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=i+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,i/this.currentSlider.maxTop),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},keyup:function(t){if(38===t.keyCode)this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0);else if(40===t.keyCode)this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0);else{var i=this.input.val();this.color=new e(i),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())}this.element.trigger({type:"changeColor",color:this.color,value:i})}},t.colorpicker=n,t.fn.colorpicker=function(e){var i=arguments;return this.each(function(){var l=t(this),s=l.data("colorpicker"),r="object"==typeof e?e:{};s||"string"==typeof e?"string"==typeof e&&s[e].apply(s,Array.prototype.slice.call(i,1)):l.data("colorpicker",new n(this,r))})},t.fn.colorpicker.constructor=n}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=t(window),i=t(document),n=window.location,l=!0,s=!1,r=null,a=NaN,o=1/0,h="undefined",c="directive",u=".cropper",d=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,f=/^(x|y|width|height)$/,p=/^(naturalWidth|naturalHeight|width|height|aspectRatio|ratio|rotate)$/,g="cropper-modal",m="cropper-hidden",v="cropper-invisible",y="cropper-move",b="cropper-crop",w="cropper-disabled",_="mousedown touchstart",x="mousemove touchmove",k="mouseup mouseleave touchend touchleave touchcancel",C="wheel mousewheel DOMMouseScroll",M="resize"+u,S="dblclick",D="build"+u,T="built"+u,E="dragstart"+u,F="dragmove"+u,A="dragend"+u,P=function(t){return"number"==typeof t},I=function(e,i){this.element=e,this.$element=t(e),this.defaults=t.extend({},I.DEFAULTS,t.isPlainObject(i)?i:{}),this.$original=r,this.ready=s,this.built=s,this.cropped=s,this.rotated=s,this.disabled=s,this.replaced=s,this.init()},z=Math.round,L=Math.sqrt,H=Math.min,R=Math.max,N=Math.abs,j=Math.sin,O=Math.cos,W=parseFloat;I.prototype={constructor:I,support:{canvas:t.isFunction(t("<canvas>")[0].getContext)},init:function(){var e=this.defaults;t.each(e,function(t,i){switch(t){case"aspectRatio":e[t]=N(W(i))||a;break;case"autoCropArea":e[t]=N(W(i))||.8;break;case"minWidth":case"minHeight":e[t]=N(W(i))||0;break;case"maxWidth":case"maxHeight":e[t]=N(W(i))||o}}),this.image={rotate:0},this.load()},load:function(){var e,i,n=this,s=this.$element,r=this.element,a=this.image,o="";s.is("img")?i=s.prop("src"):s.is("canvas")&&this.support.canvas&&(i=r.toDataURL()),i&&(this.replaced&&(a.rotate=0),this.defaults.checkImageOrigin&&(s.prop("crossOrigin")||this.isCrossOriginURL(i))&&(o=" crossOrigin"),this.$clone=e=t("<img"+o+' src="'+i+'">'),e.one("load",function(){a.naturalWidth=this.naturalWidth||e.width(),a.naturalHeight=this.naturalHeight||e.height(),a.aspectRatio=a.naturalWidth/a.naturalHeight,n.url=i,n.ready=l,n.build()}),e.addClass(v).prependTo("body"))},isCrossOriginURL:function(t){var e=t.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return!e||e[1]===n.protocol&&e[2]===n.hostname&&e[3]===n.port?s:l},build:function(){var e,n,s=this.$element,r=this.defaults;this.ready&&(this.built&&this.unbuild(),s.one(D,r.build),e=t.Event(D),s.trigger(e),e.isDefaultPrevented()||(this.$cropper=n=t(I.TEMPLATE),s.addClass(m),this.$clone.removeClass(v).prependTo(n),this.rotated||(this.$original=this.$clone.clone(),this.$original.addClass(m).prependTo(this.$cropper),this.originalImage=t.extend({},this.image)),this.$container=s.parent(),this.$container.append(n),this.$canvas=n.find(".cropper-canvas"),this.$dragger=n.find(".cropper-dragger"),this.$viewer=n.find(".cropper-viewer"),r.autoCrop?this.cropped=l:this.$dragger.addClass(m),r.dragCrop&&this.setDragMode("crop"),r.modal&&this.$canvas.addClass(g),!r.dashed&&this.$dragger.find(".cropper-dashed").addClass(m),!r.movable&&this.$dragger.find(".cropper-face").data(c,"move"),!r.resizable&&this.$dragger.find(".cropper-line, .cropper-point").addClass(m),this.$scope=r.multiple?this.$cropper:i,this.addListeners(),this.initPreview(),this.built=l,this.update(),s.one(T,r.built),s.trigger(T)))},unbuild:function(){this.built&&(this.built=s,this.removeListeners(),this.$preview.empty(),this.$preview=r,this.$dragger=r,this.$canvas=r,this.$container=r,this.$cropper.remove(),this.$cropper=r)},update:function(t){this.initContainer(),this.initCropper(),this.initImage(),this.initDragger(),t?(this.setData(t,l),this.setDragMode("crop")):this.setData(this.defaults.data)},resize:function(){clearTimeout(this.resizing),this.resizing=setTimeout(t.proxy(this.update,this,this.getData()),200)},preview:function(){var e=this.image,i=this.dragger,n=e.width,l=e.height,s=i.left-e.left,r=i.top-e.top;this.$viewer.find("img").css({width:z(n),height:z(l),marginLeft:-z(s),marginTop:-z(r)}),this.$preview.each(function(){var e=t(this),a=e.width()/i.width;e.find("img").css({width:z(n*a),height:z(l*a),marginLeft:-z(s*a),marginTop:-z(r*a)})})},addListeners:function(){var i=this.defaults;this.$element.on(E,i.dragstart).on(F,i.dragmove).on(A,i.dragend),this.$cropper.on(_,this._dragstart=t.proxy(this.dragstart,this)).on(S,this._dblclick=t.proxy(this.dblclick,this)),i.zoomable&&this.$cropper.on(C,this._wheel=t.proxy(this.wheel,this)),this.$scope.on(x,this._dragmove=t.proxy(this.dragmove,this)).on(k,this._dragend=t.proxy(this.dragend,this)),e.on(M,this._resize=t.proxy(this.resize,this))},removeListeners:function(){var t=this.defaults;this.$element.off(E,t.dragstart).off(F,t.dragmove).off(A,t.dragend),this.$cropper.off(_,this._dragstart).off(S,this._dblclick),t.zoomable&&this.$cropper.off(C,this._wheel),this.$scope.off(x,this._dragmove).off(k,this._dragend),e.off(M,this._resize)},initPreview:function(){var e='<img src="'+this.url+'">';this.$preview=t(this.defaults.preview),this.$viewer.html(e),this.$preview.html(e).find("img").css("cssText","min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;")},initContainer:function(){var t=this.$container;this.container={width:R(t.width(),300),height:R(t.height(),150)}},initCropper:function(){var t,e=this.container,i=this.image;i.naturalWidth*e.height/i.naturalHeight-e.width>=0?(t={width:e.width,height:e.width/i.aspectRatio,left:0},t.top=(e.height-t.height)/2):(t={width:e.height*i.aspectRatio,height:e.height,top:0},t.left=(e.width-t.width)/2),this.$cropper.css({width:z(t.width),height:z(t.height),left:z(t.left),top:z(t.top)}),this.cropper=t},initImage:function(){var e=this.image,i=this.cropper,n={_width:i.width,_height:i.height,width:i.width,height:i.height,left:0,top:0,ratio:i.width/e.naturalWidth};this.defaultImage=t.extend({},e,n),e._width!==i.width||e._height!==i.height?t.extend(e,n):(e=t.extend({},n,e),this.replaced&&(this.replaced=s,e.ratio=n.ratio)),this.image=e,this.renderImage()},renderImage:function(t){var e=this.image;"zoom"===t&&(e.left-=(e.width-e.oldWidth)/2,e.top-=(e.height-e.oldHeight)/2),e.left=H(R(e.left,e._width-e.width),0),e.top=H(R(e.top,e._height-e.height),0),this.$clone.css({width:z(e.width),height:z(e.height),marginLeft:z(e.left),marginTop:z(e.top)}),t&&(this.defaults.done(this.getData()),this.preview())},initDragger:function(){var e,i=this.defaults,n=this.cropper,l=i.aspectRatio||this.image.aspectRatio,s=this.image.ratio;e=n.height*l-n.width>=0?{height:n.width/l,width:n.width,left:0,top:(n.height-n.width/l)/2,maxWidth:n.width,maxHeight:n.width/l}:{height:n.height,width:n.height*l,left:(n.width-n.height*l)/2,top:0,maxWidth:n.height*l,maxHeight:n.height},e.minWidth=0,e.minHeight=0,i.aspectRatio?(isFinite(i.maxWidth)?(e.maxWidth=H(e.maxWidth,i.maxWidth*s),e.maxHeight=e.maxWidth/l):isFinite(i.maxHeight)&&(e.maxHeight=H(e.maxHeight,i.maxHeight*s),e.maxWidth=e.maxHeight*l),i.minWidth>0?(e.minWidth=R(0,i.minWidth*s),e.minHeight=e.minWidth/l):i.minHeight>0&&(e.minHeight=R(0,i.minHeight*s),e.minWidth=e.minHeight*l)):(e.maxWidth=H(e.maxWidth,i.maxWidth*s),e.maxHeight=H(e.maxHeight,i.maxHeight*s),e.minWidth=R(0,i.minWidth*s),e.minHeight=R(0,i.minHeight*s)),e.minWidth=H(e.maxWidth,e.minWidth),e.minHeight=H(e.maxHeight,e.minHeight),e.height*=i.autoCropArea,e.width*=i.autoCropArea,e.left=(n.width-e.width)/2,e.top=(n.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.defaultDragger=e,this.dragger=t.extend({},e)},renderDragger:function(){var t=this.dragger,e=this.cropper;t.width>t.maxWidth?(t.width=t.maxWidth,t.left=t.oldLeft):t.width<t.minWidth&&(t.width=t.minWidth,t.left=t.oldLeft),t.height>t.maxHeight?(t.height=t.maxHeight,t.top=t.oldTop):t.height<t.minHeight&&(t.height=t.minHeight,t.top=t.oldTop),t.left=H(R(t.left,0),e.width-t.width),t.top=H(R(t.top,0),e.height-t.height),t.oldLeft=t.left,t.oldTop=t.top,this.dragger=t,this.disabled||this.defaults.done(this.getData()),this.$dragger.css({width:z(t.width),height:z(t.height),left:z(t.left),top:z(t.top)}),this.preview()},reset:function(e){this.cropped&&(e&&(this.defaults.data={}),this.image=t.extend({},this.defaultImage),this.renderImage(),this.dragger=t.extend({},this.defaultDragger),this.setData(this.defaults.data))},clear:function(){this.cropped&&(this.cropped=s,this.setData({x:0,y:0,width:0,height:0}),this.$canvas.removeClass(g),this.$dragger.addClass(m))},destroy:function(){var t=this.$element;this.ready&&(this.unbuild(),t.removeClass(m).removeData("cropper"),this.rotated&&t.attr("src",this.$original.attr("src")))},replace:function(e,i){var n,r=this,a=this.$element,o=this.element;e&&e!==this.url&&e!==a.attr("src")&&(i||(this.rotated=s,this.replaced=l),a.is("img")?(a.attr("src",e),this.load()):a.is("canvas")&&this.support.canvas&&(n=o.getContext("2d"),t('<img src="'+e+'">').one("load",function(){o.width=this.width,o.height=this.height,n.clearRect(0,0,o.width,o.height),n.drawImage(this,0,0),r.load()})))},setData:function(e,i){var n=this.cropper,l=this.dragger,s=this.image,a=this.defaults.aspectRatio;this.built&&typeof e!==h&&((e===r||t.isEmptyObject(e))&&(l=t.extend({},this.defaultDragger)),t.isPlainObject(e)&&!t.isEmptyObject(e)&&(i||(this.defaults.data=e),e=this.transformData(e),P(e.x)&&e.x<=n.width-s.left&&(l.left=e.x+s.left),P(e.y)&&e.y<=n.height-s.top&&(l.top=e.y+s.top),a?P(e.width)&&e.width<=l.maxWidth&&e.width>=l.minWidth?(l.width=e.width,l.height=l.width/a):P(e.height)&&e.height<=l.maxHeight&&e.height>=l.minHeight&&(l.height=e.height,l.width=l.height*a):(P(e.width)&&e.width<=l.maxWidth&&e.width>=l.minWidth&&(l.width=e.width),P(e.height)&&e.height<=l.maxHeight&&e.height>=l.minHeight&&(l.height=e.height))),this.dragger=l,this.renderDragger())},getData:function(t){var e=this.dragger,i=this.image,n={};return this.built&&(n={x:e.left-i.left,y:e.top-i.top,width:e.width,height:e.height},n=this.transformData(n,l,t)),n},transformData:function(e,i,n){var l=this.image.ratio,s={};return t.each(e,function(t,e){e=W(e),f.test(t)&&!isNaN(e)&&(s[t]=i?n?z(e/l):e/l:e*l)}),s},setAspectRatio:function(t){var e="auto"===t;t=W(t),(e||!isNaN(t)&&t>0)&&(this.defaults.aspectRatio=e?a:t,this.built&&(this.initDragger(),this.renderDragger()))},getImageData:function(){var e={};return this.ready&&t.each(this.image,function(t,i){p.test(t)&&(e[t]=i)}),e},getDataURL:function(e,i,n){var l,s=t("<canvas>")[0],r=this.getData(),a="";return t.isPlainObject(e)||(n=i,i=e,e={}),e=t.extend({width:r.width,height:r.height},e),this.cropped&&this.support.canvas&&(s.width=e.width,s.height=e.height,l=s.getContext("2d"),"image/jpeg"===i&&(l.fillStyle="#fff",l.fillRect(0,0,e.width,e.height)),l.drawImage(this.$clone[0],r.x,r.y,r.width,r.height,0,0,e.width,e.height),a=s.toDataURL(i,n)),a},setDragMode:function(t){var e=this.$canvas,i=this.defaults,n=s,r=s;if(this.built&&!this.disabled){switch(t){case"crop":i.dragCrop&&(n=l,e.data(c,t));break;case"move":r=l,e.data(c,t);break;default:e.removeData(c)}e.toggleClass(b,n).toggleClass(y,r)}},enable:function(){this.built&&(this.disabled=s,this.$cropper.removeClass(w))},disable:function(){this.built&&(this.disabled=l,this.$cropper.addClass(w))},rotate:function(t){var e=this.image;t=W(t)||0,this.built&&0!==t&&!this.disabled&&this.defaults.rotatable&&this.support.canvas&&(this.rotated=l,t=e.rotate=(e.rotate+t)%360,this.replace(this.getRotatedDataURL(t),!0))},getRotatedDataURL:function(e){var i=t("<canvas>")[0],n=i.getContext("2d"),l=e*Math.PI/180,s=N(e)%180,r=s>90?180-s:s,a=r*Math.PI/180,o=this.originalImage,h=o.naturalWidth,c=o.naturalHeight,u=N(h*O(a)+c*j(a)),d=N(h*j(a)+c*O(a));return i.width=u,i.height=d,n.save(),n.translate(u/2,d/2),n.rotate(l),n.drawImage(this.$original[0],-h/2,-c/2,h,c),n.restore(),i.toDataURL()},zoom:function(t){var e,i,n,l=this.image;t=W(t),this.built&&t&&!this.disabled&&this.defaults.zoomable&&(e=l.width*(1+t),i=l.height*(1+t),n=e/l._width,n>10||(1>n&&(e=l._width,i=l._height),this.setDragMode(1>=n?"crop":"move"),l.oldWidth=l.width,l.oldHeight=l.height,l.width=e,l.height=i,l.ratio=l.width/l.naturalWidth,this.renderImage("zoom")))},dblclick:function(){this.disabled||this.setDragMode(this.$canvas.hasClass(b)?"move":"crop")},wheel:function(t){var e,i=t.originalEvent,n=117.25,l=5,s=166.66665649414062,r=.1;this.disabled||(t.preventDefault(),i.deltaY?(e=i.deltaY,e=e%l===0?e/l:e%n===0?e/n:e/s):e=i.wheelDelta?-i.wheelDelta/120:i.detail?i.detail/3:0,this.zoom(e*r))},dragstart:function(e){var i,n,r,a=e.originalEvent.touches,o=e;if(!this.disabled){if(a){if(r=a.length,r>1){if(!this.defaults.zoomable||2!==r)return;o=a[1],this.startX2=o.pageX,this.startY2=o.pageY,i="zoom"}o=a[0]}if(i=i||t(o.target).data(c),d.test(i)){if(e.preventDefault(),n=t.Event(E),this.$element.trigger(n),n.isDefaultPrevented())return;this.directive=i,this.cropping=s,this.startX=o.pageX,this.startY=o.pageY,"crop"===i&&(this.cropping=l,this.$canvas.addClass(g))}}},dragmove:function(e){var i,n,l=e.originalEvent.touches,s=e;if(!this.disabled){if(l){if(n=l.length,n>1){if(!this.defaults.zoomable||2!==n)return;s=l[1],this.endX2=s.pageX,this.endY2=s.pageY}s=l[0]}if(this.directive){if(e.preventDefault(),i=t.Event(F),this.$element.trigger(i),i.isDefaultPrevented())return;this.endX=s.pageX,this.endY=s.pageY,this.dragging()}}},dragend:function(e){var i;if(!this.disabled&&this.directive){if(e.preventDefault(),i=t.Event(A),this.$element.trigger(i),i.isDefaultPrevented())return;this.cropping&&(this.cropping=s,this.$canvas.toggleClass(g,this.cropped&&this.defaults.modal)),this.directive=""}},dragging:function(){var t,e=this.directive,i=this.image,n=this.cropper,r=n.width,a=n.height,o=this.dragger,h=o.width,c=o.height,u=o.left,d=o.top,f=u+h,p=d+c,g=l,v=this.defaults,y=v.aspectRatio,b={x:this.endX-this.startX,y:this.endY-this.startY};switch(y&&(b.X=b.y*y,b.Y=b.x/y),e){case"all":u+=b.x,d+=b.y;break;case"e":if(b.x>=0&&(f>=r||y&&(0>=d||p>=a))){g=s;break}h+=b.x,y&&(c=h/y,d-=b.Y/2),0>h&&(e="w",h=0);break;case"n":if(b.y<=0&&(0>=d||y&&(0>=u||f>=r))){g=s;break}c-=b.y,d+=b.y,y&&(h=c*y,u+=b.X/2),0>c&&(e="s",c=0);break;case"w":if(b.x<=0&&(0>=u||y&&(0>=d||p>=a))){g=s;break}h-=b.x,u+=b.x,y&&(c=h/y,d+=b.Y/2),0>h&&(e="e",h=0);break;case"s":if(b.y>=0&&(p>=a||y&&(0>=u||f>=r))){g=s;break}c+=b.y,y&&(h=c*y,u-=b.X/2),0>c&&(e="n",c=0);break;case"ne":if(y){if(b.y<=0&&(0>=d||f>=r)){g=s;break}c-=b.y,d+=b.y,h=c*y}else b.x>=0?r>f?h+=b.x:b.y<=0&&0>=d&&(g=s):h+=b.x,b.y<=0?d>0&&(c-=b.y,d+=b.y):(c-=b.y,d+=b.y);0>c&&(e="sw",c=0,h=0);break;case"nw":if(y){if(b.y<=0&&(0>=d||0>=u)){g=s;break}c-=b.y,d+=b.y,h=c*y,u+=b.X}else b.x<=0?u>0?(h-=b.x,u+=b.x):b.y<=0&&0>=d&&(g=s):(h-=b.x,u+=b.x),b.y<=0?d>0&&(c-=b.y,d+=b.y):(c-=b.y,d+=b.y);0>c&&(e="se",c=0,h=0);break;case"sw":if(y){if(b.x<=0&&(0>=u||p>=a)){g=s;break}h-=b.x,u+=b.x,c=h/y}else b.x<=0?u>0?(h-=b.x,u+=b.x):b.y>=0&&p>=a&&(g=s):(h-=b.x,u+=b.x),b.y>=0?a>p&&(c+=b.y):c+=b.y;0>h&&(e="ne",c=0,h=0);break;case"se":if(y){if(b.x>=0&&(f>=r||p>=a)){g=s;break}h+=b.x,c=h/y}else b.x>=0?r>f?h+=b.x:b.y>=0&&p>=a&&(g=s):h+=b.x,b.y>=0?a>p&&(c+=b.y):c+=b.y;0>h&&(e="nw",c=0,h=0);break;case"move":i.left+=b.x,i.top+=b.y,this.renderImage("move"),g=s;break;case"zoom":v.zoomable&&(this.zoom(function(t,e,i,n,l,s){return(L(l*l+s*s)-L(i*i+n*n))/L(t*t+e*e)}(i.width,i.height,N(this.startX-this.startX2),N(this.startY-this.startY2),N(this.endX-this.endX2),N(this.endY-this.endY2))),this.endX2=this.startX2,this.endY2=this.startY2);break;case"crop":b.x&&b.y&&(t=this.$cropper.offset(),u=this.startX-t.left,d=this.startY-t.top,h=o.minWidth,c=o.minHeight,b.x>0?b.y>0?e="se":(e="ne",d-=c):b.y>0?(e="sw",u-=h):(e="nw",u-=h,d-=c),this.cropped||(this.cropped=l,this.$dragger.removeClass(m)))}g&&(o.width=h,o.height=c,o.left=u,o.top=d,this.directive=e,this.renderDragger()),this.startX=this.endX,this.startY=this.endY}},I.TEMPLATE=function(t,e){return e=e.split(","),t.replace(/\d+/g,function(t){return e[t]})}('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-dragger"><1 6="5-viewer"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,directive,data,point,cropper,class,line,dashed"),I.DEFAULTS={aspectRatio:"auto",autoCropArea:.8,data:{},done:t.noop,preview:"",multiple:s,autoCrop:l,dragCrop:l,dashed:l,modal:l,movable:l,resizable:l,zoomable:l,rotatable:l,checkImageOrigin:l,minWidth:0,minHeight:0,maxWidth:o,maxHeight:o,build:r,built:r,dragstart:r,dragmove:r,dragend:r},I.setDefaults=function(e){t.extend(I.DEFAULTS,e)},I.other=t.fn.cropper,t.fn.cropper=function(e){var i,n=[].slice.call(arguments,1);return this.each(function(){var l,s=t(this),r=s.data("cropper");r||s.data("cropper",r=new I(this,e)),"string"==typeof e&&t.isFunction(l=r[e])&&(i=l.apply(r,n))}),typeof i!==h?i:this},t.fn.cropper.Constructor=I,t.fn.cropper.setDefaults=I.setDefaults,t.fn.cropper.noConflict=function(){return t.fn.cropper=I.other,this}}),function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function l(t){return function(){return this[t].apply(this,arguments)}}function s(e,i){function n(t,e){return e.toLowerCase()}var l,s=t(e).data(),r={},a=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var o in s)i.test(o)&&(l=o.replace(a,n),r[l]=s[o]);return r}function r(e){var i={};if(p[e]||(e=e.split("-")[0],p[e])){var n=p[e];return t.each(f,function(t,e){e in n&&(i[e]=n[e])}),i}}var a=t(window),o=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,n=this.length;i<n;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.splice(0)},copy:function(){var t=new o;return t.replace(this),t}};return function(){var i=[];return i.push.apply(i,arguments),t.extend(i,e),i}}(),h=function(e,i){this.dates=new o,this.viewDate=n(),this.focusDate=null,this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(g.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};h.prototype={constructor:h,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),n=i.language;switch(p[n]||(n=n.split("-")[0],p[n]||(n=d.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate!==!1?i.multidate=Math.max(0,i.multidate):i.multidate=1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var l=g.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=g.parseDate(i.startDate,l,i.language):i.startDate=-(1/0)),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=g.parseDate(i.endDate,l,i.language):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var s=String(i.orientation).toLowerCase().split(/\s+/g),r=i.orientation.toLowerCase();if(s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else r=t.grep(s,function(t){return/^left|right$/.test(t)}),i.orientation.x=r[0]||"auto",r=t.grep(s,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i,n,l,s=0;s<t.length;s++)i=t[s][0],2===t[s].length?(n=e,l=t[s][1]):3===t[s].length&&(n=t[s][1],l=t[s][2]),i.on(l,n)},_unapplyEvents:function(t){for(var i,n,l,s=0;s<t.length;s++)i=t[s][0],2===t[s].length?(l=e,n=t[s][1]):3===t[s].length&&(l=t[s][1],n=t[s][2]),i.off(n,l)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.dates.get(-1),l=this._utc_to_local(n);this.element.trigger({type:e,date:l,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return g.formatDate(i,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date;
},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:l("setDates"),setUTCDate:l("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(i){i===e&&(i=this.o.format);var n=this.o.language;return t.map(this.dates,function(t){return g.formatDate(t,i,n)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),i=this.picker.outerHeight(),n=10,l=a.width(),s=a.height(),r=a.scrollTop(),o=parseInt(this.element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"))+10,h=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),u=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=h.left,f=h.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-u)):(this.picker.addClass("datepicker-orient-left"),h.left<0?d-=h.left-n:h.left+e>l&&(d=l-e-n));var p,g,m=this.o.orientation.y;"auto"===m&&(p=-r+h.top-i,g=r+s-(h.top+c+i),m=Math.max(p,g)===g?"top":"bottom"),this.picker.addClass("datepicker-orient-"+m),"top"===m?f+=c:f-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:f,left:d,zIndex:o})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),i=[],n=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),n=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return g.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),n?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+p[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+p[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),s=new Date;return e.getUTCFullYear()<n||e.getUTCFullYear()===n&&e.getUTCMonth()<l?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()===n&&e.getUTCMonth()>l)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===s.getFullYear()&&e.getUTCMonth()===s.getMonth()&&e.getUTCDate()===s.getDate()&&i.push("today"),this.dates.contains(e)!==-1&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),t.inArray(e.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var n,l=new Date(this.viewDate),s=l.getUTCFullYear(),r=l.getUTCMonth(),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),o=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),h=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=p[this.o.language].today||p.en.today||"",d=p[this.o.language].clear||p.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(p[this.o.language].months[r]+" "+s),this.picker.find("tfoot th.today").text(u).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(d).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var f=i(s,r-1,28),m=g.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(m),f.setUTCDate(m-(f.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(f);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,b=[];f.valueOf()<v;){if(f.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),_=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),x=new Date(Number(x=i(_.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),k=(_-x)/864e5/7+1;b.push('<td class="cw">'+k+"</td>")}if(y=this.getClassNames(f),y.push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(f));C===e?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),C.enabled===!1&&y.push("disabled"),C.classes&&(y=y.concat(C.classes.split(/\s+/))),C.tooltip&&(n=C.tooltip)}y=t.unique(y),b.push('<td class="'+y.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+f.getUTCDate()+"</td>"),f.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var M=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&M.eq(e.getUTCMonth()).addClass("active")}),(s<a||s>h)&&M.addClass("disabled"),s===a&&M.slice(0,o).addClass("disabled"),s===h&&M.slice(c+1).addClass("disabled"),b="",s=10*parseInt(s/10,10);var S=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var D,T=t.map(this.dates,function(t){return t.getUTCFullYear()}),E=-1;E<11;E++)D=["year"],E===-1?D.push("old"):10===E&&D.push("new"),t.inArray(s,T)!==-1&&D.push("active"),(s<a||s>h)&&D.push("disabled"),b+='<span class="'+D.join(" ")+'">'+s+"</span>",s+=1;S.html(b)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();var n,l,s,r=t(e.target).closest("span, td, th");if(1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=g.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var o=new Date;o=i(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var h="linked"===this.o.todayBtn?null:"view";this._setDate(o,h);break;case"clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(s=1,l=r.parent().find("span").index(r),n=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(n,l,s))):(s=1,l=0,n=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(n),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(n,l,s))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(s=parseInt(r.text(),10)||1,n=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),r.is(".old")?0===l?(l=11,n-=1):l-=1:r.is(".new")&&(11===l?(l=0,n+=1):l+=1),this._setDate(i(n,l,s)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?e!==-1?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,i){if(!t)return e;if(!i)return t;var n,l,s=new Date(t.valueOf()),r=s.getUTCDate(),a=s.getUTCMonth(),o=Math.abs(i);if(i=i>0?1:-1,1===o)l=i===-1?function(){return s.getUTCMonth()===a}:function(){return s.getUTCMonth()!==n},n=a+i,s.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var h=0;h<o;h++)s=this.moveMonth(s,i);n=s.getUTCMonth(),s.setUTCDate(r),l=function(){return n!==s.getUTCMonth()}}for(;l();)s.setUTCDate(--r),s.setUTCMonth(n);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e,i,l,s=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),e),l=this.moveYear(r,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),e),l=this.moveMonth(r,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+e),l=new Date(r),l.setUTCDate(r.getUTCDate()+e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=l,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||n(),e),l=this.moveYear(r,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||n(),e),l=this.moveMonth(r,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||n()),i.setUTCDate(i.getUTCDate()+7*e),l=new Date(r),l.setUTCDate(r.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=l,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(r),s=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker"),n=i.getUTCDate(),l=t.inArray(e.target,this.inputs),s=this.inputs.length;if(l!==-1){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(n)}),n<this.dates[l])for(;l>=0&&n<this.dates[l];)this.pickers[l--].setUTCDate(n);else if(n>this.dates[l])for(;l<s&&n>this.dates[l];)this.pickers[l++].setUTCDate(n);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var u=t.fn.datepicker;t.fn.datepicker=function(i){var n=Array.apply(null,arguments);n.shift();var l;return this.each(function(){var a=t(this),o=a.data("datepicker"),u="object"==typeof i&&i;if(!o){var f=s(this,"date"),p=t.extend({},d,f,u),g=r(p.language),m=t.extend({},d,g,f,u);if(a.is(".input-daterange")||m.inputs){var v={inputs:m.inputs||a.find("input").toArray()};a.data("datepicker",o=new c(this,t.extend(m,v)))}else a.data("datepicker",o=new h(this,m))}if("string"==typeof i&&"function"==typeof o[i]&&(l=o[i].apply(o,n),l!==e))return!1}),l!==e?l:this};var d=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"dd/mm/yyyy",keyboardNavigation:!0,language:"ptBr",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},f=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=h;var p=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"},ptBr:{days:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],daysMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],months:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,g.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(n,l,s){function r(){var t=this.slice(0,d[c].length),e=d[c].slice(0,t.length);return t===e}if(!n)return e;if(n instanceof Date)return n;"string"==typeof l&&(l=g.parseFormat(l));var a,o,c,u=/([\-+]\d+)([dmwy])/,d=n.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(n)){for(n=new Date,c=0;c<d.length;c++)switch(a=u.exec(d[c]),o=parseInt(a[1]),a[2]){case"d":n.setUTCDate(n.getUTCDate()+o);break;case"m":n=h.prototype.moveMonth.call(h.prototype,n,o);break;case"w":n.setUTCDate(n.getUTCDate()+7*o);break;case"y":n=h.prototype.moveYear.call(h.prototype,n,o)}return i(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),0,0,0)}d=n&&n.match(this.nonpunctuation)||[],n=new Date;var f,m,v={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,n=i(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);var w=l.parts.slice();if(d.length!==w.length&&(w=t(w).filter(function(e,i){return t.inArray(i,y)!==-1}).toArray()),d.length===w.length){var _;for(c=0,_=w.length;c<_;c++){if(f=parseInt(d[c],10),a=w[c],isNaN(f))switch(a){case"MM":m=t(p[s].months).filter(r),f=t.inArray(m[0],p[s].months)+1;break;case"M":m=t(p[s].monthsShort).filter(r),f=t.inArray(m[0],p[s].monthsShort)+1}v[a]=f}var x,k;for(c=0;c<y.length;c++)k=y[c],k in v&&!isNaN(v[k])&&(x=new Date(n),b[k](x,v[k]),isNaN(x)||(n=x))}return n},formatDate:function(e,i,n){if(!e)return"";"string"==typeof i&&(i=g.parseFormat(i));var l={d:e.getUTCDate(),D:p[n].daysShort[e.getUTCDay()],DD:p[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:p[n].monthsShort[e.getUTCMonth()],MM:p[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};l.dd=(l.d<10?"0":"")+l.d,l.mm=(l.m<10?"0":"")+l.m,e=[];for(var s=t.extend([],i.separators),r=0,a=i.parts.length;r<=a;r++)s.length&&e.push(s.shift()),e.push(l[i.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=g,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=u,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(t,e,i,n){var l,s=0,r=function(){var t=n.userAgent,e=/msie\s\d+/i;return 0<t.search(e)&&(t=e.exec(t).toString(),t=t.split(" ")[1],9>t)}(),a="ontouchstart"in i||0<n.msMaxTouchPoints,o=function(t){return"Number"!=typeof t&&(t=parseFloat(t)),isNaN(t)?null:t},h={init:function(n){return this.each(function(){var h=t.extend({min:null,max:null,from:null,to:null,type:"single",step:null,prefix:"",postfix:"",maxPostfix:"",hasGrid:!1,hideMinMax:!1,hideFromTo:!1,prettify:!0,disable:!1,values:null,onChange:null,onLoad:null,onFinish:null},n),c=t(this),u=this,d=!1,f=null;if(!c.data("isActive")){c.data("isActive",!0),this.pluginCount=s+=1,c.prop("value")&&(f=c.prop("value").split(";")),"single"===h.type?f&&1<f.length?("number"!=typeof h.min?h.min=parseFloat(f[0]):"number"!=typeof h.from&&(h.from=parseFloat(f[0])),"number"!=typeof h.max&&(h.max=parseFloat(f[1]))):f&&1===f.length&&"number"!=typeof h.from&&(h.from=parseFloat(f[0])):"double"===h.type&&(f&&1<f.length?("number"!=typeof h.min?h.min=parseFloat(f[0]):"number"!=typeof h.from&&(h.from=parseFloat(f[0])),"number"!=typeof h.max?h.max=parseFloat(f[1]):"number"!=typeof h.to&&(h.to=parseFloat(f[1]))):f&&1===f.length&&("number"!=typeof h.min?h.min=parseFloat(f[0]):"number"!=typeof h.from&&(h.from=parseFloat(f[0])))),"number"==typeof c.data("min")&&(h.min=parseFloat(c.data("min"))),"number"==typeof c.data("max")&&(h.max=parseFloat(c.data("max"))),"number"==typeof c.data("from")&&(h.from=parseFloat(c.data("from"))),"number"==typeof c.data("to")&&(h.to=parseFloat(c.data("to"))),c.data("step")&&(h.step=parseFloat(c.data("step"))),c.data("type")&&(h.type=c.data("type")),c.data("prefix")&&(h.prefix=c.data("prefix")),c.data("postfix")&&(h.postfix=c.data("postfix")),c.data("maxpostfix")&&(h.maxPostfix=c.data("maxpostfix")),c.data("hasgrid")&&(h.hasGrid=c.data("hasgrid")),c.data("hideminmax")&&(h.hideMinMax=c.data("hideminmax")),c.data("hidefromto")&&(h.hideFromTo=c.data("hidefromto")),c.data("prettify")&&(h.prettify=c.data("prettify")),c.data("disable")&&(h.disable=c.data("disable")),c.data("values")&&(h.values=c.data("values").split(",")),h.min=o(h.min),h.min||0===h.min||(h.min=10),h.max=o(h.max),h.max||0===h.max||(h.max=100),"[object Array]"!==Object.prototype.toString.call(h.values)&&(h.values=null),h.values&&0<h.values.length&&(h.min=0,h.max=h.values.length-1,h.step=1,d=!0),h.from=o(h.from),h.from||0===h.from||(h.from=h.min),h.to=o(h.to),h.to||0===h.to||(h.to=h.max),h.step=o(h.step),h.step||(h.step=1),h.from<h.min&&(h.from=h.min),h.from>h.max&&(h.from=h.min),h.to<h.min&&(h.to=h.max),h.to>h.max&&(h.to=h.max),"double"===h.type&&(h.from>h.to&&(h.from=h.to),h.to<h.from&&(h.to=h.from));var p=function(t){return t=t.toString(),h.prettify&&(t=t.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")),t},f='<span class="irs" id="irs-'+this.pluginCount+'"></span>';c[0].style.display="none",c.before(f);var g,m,v,y,b,w,_,x,k,C,M,S,D=c.prev(),T=t(e.body),E=t(i),F=!1,A=!1,P=!0,I={},z=0,L=0,H=0,R=0,N=0,j=0,O=0,W=0,Y=0,B=0,U=0;parseInt(h.step,10)!==parseFloat(h.step)&&(U=h.step.toString().split(".")[1],U=Math.pow(10,U.length)),this.updateData=function(e){P=!0,h=t.extend(h,e),D.find("*").off(),E.off("mouseup.irs"+u.pluginCount),T.off("mouseup.irs"+u.pluginCount),T.off("mousemove.irs"+u.pluginCount),D.html(""),q()},this.removeSlider=function(){D.find("*").off(),E.off("mouseup.irs"+u.pluginCount),T.off("mouseup.irs"+u.pluginCount),T.off("mousemove.irs"+u.pluginCount),D.html("").remove(),c.data("isActive",!1),c.show()};var q=function(){D.html('<span class="irs"><span class="irs-line"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),g=D.find(".irs"),m=g.find(".irs-min"),v=g.find(".irs-max"),y=g.find(".irs-from"),b=g.find(".irs-to"),w=g.find(".irs-single"),S=D.find(".irs-grid"),h.hideFromTo&&(y[0].style.visibility="hidden",b[0].style.visibility="hidden",w[0].style.visibility="hidden"),h.hideFromTo||(y[0].style.visibility="visible",b[0].style.visibility="visible",w[0].style.visibility="visible"),h.hideMinMax&&(m[0].style.visibility="hidden",v[0].style.visibility="hidden",H=L=0),h.hideMinMax||(m[0].style.visibility="visible",v[0].style.visibility="visible",h.values?(m.html(h.prefix+h.values[0]+h.postfix),v.html(h.prefix+h.values[h.values.length-1]+h.maxPostfix+h.postfix)):(m.html(h.prefix+p(h.min)+h.postfix),v.html(h.prefix+p(h.max)+h.maxPostfix+h.postfix)),L=m.outerWidth(),H=v.outerWidth()),V()},V=function(){"single"===h.type?(g.append('<span class="irs-slider single"></span>'),_=g.find(".single"),_.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),Z(e,t(this),null),A=F=!0,l=u.pluginCount,r&&t("*").prop("unselectable",!0)}),a&&_.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),Z(e.originalEvent.touches[0],t(this),null),A=F=!0,l=u.pluginCount})):"double"===h.type&&(g.append('<span class="irs-diapason"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),x=g.find(".from"),k=g.find(".to"),M=g.find(".irs-diapason"),G(),x.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),k.removeClass("last"),Z(e,t(this),"from"),A=F=!0,l=u.pluginCount,r&&t("*").prop("unselectable",!0)}),k.on("mousedown",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),x.removeClass("last"),Z(e,t(this),"to"),A=F=!0,l=u.pluginCount,r&&t("*").prop("unselectable",!0)}),a&&(x.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),k.removeClass("last"),Z(e.originalEvent.touches[0],t(this),"from"),A=F=!0,l=u.pluginCount}),k.on("touchstart",function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("last"),x.removeClass("last"),Z(e.originalEvent.touches[0],t(this),"to"),A=F=!0,l=u.pluginCount})),h.to===h.max&&x.addClass("last")),T.on("mouseup.irs"+u.pluginCount,function(){l===u.pluginCount&&F&&(F=A=!1,C.removeAttr("id"),C=null,"double"===h.type&&G(),Q(),r&&t("*").prop("unselectable",!1))}),T.on("mousemove.irs"+u.pluginCount,function(t){F&&(z=t.pageX,X())}),D.on("mousedown",function(){l=u.pluginCount}),D.on("mouseup",function(t){if(l===u.pluginCount&&!F&&!h.disable){t=t.pageX,P=!1,t-=D.offset().left;var e=I.fromX+(I.toX-I.fromX)/2;W=0,O=g.width()-j,Y=g.width()-j,"single"===h.type?(C=_,C.attr("id","irs-active-slider"),X(t)):"double"===h.type&&(C=t<=e?x:k,C.attr("id","irs-active-slider"),X(t),G()),C.removeAttr("id"),C=null}}),a&&(E.on("touchend",function(){F&&(F=A=!1,C.removeAttr("id"),C=null,"double"===h.type&&G(),Q())}),E.on("touchmove",function(t){F&&(z=t.originalEvent.touches[0].pageX,X())})),$(),K(),h.hasGrid&&et(),h.disable?(D.addClass("irs-disabled"),D.append('<span class="irs-disable-mask"></span>')):(D.removeClass("irs-disabled"),D.find(".irs-disable-mask").remove())},$=function(){R=g.width(),j=_?_.width():x.width(),N=R-j},Z=function(t,e,i){$(),P=!1,C=e,C.attr("id","irs-active-slider"),e=C.offset().left,B=e+(t.pageX-e)-C.position().left,"single"===h.type?O=g.width()-j:"double"===h.type&&("from"===i?(W=0,Y=parseInt(k.css("left"),10)):(W=parseInt(x.css("left"),10),Y=g.width()-j))},G=function(){var e=x.width(),i=t.data(x[0],"x")||parseInt(x[0].style.left,10)||x.position().left,n=(t.data(k[0],"x")||parseInt(k[0].style.left,10)||k.position().left)-i;M[0].style.left=i+e/2+"px",M[0].style.width=n+"px"},X=function(e){var i=z-B,i=e?e:z-B;"single"===h.type?(0>i&&(i=0),i>O&&(i=O)):"double"===h.type&&(i<W&&(i=W),i>Y&&(i=Y),G()),t.data(C[0],"x",i),Q(),e=Math.round(i),C[0].style.left=e+"px"},Q=function(){var e,i={input:c,slider:D,min:h.min,max:h.max,fromNumber:0,toNumber:0,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},n=h.max-h.min;"single"===h.type?(i.fromX=t.data(_[0],"x")||parseInt(_[0].style.left,10)||_.position().left,i.fromPers=i.fromX/N*100,e=n/100*i.fromPers+h.min,i.fromNumber=Math.round(e/h.step)*h.step,i.fromNumber<h.min&&(i.fromNumber=h.min),i.fromNumber>h.max&&(i.fromNumber=h.max),U&&(i.fromNumber=parseInt(i.fromNumber*U,10)/U),d&&(i.fromValue=h.values[i.fromNumber])):"double"===h.type&&(i.fromX=t.data(x[0],"x")||parseInt(x[0].style.left,10)||x.position().left,i.fromPers=i.fromX/N*100,e=n/100*i.fromPers+h.min,i.fromNumber=Math.round(e/h.step)*h.step,i.fromNumber<h.min&&(i.fromNumber=h.min),i.toX=t.data(k[0],"x")||parseInt(k[0].style.left,10)||k.position().left,i.toPers=i.toX/N*100,n=n/100*i.toPers+h.min,i.toNumber=Math.round(n/h.step)*h.step,i.toNumber>h.max&&(i.toNumber=h.max),U&&(i.fromNumber=parseInt(i.fromNumber*U,10)/U,i.toNumber=parseInt(i.toNumber*U,10)/U),d&&(i.fromValue=h.values[i.fromNumber],i.toValue=h.values[i.toNumber])),I=i,J()},K=function(){var e={input:c,slider:D,min:h.min,max:h.max,fromNumber:h.from,toNumber:h.to,fromPers:0,toPers:0,fromX:0,fromX_pure:0,toX:0,toX_pure:0},i=h.max-h.min;"single"===h.type?(e.fromPers=0!==i?(e.fromNumber-h.min)/i*100:0,e.fromX_pure=N/100*e.fromPers,e.fromX=Math.round(e.fromX_pure),_[0].style.left=e.fromX+"px",t.data(_[0],"x",e.fromX_pure)):"double"===h.type&&(e.fromPers=0!==i?(e.fromNumber-h.min)/i*100:0,e.fromX_pure=N/100*e.fromPers,e.fromX=Math.round(e.fromX_pure),x[0].style.left=e.fromX+"px",t.data(x[0],"x",e.fromX_pure),e.toPers=0!==i?(e.toNumber-h.min)/i*100:1,e.toX_pure=N/100*e.toPers,e.toX=Math.round(e.toX_pure),k[0].style.left=e.toX+"px",t.data(k[0],"x",e.toX_pure),G()),I=e,J()},J=function(){var t,e,i,n,l,s;s=j/2,i="","single"===h.type?(i=I.fromNumber===h.max?h.maxPostfix:"",y[0].style.display="none",b[0].style.display="none",i=d?h.prefix+h.values[I.fromNumber]+i+h.postfix:h.prefix+p(I.fromNumber)+i+h.postfix,w.html(i),l=w.outerWidth(),s=I.fromX-l/2+s,0>s&&(s=0),s>R-l&&(s=R-l),w[0].style.left=s+"px",h.hideMinMax||h.hideFromTo||(m[0].style.display=s<L?"none":"block",v[0].style.display=s+l>R-H?"none":"block"),c.attr("value",parseFloat(I.fromNumber))):"double"===h.type&&(i=I.toNumber===h.max?h.maxPostfix:"",d?(t=h.prefix+h.values[I.fromNumber]+h.postfix,e=h.prefix+h.values[I.toNumber]+i+h.postfix,i=I.fromNumber!==I.toNumber?h.prefix+h.values[I.fromNumber]+" \u2014 "+h.prefix+h.values[I.toNumber]+i+h.postfix:h.prefix+h.values[I.fromNumber]+i+h.postfix):(t=h.prefix+p(I.fromNumber)+h.postfix,e=h.prefix+p(I.toNumber)+i+h.postfix,i=I.fromNumber!==I.toNumber?h.prefix+p(I.fromNumber)+" \u2014 "+h.prefix+p(I.toNumber)+i+h.postfix:h.prefix+p(I.fromNumber)+i+h.postfix),y.html(t),b.html(e),w.html(i),t=y.outerWidth(),e=I.fromX-t/2+s,0>e&&(e=0),e>R-t&&(e=R-t),y[0].style.left=e+"px",i=b.outerWidth(),n=I.toX-i/2+s,0>n&&(n=0),n>R-i&&(n=R-i),b[0].style.left=n+"px",l=w.outerWidth(),s=I.fromX+(I.toX-I.fromX)/2-l/2+s,0>s&&(s=0),s>R-l&&(s=R-l),w[0].style.left=s+"px",e+t<n?(w[0].style.display="none",y[0].style.display="block",b[0].style.display="block"):(w[0].style.display="block",y[0].style.display="none",b[0].style.display="none"),h.hideMinMax||h.hideFromTo||(m[0].style.display=s<L||e<L?"none":"block",v[0].style.display=s+l>R-H||n+i>R-H?"none":"block"),c.attr("value",parseFloat(I.fromNumber)+";"+parseFloat(I.toNumber))),tt()},tt=function(){"function"!=typeof h.onFinish||A||P||h.onFinish.call(this,I),"function"!=typeof h.onChange||P||h.onChange.call(this,I),"function"==typeof h.onLoad&&!A&&P&&(h.onLoad.call(this,I),P=!1)},et=function(){D.addClass("irs-with-grid");var t,e="",i=0,i=0,n="";for(t=0;20>=t;t+=1)i=Math.floor(R/20*t),i>=R&&(i=R-1),n+='<span class="irs-grid-pol small" style="left: '+i+'px;"></span>';for(t=0;4>=t;t+=1)i=Math.floor(R/4*t),i>=R&&(i=R-1),n+='<span class="irs-grid-pol" style="left: '+i+'px;"></span>',U?(e=h.min+(h.max-h.min)/4*t,e=e/h.step*h.step,e=parseInt(e*U,10)/U):(e=Math.round(h.min+(h.max-h.min)/4*t),e=Math.round(e/h.step)*h.step,e=p(e)),d&&(h.hideMinMax?(e=Math.round(h.min+(h.max-h.min)/4*t),e=Math.round(e/h.step)*h.step,e=0===t||4===t?h.values[e]:""):e=""),0===t?n+='<span class="irs-grid-text" style="left: '+i+'px; text-align: left;">'+e+"</span>":4===t?(i-=100,n+='<span class="irs-grid-text" style="left: '+i+'px; text-align: right;">'+e+"</span>"):(i-=50,n+='<span class="irs-grid-text" style="left: '+i+'px;">'+e+"</span>");
S.html(n)};q()}})},update:function(t){return this.each(function(){this.updateData(t)})},remove:function(){return this.each(function(){this.removeSlider()})}};t.fn.ionRangeSlider=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist for jQuery.ionRangeSlider"):h.init.apply(this,arguments)}}(jQuery,document,window,navigator),"undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}void 0===t.support.transition&&(t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var l=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(l,e),this},t(function(){t.support.transition=e()}))}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),t(window).on("resize",t.proxy(this.recalc,this))),this.options.autohide&&t(document).on("click",t.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};e.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},e.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},e.prototype.calcPlacement=function(){function e(t,e){if("auto"===l.css(e))return t;if("auto"===l.css(t))return e;var i=parseInt(l.css(t),10),n=parseInt(l.css(e),10);return i>n?e:t}if("auto"!==this.options.placement)return void(this.placement=this.options.placement);this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var i=t(window).width()/this.$element.width(),n=t(window).height()/this.$element.height(),l=this.$element;this.placement=i>=n?e("left","right"):e("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},e.prototype.opposite=function(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},e.prototype.getCanvasElements=function(){var e=this.options.canvas?t(this.options.canvas):this.$element,i=e.find("*").filter(function(){return"fixed"===t(this).css("position")}).not(this.options.exclude);return e.add(i)},e.prototype.slide=function(e,i,n){if(!t.support.transition){var l={};return l[this.placement]="+="+i,e.animate(l,350,n)}var s=this.placement,r=this.opposite(s);e.each(function(){"auto"!==t(this).css(s)&&t(this).css(s,(parseInt(t(this).css(s),10)||0)+i),"auto"!==t(this).css(r)&&t(this).css(r,(parseInt(t(this).css(r),10)||0)-i)}),this.$element.one(t.support.transition.end,n).emulateTransitionEnd(350)},e.prototype.disableScrolling=function(){var e=t("body").width(),i="padding-"+this.opposite(this.placement);if(void 0===t("body").data("offcanvas-style")&&t("body").data("offcanvas-style",t("body").attr("style")),t("body").css("overflow","hidden"),t("body").width()>e){var n=parseInt(t("body").css(i),10)+t("body").width()-e;setTimeout(function(){t("body").css(i,n)},1)}},e.prototype.show=function(){if(!this.state){var e=t.Event("show.bs.offcanvas");if(this.$element.trigger(e),!e.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var i=this.getCanvasElements(),n=this.placement,l=this.opposite(n),s=this.offset();-1!==i.index(this.$element)&&(t(this.$element).data("offcanvas-style",t(this.$element).attr("style")||""),this.$element.css(n,-1*s),this.$element.css(n)),i.addClass("canvas-sliding").each(function(){void 0===t(this).data("offcanvas-style")&&t(this).data("offcanvas-style",t(this).attr("style")||""),"static"===t(this).css("position")&&t(this).css("position","relative"),"auto"!==t(this).css(n)&&"0px"!==t(this).css(n)||"auto"!==t(this).css(l)&&"0px"!==t(this).css(l)||t(this).css(n,0)}),this.options.disableScrolling&&this.disableScrolling();var r=function(){"slide-in"==this.state&&(this.state="slid",i.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(t.proxy(function(){this.$element.addClass("in"),this.slide(i,s,t.proxy(r,this))},this),1)}}},e.prototype.hide=function(){if("slid"===this.state){var e=t.Event("hide.bs.offcanvas");if(this.$element.trigger(e),!e.isDefaultPrevented()){this.state="slide-out";var i=t(".canvas-slid"),n=(this.placement,-1*this.offset()),l=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),i.removeClass("canvas-sliding"),i.add(this.$element).add("body").each(function(){t(this).attr("style",t(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};i.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(t.proxy(function(){this.slide(i,n,t.proxy(l,this))},this),1)}}},e.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},e.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(t("body"))},e.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var e=this.getCanvasElements();this.$element.removeClass("in"),e.removeClass("canvas-slid"),e.add(this.$element).add("body").each(function(){t(this).attr("style",t(this).data("offcanvas-style")).removeData("offcanvas-style")})}},e.prototype.autohide=function(e){0===t(e.target).closest(this.$element).length&&this.hide()};var i=t.fn.offcanvas;t.fn.offcanvas=function(i){return this.each(function(){var n=t(this),l=n.data("bs.offcanvas"),s=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);l||n.data("bs.offcanvas",l=new e(this,s)),"string"==typeof i&&l[i]()})},t.fn.offcanvas.Constructor=e,t.fn.offcanvas.noConflict=function(){return t.fn.offcanvas=i,this},t(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(e){var i,n=t(this),l=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(l),r=s.data("bs.offcanvas"),a=r?"toggle":n.data();e.stopPropagation(),r?r.toggle():s.offcanvas(a)})}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",t.proxy(this.click,this))};e.DEFAULTS={target:"a"},e.prototype.click=function(e){var i=t(e.currentTarget).closest("tr").find(this.options.target)[0];if(t(e.target)[0]!==i)if(e.preventDefault(),i.click)i.click();else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}};var i=t.fn.rowlink;t.fn.rowlink=function(i){return this.each(function(){var n=t(this),l=n.data("rowlink");l||n.data("rowlink",l=new e(this,i))})},t.fn.rowlink.Constructor=e,t.fn.rowlink.noConflict=function(){return t.fn.rowlink=i,this},t(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(e){if(0===t(e.target).closest(".rowlink-skip").length){var i=t(this);i.data("rowlink")||(i.rowlink(i.data()),t(e.target).trigger("click.bs.rowlink"))}})}(window.jQuery),+function(t){"use strict";var e=void 0!==window.orientation,i=navigator.userAgent.toLowerCase().indexOf("android")>-1,n="Microsoft Internet Explorer"==window.navigator.appName,l=function(e,n){i||(this.$element=t(e),this.options=t.extend({},l.DEFAULTS,n),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};l.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},l.prototype.init=function(){var e=this.options.definitions,i=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,t.each(this.mask.split(""),t.proxy(function(t,n){"?"==n?(i--,this.partialPosition=t):e[n]?(this.tests.push(new RegExp(e[n])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=t.map(this.mask.split(""),t.proxy(function(t){return"?"!=t?e[t]?this.options.placeholder:t:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",t.proxy(function(){return t.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},l.prototype.listen=function(){if(!this.$element.attr("readonly")){var e=(n?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",t.proxy(this.unmask,this)).on("focus.bs.inputmask",t.proxy(this.focusEvent,this)).on("blur.bs.inputmask",t.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",t.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",t.proxy(this.keypressEvent,this)).on(e,t.proxy(this.pasteEvent,this))}},l.prototype.caret=function(t,e){if(0!==this.$element.length){if("number"==typeof t)return e="number"==typeof e?e:t,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}});if(this.$element[0].setSelectionRange)t=this.$element[0].selectionStart,e=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var i=document.selection.createRange();t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length}return{begin:t,end:e}}},l.prototype.seekNext=function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},l.prototype.seekPrev=function(t){for(;--t>=0&&!this.tests[t];);return t},l.prototype.shiftL=function(t,e){var i=this.mask.length;if(!(0>t)){for(var n=t,l=this.seekNext(e);i>n;n++)if(this.tests[n]){if(!(i>l&&this.tests[n].test(this.buffer[l])))break;this.buffer[n]=this.buffer[l],this.buffer[l]=this.options.placeholder,l=this.seekNext(l)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},l.prototype.shiftR=function(t){for(var e=this.mask.length,i=t,n=this.options.placeholder;e>i;i++)if(this.tests[i]){var l=this.seekNext(i),s=this.buffer[i];if(this.buffer[i]=n,!(e>l&&this.tests[l].test(s)))break;n=s}},l.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},l.prototype.focusEvent=function(){this.focusText=this.$element.val();var t=this.mask.length,e=this.checkVal();this.writeBuffer();var i=this,n=function(){e==t?i.caret(0,e):i.caret(e)};n(),setTimeout(n,50)},l.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},l.prototype.keydownEvent=function(t){var i=t.which;if(8==i||46==i||e&&127==i){var n=this.caret(),l=n.begin,s=n.end;return s-l===0&&(l=46!=i?this.seekPrev(l):s=this.seekNext(l-1),s=46==i?this.seekNext(s):s),this.clearBuffer(l,s),this.shiftL(l,s-1),!1}return 27==i?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},l.prototype.keypressEvent=function(t){var e=this.mask.length,i=t.which,n=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>i)return!0;if(i){n.end-n.begin!==0&&(this.clearBuffer(n.begin,n.end),this.shiftL(n.begin,n.end-1));var l=this.seekNext(n.begin-1);if(e>l){var s=String.fromCharCode(i);if(this.tests[l].test(s)){this.shiftR(l),this.buffer[l]=s,this.writeBuffer();var r=this.seekNext(l);this.caret(r)}}return!1}},l.prototype.pasteEvent=function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},l.prototype.clearBuffer=function(t,e){for(var i=this.mask.length,n=t;e>n&&i>n;n++)this.tests[n]&&(this.buffer[n]=this.options.placeholder)},l.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},l.prototype.checkVal=function(t){for(var e=this.mask.length,i=this.$element.val(),n=-1,l=0,s=0;e>l;l++)if(this.tests[l]){for(this.buffer[l]=this.options.placeholder;s++<i.length;){var r=i.charAt(s-1);if(this.tests[l].test(r)){this.buffer[l]=r,n=l;break}}if(s>i.length)break}else this.buffer[l]==i.charAt(s)&&l!=this.partialPosition&&(s++,n=l);return!t&&n+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||n+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,n+1))),this.partialPosition?l:this.firstNonMaskPos};var s=t.fn.inputmask;t.fn.inputmask=function(e){return this.each(function(){var i=t(this),n=i.data("inputmask");n||i.data("inputmask",n=new l(this,e))})},t.fn.inputmask.Constructor=l,t.fn.inputmask.noConflict=function(){return t.fn.inputmask=s,this},t(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var e=t(this);e.data("inputmask")||e.inputmask(e.data())})}(window.jQuery),+function(t){"use strict";var e="Microsoft Internet Explorer"==window.navigator.appName,i=function(e,i){if(this.$element=t(e),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||i.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=t('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var n=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==n&&"none"!==n&&this.$preview.css("line-height",n),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};i.prototype.listen=function(){this.$input.on("change.bs.fileinput",t.proxy(this.change,this)),t(this.$input[0].form).on("reset.bs.fileinput",t.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",t.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",t.proxy(this.clear,this))},i.prototype.change=function(e){var i=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(e.stopPropagation(),0===i.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var n=i[0];if(this.$preview.length>0&&("undefined"!=typeof n.type?n.type.match(/^image\/(gif|png|jpeg)$/):n.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var l=new FileReader,s=this.$preview,r=this.$element;l.onload=function(e){var l=t("<img>");l[0].src=e.target.result,i[0].result=e.target.result,r.find(".fileinput-filename").text(n.name),"none"!=s.css("max-height")&&l.css("max-height",parseInt(s.css("max-height"),10)-parseInt(s.css("padding-top"),10)-parseInt(s.css("padding-bottom"),10)-parseInt(s.css("border-top"),10)-parseInt(s.css("border-bottom"),10)),s.html(l),r.addClass("fileinput-exists").removeClass("fileinput-new"),r.trigger("change.bs.fileinput",i)},l.readAsDataURL(n)}else this.$element.find(".fileinput-filename").text(n.name),this.$preview.text(n.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},i.prototype.clear=function(t){if(t&&t.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),e){var i=this.$input.clone(!0);this.$input.after(i),this.$input.remove(),this.$input=i}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==t&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},i.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},i.prototype.trigger=function(t){this.$input.trigger("click"),t.preventDefault()};var n=t.fn.fileinput;t.fn.fileinput=function(e){return this.each(function(){var n=t(this),l=n.data("fileinput");l||n.data("fileinput",l=new i(this,e)),"string"==typeof e&&l[e]()})},t.fn.fileinput.Constructor=i,t.fn.fileinput.noConflict=function(){return t.fn.fileinput=n,this},t(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var i=t(this);if(!i.data("fileinput")){i.fileinput(i.data());var n=t(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');n.length>0&&(e.preventDefault(),n.trigger("click.bs.fileinput"))}})}(window.jQuery),function(t){"use strict";var e={},i=Math.max,n=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var i=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var e=function(t,e){var n;for(n in e)i.o[n]=e[n];i._carve().init(),i._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:void 0!==this.$.data("min")?this.$.data("min"):0,max:void 0!==this.$.data("max")?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(t){return t},parse:function(t){return parseFloat(t)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var n=t(this);i.i[e]=n,i.v[e]=i.o.parse(n.val()),n.bind("change blur",function(){var t={};t[e]=n.val(),i.val(t)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){i.val(i._validate(i.o.parse(i.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=t(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var t=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),e=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(t,e)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var t=!0;i.g=i.c,i.clear(),i.dH&&(t=i.dH()),t!==!1&&i.draw()},this._touch=function(t){var n=function(t){var e=i.xy2val(t.originalEvent.touches[i.t].pageX,t.originalEvent.touches[i.t].pageY);e!=i.cv&&(i.cH&&i.cH(e)===!1||(i.change(i._validate(e)),i._draw()))};return this.t=e.c.t(t),n(t),e.c.d.bind("touchmove.k",n).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),i.val(i.cv)}),this},this._mouse=function(t){var n=function(t){var e=i.xy2val(t.pageX,t.pageY);e!=i.cv&&(i.cH&&i.cH(e)===!1||(i.change(i._validate(e)),i._draw()))};return n(t),e.c.d.bind("mousemove.k",n).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),i.eH&&i.eH()===!1)return;i.cancel()}}).bind("mouseup.k",function(){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),i.val(i.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){t.preventDefault(),i._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),i._xy()._touch(t)}),this.listen()),this.relative&&t(window).resize(function(){i._carve().init(),i._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){return~~((t<0?-.5:.5)+t/this.o.step)*this.o.step},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var i;return t=t.substring(1,7),i=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)],"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},this.copy=function(t,e){for(var i in t)e[i]=t[i]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,e){return null==t?this.v:(t=this.o.parse(t),void(e!==!1&&t!=this.v&&this.rH&&this.rH(t)===!1||(this.cv=this.o.stopper?i(n(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())))},this.xy2val=function(t,e){var l,s;return l=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(l=this.angleArc-l-this.PI2),this.angleArc!=this.PI2&&l<0&&l>-.5?l=0:l<0&&(l+=this.PI2),s=~~(.5+l*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(s=i(n(s,this.o.max),this.o.min)),s},this.listen=function(){var e,l,s,r,a=this,o=function(t){t.preventDefault();var s=t.originalEvent,r=s.detail||s.wheelDeltaX,o=s.detail||s.wheelDeltaY,h=a._validate(a.o.parse(a.$.val()))+(r>0||o>0?a.o.step:r<0||o<0?-a.o.step:0);h=i(n(h,a.o.max),a.o.min),a.val(h,!1),a.rH&&(clearTimeout(e),e=setTimeout(function(){a.rH(h),e=null},100),l||(l=setTimeout(function(){e&&a.rH(h),l=null},200)))},h=1,c={37:-a.o.step,38:a.o.step,39:a.o.step,40:-a.o.step};this.$.bind("keydown",function(e){var l=e.keyCode;if(l>=96&&l<=105&&(l=e.keyCode=l-48),s=parseInt(String.fromCharCode(l)),isNaN(s)&&(13!==l&&8!==l&&9!==l&&189!==l&&(190!==l||a.$.val().match(/\./))&&e.preventDefault(),t.inArray(l,[37,38,39,40])>-1)){e.preventDefault();var o=a.o.parse(a.$.val())+c[l]*h;a.o.stopper&&(o=i(n(o,a.o.max),a.o.min)),a.change(o),a._draw(),r=window.setTimeout(function(){h*=2},30)}}).bind("keyup",function(){isNaN(s)?r&&(window.clearTimeout(r),r=null,h=1,a.val(a.$.val())):a.$.val()>a.o.max&&a.$.val(a.o.max)||a.$.val()<a.o.min&&a.$.val(a.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",o),this.$.bind("mousewheel DOMMouseScroll",o)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=i(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var e,i;return t=this.angle(t),this.o.flip?(e=this.endAngle+1e-5,i=e-t-1e-5):(e=this.startAngle-1e-5,i=e+t+1e-5),this.o.cursor&&(e=i-this.cursorExt)&&(i+=this.cursorExt),{s:e,e:i,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t,e=this.g,i=this.arc(this.cv),n=1;e.lineWidth=this.lineWidth,e.lineCap=this.lineCap,e.beginPath(),e.strokeStyle=this.o.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),e.stroke(),this.o.displayPrevious&&(t=this.arc(this.v),e.beginPath(),e.strokeStyle=this.pColor,e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),e.stroke(),n=this.cv==this.v),e.beginPath(),e.strokeStyle=n?this.o.fgColor:this.fgColor,e.arc(this.xy,this.xy,this.radius,i.s,i.e,i.d),e.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(i){return this.each(function(){var n=new e.Dial;n.o=i,n.$=t(this),n.run()}).parent()}}(jQuery),function(t){function e(e,i){var s=!1;return t.each(e?l:n,function(e){if(t(i).hasClass(e))return s=e,!1}),s}var i=t.fn.val,n={},l={},s={};t.classVal=function(t,e,i,r){"string"==typeof t&&"boolean"==typeof r&&(e&&(n[t]=e),i&&(l[t]=i),s[t]=r)},t.fn.val=function(){var r,a,o=Array.prototype.slice.call(arguments,0);return o.length?this.each(function(){(r=e(!0,this))?(a=s[r]?t(this):this,a[l[r]].apply(this,o)):i.apply(t(this),o)}):(r=e(!1,this))?(a=s[r]?this:this[0],a[n[r]].apply(a)):i.apply(this)}}(window.jQuery||window.Zepto),function(t){function e(t,e,i){if((t[e]||t[i])&&t[e]===t[i])throw Error("(Link) '"+e+"' can't match '"+i+"'.'")}function i(i){if(void 0===i&&(i={}),"object"!=typeof i)throw Error("(Format) 'format' option must be an object.");var n={};t(l).each(function(t,e){if(void 0===i[e])n[e]=s[t];else{if(typeof i[e]!=typeof s[t])throw Error("(Format) 'format."+e+"' must be a "+typeof s[t]+".");if("decimals"===e&&(0>i[e]||7<i[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");n[e]=i[e]}}),e(n,"mark","thousand"),e(n,"prefix","negative"),e(n,"prefix","negativeBefore"),this.r=n}function n(e,i){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new n.prototype.p(e.target||function(){},e.method,e.format||{},i)}var l="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),s=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];i.prototype.a=function(t){return this.r[t]},i.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var i=this.a("decimals"),n="",l="",s="",r="";return 0===parseFloat(t.toFixed(i))&&(t="0"),0>t&&(n=this.a("negative"),l=this.a("negativeBefore")),t=Math.abs(t).toFixed(i).toString(),t=t.split("."),this.a("thousand")?(s=e(t[0]).match(/.{1,3}/g),s=e(s.join(e(this.a("thousand"))))):s=t[0],this.a("mark")&&1<t.length&&(r=this.a("mark")+t[1]),this.a("to")(l+this.a("prefix")+n+s+r+this.a("postfix"))},i.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var i;return null!==t&&void 0!==t&&(t=this.a("from")(t),t=t.toString(),i=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==i?(t=i,i="-"):i="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(i="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(i+t)),!isNaN(t)&&t)},n.prototype.K=function(e,i){this.method=i||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},n.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},n.prototype.G=function(e){function i(t,e){return[e?null:t,e?t:null]}var n=this;this.method="val",this.target=e.on("change",function(e){n.B.val(i(t(e.target).val(),n.t),{link:n,set:!0})})},n.prototype.p=function(e,i,n,l){if(this.g=n,this.update=!l,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,i);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!i){if(e.is("input, select, textarea"))return void this.G(e);i="html"}if("function"==typeof i||"string"==typeof i&&e[i])return this.method=i,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},n.prototype.write=function(t,e,i,n){this.update&&!1===n||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||i[0],t,e,i):this.target[this.method](t,e,i))},n.prototype.q=function(e){this.g=new i(t.extend({},e,this.g instanceof i?this.g.r:this.g))},n.prototype.J=function(t){this.B=t},n.prototype.I=function(t){this.t=t},n.prototype.format=function(t){return this.g.L(t)},n.prototype.A=function(t){return this.g.w(t)},n.prototype.p.prototype=n.prototype,t.Link=n}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function i(e){return t.isArray(e)?e:[e]}function n(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function l(t,e){return 100*e/(t[1]-t[0])}function s(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var i,n,s,r=1;e>=t.d[r];)r++;return i=t.d[r-1],n=t.d[r],s=t.c[r-1],i=[i,n],s+l(i,0>i[0]?e+Math.abs(i[0]):e-i[0])/(100/(t.c[r]-s))}function r(t,e){if(100<=e)return t.d.slice(-1)[0];for(var i,n,l,s=1;e>=t.c[s];)s++;return i=t.d[s-1],n=t.d[s],l=t.c[s-1],i=[i,n],100/(t.c[s]-l)*(e-l)*(i[1]-i[0])/100+i[0]}function a(t,e){for(var i,n=1;e>=t.c[n];)n++;return t.m?(i=t.c[n-1],n=t.c[n],e-i>(n-i)/2?n:i):(t.h[n-1]?(i=t.h[n-1],n=t.c[n-1]+Math.round((e-t.c[n-1])/i)*i):n=e,n)}function o(t,i){if(!e(i))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=i}function h(i,n){if("object"!=typeof n||t.isArray(n))throw Error("noUiSlider: 'range' is not an object.");t.each(n,function(n,l){var s;if("number"==typeof l&&(l=[l]),!t.isArray(l))throw Error("noUiSlider: 'range' contains invalid value.");if(s="min"===n?0:"max"===n?100:parseFloat(n),!e(s)||!e(l[0]))throw Error("noUiSlider: 'range' value isn't numeric.");i.c.push(s),i.d.push(l[0]),s?i.h.push(!isNaN(l[1])&&l[1]):isNaN(l[1])||(i.h[0]=l[1])}),t.each(i.h,function(t,e){return!e||void(i.h[t]=l([i.d[t],i.d[t+1]],e)/(100/(i.c[t+1]-i.c[t])));
})}function c(e,i){if("number"==typeof i&&(i=[i]),!t.isArray(i)||!i.length||2<i.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=i.length,e.start=i}function u(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function d(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function f(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function p(t,i){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=l(t.d,i),!e(i))throw Error("noUiSlider: 'margin' option must be numeric.")}function g(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function m(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var i=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||i,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:i}}function v(e,i,n){e.o=[i.lower,i.upper],e.g=i.format,t.each(e.o,function(e,l){if(!t.isArray(l))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(l,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.I(e),this.J(n),this.q(i.format)})}),e.dir&&1<e.b&&e.o.reverse()}function y(e,i){var n,l={c:[],d:[],h:[!1],margin:0};return n={step:{e:!1,f:o},range:{e:!0,f:h},start:{e:!0,f:c},snap:{e:!1,f:u},connect:{e:!0,f:d},orientation:{e:!1,f:f},margin:{e:!1,f:p},direction:{e:!0,f:g},behaviour:{e:!0,f:m},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(n,function(t,n){if(void 0===e[t]){if(n.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}n.f(l,e[t],i)}),l.style=l.k?"top":"left",l}function b(e,i){var n=t("<div><div/></div>").addClass(F[2]),l=["-lower","-upper"];return e.dir&&l.reverse(),n.children().addClass(F[3]+" "+F[3]+l[i]),n}function w(e,i){return i.j&&(i=new t.Link({target:t(i.j).clone().appendTo(e),method:i.method,format:i.g},!0)),i}function _(e,i){var n,l=[];for(n=0;n<e.b;n++){var s=l,r=n,a=e.o[n],o=i[n].children(),h=e.g,c=void 0,u=[],c=new t.Link({},!0);for(c.q(h),u.push(c),c=0;c<a.length;c++)u.push(w(o,a[c]));s[r]=u}return l}function x(t,e,i){switch(t){case 1:e.addClass(F[7]),i[0].addClass(F[6]);break;case 3:i[1].addClass(F[6]);case 2:i[0].addClass(F[7]);case 0:e.addClass(F[6])}}function k(t,e){var i,n=[];for(i=0;i<t.b;i++)n.push(b(t,i).appendTo(e));return n}function C(e,i){return i.addClass([F[0],F[8+e.dir],F[4+e.k]].join(" ")),t("<div/>").appendTo(i).addClass(F[1])}function M(e,l,o){function h(){return b[["width","height"][l.k]]()}function c(t){var e,i=[S.val()];for(e=0;e<t.length;e++)S.trigger(t[e],i)}function u(e,i,n){var s=e[0]!==M[0][0]?1:0,o=D[0]+l.margin,h=D[1]-l.margin;return n&&1<M.length&&(i=s?Math.max(i,o):Math.min(i,h)),100>i&&(i=a(l,i)),i=Math.max(Math.min(parseFloat(i.toFixed(7)),100),0),i===D[s]?1!==M.length&&((i===o||i===h)&&0):(e.css(l.style,i+"%"),e.is(":first-child")&&e.toggleClass(F[17],50<i),D[s]=i,l.dir&&(i=100-i),t(w[s]).each(function(){this.write(r(l,i),e.children(),S)}),!0)}function d(t,e,i){i||n(S,F[14]),u(t,e,!1),c(["slide","set","change"])}function f(t,e,i,n){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=S.attr("disabled");if(S.hasClass(F[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var s,r,e=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),h=t;0===t.type.indexOf("MSPointer")&&(o=!0),t.originalEvent&&(t=t.originalEvent),e&&(s=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY),(a||o)&&(o||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),s=t.clientX+window.pageXOffset,r=t.clientY+window.pageYOffset),h.C=[s,r],h.cursor=a,t=h,t.l=t.C[l.k],i(t,n)})}function p(t,e){var i,n=e.b||M,l=!1,l=100*(t.l-e.start)/h(),s=n[0][0]!==M[0][0]?1:0,r=e.D;i=l+r[0],l+=r[1],1<n.length?(0>i&&(l+=Math.abs(i)),100<l&&(i-=l-100),i=[Math.max(Math.min(i,100),0),Math.max(Math.min(l,100),0)]):i=[i,l],l=u(n[0],i[s],1===n.length),1<n.length&&(l=u(n[1],i[s?0:1],!1)||l),l&&c(["slide"])}function g(e){t("."+F[15]).removeClass(F[15]),e.cursor&&t("body").css("cursor","").off(".nui"),T.off(".nui"),S.removeClass(F[12]),c(["set","change"])}function m(e,i){1===i.b.length&&i.b[0].children().addClass(F[15]),e.stopPropagation(),f(E.move,T,p,{start:e.l,b:i.b,D:[D[0],D[M.length-1]]}),f(E.end,T,g,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<M.length&&S.addClass(F[12]),t("body").on("selectstart.nui",!1))}function v(e){var i=e.l,n=0;e.stopPropagation(),t.each(M,function(){n+=this.offset()[l.style]}),n=i<n/2||1===M.length?0:1,i-=b.offset()[l.style],i=100*i/h(),d(M[n],i,l.n.m),l.n.m&&m(e,{b:[M[n]]})}function y(t){var e=(t=t.l<b.offset()[l.style])?0:100;t=t?0:M.length-1,d(M[t],e,!1)}var b,w,M,S=t(e),D=[-1,-1];if(S.hasClass(F[0]))throw Error("Slider was already initialized.");b=C(l,S),M=k(l,b),w=_(l,M),x(l.i,S,M),function(t){var e;if(!t.fixed)for(e=0;e<M.length;e++)f(E.start,M[e].children(),m,{b:[M[e]]});t.s&&f(E.start,b,v,{b:M}),t.extend&&(S.addClass(F[16]),t.s&&f(E.start,S,y,{b:M})),t.v&&(e=b.find("."+F[7]).addClass(F[10]),t.fixed&&(e=e.add(b.children().not(e).children())),f(E.start,e,m,{b:M}))}(l.n),e.vSet=function(){var e,r,a,o,h,d,f=Array.prototype.slice.call(arguments,0),p=i(f[0]);for("object"==typeof f[1]?(e=f[1].set,r=f[1].link,a=f[1].update,o=f[1].animate):!0===f[1]&&(e=!0),l.dir&&1<l.b&&p.reverse(),o&&n(S,F[14]),f=1<M.length?3:1,1===p.length&&(f=1),h=0;h<f;h++)o=r||w[h%2][0],o=o.A(p[h%2]),!1!==o&&(o=s(l,o),l.dir&&(o=100-o),!0!==u(M[h%2],o,!0)&&t(w[h%2]).each(function(t){return t?void this.write(d,M[h%2].children(),S,a):(d=this.u,!0)}));return!0===e&&c(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<l.b;t++)e[t]=w[t][0].F;return 1===e.length?e[0]:l.dir?e.reverse():e},e.destroy=function(){return t.each(w,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(F.join(" ")).empty(),o},S.val(l.start)}function S(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=y(t,this);return this.each(function(){M(this,e,t)})}function D(e){return this.each(function(){var i=t(this).val(),n=this.destroy(),l=t.extend({},n,e);t(this).noUiSlider(l),n.start===l.start&&t(this).val(i)})}var T=t(document),E=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},F="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?D:S).call(this,t)},t.classVal(F[0],"vGet","vSet",!1)}(window.jQuery||window.Zepto),function(){function t(e,i,n){var l=t.resolve(e);if(null==l){n=n||e,i=i||"root";var s=new Error('Failed to require "'+n+'" from "'+i+'"');throw s.path=n,s.parent=i,s.require=!0,s}var r=t.modules[l];if(!r._resolving&&!r.exports){var a={};a.exports={},a.client=a.component=!0,r._resolving=!0,r.call(this,a.exports,t.relative(l),a),delete r._resolving,r.exports=a.exports}return r.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var i=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],n=0;n<i.length;n++){var e=i[n];if(t.modules.hasOwnProperty(e))return e;if(t.aliases.hasOwnProperty(e))return t.aliases[e]}},t.normalize=function(t,e){var i=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var n=0;n<e.length;++n)".."==e[n]?t.pop():"."!=e[n]&&""!=e[n]&&i.push(e[n]);return t.concat(i).join("/")},t.register=function(e,i){t.modules[e]=i},t.alias=function(e,i){if(!t.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');t.aliases[i]=e},t.relative=function(e){function i(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function n(i){var l=n.resolve(i);return t(l,e,i)}var l=t.normalize(e,"..");return n.resolve=function(n){var s=n.charAt(0);if("/"==s)return n.slice(1);if("."==s)return t.normalize(l,n);var r=e.split("/"),a=i(r,"deps")+1;return a||(a=0),n=r.slice(0,a+1).join("/")+"/deps/"+n},n.exists=function(e){return t.modules.hasOwnProperty(n.resolve(e))},n},t.register("abpetkov-transitionize/transitionize.js",function(t,e,i){function n(t,e){return this instanceof n?(this.element=t,this.props=e||{},void this.init()):new n(t,e)}i.exports=n,n.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},n.prototype.init=function(){var t=[];for(var e in this.props)t.push(e+" "+this.props[e]);this.element.style.transition=t.join(", "),this.isSafari()&&(this.element.style.webkitTransition=t.join(", "))}}),t.register("ftlabs-fastclick/lib/fastclick.js",function(t,e,i){function n(t){"use strict";var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return n.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return n.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return n.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return n.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return n.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return n.prototype.onTouchCancel.apply(i,arguments)},n.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var l=Node.prototype.removeEventListener;"click"===e?l.call(t,e,i.hijacked||i,n):l.call(t,e,i,n)},t.addEventListener=function(e,i,n){var l=Node.prototype.addEventListener;"click"===e?l.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):l.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}n.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},n.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},n.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},n.prototype.determineEventType=function(t){"use strict";return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},n.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},n.prototype.updateScrollParent=function(t){"use strict";var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},n.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},n.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},n.prototype.onTouchMove=function(t){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},n.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(t){"use strict";var e,i,n,l,s,r=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=t.changedTouches[0],r=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=r.tagName.toLowerCase(),"label"===n){if(e=this.findControl(r)){if(this.focus(r),this.deviceIsAndroid)return!1;r=e}}else if(this.needsFocus(r))return t.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(r),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||(l=r.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(r)||(t.preventDefault(),this.sendClick(r,t)),!1)},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onMouse=function(t){"use strict";return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},n.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},n.prototype.destroy=function(){"use strict";var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},n.notNeeded=function(t){"use strict";var e,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction},n.attach=function(t){"use strict";return new n(t)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return n}):"undefined"!=typeof i&&i.exports?(i.exports=n.attach,i.exports.FastClick=n):window.FastClick=n}),t.register("switchery/switchery.js",function(t,e,i){function n(t,e){if(!(this instanceof n))return new n(t,e);this.element=t,this.options=e||{};for(var i in r)null==this.options[i]&&(this.options[i]=r[i]);null!=this.element&&"checkbox"==this.element.type&&this.init()}var l=e("transitionize"),s=e("fastclick");i.exports=n;var r={color:"#64bd63",secondaryColor:"#dfdfdf",className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s"};n.prototype.hide=function(){this.element.style.display="none"},n.prototype.show=function(){var t=this.create();this.insertAfter(this.element,t)},n.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.switcher},n.prototype.insertAfter=function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},n.prototype.isChecked=function(){return this.element.checked},n.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled},n.prototype.setPosition=function(t){var e=this.isChecked(),i=this.switcher,n=this.jack;t&&e?e=!1:t&&!e&&(e=!0),e===!0?(this.element.checked=!0,window.getComputedStyle?n.style.left=parseInt(window.getComputedStyle(i).width)-parseInt(window.getComputedStyle(n).width)+"px":n.style.left=parseInt(i.currentStyle.width)-parseInt(n.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(n.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor="",this.setSpeed())},n.prototype.setSpeed=function(){var t={},e={left:this.options.speed.replace(/[a-z]/,"")/2+"s"};t=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},l(this.switcher,t),l(this.jack,e)},n.prototype.setAttributes=function(){var t=this.element.getAttribute("id"),e=this.element.getAttribute("name");t&&this.switcher.setAttribute("id",t),e&&this.switcher.setAttribute("name",e)},n.prototype.colorize=function(){this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 16px "+this.options.color},n.prototype.handleOnchange=function(){if("function"!=typeof Event&&document.fireEvent)this.element.fireEvent("onchange");else{var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.element.dispatchEvent(t)}},n.prototype.handleChange=function(){var t=this,e=this.element;e.addEventListener?e.addEventListener("change",function(){t.setPosition()}):e.attachEvent("onchange",function(){t.setPosition()})},n.prototype.handleClick=function(){var t=this,e=this.switcher;this.isDisabled()===!1?(s(e),e.addEventListener?e.addEventListener("click",function(){t.setPosition(!0),t.handleOnchange(t.element.checked)}):e.attachEvent("onclick",function(){t.setPosition(!0),t.handleOnchange(t.element.checked)})):(this.element.disabled=!0,this.switcher.style.opacity=this.options.disabledOpacity)},n.prototype.disableLabel=function(){for(var t=this.element.parentNode,e=document.getElementsByTagName("label"),i=null,n=0;n<e.length;n++)e[n].getAttribute("for")===this.element.id&&(i=!0);i!==!0&&"label"!==t.tagName.toLowerCase()||(t.addEventListener?t.addEventListener("click",function(t){t.preventDefault()}):t.attachEvent("onclick",function(t){t.returnValue=!1}))},n.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},n.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},n.prototype.init=function(){this.hide(),this.show(),this.setPosition(),this.setAttributes(),this.markAsSwitched(),this.disableLabel(),this.handleChange(),this.handleClick()}}),t.alias("abpetkov-transitionize/transitionize.js","switchery/deps/transitionize/transitionize.js"),t.alias("abpetkov-transitionize/transitionize.js","switchery/deps/transitionize/index.js"),t.alias("abpetkov-transitionize/transitionize.js","transitionize/index.js"),t.alias("abpetkov-transitionize/transitionize.js","abpetkov-transitionize/index.js"),t.alias("ftlabs-fastclick/lib/fastclick.js","switchery/deps/fastclick/lib/fastclick.js"),t.alias("ftlabs-fastclick/lib/fastclick.js","switchery/deps/fastclick/index.js"),t.alias("ftlabs-fastclick/lib/fastclick.js","fastclick/index.js"),t.alias("ftlabs-fastclick/lib/fastclick.js","ftlabs-fastclick/index.js"),t.alias("switchery/switchery.js","switchery/index.js"),"object"==typeof exports?module.exports=t("switchery"):"function"==typeof define&&define.amd?define(function(){return t("switchery")}):this.Switchery=t("switchery")}(),function(){var t,e,i,n,l,s={}.hasOwnProperty,r=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};n=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,l,s,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),s=t.childNodes,r=[],n=0,l=s.length;n<l;n++)i=s[n],r.push(this.add_option(i,e,t.disabled));return r},t.prototype.add_option=function(t,e,i){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,i;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}(),n.select_to_array=function(t){var e,i,l,s,r;for(i=new n,r=t.childNodes,l=0,s=r.length;l<s;l++)e=r[l],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},t.prototype.results_option_build=function(t){var e,i,n,l,s;for(e="",s=this.results_data,n=0,l=s.length;n<l;n++)i=s[n],e+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=document.createElement("li"),i.className=e.join(" "),i.style.cssText=t.style,i.setAttribute("data-option-array-index",t.array_index),i.innerHTML=t.search_text,this.outerHTML(i)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.reset_single_select_options=function(){var t,e,i,n,l;for(n=this.results_data,l=[],e=0,i=n.length;e<i;e++)t=n[e],t.selected?l.push(t.selected=!1):l.push(void 0);return l},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,i,n,l,s,r,a,o,h,c,u,d;for(this.no_results_clear(),l=0,r=this.get_search_text(),t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+t,"i"),h=new RegExp(t,"i"),d=this.results_data,c=0,u=d.length;c<u;c++)e=d[c],e.search_match=!1,s=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(s=this.results_data[e.group_array_index],0===s.active_options&&s.search_match&&(l+=1),s.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,i),e.search_match&&!e.group&&(l+=1),e.search_match?(r.length&&(a=e.search_text.search(h),o=e.search_text.substr(0,a+r.length)+"</em>"+e.search_text.substr(a+r.length),e.search_text=o.substr(0,a)+"<em>"+o.substr(a)),null!=s&&(s.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),l<1&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,n,l,s;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(n=t.replace(/\[|\]/g,"").split(" "),n.length))for(l=0,s=n.length;l<s;l++)if(i=n[l],e.test(i))return!0},t.prototype.choices_count=function(){var t,e,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,e=0,i=n.length;e<i;e++)t=n[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(n){return e.browser_is_supported()?this.each(function(){var e,l;e=t(this),l=e.data("chosen"),"destroy"===n&&l?l.destroy():l||e.data("chosen",new i(this,n))}):this}}),i=function(e){function i(){return l=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var e,i;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),
this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},i.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},i.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},i.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},i.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},i.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(e){var i;return i=t(e.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(t){var e,i,n,l,s;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),l=n+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=l)return this.search_results.scrollTop(e-n>0?e-n:0);if(i<s)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(t){return this.search_results.html(t)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},i.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length)return this.result_highlight=i,this.result_select(e),this.search_field.focus()},i.prototype.search_results_mouseover=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(i)},i.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choice_build=function(e){var i,n,l=this;return i=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):(n=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),n.bind("click.chosen",function(t){return l.choice_destroy_link_click(t)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},i.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},i.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(t){var e,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[e[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},i.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},i.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var t,e;if(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t)return this.result_do_highlight(t)},i.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,i,n,l,s,r,a,o,h;if(this.is_multiple){for(n=0,a=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],o=0,h=r.length;o<h;o++)l=r[o],s+=l+":"+this.search_field.css(l)+";";return e=t("<div />",{style:s}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(e)}.call(this);