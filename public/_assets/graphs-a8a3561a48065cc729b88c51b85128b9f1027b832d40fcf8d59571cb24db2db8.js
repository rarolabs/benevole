!function(t){t.color={},t.color.make=function(e,i,n,r){var s={};return s.r=e||0,s.g=i||0,s.b=n||0,s.a=null!=r?r:1,s.add=function(t,e){for(var i=0;i<t.length;++i)s[t.charAt(i)]+=e;return s.normalize()},s.scale=function(t,e){for(var i=0;i<t.length;++i)s[t.charAt(i)]*=e;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}return s.r=t(0,parseInt(s.r),255),s.g=t(0,parseInt(s.g),255),s.b=t(0,parseInt(s.b),255),s.a=t(0,s.a,1),s},s.clone=function(){return t.color.make(s.r,s.b,s.g,s.a)},s.normalize()},t.color.extract=function(e,i){var n;do{if(n=e.css(i).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,r=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return r(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return r(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return r(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return r(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return r(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return r(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var s=t.trim(i).toLowerCase();return"transparent"==s?r(255,255,255,0):(n=e[s]||[0,0,0],r(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,i){var n=i.children("."+e)[0];if(null==n&&(n=document.createElement("canvas"),n.className=e,t(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var r=this.context=n.getContext("2d"),s=window.devicePixelRatio||1,a=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=s/a,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function i(i,r,s,a){function o(t,e){e=[mt].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function l(){for(var i={Canvas:e},n=0;n<a.length;++n){var r=a[n];r.init(mt,i),r.options&&t.extend(!0,rt,r.options)}}function h(e){t.extend(!0,rt,e),e&&e.colors&&(rt.colors=e.colors),null==rt.xaxis.color&&(rt.xaxis.color=t.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.yaxis.color&&(rt.yaxis.color=t.color.parse(rt.grid.color).scale("a",.22).toString()),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor||rt.xaxis.color),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor||rt.yaxis.color),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=t.color.parse(rt.grid.color).scale("a",.22).toString());var n,r,s,a=i.css("font-size"),l=a?+a.replace("px",""):13,h={style:i.css("font-style"),size:Math.round(.8*l),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(s=rt.xaxes.length||1,n=0;n<s;++n)r=rt.xaxes[n],r&&!r.tickColor&&(r.tickColor=r.color),r=t.extend(!0,{},rt.xaxis,r),rt.xaxes[n]=r,r.font&&(r.font=t.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(s=rt.yaxes.length||1,n=0;n<s;++n)r=rt.yaxes[n],r&&!r.tickColor&&(r.tickColor=r.color),r=t.extend(!0,{},rt.yaxis,r),rt.yaxes[n]=r,r.font&&(r.font=t.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=t.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top",null==rt.x2axis.min&&(rt.xaxes[1].min=null),null==rt.x2axis.max&&(rt.xaxes[1].max=null)),rt.y2axis&&(rt.yaxes[1]=t.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right",null==rt.y2axis.min&&(rt.yaxes[1].min=null),null==rt.y2axis.max&&(rt.yaxes[1].max=null)),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&t.extend(!0,rt.series.lines,rt.lines),rt.points&&t.extend(!0,rt.series.points,rt.points),rt.bars&&t.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),null!=rt.highlightColor&&(rt.series.highlightColor=rt.highlightColor),n=0;n<rt.xaxes.length;++n)m(ut,n+1).options=rt.xaxes[n];for(n=0;n<rt.yaxes.length;++n)m(ct,n+1).options=rt.yaxes[n];for(var u in gt)rt.hooks[u]&&rt.hooks[u].length&&(gt[u]=gt[u].concat(rt.hooks[u]));o(gt.processOptions,[rt])}function u(t){nt=c(t),v(),y()}function c(e){for(var i=[],n=0;n<e.length;++n){var r=t.extend(!0,{},rt.series);null!=e[n].data?(r.data=e[n].data,delete e[n].data,t.extend(!0,r,e[n]),e[n].data=r.data):r.data=e[n],i.push(r)}return i}function d(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function f(){return t.grep(ut.concat(ct),function(t){return t})}function p(t){var e,i,n={};for(e=0;e<ut.length;++e)i=ut[e],i&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<ct.length;++e)i=ct[e],i&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function g(t){var e,i,n,r={};for(e=0;e<ut.length;++e)if(i=ut[e],i&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){r.left=i.p2c(t[n]);break}for(e=0;e<ct.length;++e)if(i=ct[e],i&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){r.top=i.p2c(t[n]);break}return r}function m(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==ut?"x":"y",options:t.extend(!0,{},e==ut?rt.xaxis:rt.yaxis)}),e[i-1]}function v(){var e,i=nt.length,n=-1;for(e=0;e<nt.length;++e){var r=nt[e].color;null!=r&&(i--,"number"==typeof r&&r>n&&(n=r))}i<=n&&(i=n+1);var s,a=[],o=rt.colors,l=o.length,h=0;for(e=0;e<i;e++)s=t.color.parse(o[e%l]||"#666"),e%l==0&&e&&(h=h>=0?h<.5?-h-.2:0:-h),a[e]=s.scale("rgb",1+h);var u,c=0;for(e=0;e<nt.length;++e){if(u=nt[e],null==u.color?(u.color=a[c].toString(),++c):"number"==typeof u.color&&(u.color=a[u.color].toString()),null==u.lines.show){var f,p=!0;for(f in u)if(u[f]&&u[f].show){p=!1;break}p&&(u.lines.show=!0)}null==u.lines.zero&&(u.lines.zero=!!u.lines.fill),u.xaxis=m(ut,d(u,"x")),u.yaxis=m(ct,d(u,"y"))}}function y(){function e(t,e,i){e<t.datamin&&e!=-y&&(t.datamin=e),i>t.datamax&&i!=y&&(t.datamax=i)}var i,n,r,s,a,l,h,u,c,d,p,g,m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=Number.MAX_VALUE;for(t.each(f(),function(t,e){e.datamin=m,e.datamax=v,e.used=!1}),i=0;i<nt.length;++i)a=nt[i],a.datapoints={points:[]},o(gt.processRawData,[a,a.data,a.datapoints]);for(i=0;i<nt.length;++i){if(a=nt[i],p=a.data,g=a.datapoints.format,!g){if(g=[],g.push({x:!0,number:!0,required:!0}),g.push({y:!0,number:!0,required:!0}),a.bars.show||a.lines.show&&a.lines.fill){var b=!!(a.bars.show&&a.bars.zero||a.lines.show&&a.lines.zero);g.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:b}),a.bars.horizontal&&(delete g[g.length-1].y,g[g.length-1].x=!0)}a.datapoints.format=g}if(null==a.datapoints.pointsize){a.datapoints.pointsize=g.length,h=a.datapoints.pointsize,l=a.datapoints.points;var x=a.lines.show&&a.lines.steps;for(a.xaxis.used=a.yaxis.used=!0,n=r=0;n<p.length;++n,r+=h){d=p[n];var w=null==d;if(!w)for(s=0;s<h;++s)u=d[s],c=g[s],c&&(c.number&&null!=u&&(u=+u,isNaN(u)?u=null:u==1/0?u=y:u==-(1/0)&&(u=-y)),null==u&&(c.required&&(w=!0),null!=c.defaultValue&&(u=c.defaultValue))),l[r+s]=u;if(w)for(s=0;s<h;++s)u=l[r+s],null!=u&&(c=g[s],c.autoscale!==!1&&(c.x&&e(a.xaxis,u,u),c.y&&e(a.yaxis,u,u))),l[r+s]=null;else if(x&&r>0&&null!=l[r-h]&&l[r-h]!=l[r]&&l[r-h+1]!=l[r+1]){for(s=0;s<h;++s)l[r+h+s]=l[r+s];l[r+1]=l[r-h+1],r+=h}}}}for(i=0;i<nt.length;++i)a=nt[i],o(gt.processDatapoints,[a,a.datapoints]);for(i=0;i<nt.length;++i){a=nt[i],l=a.datapoints.points,h=a.datapoints.pointsize,g=a.datapoints.format;var _=m,k=m,C=v,M=v;for(n=0;n<l.length;n+=h)if(null!=l[n])for(s=0;s<h;++s)u=l[n+s],c=g[s],c&&c.autoscale!==!1&&u!=y&&u!=-y&&(c.x&&(u<_&&(_=u),u>C&&(C=u)),c.y&&(u<k&&(k=u),u>M&&(M=u)));if(a.bars.show){var S;switch(a.bars.align){case"left":S=0;break;case"right":S=-a.bars.barWidth;break;default:S=-a.bars.barWidth/2}a.bars.horizontal?(k+=S,M+=S+a.bars.barWidth):(_+=S,C+=S+a.bars.barWidth)}e(a.xaxis,_,C),e(a.yaxis,k,M)}t.each(f(),function(t,e){e.datamin==m&&(e.datamin=null),e.datamax==v&&(e.datamax=null)})}function b(){i.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==i.css("position")&&i.css("position","relative"),st=new e("flot-base",i),at=new e("flot-overlay",i),lt=st.context,ht=at.context,ot=t(at.element).unbind();var n=i.data("plot");n&&(n.shutdown(),at.clear()),i.data("plot",mt)}function x(){rt.grid.hoverable&&(ot.mousemove(U),ot.bind("mouseleave",V)),rt.grid.clickable&&ot.click(G),o(gt.bindEvents,[ot])}function w(){yt&&clearTimeout(yt),ot.unbind("mousemove",U),ot.unbind("mouseleave",V),ot.unbind("click",G),o(gt.shutdown,[ot])}function _(t){function e(t){return t}var i,n,r=t.options.transform||e,s=t.options.inverseTransform;"x"==t.direction?(i=t.scale=ft/Math.abs(r(t.max)-r(t.min)),n=Math.min(r(t.max),r(t.min))):(i=t.scale=pt/Math.abs(r(t.max)-r(t.min)),i=-i,n=Math.max(r(t.max),r(t.min))),r==e?t.p2c=function(t){return(t-n)*i}:t.p2c=function(t){return(r(t)-n)*i},s?t.c2p=function(t){return s(n+t/i)}:t.c2p=function(t){return n+t/i}}function k(t){for(var e=t.options,i=t.ticks||[],n=e.labelWidth||0,r=e.labelHeight||0,s=n||("x"==t.direction?Math.floor(st.width/(i.length||1)):null),a=t.direction+"Axis "+t.direction+t.n+"Axis",o="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+a,l=e.font||"flot-tick-label tickLabel",h=0;h<i.length;++h){var u=i[h];if(u.label){var c=st.getTextInfo(o,u.label,l,null,s);n=Math.max(n,c.width),r=Math.max(r,c.height)}}t.labelWidth=e.labelWidth||n,t.labelHeight=e.labelHeight||r}function C(e){var i=e.labelWidth,n=e.labelHeight,r=e.options.position,s="x"===e.direction,a=e.options.tickLength,o=rt.grid.axisMargin,l=rt.grid.labelMargin,h=!0,u=!0,c=!0,d=!1;t.each(s?ut:ct,function(t,i){i&&(i.show||i.reserveSpace)&&(i===e?d=!0:i.options.position===r&&(d?u=!1:h=!1),d||(c=!1))}),u&&(o=0),null==a&&(a=c?"full":5),isNaN(+a)||(l+=+a),s?(n+=l,"bottom"==r?(dt.bottom+=n+o,e.box={top:st.height-dt.bottom,height:n}):(e.box={top:dt.top+o,height:n},dt.top+=n+o)):(i+=l,"left"==r?(e.box={left:dt.left+o,width:i},dt.left+=i+o):(dt.right+=i+o,e.box={left:st.width-dt.right,width:i})),e.position=r,e.tickLength=a,e.box.padding=l,e.innermost=h}function M(t){"x"==t.direction?(t.box.left=dt.left-t.labelWidth/2,t.box.width=st.width-dt.left-dt.right+t.labelWidth):(t.box.top=dt.top-t.labelHeight/2,t.box.height=st.height-dt.bottom-dt.top+t.labelHeight)}function S(){var e,i=rt.grid.minBorderMargin;if(null==i)for(i=0,e=0;e<nt.length;++e)i=Math.max(i,2*(nt[e].points.radius+nt[e].points.lineWidth/2));var n={left:i,right:i,top:i,bottom:i};t.each(f(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(n.left=Math.max(n.left,e.labelWidth/2),n.right=Math.max(n.right,e.labelWidth/2)):(n.bottom=Math.max(n.bottom,e.labelHeight/2),n.top=Math.max(n.top,e.labelHeight/2)))}),dt.left=Math.ceil(Math.max(n.left,dt.left)),dt.right=Math.ceil(Math.max(n.right,dt.right)),dt.top=Math.ceil(Math.max(n.top,dt.top)),dt.bottom=Math.ceil(Math.max(n.bottom,dt.bottom))}function T(){var e,i=f(),n=rt.grid.show;for(var r in dt){var s=rt.grid.margin||0;dt[r]="number"==typeof s?s:s[r]||0}o(gt.processOffset,[dt]);for(var r in dt)"object"==typeof rt.grid.borderWidth?dt[r]+=n?rt.grid.borderWidth[r]:0:dt[r]+=n?rt.grid.borderWidth:0;if(t.each(i,function(t,e){var i=e.options;e.show=null==i.show?e.used:i.show,e.reserveSpace=null==i.reserveSpace?e.show:i.reserveSpace,D(e)}),n){var a=t.grep(i,function(t){return t.show||t.reserveSpace});for(t.each(a,function(t,e){E(e),P(e),A(e,e.ticks),k(e)}),e=a.length-1;e>=0;--e)C(a[e]);S(),t.each(a,function(t,e){M(e)})}ft=st.width-dt.left-dt.right,pt=st.height-dt.bottom-dt.top,t.each(i,function(t,e){_(e)}),n&&R(),Y()}function D(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),r=n-i;if(0==r){var s=0==n?1:.01;null==e.min&&(i-=s),null!=e.max&&null==e.min||(n+=s)}else{var a=e.autoscaleMargin;null!=a&&(null==e.min&&(i-=r*a,i<0&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(n+=r*a,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=i,t.max=n}function E(e){var i,r=e.options;i="number"==typeof r.ticks&&r.ticks>0?r.ticks:.3*Math.sqrt("x"==e.direction?st.width:st.height);var s=(e.max-e.min)/i,a=-Math.floor(Math.log(s)/Math.LN10),o=r.tickDecimals;null!=o&&a>o&&(a=o);var l,h=Math.pow(10,-a),u=s/h;if(u<1.5?l=1:u<3?(l=2,u>2.25&&(null==o||a+1<=o)&&(l=2.5,++a)):l=u<7.5?5:10,l*=h,null!=r.minTickSize&&l<r.minTickSize&&(l=r.minTickSize),e.delta=s,e.tickDecimals=Math.max(0,null!=o?o:a),e.tickSize=r.tickSize||l,"time"==r.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(e.tickGenerator||(e.tickGenerator=function(t){var e,i=[],r=n(t.min,t.tickSize),s=0,a=Number.NaN;do e=a,a=r+s*t.tickSize,i.push(a),++s;while(a<t.max&&a!=e);return i},e.tickFormatter=function(t,e){var i=e.tickDecimals?Math.pow(10,e.tickDecimals):1,n=""+Math.round(t*i)/i;if(null!=e.tickDecimals){var r=n.indexOf("."),s=r==-1?0:n.length-r-1;if(s<e.tickDecimals)return(s?n:n+".")+(""+i).substr(1,e.tickDecimals-s)}return n}),t.isFunction(r.tickFormatter)&&(e.tickFormatter=function(t,e){return""+r.tickFormatter(t,e)}),null!=r.alignTicksWithAxis){var c=("x"==e.direction?ut:ct)[r.alignTicksWithAxis-1];if(c&&c.used&&c!=e){var d=e.tickGenerator(e);if(d.length>0&&(null==r.min&&(e.min=Math.min(e.min,d[0])),null==r.max&&d.length>1&&(e.max=Math.max(e.max,d[d.length-1]))),e.tickGenerator=function(t){var e,i,n=[];for(i=0;i<c.ticks.length;++i)e=(c.ticks[i].v-c.min)/(c.max-c.min),e=t.min+e*(t.max-t.min),n.push(e);return n},!e.mode&&null==r.tickDecimals){var f=Math.max(0,-Math.floor(Math.log(e.delta)/Math.LN10)+1),p=e.tickGenerator(e);p.length>1&&/\..*0$/.test((p[1]-p[0]).toFixed(f))||(e.tickDecimals=f)}}}}function P(e){var i=e.options.ticks,n=[];null==i||"number"==typeof i&&i>0?n=e.tickGenerator(e):i&&(n=t.isFunction(i)?i(e):i);var r,s;for(e.ticks=[],r=0;r<n.length;++r){var a=null,o=n[r];"object"==typeof o?(s=+o[0],o.length>1&&(a=o[1])):s=+o,null==a&&(a=e.tickFormatter(s,e)),isNaN(s)||e.ticks.push({v:s,label:a})}}function A(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function F(){st.clear(),o(gt.drawBackground,[lt]);var t=rt.grid;t.show&&t.backgroundColor&&z(),t.show&&!t.aboveData&&L();for(var e=0;e<nt.length;++e)o(gt.drawSeries,[lt,nt[e]]),N(nt[e]);o(gt.draw,[lt]),t.show&&t.aboveData&&L(),st.render(),X()}function I(t,e){for(var i,n,r,s,a=f(),o=0;o<a.length;++o)if(i=a[o],i.direction==e&&(s=e+i.n+"axis",t[s]||1!=i.n||(s=e+"axis"),t[s])){n=t[s].from,r=t[s].to;break}if(t[s]||(i="x"==e?ut[0]:ct[0],n=t[e+"1"],r=t[e+"2"]),null!=n&&null!=r&&n>r){var l=n;n=r,r=l}return{from:n,to:r,axis:i}}function z(){lt.save(),lt.translate(dt.left,dt.top),lt.fillStyle=it(rt.grid.backgroundColor,pt,0,"rgba(255, 255, 255, 0)"),lt.fillRect(0,0,ft,pt),lt.restore()}function L(){var e,i,n,r;lt.save(),lt.translate(dt.left,dt.top);var s=rt.grid.markings;if(s)for(t.isFunction(s)&&(i=mt.getAxes(),i.xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,s=s(i)),e=0;e<s.length;++e){var a=s[e],o=I(a,"x"),l=I(a,"y");if(null==o.from&&(o.from=o.axis.min),null==o.to&&(o.to=o.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(o.to<o.axis.min||o.from>o.axis.max||l.to<l.axis.min||l.from>l.axis.max)){o.from=Math.max(o.from,o.axis.min),o.to=Math.min(o.to,o.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var h=o.from===o.to,u=l.from===l.to;if(!h||!u)if(o.from=Math.floor(o.axis.p2c(o.from)),o.to=Math.floor(o.axis.p2c(o.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),h||u){var c=a.lineWidth||rt.grid.markingsLineWidth,d=c%2?.5:0;lt.beginPath(),lt.strokeStyle=a.color||rt.grid.markingsColor,lt.lineWidth=c,h?(lt.moveTo(o.to+d,l.from),lt.lineTo(o.to+d,l.to)):(lt.moveTo(o.from,l.to+d),lt.lineTo(o.to,l.to+d)),lt.stroke()}else lt.fillStyle=a.color||rt.grid.markingsColor,lt.fillRect(o.from,l.to,o.to-o.from,l.from-l.to)}}i=f(),n=rt.grid.borderWidth;for(var p=0;p<i.length;++p){var g,m,v,y,b=i[p],x=b.box,w=b.tickLength;if(b.show&&0!=b.ticks.length){for(lt.lineWidth=1,"x"==b.direction?(g=0,m="full"==w?"top"==b.position?0:pt:x.top-dt.top+("top"==b.position?x.height:0)):(m=0,g="full"==w?"left"==b.position?0:ft:x.left-dt.left+("left"==b.position?x.width:0)),b.innermost||(lt.strokeStyle=b.options.color,lt.beginPath(),v=y=0,"x"==b.direction?v=ft+1:y=pt+1,1==lt.lineWidth&&("x"==b.direction?m=Math.floor(m)+.5:g=Math.floor(g)+.5),lt.moveTo(g,m),lt.lineTo(g+v,m+y),lt.stroke()),lt.strokeStyle=b.options.tickColor,lt.beginPath(),e=0;e<b.ticks.length;++e){var _=b.ticks[e].v;v=y=0,isNaN(_)||_<b.min||_>b.max||"full"==w&&("object"==typeof n&&n[b.position]>0||n>0)&&(_==b.min||_==b.max)||("x"==b.direction?(g=b.p2c(_),y="full"==w?-pt:w,"top"==b.position&&(y=-y)):(m=b.p2c(_),v="full"==w?-ft:w,"left"==b.position&&(v=-v)),1==lt.lineWidth&&("x"==b.direction?g=Math.floor(g)+.5:m=Math.floor(m)+.5),lt.moveTo(g,m),lt.lineTo(g+v,m+y))}lt.stroke()}}n&&(r=rt.grid.borderColor,"object"==typeof n||"object"==typeof r?("object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!=typeof r&&(r={top:r,right:r,bottom:r,left:r}),n.top>0&&(lt.strokeStyle=r.top,lt.lineWidth=n.top,lt.beginPath(),lt.moveTo(0-n.left,0-n.top/2),lt.lineTo(ft,0-n.top/2),lt.stroke()),n.right>0&&(lt.strokeStyle=r.right,lt.lineWidth=n.right,lt.beginPath(),lt.moveTo(ft+n.right/2,0-n.top),lt.lineTo(ft+n.right/2,pt),lt.stroke()),n.bottom>0&&(lt.strokeStyle=r.bottom,lt.lineWidth=n.bottom,lt.beginPath(),lt.moveTo(ft+n.right,pt+n.bottom/2),lt.lineTo(0,pt+n.bottom/2),lt.stroke()),n.left>0&&(lt.strokeStyle=r.left,lt.lineWidth=n.left,lt.beginPath(),lt.moveTo(0-n.left/2,pt+n.bottom),lt.lineTo(0-n.left/2,0),lt.stroke())):(lt.lineWidth=n,lt.strokeStyle=rt.grid.borderColor,lt.strokeRect(-n/2,-n/2,ft+n,pt+n))),lt.restore()}function R(){t.each(f(),function(t,e){var i,n,r,s,a,o=e.box,l=e.direction+"Axis "+e.direction+e.n+"Axis",h="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+l,u=e.options.font||"flot-tick-label tickLabel";if(st.removeText(h),e.show&&0!=e.ticks.length)for(var c=0;c<e.ticks.length;++c)i=e.ticks[c],!i.label||i.v<e.min||i.v>e.max||("x"==e.direction?(s="center",n=dt.left+e.p2c(i.v),"bottom"==e.position?r=o.top+o.padding:(r=o.top+o.height-o.padding,a="bottom")):(a="middle",r=dt.top+e.p2c(i.v),"left"==e.position?(n=o.left+o.width-o.padding,s="right"):n=o.left+o.padding),st.addText(h,n,r,i.label,u,null,null,s,a))})}function N(t){t.lines.show&&H(t),t.bars.show&&j(t),t.points.show&&O(t)}function H(t){function e(t,e,i,n,r){var s=t.points,a=t.pointsize,o=null,l=null;lt.beginPath();for(var h=a;h<s.length;h+=a){var u=s[h-a],c=s[h-a+1],d=s[h],f=s[h+1];if(null!=u&&null!=d){if(c<=f&&c<r.min){if(f<r.min)continue;u=(r.min-c)/(f-c)*(d-u)+u,c=r.min}else if(f<=c&&f<r.min){if(c<r.min)continue;d=(r.min-c)/(f-c)*(d-u)+u,f=r.min}if(c>=f&&c>r.max){if(f>r.max)continue;u=(r.max-c)/(f-c)*(d-u)+u,c=r.max}else if(f>=c&&f>r.max){if(c>r.max)continue;d=(r.max-c)/(f-c)*(d-u)+u,f=r.max}if(u<=d&&u<n.min){if(d<n.min)continue;c=(n.min-u)/(d-u)*(f-c)+c,u=n.min}else if(d<=u&&d<n.min){if(u<n.min)continue;f=(n.min-u)/(d-u)*(f-c)+c,d=n.min}if(u>=d&&u>n.max){if(d>n.max)continue;c=(n.max-u)/(d-u)*(f-c)+c,u=n.max}else if(d>=u&&d>n.max){if(u>n.max)continue;f=(n.max-u)/(d-u)*(f-c)+c,d=n.max}u==o&&c==l||lt.moveTo(n.p2c(u)+e,r.p2c(c)+i),o=d,l=f,lt.lineTo(n.p2c(d)+e,r.p2c(f)+i)}}lt.stroke()}function i(t,e,i){for(var n=t.points,r=t.pointsize,s=Math.min(Math.max(0,i.min),i.max),a=0,o=!1,l=1,h=0,u=0;;){if(r>0&&a>n.length+r)break;a+=r;var c=n[a-r],d=n[a-r+l],f=n[a],p=n[a+l];if(o){if(r>0&&null!=c&&null==f){u=a,r=-r,l=2;continue}if(r<0&&a==h+r){lt.fill(),o=!1,r=-r,l=1,a=h=u+r;continue}}if(null!=c&&null!=f){if(c<=f&&c<e.min){if(f<e.min)continue;d=(e.min-c)/(f-c)*(p-d)+d,c=e.min}else if(f<=c&&f<e.min){if(c<e.min)continue;p=(e.min-c)/(f-c)*(p-d)+d,f=e.min}if(c>=f&&c>e.max){if(f>e.max)continue;d=(e.max-c)/(f-c)*(p-d)+d,c=e.max}else if(f>=c&&f>e.max){if(c>e.max)continue;p=(e.max-c)/(f-c)*(p-d)+d,f=e.max}if(o||(lt.beginPath(),lt.moveTo(e.p2c(c),i.p2c(s)),o=!0),d>=i.max&&p>=i.max)lt.lineTo(e.p2c(c),i.p2c(i.max)),lt.lineTo(e.p2c(f),i.p2c(i.max));else if(d<=i.min&&p<=i.min)lt.lineTo(e.p2c(c),i.p2c(i.min)),lt.lineTo(e.p2c(f),i.p2c(i.min));else{var g=c,m=f;d<=p&&d<i.min&&p>=i.min?(c=(i.min-d)/(p-d)*(f-c)+c,d=i.min):p<=d&&p<i.min&&d>=i.min&&(f=(i.min-d)/(p-d)*(f-c)+c,p=i.min),d>=p&&d>i.max&&p<=i.max?(c=(i.max-d)/(p-d)*(f-c)+c,d=i.max):p>=d&&p>i.max&&d<=i.max&&(f=(i.max-d)/(p-d)*(f-c)+c,p=i.max),c!=g&&lt.lineTo(e.p2c(g),i.p2c(d)),lt.lineTo(e.p2c(c),i.p2c(d)),lt.lineTo(e.p2c(f),i.p2c(p)),f!=m&&(lt.lineTo(e.p2c(f),i.p2c(p)),lt.lineTo(e.p2c(m),i.p2c(p)))}}}}lt.save(),lt.translate(dt.left,dt.top),lt.lineJoin="round";var n=t.lines.lineWidth,r=t.shadowSize;if(n>0&&r>0){lt.lineWidth=r,lt.strokeStyle="rgba(0,0,0,0.1)";var s=Math.PI/18;e(t.datapoints,Math.sin(s)*(n/2+r/2),Math.cos(s)*(n/2+r/2),t.xaxis,t.yaxis),lt.lineWidth=r/2,e(t.datapoints,Math.sin(s)*(n/2+r/4),Math.cos(s)*(n/2+r/4),t.xaxis,t.yaxis)}lt.lineWidth=n,lt.strokeStyle=t.color;var a=B(t.lines,t.color,0,pt);a&&(lt.fillStyle=a,i(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),lt.restore()}function O(t){function e(t,e,i,n,r,s,a,o){for(var l=t.points,h=t.pointsize,u=0;u<l.length;u+=h){var c=l[u],d=l[u+1];null==c||c<s.min||c>s.max||d<a.min||d>a.max||(lt.beginPath(),c=s.p2c(c),d=a.p2c(d)+n,"circle"==o?lt.arc(c,d,e,0,r?Math.PI:2*Math.PI,!1):o(lt,c,d,e,r),lt.closePath(),i&&(lt.fillStyle=i,lt.fill()),lt.stroke())}}lt.save(),lt.translate(dt.left,dt.top);var i=t.points.lineWidth,n=t.shadowSize,r=t.points.radius,s=t.points.symbol;if(0==i&&(i=1e-4),i>0&&n>0){var a=n/2;lt.lineWidth=a,lt.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,r,null,a+a/2,!0,t.xaxis,t.yaxis,s),lt.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,r,null,a/2,!0,t.xaxis,t.yaxis,s)}lt.lineWidth=i,lt.strokeStyle=t.color,e(t.datapoints,r,B(t.points,t.color),0,!1,t.xaxis,t.yaxis,s),lt.restore()}function W(t,e,i,n,r,s,a,o,l,h,u){var c,d,f,p,g,m,v,y,b;h?(y=m=v=!0,g=!1,c=i,d=t,p=e+n,f=e+r,d<c&&(b=d,d=c,c=b,g=!0,m=!1)):(g=m=v=!0,y=!1,c=t+n,d=t+r,f=i,p=e,p<f&&(b=p,p=f,f=b,y=!0,v=!1)),d<a.min||c>a.max||p<o.min||f>o.max||(c<a.min&&(c=a.min,g=!1),d>a.max&&(d=a.max,m=!1),f<o.min&&(f=o.min,y=!1),p>o.max&&(p=o.max,v=!1),c=a.p2c(c),f=o.p2c(f),d=a.p2c(d),p=o.p2c(p),s&&(l.fillStyle=s(f,p),l.fillRect(c,p,d-c,f-p)),u>0&&(g||m||v||y)&&(l.beginPath(),l.moveTo(c,f),g?l.lineTo(c,p):l.moveTo(c,p),v?l.lineTo(d,p):l.moveTo(d,p),m?l.lineTo(d,f):l.moveTo(d,f),y?l.lineTo(c,f):l.moveTo(c,f),l.stroke()))}function j(t){function e(e,i,n,r,s,a){for(var o=e.points,l=e.pointsize,h=0;h<o.length;h+=l)null!=o[h]&&W(o[h],o[h+1],o[h+2],i,n,r,s,a,lt,t.bars.horizontal,t.bars.lineWidth)}lt.save(),lt.translate(dt.left,dt.top),lt.lineWidth=t.bars.lineWidth,lt.strokeStyle=t.color;var i;switch(t.bars.align){case"left":i=0;break;case"right":i=-t.bars.barWidth;break;default:i=-t.bars.barWidth/2}var n=t.bars.fill?function(e,i){return B(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,n,t.xaxis,t.yaxis),lt.restore()}function B(e,i,n,r){var s=e.fill;if(!s)return null;if(e.fillColor)return it(e.fillColor,n,r,i);var a=t.color.parse(i);return a.a="number"==typeof s?s:.4,a.normalize(),a.toString()}function Y(){if(null!=rt.legend.container?t(rt.legend.container).html(""):i.find(".legend").remove(),rt.legend.show){for(var e,n,r=[],s=[],a=!1,o=rt.legend.labelFormatter,l=0;l<nt.length;++l)e=nt[l],e.label&&(n=o?o(e.label,e):e.label,n&&s.push({label:n,color:e.color}));if(rt.legend.sorted)if(t.isFunction(rt.legend.sorted))s.sort(rt.legend.sorted);else if("reverse"==rt.legend.sorted)s.reverse();else{var h="descending"!=rt.legend.sorted;s.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=h?1:-1})}for(var l=0;l<s.length;++l){var u=s[l];l%rt.legend.noColumns==0&&(a&&r.push("</tr>"),r.push("<tr>"),a=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+u.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+u.label+"</td>")}if(a&&r.push("</tr>"),0!=r.length){var c='<table style="font-size:smaller;color:'+rt.grid.color+'">'+r.join("")+"</table>";if(null!=rt.legend.container)t(rt.legend.container).html(c);else{var d="",f=rt.legend.position,p=rt.legend.margin;null==p[0]&&(p=[p,p]),"n"==f.charAt(0)?d+="top:"+(p[1]+dt.top)+"px;":"s"==f.charAt(0)&&(d+="bottom:"+(p[1]+dt.bottom)+"px;"),"e"==f.charAt(1)?d+="right:"+(p[0]+dt.right)+"px;":"w"==f.charAt(1)&&(d+="left:"+(p[0]+dt.left)+"px;");var g=t('<div class="legend">'+c.replace('style="','style="position:absolute;'+d+";")+"</div>").appendTo(i);if(0!=rt.legend.backgroundOpacity){var m=rt.legend.backgroundColor;null==m&&(m=rt.grid.backgroundColor,m=m&&"string"==typeof m?t.color.parse(m):t.color.extract(g,"background-color"),m.a=1,m=m.toString());var v=g.children();t('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+d+"background-color:"+m+';"> </div>').prependTo(g).css("opacity",rt.legend.backgroundOpacity)}}}}}function q(t,e,i){var n,r,s,a=rt.grid.mouseActiveRadius,o=a*a+1,l=null;for(n=nt.length-1;n>=0;--n)if(i(nt[n])){var h=nt[n],u=h.xaxis,c=h.yaxis,d=h.datapoints.points,f=u.c2p(t),p=c.c2p(e),g=a/u.scale,m=a/c.scale;if(s=h.datapoints.pointsize,u.options.inverseTransform&&(g=Number.MAX_VALUE),c.options.inverseTransform&&(m=Number.MAX_VALUE),h.lines.show||h.points.show)for(r=0;r<d.length;r+=s){var v=d[r],y=d[r+1];if(null!=v&&!(v-f>g||v-f<-g||y-p>m||y-p<-m)){var b=Math.abs(u.p2c(v)-t),x=Math.abs(c.p2c(y)-e),w=b*b+x*x;w<o&&(o=w,l=[n,r/s])}}if(h.bars.show&&!l){var _,k;switch(h.bars.align){case"left":_=0;break;case"right":_=-h.bars.barWidth;break;default:_=-h.bars.barWidth/2}for(k=_+h.bars.barWidth,r=0;r<d.length;r+=s){var v=d[r],y=d[r+1],C=d[r+2];null!=v&&(nt[n].bars.horizontal?f<=Math.max(C,v)&&f>=Math.min(C,v)&&p>=y+_&&p<=y+k:f>=v+_&&f<=v+k&&p>=Math.min(C,y)&&p<=Math.max(C,y))&&(l=[n,r/s])}}}return l?(n=l[0],r=l[1],s=nt[n].datapoints.pointsize,{datapoint:nt[n].datapoints.points.slice(r*s,(r+1)*s),dataIndex:r,series:nt[n],seriesIndex:n}):null}function U(t){rt.grid.hoverable&&$("plothover",t,function(t){return 0!=t.hoverable})}function V(t){rt.grid.hoverable&&$("plothover",t,function(){return!1})}function G(t){$("plotclick",t,function(t){return 0!=t.clickable})}function $(t,e,n){var r=ot.offset(),s=e.pageX-r.left-dt.left,a=e.pageY-r.top-dt.top,o=p({left:s,top:a});o.pageX=e.pageX,o.pageY=e.pageY;var l=q(s,a,n);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+r.left+dt.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+r.top+dt.top,10)),rt.grid.autoHighlight){for(var h=0;h<vt.length;++h){var u=vt[h];u.auto!=t||l&&u.series==l.series&&u.point[0]==l.datapoint[0]&&u.point[1]==l.datapoint[1]||K(u.series,u.point)}l&&Q(l.series,l.datapoint,t)}i.trigger(t,[o,l])}function X(){var t=rt.interaction.redrawOverlayInterval;return t==-1?void Z():void(yt||(yt=setTimeout(Z,t)))}function Z(){yt=null,ht.save(),at.clear(),ht.translate(dt.left,dt.top);var t,e;for(t=0;t<vt.length;++t)e=vt[t],e.series.bars.show?et(e.series,e.point):tt(e.series,e.point);ht.restore(),o(gt.drawOverlay,[ht])}function Q(t,e,i){if("number"==typeof t&&(t=nt[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var r=J(t,e);r==-1?(vt.push({series:t,point:e,auto:i}),X()):i||(vt[r].auto=!1)}function K(t,e){if(null==t&&null==e)return vt=[],void X();if("number"==typeof t&&(t=nt[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var n=J(t,e);n!=-1&&(vt.splice(n,1),X())}function J(t,e){for(var i=0;i<vt.length;++i){var n=vt[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function tt(e,i){var n=i[0],r=i[1],s=e.xaxis,a=e.yaxis,o="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(n<s.min||n>s.max||r<a.min||r>a.max)){var l=e.points.radius+e.points.lineWidth/2;ht.lineWidth=l,ht.strokeStyle=o;var h=1.5*l;n=s.p2c(n),r=a.p2c(r),ht.beginPath(),"circle"==e.points.symbol?ht.arc(n,r,h,0,2*Math.PI,!1):e.points.symbol(ht,n,r,h,!1),ht.closePath(),ht.stroke()}}function et(e,i){var n,r="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),s=r;switch(e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}ht.lineWidth=e.bars.lineWidth,ht.strokeStyle=r,W(i[0],i[1],i[2]||0,n,n+e.bars.barWidth,function(){return s},e.xaxis,e.yaxis,ht,e.bars.horizontal,e.bars.lineWidth)}function it(e,i,n,r){if("string"==typeof e)return e;for(var s=lt.createLinearGradient(0,n,0,i),a=0,o=e.colors.length;a<o;++a){var l=e.colors[a];if("string"!=typeof l){var h=t.color.parse(r);null!=l.brightness&&(h=h.scale("rgb",l.brightness)),null!=l.opacity&&(h.a*=l.opacity),l=h.toString()}s.addColorStop(a/(o-1),l)}return s}var nt=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},st=null,at=null,ot=null,lt=null,ht=null,ut=[],ct=[],dt={left:0,right:0,top:0,bottom:0},ft=0,pt=0,gt={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},mt=this;mt.setData=u,mt.setupGrid=T,mt.draw=F,mt.getPlaceholder=function(){return i;
},mt.getCanvas=function(){return st.element},mt.getPlotOffset=function(){return dt},mt.width=function(){return ft},mt.height=function(){return pt},mt.offset=function(){var t=ot.offset();return t.left+=dt.left,t.top+=dt.top,t},mt.getData=function(){return nt},mt.getAxes=function(){var e={};return t.each(ut.concat(ct),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},mt.getXAxes=function(){return ut},mt.getYAxes=function(){return ct},mt.c2p=p,mt.p2c=g,mt.getOptions=function(){return rt},mt.highlight=Q,mt.unhighlight=K,mt.triggerRedrawOverlay=X,mt.pointOffset=function(t){return{left:parseInt(ut[d(t,"x")-1].p2c(+t.x)+dt.left,10),top:parseInt(ct[d(t,"y")-1].p2c(+t.y)+dt.top,10)}},mt.shutdown=w,mt.destroy=function(){w(),i.removeData("plot").empty(),nt=[],rt=null,st=null,at=null,ot=null,lt=null,ht=null,ut=[],ct=[],gt=null,vt=[],mt=null},mt.resize=function(){var t=i.width(),e=i.height();st.resize(t,e),at.resize(t,e)},mt.hooks=gt,l(mt),h(s),b(),u(r),T(),F(),x();var vt=[],yt=null}function n(t,e){return e*Math.floor(t/e)}var r=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),e.prototype.resize=function(t,e){if(t<=0||e<=0)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var i=this.element,n=this.context,r=this.pixelRatio;this.width!=t&&(i.width=t*r,i.style.width=t+"px",this.width=t),this.height!=e&&(i.height=e*r,i.style.height=e+"px",this.height=e),n.restore(),n.save(),n.scale(r,r)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var t=this._textCache;for(var e in t)if(r.call(t,e)){var i=this.getTextLayer(e),n=t[e];i.hide();for(var s in n)if(r.call(n,s)){var a=n[s];for(var o in a)if(r.call(a,o)){for(var l,h=a[o].positions,u=0;l=h[u];u++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(h.splice(u--,1),l.rendered&&l.element.detach());0==h.length&&delete a[o]}}i.show()}},e.prototype.getTextLayer=function(e){var i=this.text[e];return null==i&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},e.prototype.getTextInfo=function(e,i,n,r,s){var a,o,l,h;if(i=""+i,a="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,o=this._textCache[e],null==o&&(o=this._textCache[e]={}),l=o[a],null==l&&(l=o[a]={}),h=l[i],null==h){var u=t("<div></div>").html(i).css({position:"absolute","max-width":s,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof n?u.css({font:a,color:n.color}):"string"==typeof n&&u.addClass(n),h=l[i]={width:u.outerWidth(!0),height:u.outerHeight(!0),element:u,positions:[]},u.detach()}return h},e.prototype.addText=function(t,e,i,n,r,s,a,o,l){var h=this.getTextInfo(t,n,r,s,a),u=h.positions;"center"==o?e-=h.width/2:"right"==o&&(e-=h.width),"middle"==l?i-=h.height/2:"bottom"==l&&(i-=h.height);for(var c,d=0;c=u[d];d++)if(c.x==e&&c.y==i)return void(c.active=!0);c={active:!0,rendered:!1,element:u.length?h.element.clone():h.element,x:e,y:i},u.push(c),c.element.css({top:Math.round(i),left:Math.round(e),"text-align":o})},e.prototype.removeText=function(t,e,i,n,s,a){if(null==n){var o=this._textCache[t];if(null!=o)for(var l in o)if(r.call(o,l)){var h=o[l];for(var u in h)if(r.call(h,u))for(var c,d=h[u].positions,f=0;c=d[f];f++)c.active=!1}}else for(var c,d=this.getTextInfo(t,n,s,a).positions,f=0;c=d[f];f++)c.x==e&&c.y==i&&(c.active=!1)},t.plot=function(e,n,r){var s=new i(t(e),n,r,t.plot.plugins);return s},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(e,i){return this.each(function(){t.plot(this,e,i)})}}(jQuery),function(t){var e={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},i=function(t){this.tipPosition={x:0,y:0},this.init(t)};i.prototype.init=function(e){function i(t){var e={};e.x=t.pageX,e.y=t.pageY,r.updateTooltipPosition(e)}function n(t,e,i){var n=r.getDomElement();if(i){var s;s=r.stringFormat(r.tooltipOptions.content,i),n.html(s),r.updateTooltipPosition({x:e.pageX,y:e.pageY}),n.css({left:r.tipPosition.x+r.tooltipOptions.shifts.x,top:r.tipPosition.y+r.tooltipOptions.shifts.y}).show(),"function"==typeof r.tooltipOptions.onHover&&r.tooltipOptions.onHover(i,n)}else n.hide().html("")}var r=this;e.hooks.bindEvents.push(function(e,s){r.plotOptions=e.getOptions(),r.plotOptions.tooltip!==!1&&void 0!==r.plotOptions.tooltip&&(r.tooltipOptions=r.plotOptions.tooltipOpts,r.getDomElement(),t(e.getPlaceholder()).bind("plothover",n),t(s).bind("mousemove",i))}),e.hooks.shutdown.push(function(e,r){t(e.getPlaceholder()).unbind("plothover",n),t(r).unbind("mousemove",i)})},i.prototype.getDomElement=function(){var e;return t("#flotTip").length>0?e=t("#flotTip"):(e=t("<div />").attr("id","flotTip"),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},i.prototype.updateTooltipPosition=function(e){var i=t("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,n=t("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;e.x-t(window).scrollLeft()>t(window).innerWidth()-i&&(e.x-=i),e.y-t(window).scrollTop()>t(window).innerHeight()-n&&(e.y-=n),this.tipPosition.x=e.x,this.tipPosition.y=e.y},i.prototype.stringFormat=function(t,e){var i=/%p\.{0,1}(\d{0,})/,n=/%s/,r=/%x\.{0,1}(?:\d{0,})/,s=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof t&&(t=t(e.series.label,e.series.data[e.dataIndex][0],e.series.data[e.dataIndex][1],e)),void 0!==e.series.percent&&(t=this.adjustValPrecision(i,t,e.series.percent)),void 0!==e.series.label&&(t=t.replace(n,e.series.label)),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(r,this.timestampToDate(e.series.data[e.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(s,this.timestampToDate(e.series.data[e.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof e.series.data[e.dataIndex][0]&&(t=this.adjustValPrecision(r,t,e.series.data[e.dataIndex][0])),"number"==typeof e.series.data[e.dataIndex][1]&&(t=this.adjustValPrecision(s,t,e.series.data[e.dataIndex][1])),void 0!==e.series.xaxis.tickFormatter&&(t=t.replace(r,e.series.xaxis.tickFormatter(e.series.data[e.dataIndex][0],e.series.xaxis))),void 0!==e.series.yaxis.tickFormatter&&(t=t.replace(s,e.series.yaxis.tickFormatter(e.series.data[e.dataIndex][1],e.series.yaxis))),t},i.prototype.isTimeMode=function(t,e){return void 0!==e.series[t].options.mode&&"time"===e.series[t].options.mode},i.prototype.isXDateFormat=function(){return void 0!==this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},i.prototype.isYDateFormat=function(){return void 0!==this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},i.prototype.timestampToDate=function(e,i){var n=new Date(e);return t.plot.formatDate(n,i)},i.prototype.adjustValPrecision=function(t,e,i){var n,r=e.match(t);return null!==r&&""!==RegExp.$1&&(n=RegExp.$1,i=i.toFixed(n),e=e.replace(t,i)),e};var n=function(t){new i(t)};t.plot.plugins.push({init:n,options:e,name:"tooltip",version:"0.6.1"})}(jQuery),function(t,e,i){"$:nomunge";function n(i){o===!0&&(o=i||1);for(var l=s.length-1;l>=0;l--){var d=t(s[l]);if(d[0]==e||d.is(":visible")){var f=d.width(),p=d.height(),g=d.data(u);!g||f===g.w&&p===g.h||(d.trigger(h,[g.w=f,g.h=p]),o=i||!0)}else g=d.data(u),g.w=0,g.h=0}null!==r&&(o&&(null==i||i-o<1e3)?r=e.requestAnimationFrame(n):(r=setTimeout(n,a[c]),o=!1))}var r,s=[],a=t.resize=t.extend(t.resize,{}),o=!1,l="setTimeout",h="resize",u=h+"-special-event",c="pendingDelay",d="activeDelay",f="throttleWindow";a[c]=200,a[d]=20,a[f]=!0,t.event.special[h]={setup:function(){if(!a[f]&&this[l])return!1;var e=t(this);s.push(this),e.data(u,{w:e.width(),h:e.height()}),1===s.length&&(r=i,n())},teardown:function(){if(!a[f]&&this[l])return!1;for(var e=t(this),i=s.length-1;i>=0;i--)if(s[i]==this){s.splice(i,1);break}e.removeData(u),s.length||(o?cancelAnimationFrame(r):clearTimeout(r),r=null)},add:function(e){function n(e,n,s){var a=t(this),o=a.data(u)||{};o.w=n!==i?n:a.width(),o.h=s!==i?s:a.height(),r.apply(this,arguments)}if(!a[f]&&this[l])return!1;var r;return t.isFunction(e)?(r=e,n):(r=e.handler,void(e.handler=n))}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return e.setTimeout(function(){t((new Date).getTime())},a[d])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(t){function e(t){function e(){var e=t.getPlaceholder();0!=e.width()&&0!=e.height()&&(t.resize(),t.setupGrid(),t.draw())}function i(t){t.getPlaceholder().resize(e)}function n(t){t.getPlaceholder().unbind("resize",e)}t.hooks.bindEvents.push(i),t.hooks.shutdown.push(n)}var i={};t.plot.plugins.push({init:e,options:i,name:"resize",version:"1.0"})}(jQuery),function(t){function e(e){function r(e){k||(k=!0,v=e.getCanvas(),y=t(v).parent(),b=e.getOptions(),e.setData(s(e.getData())))}function s(e){for(var i=0,n=0,r=0,s=b.series.pie.combine.color,a=[],o=0;o<e.length;++o){var l=e[o].data;t.isArray(l)&&1==l.length&&(l=l[0]),t.isArray(l)?!isNaN(parseFloat(l[1]))&&isFinite(l[1])?l[1]=+l[1]:l[1]=0:l=!isNaN(parseFloat(l))&&isFinite(l)?[1,+l]:[1,0],e[o].data=[l]}for(var o=0;o<e.length;++o)i+=e[o].data[0][1];for(var o=0;o<e.length;++o){var l=e[o].data[0][1];l/i<=b.series.pie.combine.threshold&&(n+=l,r++,s||(s=e[o].color))}for(var o=0;o<e.length;++o){var l=e[o].data[0][1];(r<2||l/i>b.series.pie.combine.threshold)&&a.push(t.extend(e[o],{data:[[1,l]],color:e[o].color,label:e[o].label,angle:l*Math.PI*2/i,percent:l/(i/100)}))}return r>1&&a.push({data:[[1,n]],color:s,label:b.series.pie.combine.label,angle:n*Math.PI*2/i,percent:n/(i/100)}),a}function a(e,r){function s(){C.clearRect(0,0,h,u),y.children().filter(".pieLabel, .pieLabelBackground").remove()}function a(){var t=b.series.pie.shadow.left,e=b.series.pie.shadow.top,i=10,n=b.series.pie.shadow.alpha,r=b.series.pie.radius>1?b.series.pie.radius:x*b.series.pie.radius;if(!(r>=h/2-t||r*b.series.pie.tilt>=u/2-e||r<=i)){C.save(),C.translate(t,e),C.globalAlpha=n,C.fillStyle="#000",C.translate(w,_),C.scale(1,b.series.pie.tilt);for(var s=1;s<=i;s++)C.beginPath(),C.arc(0,0,r,0,2*Math.PI,!1),C.fill(),r-=s;C.restore()}}function l(){function e(t,e,i){t<=0||isNaN(t)||(i?C.fillStyle=e:(C.strokeStyle=e,C.lineJoin="round"),C.beginPath(),Math.abs(t-2*Math.PI)>1e-9&&C.moveTo(0,0),C.arc(0,0,r,s,s+t/2,!1),C.arc(0,0,r,s+t/2,s+t,!1),C.closePath(),s+=t,i?C.fill():C.stroke())}function i(){function e(e,i,n){if(0==e.data[0][1])return!0;var s,a=b.legend.labelFormatter,o=b.series.pie.label.formatter;s=a?a(e.label,e):e.label,o&&(s=o(s,e));var l=(i+e.angle+i)/2,c=w+Math.round(Math.cos(l)*r),d=_+Math.round(Math.sin(l)*r)*b.series.pie.tilt,f="<span class='pieLabel' id='pieLabel"+n+"' style='position:absolute;top:"+d+"px;left:"+c+"px;'>"+s+"</span>";y.append(f);var p=y.children("#pieLabel"+n),g=d-p.height()/2,m=c-p.width()/2;if(p.css("top",g),p.css("left",m),0-g>0||0-m>0||u-(g+p.height())<0||h-(m+p.width())<0)return!1;if(0!=b.series.pie.label.background.opacity){var v=b.series.pie.label.background.color;null==v&&(v=e.color);var x="top:"+g+"px;left:"+m+"px;";t("<div class='pieLabelBackground' style='position:absolute;width:"+p.width()+"px;height:"+p.height()+"px;"+x+"background-color:"+v+";'></div>").css("opacity",b.series.pie.label.background.opacity).insertBefore(p)}return!0}for(var i=n,r=b.series.pie.label.radius>1?b.series.pie.label.radius:x*b.series.pie.label.radius,s=0;s<d.length;++s){if(d[s].percent>=100*b.series.pie.label.threshold&&!e(d[s],i,s))return!1;i+=d[s].angle}return!0}var n=Math.PI*b.series.pie.startAngle,r=b.series.pie.radius>1?b.series.pie.radius:x*b.series.pie.radius;C.save(),C.translate(w,_),C.scale(1,b.series.pie.tilt),C.save();for(var s=n,a=0;a<d.length;++a)d[a].startAngle=s,e(d[a].angle,d[a].color,!0);if(C.restore(),b.series.pie.stroke.width>0){C.save(),C.lineWidth=b.series.pie.stroke.width,s=n;for(var a=0;a<d.length;++a)e(d[a].angle,b.series.pie.stroke.color,!1);C.restore()}return o(C),C.restore(),!b.series.pie.label.show||i()}if(y){var h=e.getPlaceholder().width(),u=e.getPlaceholder().height(),c=y.children().filter(".legend").children().width()||0;C=r,k=!1,x=Math.min(h,u/b.series.pie.tilt)/2,_=u/2+b.series.pie.offset.top,w=h/2,"auto"==b.series.pie.offset.left?(b.legend.position.match("w")?w+=c/2:w-=c/2,w<x?w=x:w>h-x&&(w=h-x)):w+=b.series.pie.offset.left;var d=e.getData(),f=0;do f>0&&(x*=n),f+=1,s(),b.series.pie.tilt<=.8&&a();while(!l()&&f<i);f>=i&&(s(),y.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),e.setSeries&&e.insertLegend&&(e.setSeries(d),e.insertLegend())}}function o(t){if(b.series.pie.innerRadius>0){t.save();var e=b.series.pie.innerRadius>1?b.series.pie.innerRadius:x*b.series.pie.innerRadius;t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle=b.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.strokeStyle=b.series.pie.stroke.color,t.arc(0,0,e,0,2*Math.PI,!1),t.stroke(),t.closePath(),t.restore()}}function l(t,e){for(var i=!1,n=-1,r=t.length,s=r-1;++n<r;s=n)(t[n][1]<=e[1]&&e[1]<t[s][1]||t[s][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[s][0]-t[n][0])*(e[1]-t[n][1])/(t[s][1]-t[n][1])+t[n][0]&&(i=!i);return i}function h(t,i){for(var n,r,s=e.getData(),a=e.getOptions(),o=a.series.pie.radius>1?a.series.pie.radius:x*a.series.pie.radius,h=0;h<s.length;++h){var u=s[h];if(u.pie.show){if(C.save(),C.beginPath(),C.moveTo(0,0),C.arc(0,0,o,u.startAngle,u.startAngle+u.angle/2,!1),C.arc(0,0,o,u.startAngle+u.angle/2,u.startAngle+u.angle,!1),C.closePath(),n=t-w,r=i-_,C.isPointInPath){if(C.isPointInPath(t-w,i-_))return C.restore(),{datapoint:[u.percent,u.data],dataIndex:0,series:u,seriesIndex:h}}else{var c=o*Math.cos(u.startAngle),d=o*Math.sin(u.startAngle),f=o*Math.cos(u.startAngle+u.angle/4),p=o*Math.sin(u.startAngle+u.angle/4),g=o*Math.cos(u.startAngle+u.angle/2),m=o*Math.sin(u.startAngle+u.angle/2),v=o*Math.cos(u.startAngle+u.angle/1.5),y=o*Math.sin(u.startAngle+u.angle/1.5),b=o*Math.cos(u.startAngle+u.angle),k=o*Math.sin(u.startAngle+u.angle),M=[[0,0],[c,d],[f,p],[g,m],[v,y],[b,k]],S=[n,r];if(l(M,S))return C.restore(),{datapoint:[u.percent,u.data],dataIndex:0,series:u,seriesIndex:h}}C.restore()}}return null}function u(t){d("plothover",t)}function c(t){d("plotclick",t)}function d(t,i){var n=e.offset(),r=parseInt(i.pageX-n.left),s=parseInt(i.pageY-n.top),a=h(r,s);if(b.grid.autoHighlight)for(var o=0;o<M.length;++o){var l=M[o];l.auto!=t||a&&l.series==a.series||p(l.series)}a&&f(a.series,t);var u={pageX:i.pageX,pageY:i.pageY};y.trigger(t,[u,a])}function f(t,i){var n=g(t);n==-1?(M.push({series:t,auto:i}),e.triggerRedrawOverlay()):i||(M[n].auto=!1)}function p(t){null==t&&(M=[],e.triggerRedrawOverlay());var i=g(t);i!=-1&&(M.splice(i,1),e.triggerRedrawOverlay())}function g(t){for(var e=0;e<M.length;++e){var i=M[e];if(i.series==t)return e}return-1}function m(t,e){function i(t){t.angle<=0||isNaN(t.angle)||(e.fillStyle="rgba(255, 255, 255, "+n.series.pie.highlight.opacity+")",e.beginPath(),Math.abs(t.angle-2*Math.PI)>1e-9&&e.moveTo(0,0),e.arc(0,0,r,t.startAngle,t.startAngle+t.angle/2,!1),e.arc(0,0,r,t.startAngle+t.angle/2,t.startAngle+t.angle,!1),e.closePath(),e.fill())}var n=t.getOptions(),r=n.series.pie.radius>1?n.series.pie.radius:x*n.series.pie.radius;e.save(),e.translate(w,_),e.scale(1,n.series.pie.tilt);for(var s=0;s<M.length;++s)i(M[s].series);o(e),e.restore()}var v=null,y=null,b=null,x=null,w=null,_=null,k=!1,C=null,M=[];e.hooks.processOptions.push(function(t,e){e.series.pie.show&&(e.grid.show=!1,"auto"==e.series.pie.label.show&&(e.legend.show?e.series.pie.label.show=!1:e.series.pie.label.show=!0),"auto"==e.series.pie.radius&&(e.series.pie.label.show?e.series.pie.radius=.75:e.series.pie.radius=1),e.series.pie.tilt>1?e.series.pie.tilt=1:e.series.pie.tilt<0&&(e.series.pie.tilt=0))}),e.hooks.bindEvents.push(function(t,e){var i=t.getOptions();i.series.pie.show&&(i.grid.hoverable&&e.unbind("mousemove").mousemove(u),i.grid.clickable&&e.unbind("click").click(c))}),e.hooks.processDatapoints.push(function(t,e,i,n){var s=t.getOptions();s.series.pie.show&&r(t,e,i,n)}),e.hooks.drawOverlay.push(function(t,e){var i=t.getOptions();i.series.pie.show&&m(t,e)}),e.hooks.draw.push(function(t,e){var i=t.getOptions();i.series.pie.show&&a(t,e)})}var i=10,n=.95,r={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(t,e){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+e.color+";'>"+t+"<br/>"+Math.round(e.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};t.plot.plugins.push({init:e,options:r,name:"pie",version:"1.1"})}(jQuery),function(t){function e(t,e){return e*Math.floor(t/e)}function i(t,e,i,n){if("function"==typeof t.strftime)return t.strftime(e);var r=function(t,e){return t=""+t,e=""+(null==e?"0":e),1==t.length?e+t:t},s=[],a=!1,o=t.getHours(),l=o<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var h;h=o>12?o-12:0==o?12:o;for(var u=0;u<e.length;++u){var c=e.charAt(u);if(a){switch(c){case"a":c=""+n[t.getDay()];break;case"b":c=""+i[t.getMonth()];break;case"d":c=r(t.getDate());break;case"e":c=r(t.getDate()," ");break;case"h":case"H":c=r(o);break;case"I":c=r(h);break;case"l":c=r(h," ");break;case"m":c=r(t.getMonth()+1);break;case"M":c=r(t.getMinutes());break;case"q":c=""+(Math.floor(t.getMonth()/3)+1);break;case"S":c=r(t.getSeconds());break;case"y":c=r(t.getFullYear()%100);break;case"Y":c=""+t.getFullYear();break;case"p":c=l?"am":"pm";break;case"P":c=l?"AM":"PM";break;case"w":c=""+t.getDay()}s.push(c),a=!1}else"%"==c?a=!0:s.push(c)}return s.join("")}function n(t){function e(t,e,i,n){t[e]=function(){return i[n].apply(i,arguments)}}var i={date:t};void 0!=t.strftime&&e(i,"strftime",t,"strftime"),e(i,"getTime",t,"getTime"),e(i,"setTime",t,"setTime");for(var n=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<n.length;r++)e(i,"get"+n[r],t,"getUTC"+n[r]),e(i,"set"+n[r],t,"setUTC"+n[r]);return i}function r(t,e){if("browser"==e.timezone)return new Date(t);if(e.timezone&&"utc"!=e.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var i=new timezoneJS.Date;return i.setTimezone(e.timezone),i.setTime(t),i}return n(new Date(t))}return n(new Date(t))}function s(n){n.hooks.processOptions.push(function(n){t.each(n.getAxes(),function(t,n){var s=n.options;"time"==s.mode&&(n.tickGenerator=function(t){var i=[],n=r(t.min,s),a=0,l=s.tickSize&&"quarter"===s.tickSize[1]||s.minTickSize&&"quarter"===s.minTickSize[1]?u:h;null!=s.minTickSize&&(a="number"==typeof s.tickSize?s.tickSize:s.minTickSize[0]*o[s.minTickSize[1]]);for(var c=0;c<l.length-1&&!(t.delta<(l[c][0]*o[l[c][1]]+l[c+1][0]*o[l[c+1][1]])/2&&l[c][0]*o[l[c][1]]>=a);++c);var d=l[c][0],f=l[c][1];if("year"==f){if(null!=s.minTickSize&&"year"==s.minTickSize[1])d=Math.floor(s.minTickSize[0]);else{var p=Math.pow(10,Math.floor(Math.log(t.delta/o.year)/Math.LN10)),g=t.delta/o.year/p;d=g<1.5?1:g<3?2:g<7.5?5:10,d*=p}d<1&&(d=1)}t.tickSize=s.tickSize||[d,f];var m=t.tickSize[0];f=t.tickSize[1];var v=m*o[f];"second"==f?n.setSeconds(e(n.getSeconds(),m)):"minute"==f?n.setMinutes(e(n.getMinutes(),m)):"hour"==f?n.setHours(e(n.getHours(),m)):"month"==f?n.setMonth(e(n.getMonth(),m)):"quarter"==f?n.setMonth(3*e(n.getMonth()/3,m)):"year"==f&&n.setFullYear(e(n.getFullYear(),m)),n.setMilliseconds(0),v>=o.minute&&n.setSeconds(0),v>=o.hour&&n.setMinutes(0),v>=o.day&&n.setHours(0),v>=4*o.day&&n.setDate(1),v>=2*o.month&&n.setMonth(e(n.getMonth(),3)),v>=2*o.quarter&&n.setMonth(e(n.getMonth(),6)),v>=o.year&&n.setMonth(0);var y,b=0,x=Number.NaN;do if(y=x,x=n.getTime(),i.push(x),"month"==f||"quarter"==f)if(m<1){n.setDate(1);var w=n.getTime();n.setMonth(n.getMonth()+("quarter"==f?3:1));var _=n.getTime();n.setTime(x+b*o.hour+(_-w)*m),b=n.getHours(),n.setHours(0)}else n.setMonth(n.getMonth()+m*("quarter"==f?3:1));else"year"==f?n.setFullYear(n.getFullYear()+m):n.setTime(x+v);while(x<t.max&&x!=y);return i},n.tickFormatter=function(t,e){var n=r(t,e.options);if(null!=s.timeformat)return i(n,s.timeformat,s.monthNames,s.dayNames);var a,l=e.options.tickSize&&"quarter"==e.options.tickSize[1]||e.options.minTickSize&&"quarter"==e.options.minTickSize[1],h=e.tickSize[0]*o[e.tickSize[1]],u=e.max-e.min,c=s.twelveHourClock?" %p":"",d=s.twelveHourClock?"%I":"%H";a=h<o.minute?d+":%M:%S"+c:h<o.day?u<2*o.day?d+":%M"+c:"%b %d "+d+":%M"+c:h<o.month?"%b %d":l&&h<o.quarter||!l&&h<o.year?u<o.year?"%b":"%b %Y":l&&h<o.year?u<o.year?"Q%q":"Q%q %Y":"%Y";var f=i(n,a,s.monthNames,s.dayNames);return f})})})}var a={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},o={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],h=l.concat([[3,"month"],[6,"month"],[1,"year"]]),u=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);t.plot.plugins.push({init:s,options:a,name:"time",version:"1.0"}),t.plot.formatDate=i,t.plot.dateGenerator=r}(jQuery),function(t){"use strict";function e(t,e,i,n,r,s,a){var o,l,h,u,c,d,f,p,g=Math.pow,m=Math.sqrt;return o=m(g(i-t,2)+g(n-e,2)),l=m(g(r-i,2)+g(s-n,2)),h=a*o/(o+l),u=a-h,c=i+h*(t-r),d=n+h*(e-s),f=i-u*(t-r),p=n-u*(e-s),[c,d,f,p]}function i(e,i,n,r,s){var a=t.color.parse(s);a.a="number"==typeof r?r:.3,a.normalize(),a=a.toString(),i.beginPath(),i.moveTo(e[0][0],e[0][1]);for(var o=e.length,l=0;l<o;l++)i[e[l][3]].apply(i,e[l][2]);i.stroke(),i.lineWidth=0,i.lineTo(e[o-1][0],n),i.lineTo(e[0][0],n),i.closePath(),r!==!1&&(i.fillStyle=a,i.fill())}function n(t,e,i,n){(void 0===e||"bezier"!==e&&"quadratic"!==e)&&(e="quadratic"),e+="CurveTo",0==s.length?s.push([i[0],i[1],n.concat(i.slice(2)),e]):"quadraticCurveTo"==e&&2==i.length?(n=n.slice(0,2).concat(i),s.push([i[0],i[1],n,e])):s.push([i[2],i[3],n.concat(i.slice(2)),e])}function r(r,a,o){if(o.splines.show===!0){var l,h,u,c=[],d=o.splines.tension||.5,f=o.datapoints.points,p=o.datapoints.pointsize,g=r.getPlotOffset(),m=f.length,v=[];if(s=[],m/p<4)return void t.extend(o.lines,o.splines);for(l=0;l<m;l+=p)h=f[l],u=f[l+1],null==h||h<o.xaxis.min||h>o.xaxis.max||u<o.yaxis.min||u>o.yaxis.max||v.push(o.xaxis.p2c(h)+g.left,o.yaxis.p2c(u)+g.top);for(m=v.length,l=0;l<m-2;l+=2)c=c.concat(e.apply(this,v.slice(l,l+6).concat([d])));for(a.save(),a.strokeStyle=o.color,a.lineWidth=o.splines.lineWidth,n(a,"quadratic",v.slice(0,4),c.slice(0,2)),l=2;l<m-3;l+=2)n(a,"bezier",v.slice(l,l+4),c.slice(2*l-2,2*l+2));n(a,"quadratic",v.slice(m-2,m),[c[2*m-10],c[2*m-9],v[m-4],v[m-3]]),i(s,a,r.height()+10,o.splines.fill,o.color),a.restore()}}var s=[];t.plot.plugins.push({init:function(t){t.hooks.drawSeries.push(r)},options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery),function(t,e,i){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)}(function(n){"use strict";var r,s,a,o,l,h,u,c,d,f,p,g,m,v,y,b,x,w,_,k,C,M,S,T,D,E,P,A,F,I,z,L,R={},N=0;r=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new a("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new a("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new a("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},E='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',s=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=n.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),n.extend.apply(n,e))):t.prototype=arguments[0],t.prototype.cls=t,t},n.SPFormatClass=a=s({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,n){var r,s,a,o,l,h=this,u=t;return this.format.replace(this.fre,function(){var t;return s=arguments[1],a=arguments[3],r=h.precre.exec(s),r?(l=r[2],s=r[1]):l=!1,o=u[s],o===i?"":a&&e&&e[a]?(t=e[a],t.get?e[a].get(o)||o:e[a][o]||o):(d(o)&&(o=n.get("numberFormatter")?n.get("numberFormatter")(o):v(o,l,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),o)})}}),n.spformat=function(t,e){return new a(t,e)},o=function(t,e,i){return t<e?e:t>i?i:t},l=function(t,i){var n;return 2===i?(n=e.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*i+i)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1]):(n=(t.length*i+2)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1])},h=function(t){var e;switch(t){case"undefined":t=i;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},u=function(t){var e,i=[];for(e=t.length;e--;)i[e]=h(t[e]);return i},c=function(t,e){var i,n,r=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&r.push(t[i]);return r},d=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},v=function(t,e,i,r,s){var a,o;for(t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),a=(a=n.inArray(".",t))<0?t.length:a,a<t.length&&(t[a]=s),o=a-i;o>0;o-=i)t.splice(o,0,r);return t.join("")},f=function(t,e,i){var n;for(n=e.length;n--;)if((!i||null!==e[n])&&e[n]!==t)return!1;return!0},p=function(t){var e,i=0;for(e=t.length;e--;)i+="number"==typeof t[e]?t[e]:0;return i},m=function(t){return n.isArray(t)?t:[t]},g=function(e){var i;t.createStyleSheet?t.createStyleSheet().cssText=e:(i=t.createElement("style"),i.type="text/css",t.getElementsByTagName("head")[0].appendChild(i),i["string"==typeof t.body.style.WebkitAppearance?"innerText":"innerHTML"]=e)},n.fn.simpledraw=function(e,r,s,a){var o,l;if(s&&(o=this.data("_jqs_vcanvas")))return o;if(n.fn.sparkline.canvas===!1)return!1;if(n.fn.sparkline.canvas===i){var h=t.createElement("canvas");if(h.getContext&&h.getContext("2d"))n.fn.sparkline.canvas=function(t,e,i,n){return new I(t,e,i,n)};else{if(!t.namespaces||t.namespaces.v)return n.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),n.fn.sparkline.canvas=function(t,e,i){return new z(t,e,i)}}}return e===i&&(e=n(this).innerWidth()),r===i&&(r=n(this).innerHeight()),o=n.fn.sparkline.canvas(e,r,this,a),l=n(this).data("_jqs_mhandler"),l&&l.registerCanvas(o),o},n.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},n.RangeMapClass=y=s({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&"string"==typeof e&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=0===i[0].length?-(1/0):parseFloat(i[0]),i[1]=0===i[1].length?1/0:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e,n,r,s=this.rangelist;if((r=this.map[t])!==i)return r;if(s)for(e=s.length;e--;)if(n=s[e],n[0]<=t&&n[1]>=t)return n[2];return i}}),n.range_map=function(t){return new y(t)},b=s({init:function(t,e){var i=n(t);this.$el=i,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=n(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(n.proxy(this.mouseenter,this)),e.mouseleave(n.proxy(this.mouseleave,this)),e.click(n.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(t){var e=n.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){n(t.body).unbind("mousemove.jqs"),n(t.body).bind("mousemove.jqs",n.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new x(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){n(t.body).unbind("mousemove.jqs");var e,i,r=this.splist,s=r.length,a=!1;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),i=0;i<s;i++)e=r[i],e.clearRegionHighlight()&&(a=!0);a&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t,e,i,r,s,a=this.splist,o=a.length,l=!1,h=this.$canvas.offset(),u=this.currentPageX-h.left,c=this.currentPageY-h.top;if(this.over){for(i=0;i<o;i++)e=a[i],r=e.setRegionHighlight(this.currentEl,u,c),r&&(l=!0);if(l){if(s=n.Event("sparklineRegionChange"),s.sparklines=this.splist,this.$el.trigger(s),
this.tooltip){for(t="",i=0;i<o;i++)e=a[i],t+=e.getCurrentRegionTooltip();this.tooltip.setContent(t)}this.disableHighlight||this.canvas.render()}null===r&&this.mouseleave()}}}),x=s({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var i,r=e.get("tooltipClassname","jqstooltip"),s=this.sizeStyle;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),n("#jqssizetip").remove(),n("#jqstooltip").remove(),this.sizetip=n("<div/>",{id:"jqssizetip",style:s,"class":r}),this.tooltip=n("<div/>",{id:"jqstooltip","class":r}).appendTo(this.container),i=this.tooltip.offset(),this.offsetLeft=i.left,this.offsetTop=i.top,this.hidden=!0,n(window).unbind("resize.jqs scroll.jqs"),n(window).bind("resize.jqs scroll.jqs",n.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=n(window).scrollTop(),this.scrollLeft=n(window).scrollLeft(),this.scrollRight=this.scrollLeft+n(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){return t?(this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition()),void 0):(this.tooltip.css("visibility","hidden"),void(this.hidden=!0))},updatePosition:function(t,e){if(t===i){if(this.mousex===i)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;this.height&&this.width&&!this.hidden&&(e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e}))},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=i,n(window).unbind("resize.jqs scroll.jqs")}}),P=function(){g(E)},n(P),L=[],n.fn.sparkline=function(e,r){return this.each(function(){var s,a,o=new n.fn.sparkline.options(this,r),l=n(this);if(s=function(){var r,s,a,h,u,c,d;return"html"===e||e===i?(d=this.getAttribute(o.get("tagValuesAttribute")),d!==i&&null!==d||(d=l.html()),r=d.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):r=e,s="auto"===o.get("width")?r.length*o.get("defaultPixelsPerValue"):o.get("width"),"auto"===o.get("height")?o.get("composite")&&n.data(this,"_jqs_vcanvas")||(h=t.createElement("span"),h.innerHTML="a",l.html(h),a=n(h).innerHeight()||n(h).height(),n(h).remove(),h=null):a=o.get("height"),o.get("disableInteraction")?u=!1:(u=n.data(this,"_jqs_mhandler"),u?o.get("composite")||u.reset():(u=new b(this,o),n.data(this,"_jqs_mhandler",u))),o.get("composite")&&!n.data(this,"_jqs_vcanvas")?void(n.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),n.data(this,"_jqs_errnotify",!0))):(c=new(n.fn.sparkline[o.get("type")])(this,r,o,s,a),c.render(),u&&u.registerSparkline(c),void 0)},n(this).html()&&!o.get("disableHiddenCheck")&&n(this).is(":hidden")||!n(this).parents("body").length){if(!o.get("composite")&&n.data(this,"_jqs_pending"))for(a=L.length;a;a--)L[a-1][0]==this&&L.splice(a-1,1);L.push([this,s]),n.data(this,"_jqs_pending",!0)}else s.call(this)})},n.fn.sparkline.defaults=r(),n.sparkline_display_visible=function(){var t,e,i,r=[];for(e=0,i=L.length;e<i;e++)t=L[e][0],n(t).is(":visible")&&!n(t).parents().is(":hidden")?(L[e][1].call(t),n.data(L[e][0],"_jqs_pending",!1),r.push(e)):!n(t).closest("html").length&&!n.data(t,"_jqs_pending")&&(n.data(L[e][0],"_jqs_pending",!1),r.push(e));for(e=r.length;e;e--)L.splice(r[e-1],1)},n.fn.sparkline.options=s({init:function(t,e){var i,r,s,a;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=n.fn.sparkline.defaults,s=r.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||s.tagOptionsPrefix),a=this.getTagSetting("type"),i=a===R?r[e.type||s.type]:r[a],this.mergedOptions=n.extend({},s,i,e)},getTagSetting:function(t){var e,n,r,s,a=this.tagOptionsPrefix;if(a===!1||a===i)return R;if(this.tagValCache.hasOwnProperty(t))e=this.tagValCache.key;else{if(e=this.tag.getAttribute(a+t),e===i||null===e)e=R;else if("["===e.substr(0,1))for(e=e.substr(1,e.length-2).split(","),n=e.length;n--;)e[n]=h(e[n].replace(/(^\s*)|(\s*$)/g,""));else if("{"===e.substr(0,1))for(r=e.substr(1,e.length-2).split(","),e={},n=r.length;n--;)s=r[n].split(":",2),e[s[0].replace(/(^\s*)|(\s*$)/g,"")]=h(s[1].replace(/(^\s*)|(\s*$)/g,""));else e=h(e);this.tagValCache.key=e}return e},get:function(t,e){var n,r=this.getTagSetting(t);return r!==R?r:(n=this.mergedOptions[t])===i?e:n}}),n.fn.sparkline._base=s({disabled:!1,init:function(t,e,r,s,a){this.el=t,this.$el=n(t),this.values=e,this.options=r,this.width=s,this.height=a,this.currentRegion=i},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return!this.disabled||(this.el.innerHTML="",!1)},getRegion:function(){},setRegionHighlight:function(t,e,n){var r,s=this.currentRegion,a=!this.options.get("disableHighlight");return e>this.canvasWidth||n>this.canvasHeight||e<0||n<0?null:(r=this.getRegion(t,e,n),s!==r&&(s!==i&&a&&this.removeHighlight(),this.currentRegion=r,r!==i&&a&&this.renderHighlight(),!0))},clearRegionHighlight:function(){return this.currentRegion!==i&&(this.removeHighlight(),this.currentRegion=i,!0)},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t,e,r,s,o,l,h,u,c,d,f,p,g,m,v=this.options,y="",b=[];if(this.currentRegion===i)return"";if(t=this.getCurrentRegionFields(),f=v.get("tooltipFormatter"))return f(this,v,t);if(v.get("tooltipChartTitle")&&(y+='<div class="jqs jqstitle">'+v.get("tooltipChartTitle")+"</div>\n"),e=this.options.get("tooltipFormat"),!e)return"";if(n.isArray(e)||(e=[e]),n.isArray(t)||(t=[t]),h=this.options.get("tooltipFormatFieldlist"),u=this.options.get("tooltipFormatFieldlistKey"),h&&u){for(c=[],l=t.length;l--;)d=t[l][u],(m=n.inArray(d,h))!=-1&&(c[m]=t[l]);t=c}for(r=e.length,g=t.length,l=0;l<r;l++)for(p=e[l],"string"==typeof p&&(p=new a(p)),s=p.fclass||"jqsfield",m=0;m<g;m++)t[m].isNull&&v.get("tooltipSkipNull")||(n.extend(t[m],{prefix:v.get("tooltipPrefix"),suffix:v.get("tooltipSuffix")}),o=p.render(t[m],v.get("tooltipValueLookups"),v),b.push('<div class="'+s+'">'+o+"</div>"));return b.length?y+b.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,i){var n,r,s,a,l=i.get("highlightColor"),h=i.get("highlightLighten");if(l)return l;if(h&&(n=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t))){for(s=[],r=4===t.length?16:1,a=0;a<3;a++)s[a]=o(e.round(parseInt(n[a+1],16)*r*h),0,255);return"rgb("+s.join(",")+")"}return t}}),w={changeHighlight:function(t){var e,i=this.currentRegion,r=this.target,s=this.regionShapes[i];s&&(e=this.renderRegion(i,t),n.isArray(e)||n.isArray(s)?(r.replaceWithShapes(s,e),this.regionShapes[i]=n.map(e,function(t){return t.id})):(r.replaceWithShape(s,e),this.regionShapes[i]=e.id))},render:function(){var t,e,i,r,s=this.values,a=this.target,o=this.regionShapes;if(this.cls._super.render.call(this)){for(i=s.length;i--;)if(t=this.renderRegion(i))if(n.isArray(t)){for(e=[],r=t.length;r--;)t[r].append(),e.push(t[r].id);o[i]=e}else t.append(),o[i]=t.id;else o[i]=null;a.render()}}},n.fn.sparkline.line=_=s(n.fn.sparkline._base,{type:"line",init:function(t,e,i,n,r){_._super.init.call(this,t,e,i,n,r),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e){var n,r=this.regionMap;for(n=r.length;n--;)if(null!==r[n]&&e>=r[n][0]&&e<=r[n][1])return r[n][2];return i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:null===this.yvalues[t],x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t,e,n=this.currentRegion,r=this.target,s=this.vertices[n],a=this.options,o=a.get("spotRadius"),l=a.get("highlightSpotColor"),h=a.get("highlightLineColor");s&&(o&&l&&(t=r.drawCircle(s[0],s[1],o,i,l),this.highlightSpotId=t.id,r.insertAfterShape(this.lastShapeId,t)),h&&(e=r.drawLine(s[0],this.canvasTop,s[0],this.canvasTop+this.canvasHeight,h),this.highlightLineId=e.id,r.insertAfterShape(this.lastShapeId,e)))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t,i,n,r,s,a=this.values,o=a.length,l=this.xvalues,h=this.yvalues,u=this.yminmax;for(t=0;t<o;t++)i=a[t],n="string"==typeof a[t],r="object"==typeof a[t]&&a[t]instanceof Array,s=n&&a[t].split(":"),n&&2===s.length?(l.push(Number(s[0])),h.push(Number(s[1])),u.push(Number(s[1]))):r?(l.push(i[0]),h.push(i[1]),u.push(i[1])):(l.push(t),null===a[t]||"null"===a[t]?h.push(null):(h.push(Number(i)),u.push(Number(i))));this.options.get("xvalues")&&(l=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,u),this.miny=this.minyorg=e.min.apply(e,u),this.maxx=e.max.apply(e,l),this.minx=e.min.apply(e,l),this.xvalues=l,this.yvalues=h,this.yminmax=u},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),n=t.get("normalRangeMax");e!==i&&(e<this.miny&&(this.miny=e),n>this.maxy&&(this.maxy=n)),t.get("chartRangeMin")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,n,r,s,a){var o=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),h=n+e.round(r-r*((l-this.miny)/a)),u=e.round(r*(l-o)/a);this.target.drawRect(t,h,s,u,i,this.options.get("normalRangeColor")).append()},render:function(){var t,r,s,a,o,l,h,u,c,d,f,p,g,m,v,b,x,w,k,C,M,S,T,D,E,P=this.options,A=this.target,F=this.canvasWidth,I=this.canvasHeight,z=this.vertices,L=P.get("spotRadius"),R=this.regionMap;if(_._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),T=this.xvalues,D=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(a=o=0,t=this.maxx-this.minx===0?1:this.maxx-this.minx,r=this.maxy-this.miny===0?1:this.maxy-this.miny,s=this.yvalues.length-1,L&&(F<4*L||I<4*L)&&(L=0),L&&(M=P.get("highlightSpotColor")&&!P.get("disableInteraction"),(M||P.get("minSpotColor")||P.get("spotColor")&&D[s]===this.miny)&&(I-=e.ceil(L)),(M||P.get("maxSpotColor")||P.get("spotColor")&&D[s]===this.maxy)&&(I-=e.ceil(L),a+=e.ceil(L)),(M||(P.get("minSpotColor")||P.get("maxSpotColor"))&&(D[0]===this.miny||D[0]===this.maxy))&&(o+=e.ceil(L),F-=e.ceil(L)),(M||P.get("spotColor")||P.get("minSpotColor")||P.get("maxSpotColor")&&(D[s]===this.miny||D[s]===this.maxy))&&(F-=e.ceil(L))),I--,P.get("normalRangeMin")!==i&&!P.get("drawNormalOnTop")&&this.drawNormalRange(o,a,I,F,r),h=[],u=[h],m=v=null,b=D.length,E=0;E<b;E++)c=T[E],f=T[E+1],d=D[E],p=o+e.round((c-this.minx)*(F/t)),g=E<b-1?o+e.round((f-this.minx)*(F/t)):F,v=p+(g-p)/2,R[E]=[m||0,v,E],m=v,null===d?E&&(null!==D[E-1]&&(h=[],u.push(h)),z.push(null)):(d<this.miny&&(d=this.miny),d>this.maxy&&(d=this.maxy),h.length||h.push([p,a+I]),l=[p,a+e.round(I-I*((d-this.miny)/r))],h.push(l),z.push(l));for(x=[],w=[],k=u.length,E=0;E<k;E++)h=u[E],h.length&&(P.get("fillColor")&&(h.push([h[h.length-1][0],a+I]),w.push(h.slice(0)),h.pop()),h.length>2&&(h[0]=[h[0][0],h[1][1]]),x.push(h));for(k=w.length,E=0;E<k;E++)A.drawShape(w[E],P.get("fillColor"),P.get("fillColor")).append();for(P.get("normalRangeMin")!==i&&P.get("drawNormalOnTop")&&this.drawNormalRange(o,a,I,F,r),k=x.length,E=0;E<k;E++)A.drawShape(x[E],P.get("lineColor"),i,P.get("lineWidth")).append();if(L&&P.get("valueSpots"))for(C=P.get("valueSpots"),C.get===i&&(C=new y(C)),E=0;E<b;E++)S=C.get(D[E]),S&&A.drawCircle(o+e.round((T[E]-this.minx)*(F/t)),a+e.round(I-I*((D[E]-this.miny)/r)),L,i,S).append();L&&P.get("spotColor")&&null!==D[s]&&A.drawCircle(o+e.round((T[T.length-1]-this.minx)*(F/t)),a+e.round(I-I*((D[s]-this.miny)/r)),L,i,P.get("spotColor")).append(),this.maxy!==this.minyorg&&(L&&P.get("minSpotColor")&&(c=T[n.inArray(this.minyorg,D)],A.drawCircle(o+e.round((c-this.minx)*(F/t)),a+e.round(I-I*((this.minyorg-this.miny)/r)),L,i,P.get("minSpotColor")).append()),L&&P.get("maxSpotColor")&&(c=T[n.inArray(this.maxyorg,D)],A.drawCircle(o+e.round((c-this.minx)*(F/t)),a+e.round(I-I*((this.maxyorg-this.miny)/r)),L,i,P.get("maxSpotColor")).append())),this.lastShapeId=A.getLastShapeId(),this.canvasTop=a,A.render()}}}),n.fn.sparkline.bar=k=s(n.fn.sparkline._base,w,{type:"bar",init:function(t,r,s,a,l){var d,f,p,g,m,v,b,x,w,_,C,M,S,T,D,E,P,A,F,I,z,L,R=parseInt(s.get("barWidth"),10),N=parseInt(s.get("barSpacing"),10),H=s.get("chartRangeMin"),O=s.get("chartRangeMax"),W=s.get("chartRangeClip"),j=1/0,B=-(1/0);for(k._super.init.call(this,t,r,s,a,l),v=0,b=r.length;v<b;v++)I=r[v],d="string"==typeof I&&I.indexOf(":")>-1,(d||n.isArray(I))&&(D=!0,d&&(I=r[v]=u(I.split(":"))),I=c(I,null),f=e.min.apply(e,I),p=e.max.apply(e,I),f<j&&(j=f),p>B&&(B=p));this.stacked=D,this.regionShapes={},this.barWidth=R,this.barSpacing=N,this.totalBarWidth=R+N,this.width=a=r.length*R+(r.length-1)*N,this.initTarget(),W&&(S=H===i?-(1/0):H,T=O===i?1/0:O),m=[],g=D?[]:m;var Y=[],q=[];for(v=0,b=r.length;v<b;v++)if(D)for(E=r[v],r[v]=F=[],Y[v]=0,g[v]=q[v]=0,P=0,A=E.length;P<A;P++)I=F[P]=W?o(E[P],S,T):E[P],null!==I&&(I>0&&(Y[v]+=I),j<0&&B>0?I<0?q[v]+=e.abs(I):g[v]+=I:g[v]+=e.abs(I-(I<0?B:j)),m.push(I));else I=W?o(r[v],S,T):r[v],I=r[v]=h(I),null!==I&&m.push(I);this.max=M=e.max.apply(e,m),this.min=C=e.min.apply(e,m),this.stackMax=B=D?e.max.apply(e,Y):M,this.stackMin=j=D?e.min.apply(e,m):C,s.get("chartRangeMin")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMin")<C)&&(C=s.get("chartRangeMin")),s.get("chartRangeMax")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMax")>M)&&(M=s.get("chartRangeMax")),this.zeroAxis=w=s.get("zeroAxis",!0),_=C<=0&&M>=0&&w?0:0==w?C:C>0?C:M,this.xaxisOffset=_,x=D?e.max.apply(e,g)+e.max.apply(e,q):M-C,this.canvasHeightEf=w&&C<0?this.canvasHeight-2:this.canvasHeight-1,C<_?(L=D&&M>=0?B:M,z=(L-_)/x*this.canvasHeight,z!==e.ceil(z)&&(this.canvasHeightEf-=2,z=e.ceil(z))):z=this.canvasHeight,this.yoffset=z,n.isArray(s.get("colorMap"))?(this.colorMapByIndex=s.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=s.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new y(this.colorMapByValue))),this.range=x},getRegion:function(t,n){var r=e.floor(n/this.totalBarWidth);return r<0||r>=this.values.length?i:r},getCurrentRegionFields:function(){var t,e,i=this.currentRegion,n=m(this.values[i]),r=[];for(e=n.length;e--;)t=n[e],r.push({isNull:null===t,value:t,color:this.calcColor(e,t,i),offset:i});return r},calcColor:function(t,e,r){var s,a,o=this.colorMapByIndex,l=this.colorMapByValue,h=this.options;return s=this.stacked?h.get("stackedBarColor"):e<0?h.get("negBarColor"):h.get("barColor"),0===e&&h.get("zeroColor")!==i&&(s=h.get("zeroColor")),l&&(a=l.get(e))?s=a:o&&o.length>r&&(s=o[r]),n.isArray(s)?s[t%s.length]:s},renderRegion:function(t,r){var s,a,o,l,h,u,c,d,p,g,m=this.values[t],v=this.options,y=this.xaxisOffset,b=[],x=this.range,w=this.stacked,_=this.target,k=t*this.totalBarWidth,C=this.canvasHeightEf,M=this.yoffset;if(m=n.isArray(m)?m:[m],c=m.length,d=m[0],l=f(null,m),g=f(y,m,!0),l)return v.get("nullColor")?(o=r?v.get("nullColor"):this.calcHighlightColor(v.get("nullColor"),v),s=M>0?M-1:M,_.drawRect(k,s,this.barWidth-1,0,o,o)):i;for(h=M,u=0;u<c;u++){if(d=m[u],w&&d===y){if(!g||p)continue;p=!0}a=x>0?e.floor(C*(e.abs(d-y)/x))+1:1,d<y||d===y&&0===M?(s=h,h+=a):(s=M-a,M-=a),o=this.calcColor(u,d,t),r&&(o=this.calcHighlightColor(o,v)),b.push(_.drawRect(k,s,this.barWidth-1,a-1,o,o))}return 1===b.length?b[0]:b}}),n.fn.sparkline.tristate=C=s(n.fn.sparkline._base,w,{type:"tristate",init:function(t,e,r,s,a){var o=parseInt(r.get("barWidth"),10),l=parseInt(r.get("barSpacing"),10);C._super.init.call(this,t,e,r,s,a),this.regionShapes={},this.barWidth=o,this.barSpacing=l,this.totalBarWidth=o+l,this.values=n.map(e,Number),this.width=s=e.length*o+(e.length-1)*l,n.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new y(this.colorMapByValue))),this.initTarget()},getRegion:function(t,i){return e.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i,n,r=this.values,s=this.options,a=this.colorMapByIndex,o=this.colorMapByValue;return i=o&&(n=o.get(t))?n:a&&a.length>e?a[e]:r[e]<0?s.get("negBarColor"):r[e]>0?s.get("posBarColor"):s.get("zeroBarColor")},renderRegion:function(t,i){var n,r,s,a,o,l,h=this.values,u=this.options,c=this.target;if(n=c.pixelHeight,s=e.round(n/2),a=t*this.totalBarWidth,h[t]<0?(o=s,r=s-1):h[t]>0?(o=0,r=s-1):(o=s-1,r=2),l=this.calcColor(h[t],t),null!==l)return i&&(l=this.calcHighlightColor(l,u)),c.drawRect(a,o,this.barWidth-1,r-1,l,l)}}),n.fn.sparkline.discrete=M=s(n.fn.sparkline._base,w,{type:"discrete",init:function(t,r,s,a,o){M._super.init.call(this,t,r,s,a,o),this.regionShapes={},this.values=r=n.map(r,Number),this.min=e.min.apply(e,r),this.max=e.max.apply(e,r),this.range=this.max-this.min,this.width=a="auto"===s.get("width")?2*r.length:this.width,this.interval=e.floor(a/r.length),this.itemWidth=a/r.length,s.get("chartRangeMin")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMin")<this.min)&&(this.min=s.get("chartRangeMin")),s.get("chartRangeMax")!==i&&(s.get("chartRangeClip")||s.get("chartRangeMax")>this.max)&&(this.max=s.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight="auto"===s.get("lineHeight")?e.round(.3*this.canvasHeight):s.get("lineHeight"))},getRegion:function(t,i){return e.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],offset:t}},renderRegion:function(t,i){var n,r,s,a,l=this.values,h=this.options,u=this.min,c=this.max,d=this.range,f=this.interval,p=this.target,g=this.canvasHeight,m=this.lineHeight,v=g-m;return r=o(l[t],u,c),a=t*f,n=e.round(v-v*((r-u)/d)),s=h.get("thresholdColor")&&r<h.get("thresholdValue")?h.get("thresholdColor"):h.get("lineColor"),i&&(s=this.calcHighlightColor(s,h)),p.drawLine(a,n,a,n+m,s)}}),n.fn.sparkline.bullet=S=s(n.fn.sparkline._base,{type:"bullet",init:function(t,n,r,s,a){var o,l,h;S._super.init.call(this,t,n,r,s,a),this.values=n=u(n),h=n.slice(),h[0]=null===h[0]?h[2]:h[0],h[1]=null===n[1]?h[2]:h[1],o=e.min.apply(e,n),l=e.max.apply(e,n),o=r.get("base")===i?o<0?o:0:r.get("base"),this.min=o,this.max=l,this.range=l-o,this.shapes={},this.valueShapes={},this.regiondata={},this.width=s="auto"===r.get("width")?"4.0em":s,this.target=this.$el.simpledraw(s,a,r.get("composite")),n.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,n){var r=this.target.getShapeAt(t,e,n);return r!==i&&this.shapes[r]!==i?this.shapes[r]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e,i=this.currentRegion,n=this.valueShapes[i];switch(delete this.shapes[n],i.substr(0,1)){case"r":e=this.renderRange(i.substr(1),t);break;case"p":e=this.renderPerformance(t);break;case"t":e=this.renderTarget(t)}this.valueShapes[i]=e.id,this.shapes[e.id]=i,this.target.replaceWithShape(n,e)},renderRange:function(t,i){var n=this.values[t],r=e.round(this.canvasWidth*((n-this.min)/this.range)),s=this.options.get("rangeColors")[t-2];return i&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,0,r-1,this.canvasHeight-1,s,s)},renderPerformance:function(t){var i=this.values[1],n=e.round(this.canvasWidth*((i-this.min)/this.range)),r=this.options.get("performanceColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,e.round(.3*this.canvasHeight),n-1,e.round(.4*this.canvasHeight)-1,r,r)},renderTarget:function(t){var i=this.values[0],n=e.round(this.canvasWidth*((i-this.min)/this.range)-this.options.get("targetWidth")/2),r=e.round(.1*this.canvasHeight),s=this.canvasHeight-2*r,a=this.options.get("targetColor");return t&&(a=this.calcHighlightColor(a,this.options)),this.target.drawRect(n,r,this.options.get("targetWidth")-1,s-1,a,a)},render:function(){var t,e,i=this.values.length,n=this.target;if(S._super.render.call(this)){for(t=2;t<i;t++)e=this.renderRange(t).append(),this.shapes[e.id]="r"+t,this.valueShapes["r"+t]=e.id;null!==this.values[1]&&(e=this.renderPerformance().append(),this.shapes[e.id]="p1",this.valueShapes.p1=e.id),null!==this.values[0]&&(e=this.renderTarget().append(),this.shapes[e.id]="t0",this.valueShapes.t0=e.id),n.render()}}}),n.fn.sparkline.pie=T=s(n.fn.sparkline._base,{type:"pie",init:function(t,i,r,s,a){var o,l=0;if(T._super.init.call(this,t,i,r,s,a),this.shapes={},this.valueShapes={},this.values=i=n.map(i,Number),"auto"===r.get("width")&&(this.width=this.height),i.length>0)for(o=i.length;o--;)l+=i[o];this.total=l,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,n){var r=this.target.getShapeAt(t,e,n);return r!==i&&this.shapes[r]!==i?this.shapes[r]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,n){var r,s,a,o,l,h=this.target,u=this.options,c=this.radius,d=u.get("borderWidth"),f=u.get("offset"),p=2*e.PI,g=this.values,m=this.total,v=f?2*e.PI*(f/360):0;for(o=g.length,a=0;a<o;a++){if(r=v,s=v,m>0&&(s=v+p*(g[a]/m)),t===a)return l=u.get("sliceColors")[a%u.get("sliceColors").length],n&&(l=this.calcHighlightColor(l,u)),h.drawPieSlice(c,c,c-d,r,s,i,l);v=s}},render:function(){var t,n,r=this.target,s=this.values,a=this.options,o=this.radius,l=a.get("borderWidth");if(T._super.render.call(this)){for(l&&r.drawCircle(o,o,e.floor(o-l/2),a.get("borderColor"),i,l).append(),n=s.length;n--;)s[n]&&(t=this.renderSlice(n).append(),this.valueShapes[n]=t.id,this.shapes[t.id]=n);r.render()}}}),n.fn.sparkline.box=D=s(n.fn.sparkline._base,{type:"box",init:function(t,e,i,r,s){D._super.init.call(this,t,e,i,r,s),this.values=n.map(e,Number),this.width="auto"===i.get("width")?"4.0em":r,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&t.push({field:"lo",value:this.loutlier}),this.routlier!==i&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t,n,r,s,a,o,h,u,c,d,f,p=this.target,g=this.values,m=g.length,v=this.options,y=this.canvasWidth,b=this.canvasHeight,x=v.get("chartRangeMin")===i?e.min.apply(e,g):v.get("chartRangeMin"),w=v.get("chartRangeMax")===i?e.max.apply(e,g):v.get("chartRangeMax"),_=0;if(D._super.render.call(this)){if(v.get("raw"))v.get("showOutliers")&&g.length>5?(n=g[0],t=g[1],s=g[2],a=g[3],o=g[4],h=g[5],u=g[6]):(t=g[0],s=g[1],a=g[2],o=g[3],h=g[4]);else if(g.sort(function(t,e){return t-e}),s=l(g,1),a=l(g,2),o=l(g,3),r=o-s,v.get("showOutliers")){for(t=h=i,c=0;c<m;c++)t===i&&g[c]>s-r*v.get("outlierIQR")&&(t=g[c]),g[c]<o+r*v.get("outlierIQR")&&(h=g[c]);n=g[0],u=g[m-1]}else t=g[0],h=g[m-1];this.quartiles=[s,a,o],this.lwhisker=t,this.rwhisker=h,this.loutlier=n,this.routlier=u,f=y/(w-x+1),v.get("showOutliers")&&(_=e.ceil(v.get("spotRadius")),y-=2*e.ceil(v.get("spotRadius")),f=y/(w-x+1),n<t&&p.drawCircle((n-x)*f+_,b/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append(),u>h&&p.drawCircle((u-x)*f+_,b/2,v.get("spotRadius"),v.get("outlierLineColor"),v.get("outlierFillColor")).append()),p.drawRect(e.round((s-x)*f+_),e.round(.1*b),e.round((o-s)*f),e.round(.8*b),v.get("boxLineColor"),v.get("boxFillColor")).append(),p.drawLine(e.round((t-x)*f+_),e.round(b/2),e.round((s-x)*f+_),e.round(b/2),v.get("lineColor")).append(),p.drawLine(e.round((t-x)*f+_),e.round(b/4),e.round((t-x)*f+_),e.round(b-b/4),v.get("whiskerColor")).append(),p.drawLine(e.round((h-x)*f+_),e.round(b/2),e.round((o-x)*f+_),e.round(b/2),v.get("lineColor")).append(),p.drawLine(e.round((h-x)*f+_),e.round(b/4),e.round((h-x)*f+_),e.round(b-b/4),v.get("whiskerColor")).append(),p.drawLine(e.round((a-x)*f+_),e.round(.1*b),e.round((a-x)*f+_),e.round(.9*b),v.get("medianColor")).append(),v.get("target")&&(d=e.ceil(v.get("spotRadius")),p.drawLine(e.round((v.get("target")-x)*f+_),e.round(b/2-d),e.round((v.get("target")-x)*f+_),e.round(b/2+d),v.get("targetColor")).append(),p.drawLine(e.round((v.get("target")-x)*f+_-d),e.round(b/2),e.round((v.get("target")-x)*f+_+d),e.round(b/2),v.get("targetColor")).append()),p.render()}}}),A=s({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),F=s({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,i){t&&(this.width=t,this.height=e,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),n.data(i,"_jqs_vcanvas",this))},drawLine:function(t,e,i,n,r,s){return this.drawShape([[t,e],[i,n]],r,s)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,r,s){return this._genShape("Circle",[t,e,i,n,r,s])},drawPieSlice:function(t,e,i,n,r,s,a){return this._genShape("PieSlice",[t,e,i,n,r,s,a])},drawRect:function(t,e,i,n,r,s){return this._genShape("Rect",[t,e,i,n,r,s])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){n(e).html(t)},_calculatePixelDims:function(t,e,i){var r;r=this._pxregex.exec(e),r?this.pixelHeight=r[1]:this.pixelHeight=n(i).height(),r=this._pxregex.exec(t),r?this.pixelWidth=r[1]:this.pixelWidth=n(i).width()},_genShape:function(t,e){var i=N++;return e.unshift(i),new A(this,i,t,e)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),I=s(F,{init:function(e,r,s,a){I._super.init.call(this,e,r,s),this.canvas=t.createElement("canvas"),s[0]&&(s=s[0]),n.data(s,"_jqs_vcanvas",this),n(this.canvas).css({display:"inline-block",width:e,height:r,verticalAlign:"top"}),this._insert(this.canvas,s),this._calculatePixelDims(e,r,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=a,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i,n(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,n){var r=this.canvas.getContext("2d");return t!==i&&(r.strokeStyle=t),r.lineWidth=n===i?1:n,e!==i&&(r.fillStyle=e),r},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i},_drawShape:function(t,e,n,r,s){var a,o,l=this._getContext(n,r,s);for(l.beginPath(),l.moveTo(e[0][0]+.5,e[0][1]+.5),a=1,o=e.length;a<o;a++)l.lineTo(e[a][0]+.5,e[a][1]+.5);n!==i&&l.stroke(),r!==i&&l.fill(),this.targetX!==i&&this.targetY!==i&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,n,r,s,a,o,l){var h=this._getContext(a,o,l);h.beginPath(),h.arc(n,r,s,0,2*e.PI,!1),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),a!==i&&h.stroke(),o!==i&&h.fill()},_drawPieSlice:function(t,e,n,r,s,a,o,l){var h=this._getContext(o,l);h.beginPath(),h.moveTo(e,n),h.arc(e,n,r,s,a,!1),h.lineTo(e,n),h.closePath(),o!==i&&h.stroke(),l&&h.fill(),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,r,s,a){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+r],[e,i+r],[e,i]],s,a)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i,n=this.shapeseq;for(this.shapes[e.id]=e,i=n.length;i--;)n[i]==t&&(n[i]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i,n,r,s=this.shapeseq,a={};for(n=t.length;n--;)a[t[n]]=!0;for(n=s.length;n--;)i=s[n],a[i]&&(s.splice(n,1),delete this.shapes[i],r=n);for(n=e.length;n--;)s.splice(r,0,e[n].id),this.shapes[e[n].id]=e[n]},insertAfterShape:function(t,e){var i,n=this.shapeseq;for(i=n.length;i--;)if(n[i]===t)return n.splice(i+1,0,e.id),void(this.shapes[e.id]=e)},removeShapeId:function(t){var e,i=this.shapeseq;for(e=i.length;e--;)if(i[e]===t){i.splice(e,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t,e,i,n=this.shapeseq,r=this.shapes,s=n.length,a=this._getContext();for(a.clearRect(0,0,this.pixelWidth,this.pixelHeight),i=0;i<s;i++)t=n[i],e=r[t],this["_draw"+e.type].apply(this,e.args);this.interact||(this.shapes={},this.shapeseq=[])}}),z=s(F,{init:function(e,i,r){var s;z._super.init.call(this,e,i,r),r[0]&&(r=r[0]),n.data(r,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),n(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,s='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",s),this.group=n(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,n,r,s){var a,o,l,h,u,c,d,f=[];for(d=0,c=e.length;d<c;d++)f[d]=""+e[d][0]+","+e[d][1];return a=f.splice(0,1),s=s===i?1:s,o=n===i?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+n+'" ',l=r===i?' filled="false"':' fillColor="'+r+'" filled="true" ',h=f[0]===f[f.length-1]?"x ":"",u='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+o+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+a+" l "+f.join(", ")+" "+h+'e"> </v:shape>'},_drawCircle:function(t,e,n,r,s,a,o){var l,h,u;return e-=r,n-=r,l=s===i?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+s+'" ',h=a===i?' filled="false"':' fillColor="'+a+'" filled="true" ',u='<v:oval  id="jqsshape'+t+'" '+l+h+' style="position:absolute;top:'+n+"px; left:"+e+"px; width:"+2*r+"px; height:"+2*r+'px"></v:oval>'},_drawPieSlice:function(t,n,r,s,a,o,l,h){var u,c,d,f,p,g,m,v;if(a===o)return"";if(o-a===2*e.PI&&(a=0,o=2*e.PI),c=n+e.round(e.cos(a)*s),d=r+e.round(e.sin(a)*s),f=n+e.round(e.cos(o)*s),p=r+e.round(e.sin(o)*s),c===f&&d===p){if(o-a<e.PI)return"";c=f=n+s,d=p=r}return c===f&&d===p&&o-a<e.PI?"":(u=[n-s,r-s,n+s,r+s,c,d,f,p],g=l===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',
m=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+t+'" '+g+m+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+n+","+r+" wa "+u.join(", ")+' x e"> </v:shape>')},_drawRect:function(t,e,i,n,r,s,a){return this._drawShape(t,[[e,i],[e,i+r],[e+n,i+r],[e+n,i],[e,i]],s,a)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=n("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);i[0].outerHTML=r},replaceWithShapes:function(t,e){var i,r=n("#jqsshape"+t[0]),s="",a=e.length;for(i=0;i<a;i++)s+=this["_draw"+e[i].type].apply(this,e[i].args);for(r[0].outerHTML=s,i=1;i<t.length;i++)n("#jqsshape"+t[i]).remove()},insertAfterShape:function(t,e){var i=n("#jqsshape"+t),r=this["_draw"+e.type].apply(this,e.args);i[0].insertAdjacentHTML("afterEnd",r)},removeShapeId:function(t){var e=n("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t){var e=t.id.substr(8);return e},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math),function(){"use strict";var t=this,e=t.Chart,i=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var n=i.helpers={},r=n.each=function(t,e,i){var n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(i,[t[r],r].concat(n))}else for(var s in t)e.apply(i,[t[s],s].concat(n))},s=n.clone=function(t){var e={};return r(t,function(i,n){t.hasOwnProperty(n)&&(e[n]=i)}),e},a=n.extend=function(t){return r(Array.prototype.slice.call(arguments,1),function(e){r(e,function(i,n){e.hasOwnProperty(n)&&(t[n]=i)})}),t},o=n.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=n.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},h=(n.where=function(t,e){var i=[];return n.each(t,function(t){e(t)&&i.push(t)}),i},n.findNextWhere=function(t,e,i){i||(i=-1);for(var n=i+1;n<t.length;n++){var r=t[n];if(e(r))return r}},n.findPreviousWhere=function(t,e,i){i||(i=t.length);for(var n=i-1;n>=0;n--){var r=t[n];if(e(r))return r}},n.inherits=function(t){var e=this,i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=e.prototype,i.prototype=new n,i.extend=h,t&&a(i.prototype,t),i.__super__=e.prototype,i}),u=n.noop=function(){},c=n.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=n.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},f=n.amd="function"==typeof t.define&&t.define.amd,p=n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=n.max=function(t){return Math.max.apply(Math,t)},m=n.min=function(t){return Math.min.apply(Math,t)},v=(n.cap=function(t,e,i){if(p(e)){if(t>e)return e}else if(p(i)&&i>t)return i;return t},n.getDecimalPlaces=function(t){return t%1!==0&&p(t)?t.toString().split(".")[1].length:0}),y=n.radians=function(t){return t*(Math.PI/180)},b=(n.getAngleFromPoint=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n),s=2*Math.PI+Math.atan2(n,i);return 0>i&&0>n&&(s+=2*Math.PI),{angle:s,distance:r}},n.aliasPixel=function(t){return t%2===0?0:.5}),x=(n.splineCurve=function(t,e,i,n){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),s=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),a=n*r/(r+s),o=n*s/(r+s);return{inner:{x:e.x-a*(i.x-t.x),y:e.y-a*(i.y-t.y)},outer:{x:e.x+o*(i.x-t.x),y:e.y+o*(i.y-t.y)}}},n.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(n.calculateScaleRange=function(t,e,i,n,r){var s=2,a=Math.floor(e/(1.5*i)),o=s>=a,l=g(t),h=m(t);l===h&&(l+=.5,h>=.5&&!n?h-=.5:l+=.5);for(var u=Math.abs(l-h),c=x(u),d=Math.ceil(l/(1*Math.pow(10,c)))*Math.pow(10,c),f=n?0:Math.floor(h/(1*Math.pow(10,c)))*Math.pow(10,c),p=d-f,v=Math.pow(10,c),y=Math.round(p/v);(y>a||a>2*y)&&!o;)if(y>a)v*=2,y=Math.round(p/v),y%1!==0&&(o=!0);else if(r&&c>=0){if(v/2%1!==0)break;v/=2,y=Math.round(p/v)}else v/=2,y=Math.round(p/v);return o&&(y=s,v=p/y),{steps:y,stepValue:v,min:f,max:f+y*v}},n.template=function(t,e){function i(t,e){var i=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t];return e?i(e):i}if(t instanceof Function)return t(e);var n={};return i(t,e)}),_=(n.generateLabels=function(t,e,i,n){var s=new Array(e);return labelTemplateString&&r(s,function(e,r){s[r]=w(t,{value:i+n*(r+1)})}),s},n.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i)))},easeOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:1==(t/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/i)+1)},easeInOutElastic:function(t){var e=1.70158,i=0,n=1;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),n<Math.abs(1)?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/i)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-_.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*_.easeInBounce(2*t):.5*_.easeOutBounce(2*t-1)+.5}}),k=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),C=(n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),n.animationLoop=function(t,e,i,n,r,s){var a=0,o=_[i]||_.linear,l=function(){a++;var i=a/e,h=o(i);t.call(s,h,i,a),n.call(s,h,i),e>a?s.animationFrame=k(l):r.apply(s)};k(l)},n.getRelativePosition=function(t){var e,i,n=t.originalEvent||t,r=t.currentTarget||t.srcElement,s=r.getBoundingClientRect();return n.touches?(e=n.touches[0].clientX-s.left,i=n.touches[0].clientY-s.top):(e=n.clientX-s.left,i=n.clientY-s.top),{x:e,y:i}},n.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}),M=n.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=u},S=(n.bindEvents=function(t,e,i){t.events||(t.events={}),r(e,function(e){t.events[e]=function(){i.apply(t,arguments)},C(t.chart.canvas,e,t.events[e])})},n.unbindEvents=function(t,e){r(e,function(e,i){M(t.chart.canvas,i,e)})}),T=n.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},D=n.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},E=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,n=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=i+"px",e.canvas.style.height=n+"px",e.canvas.height=n*window.devicePixelRatio,e.canvas.width=i*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),P=n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},A=n.fontString=function(t,e,i){return e+" "+t+"px "+i},F=n.longestText=function(t,e,i){t.font=e;var n=0;return r(i,function(e){var i=t.measureText(e).width;n=i>n?i:n}),n},I=n.drawRoundedRectangle=function(t,e,i,n,r,s){t.beginPath(),t.moveTo(e+s,i),t.lineTo(e+n-s,i),t.quadraticCurveTo(e+n,i,e+n,i+s),t.lineTo(e+n,i+r-s),t.quadraticCurveTo(e+n,i+r,e+n-s,i+r),t.lineTo(e+s,i+r),t.quadraticCurveTo(e,i+r,e,i+r-s),t.lineTo(e,i+s),t.quadraticCurveTo(e,i,e+s,i),t.closePath()};i.instances={},i.Type=function(t,e,n){this.options=e,this.chart=n,this.id=c(),i.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},a(i.Type.prototype,{initialize:function(){return this},clear:function(){return P(this.chart),this},stop:function(){return n.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,i=T(this.chart.canvas),n=this.options.maintainAspectRatio?i/this.chart.aspectRatio:D(this.chart.canvas);return e.width=this.chart.width=i,e.height=this.chart.height=n,E(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:u,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),S(this,this.events),delete i.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var s=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(r(t,function(t,i){t!==this.activeElements[i]&&(e=!0)},this),e)}.call(this,t);if(s||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,o,h=this.datasets.length-1;h>=0&&(a=this.datasets[h].points||this.datasets[h].bars||this.datasets[h].segments,o=l(a,t[0]),-1===o);h--);var u=[],c=[],d=function(){var t,e,i,r,s,a=[],l=[],h=[];return n.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[o]&&t[o].hasValue()&&a.push(t[o])}),n.each(a,function(t){l.push(t.x),h.push(t.y),u.push(n.template(this.options.multiTooltipTemplate,t)),c.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),s=m(h),i=g(h),r=m(l),e=g(l),{x:r>this.chart.width/2?r:e,y:(s+i)/2}}.call(this,o);new i.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:u,legendColors:c,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else r(t,function(t){var e=t.tooltipPosition();new i.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(t){var e=this,n=function(){return e.apply(this,arguments)};if(n.prototype=s(e.prototype),a(n.prototype,t),n.extend=i.Type.extend,t.name||e.prototype.name){var r=t.name||e.prototype.name,l=i.defaults[e.prototype.name]?s(i.defaults[e.prototype.name]):{};i.defaults[r]=a(l,t.defaults),i.types[r]=n,i.prototype[r]=function(t,e){var s=o(i.defaults.global,i.defaults[r],e||{});return new n(t,s,this)}}else d("Name not provided for this chart, so it hasn't been registered");return e},i.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(i.Element.prototype,{initialize:function(){},restore:function(t){return t?r(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=s(this),delete this._saved._saved,this},update:function(t){return r(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return r(t,function(t,i){this[i]=(t-this._saved[i])*e+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),i.Element.extend=h,i.Point=i.Element.extend({display:!0,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),i.Arc=i.Element.extend({inRange:function(t,e){var i=n.getAngleFromPoint(this,{x:t,y:e}),r=i.angle>=this.startAngle&&i.angle<=this.endAngle,s=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return r&&s},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,n=this.x+e,r=this.base-(this.base-this.y),s=this.strokeWidth/2;this.showStroke&&(i+=s,n-=s,r+=s),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(i,this.base),t.lineTo(i,r),t.lineTo(n,r),t.lineTo(n,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),i.Tooltip=i.Element.extend({draw:function(){var t=this.chart.ctx;t.font=A(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,i=t.measureText(this.text).width+2*this.xPadding,n=this.fontSize+2*this.yPadding,r=n+this.caretHeight+e;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var s=this.x-i/2,a=this.y-r;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":s=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":s=this.x-(this.cornerRadius+this.caretHeight)}I(t,s,a,i,n,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,s+i/2,a+n/2)}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=A(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=A(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=F(this.ctx,this.font,this.labels)+this.fontSize+3,i=g([e,t]);this.width=i+2*this.xPadding;var n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){I(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,n.each(this.labels,function(e,i){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[i].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?F(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,i=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=i/2>this.yLabelWidth+10?i/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var r,s=F(this.ctx,this.font,this.xLabels);this.xLabelWidth=s;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)r=Math.cos(y(this.xLabelRotation)),t=r*i,e=r*n,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=r*s;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*s+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:u,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=e/(this.valuesCount-(this.offsetGridLines?0:1)),n=i*t+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=i/2),Math.round(n)},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,r(this.yLabels,function(r,s){var a=this.endPoint-e*s,o=Math.round(a);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(r,i-10,a),t.beginPath(),s>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),o+=n.aliasPixel(t.lineWidth),t.moveTo(i,o),t.lineTo(this.width,o),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i-5,o),t.lineTo(i,o),t.stroke(),t.closePath()},this),r(this.xLabels,function(e,i){var n=this.calculateX(i)+b(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+b(this.lineWidth),s=this.xLabelRotation>0;t.beginPath(),i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(n,s?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=s?"right":"center",t.textBaseline=s?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,i,n,r,s,a,o,l,h,u,c,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,g=0;for(this.ctx.font=A(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),i=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(n=i/2,t.x+n>f&&(f=t.x+n,r=e),t.x-n<g&&(g=t.x-n,a=e)):e<this.valuesCount/2?t.x+i>f&&(f=t.x+i,r=e):e>this.valuesCount/2&&t.x-i<g&&(g=t.x-i,a=e);l=g,h=Math.ceil(f-this.width),s=this.getIndexAngle(r),o=this.getIndexAngle(a),u=h/Math.sin(s+Math.PI/2),c=l/Math.sin(o+Math.PI/2),u=p(u)?u:0,c=p(c)?c:0,this.drawingArea=d-(c+u)/2,this.setCenterPoint(c,u)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,n=t+this.drawingArea;this.xCenter=(n+i)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(r(this.yLabels,function(e,i){if(i>0){var n,r=i*(this.drawingArea/this.steps),s=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)n=this.getPointPosition(a,this.calculateCenterOffset(this.min+i*this.stepValue)),0===a?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=A(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var o=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-o/2-this.backdropPaddingX,s-this.fontSize/2-this.backdropPaddingY,o+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,s)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var i=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(i.x,i.y),t.stroke(),t.closePath()}var n=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=A(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var s=this.labels.length,a=this.labels.length/2,o=a/2,l=o>e||e>s-o,h=e===o||e===s-o;t.textAlign=0===e?"center":e===a?"center":a>e?"left":"right",t.textBaseline=h?"middle":l?"bottom":"top",t.fillText(this.labels[e],n.x,n.y)}}}}}),n.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){r(i.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),f?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),t.Chart=i,i.noConflict=function(){return t.Chart=e,i}}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:n,initialize:function(t){var n=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,i){var r=this.calculateBaseWidth(),s=this.calculateX(i)-r/2,a=this.calculateBarWidth(t);return s+a*e+e*n.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*n.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*n.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(n),i.each(e.data,function(i,r){n.bars.push(new this.BarClass({value:i,label:t.labels[r],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,n){i.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,n,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){i.each(this.datasets,function(e,n){i.each(e.bars,t,this,n)},this)},getBarsAtEvent:function(t){for(var e,n=[],r=i.getRelativePosition(t),s=function(t){n.push(t.bars[e])},a=0;a<this.datasets.length;a++)for(e=0;e<this.datasets[a].bars.length;e++)if(this.datasets[a].bars[e].inRange(r.x,r.y))return i.each(this.datasets,s),n;return n},buildScale:function(t){var e=this,n=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=i.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,e)},xLabels:t,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(r,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,e){i.each(t,function(t,i){this.datasets[i].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){i.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=i.extend({height:this.chart.height,width:this.chart.width
});this.scale.update(t)},draw:function(t){var e=t||1;this.clear(),this.chart.ctx,this.scale.draw(e),i.each(this.datasets,function(t,n){i.each(t.bars,function(t,i){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,n,i),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:n,initialize:function(t){this.segments=[],this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];i.each(this.segments,function(t){t.restore(["fillColor"])}),i.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),i.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.segments,function(t){t.inRange(n.x,n.y)&&e.push(t)},this),e},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),i||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,i.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),i.each(this.activeElements,function(t){t.restore(["fillColor"])}),i.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=i.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,i.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),i.each(this.segments,function(t,i){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:i.merge(n,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:n,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(n),i.each(e.data,function(i,r){n.points.push(new this.PointClass({value:i,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){i.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){i.each(this.datasets,function(e){i.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.datasets,function(t){i.each(t.points,function(t){t.inRange(n.x,n.y)&&e.push(t)})},this),e},buildScale:function(t){var n=this,r=function(){var t=[];return n.eachPoints(function(e){t.push(e.value)}),t},s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=i.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,e)},xLabels:t,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(s,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(s)},addData:function(t,e){i.each(t,function(t,i){this.datasets[i].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var n=this.chart.ctx,r=function(t){return null!==t.value},s=function(t,e,n){return i.findNextWhere(e,r,n)||t},a=function(t,e,n){return i.findPreviousWhere(e,r,n)||t};this.scale.draw(e),i.each(this.datasets,function(t){var o=i.where(t.points,r);i.each(t.points,function(t,i){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(i)},e)},this),this.options.bezierCurve&&i.each(o,function(t,e){var n=e>0&&e<o.length-1?this.options.bezierCurveTension:0;t.controlPoints=i.splineCurve(a(t,o,e),t,s(t,o,e),n),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),i.each(o,function(t,e){if(0===e)n.moveTo(t.x,t.y);else if(this.options.bezierCurve){var i=a(t,o,e);n.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else n.lineTo(t.x,t.y)},this),n.stroke(),this.options.datasetFill&&o.length>0&&(n.lineTo(o[o.length-1].x,this.scale.endPoint),n.lineTo(o[0].x,this.scale.endPoint),n.fillStyle=t.fillColor,n.closePath(),n.fill()),i.each(o,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers,n={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:n,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),i.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];i.each(this.segments,function(t){t.restore(["fillColor"])}),i.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],n=i.getRelativePosition(t);return i.each(this.segments,function(t){t.inRange(n.x,n.y)&&e.push(t)},this),e},addData:function(t,e,i){var n=e||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(t){var e=i.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,i.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];i.each(t,function(t){e.push(t.value)});var n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(e,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n,{size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),i.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),i.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),i.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),i.each(this.segments,function(t,i){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===i&&(t.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,i=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),i.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),i.each(t.datasets,function(e){var n={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(n),i.each(e.data,function(i,r){var s;this.scale.animation||(s=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(i))),n.points.push(new this.PointClass({value:i,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:s.x,y:this.options.animation?this.scale.yCenter:s.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){i.each(this.datasets,function(e){i.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=i.getRelativePosition(t),n=i.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),r=2*Math.PI/this.scale.valuesCount,s=Math.round((n.angle-1.5*Math.PI)/r),a=[];return(s>=this.scale.valuesCount||0>s)&&(s=0),n.distance<=this.scale.drawingArea&&i.each(this.datasets,function(t){a.push(t.points[s])}),a},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return i.each(t,function(t){t.data?e=e.concat(t.data):i.each(t.points,function(t){e.push(t.value)})}),e}(),n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(e,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n)},addData:function(t,e){this.scale.valuesCount++,i.each(t,function(t,i){var n=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[i].points.push(new this.PointClass({value:t,label:e,x:n.x,y:n.y,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),i.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,n=this.chart.ctx;this.clear(),this.scale.draw(),i.each(this.datasets,function(t){i.each(t.points,function(t,i){t.hasValue()&&t.transition(this.scale.getPointPosition(i,this.scale.calculateCenterOffset(t.value)),e)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),i.each(t.points,function(t,e){0===e?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y)},this),n.closePath(),n.stroke(),n.fillStyle=t.fillColor,n.fill(),i.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),function(t){var e,i,n="0.3.4",r="hasOwnProperty",s=/[\.\/]/,a="*",o=function(){},l=function(t,e){return t-e},h={n:{}},u=function(t,n){var r,s=i,a=Array.prototype.slice.call(arguments,2),o=u.listeners(t),h=0,c=[],d={},f=[],p=e;e=t,i=0;for(var g=0,m=o.length;g<m;g++)"zIndex"in o[g]&&(c.push(o[g].zIndex),o[g].zIndex<0&&(d[o[g].zIndex]=o[g]));for(c.sort(l);c[h]<0;)if(r=d[c[h++]],f.push(r.apply(n,a)),i)return i=s,f;for(g=0;g<m;g++)if(r=o[g],"zIndex"in r)if(r.zIndex==c[h]){if(f.push(r.apply(n,a)),i)break;do if(h++,r=d[c[h]],r&&f.push(r.apply(n,a)),i)break;while(r)}else d[r.zIndex]=r;else if(f.push(r.apply(n,a)),i)break;return i=s,e=p,f.length?f:null};u.listeners=function(t){var e,i,n,r,o,l,u,c,d=t.split(s),f=h,p=[f],g=[];for(r=0,o=d.length;r<o;r++){for(c=[],l=0,u=p.length;l<u;l++)for(f=p[l].n,i=[f[d[r]],f[a]],n=2;n--;)e=i[n],e&&(c.push(e),g=g.concat(e.f||[]));p=c}return g},u.on=function(t,e){for(var i=t.split(s),n=h,r=0,a=i.length;r<a;r++)n=n.n,!n[i[r]]&&(n[i[r]]={n:{}}),n=n[i[r]];for(n.f=n.f||[],r=0,a=n.f.length;r<a;r++)if(n.f[r]==e)return o;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.stop=function(){i=1},u.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},u.off=u.unbind=function(t,e){var i,n,o,l,u,c,d,f=t.split(s),p=[h];for(l=0,u=f.length;l<u;l++)for(c=0;c<p.length;c+=o.length-2){if(o=[c,1],i=p[c].n,f[l]!=a)i[f[l]]&&o.push(i[f[l]]);else for(n in i)i[r](n)&&o.push(i[n]);p.splice.apply(p,o)}for(l=0,u=p.length;l<u;l++)for(i=p[l];i.n;){if(e){if(i.f){for(c=0,d=i.f.length;c<d;c++)if(i.f[c]==e){i.f.splice(c,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[r](n)&&i.n[n].f){var g=i.n[n].f;for(c=0,d=g.length;c<d;c++)if(g[c]==e){g.splice(c,1);break}!g.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[r](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},u.once=function(t,e){var i=function(){var n=e.apply(this,arguments);return u.unbind(t,i),n};return u.on(t,i)},u.version=n,u.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u}(this),function(){function t(t){for(var e=0;e<se.length;e++)se[e].el.paper==t&&se.splice(e--,1)}function e(t,e,i,r,a,o){i=Q(i);var l,h,u,c,d,f,p=t.ms,g={},m={},y={};if(r)for(w=0,_=se.length;w<_;w++){var b=se[w];if(b.el.id==e.id&&b.anim==t){b.percent!=i?(se.splice(w,1),u=1):h=b,e.attr(b.totalOrigin);break}}else r=+m;for(var w=0,_=t.percents.length;w<_;w++){if(t.percents[w]==i||t.percents[w]>r*t.top){i=t.percents[w],d=t.percents[w-1]||0,p=p/t.top*(i-d),c=t.percents[w+1],l=t.anim[i];break}r&&e.attr(t.anim[t.percents[w]])}if(l){if(h)h.initstatus=r,h.start=new Date-h.ms*r;else{for(var C in l)if(l[k](C)&&(et[k](C)||e.paper.customAttributes[k](C)))switch(g[C]=e.attr(C),null==g[C]&&(g[C]=tt[C]),m[C]=l[C],et[C]){case Y:y[C]=(m[C]-g[C])/p;break;case"colour":g[C]=v.getRGB(g[C]);var M=v.getRGB(m[C]);y[C]={r:(M.r-g[C].r)/p,g:(M.g-g[C].g)/p,b:(M.b-g[C].b)/p};break;case"path":var S=zt(g[C],m[C]),T=S[1];for(g[C]=S[0],y[C]=[],w=0,_=g[C].length;w<_;w++){y[C][w]=[0];for(var E=1,P=g[C][w].length;E<P;E++)y[C][w][E]=(T[w][E]-g[C][w][E])/p}break;case"transform":var A=e._,z=Ot(A[C],m[C]);if(z)for(g[C]=z.from,m[C]=z.to,y[C]=[],y[C].real=!0,w=0,_=g[C].length;w<_;w++)for(y[C][w]=[g[C][w][0]],E=1,P=g[C][w].length;E<P;E++)y[C][w][E]=(m[C][w][E]-g[C][w][E])/p;else{var L=e.matrix||new s,R={_:{transform:A.transform},getBBox:function(){return e.getBBox(1)}};g[C]=[L.a,L.b,L.c,L.d,L.e,L.f],Nt(R,m[C]),m[C]=R._.transform,y[C]=[(R.matrix.a-L.a)/p,(R.matrix.b-L.b)/p,(R.matrix.c-L.c)/p,(R.matrix.d-L.d)/p,(R.matrix.e-L.e)/p,(R.matrix.f-L.f)/p]}break;case"csv":var N=F(l[C])[I](x),H=F(g[C])[I](x);if("clip-rect"==C)for(g[C]=H,y[C]=[],w=H.length;w--;)y[C][w]=(N[w]-g[C][w])/p;m[C]=N;break;default:for(N=[][D](l[C]),H=[][D](g[C]),y[C]=[],w=e.paper.customAttributes[C].length;w--;)y[C][w]=((N[w]||0)-(H[w]||0))/p}var O=l.easing,W=v.easing_formulas[O];if(!W)if(W=F(O).match(X),W&&5==W.length){var j=W;W=function(t){return n(t,+j[1],+j[2],+j[3],+j[4],p)}}else W=ct;if(f=l.start||t.start||+new Date,b={anim:t,percent:i,timestamp:f,start:f+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:p,easing:W,from:g,diff:y,to:m,el:e,callback:l.callback,prev:d,next:c,repeat:o||t.times,origin:e.attr(),totalOrigin:a},se.push(b),r&&!h&&!u&&(b.stop=!0,b.start=new Date-p*r,1==se.length))return oe();u&&(b.start=new Date-b.ms*r),1==se.length&&ae(oe)}eve("raphael.anim.start."+e.id,e,t)}}function i(t,e){var i=[],n={};if(this.ms=e,this.times=1,t){for(var r in t)t[k](r)&&(n[Q(r)]=t[r],i.push(Q(r)));i.sort(ht)}this.anim=n,this.top=i[i.length-1],this.percents=i}function n(t,e,i,n,r,s){function a(t,e){var i,n,r,s,a,o;for(r=t,o=0;o<8;o++){if(s=l(r)-t,W(s)<e)return r;if(a=(3*c*r+2*u)*r+h,W(a)<1e-6)break;r-=s/a}if(i=0,n=1,r=t,r<i)return i;if(r>n)return n;for(;i<n;){if(s=l(r),W(s-t)<e)return r;t>s?i=r:n=r,r=(n-i)/2+i}return r}function o(t,e){var i=a(t,e);return((p*i+f)*i+d)*i}function l(t){return((c*t+u)*t+h)*t}var h=3*e,u=3*(n-e)-h,c=1-h-u,d=3*i,f=3*(r-i)-d,p=1-d-f;return o(t,1/(200*s))}function r(){return this.x+A+this.y+A+this.width+" \xd7 "+this.height}function s(t,e,i,n,r,s){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+r,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function a(t,e,i){t=v._path2curve(t),e=v._path2curve(e);for(var n,r,s,a,l,h,u,c,d,f,p=i?0:[],g=0,m=t.length;g<m;g++){var y=t[g];if("M"==y[0])n=l=y[1],r=h=y[2];else{"C"==y[0]?(d=[n,r].concat(y.slice(1)),n=d[6],r=d[7]):(d=[n,r,n,r,l,h,l,h],n=l,r=h);for(var b=0,x=e.length;b<x;b++){var w=e[b];if("M"==w[0])s=u=w[1],a=c=w[2];else{"C"==w[0]?(f=[s,a].concat(w.slice(1)),s=f[6],a=f[7]):(f=[s,a,s,a,u,c,u,c],s=u,a=c);var _=o(d,f,i);if(i)p+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=g,_[k].segment2=b,_[k].bez1=d,_[k].bez2=f;p=p.concat(_)}}}}}return p}function o(t,e,i){var n=v.bezierBBox(t),r=v.bezierBBox(e);if(!v.isBBoxIntersect(n,r))return i?0:[];for(var s=u.apply(0,t),a=u.apply(0,e),o=~~(s/5),h=~~(a/5),c=[],d=[],f={},p=i?0:[],g=0;g<o+1;g++){var m=v.findDotsAtSegment.apply(v,t.concat(g/o));c.push({x:m.x,y:m.y,t:g/o})}for(g=0;g<h+1;g++)m=v.findDotsAtSegment.apply(v,e.concat(g/h)),d.push({x:m.x,y:m.y,t:g/h});for(g=0;g<o;g++)for(var y=0;y<h;y++){var b=c[g],x=c[g+1],w=d[y],_=d[y+1],k=W(x.x-b.x)<.001?"y":"x",C=W(_.x-w.x)<.001?"y":"x",M=l(b.x,b.y,x.x,x.y,w.x,w.y,_.x,_.y);if(M){if(f[M.x.toFixed(4)]==M.y.toFixed(4))continue;f[M.x.toFixed(4)]=M.y.toFixed(4);var S=b.t+W((M[k]-b[k])/(x[k]-b[k]))*(x.t-b.t),T=w.t+W((M[C]-w[C])/(_[C]-w[C]))*(_.t-w.t);S>=0&&S<=1&&T>=0&&T<=1&&(i?p++:p.push({x:M.x,y:M.y,t1:S,t2:T}))}}return p}function l(t,e,i,n,r,s,a,o){if(!(H(t,i)<O(r,a)||O(t,i)>H(r,a)||H(e,n)<O(s,o)||O(e,n)>H(s,o))){var l=(t*n-e*i)*(r-a)-(t-i)*(r*o-s*a),h=(t*n-e*i)*(s-o)-(e-n)*(r*o-s*a),u=(t-i)*(s-o)-(e-n)*(r-a);if(!u)return;var c=l/u,d=h/u,f=+c.toFixed(2),p=+d.toFixed(2);if(f<+O(t,i).toFixed(2)||f>+H(t,i).toFixed(2)||f<+O(r,a).toFixed(2)||f>+H(r,a).toFixed(2)||p<+O(e,n).toFixed(2)||p>+H(e,n).toFixed(2)||p<+O(s,o).toFixed(2)||p>+H(s,o).toFixed(2))return;return{x:c,y:d}}}function h(t,e,i,n,r,s,a,o,l){if(!(l<0||u(t,e,i,n,r,s,a,o)<l)){var h,c=1,d=c/2,f=c-d,p=.01;for(h=u(t,e,i,n,r,s,a,o,f);W(h-l)>p;)d/=2,f+=(h<l?1:-1)*d,h=u(t,e,i,n,r,s,a,o,f);return f}}function u(t,e,i,n,r,s,a,o,l){null==l&&(l=1),l=l>1?1:l<0?0:l;for(var h=l/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;g<u;g++){var m=h*d[g]+h,v=c(m,t,i,r,a),y=c(m,e,n,s,o),b=v*v+y*y;p+=f[g]*N.sqrt(b)}return h*p}function c(t,e,i,n,r){var s=-3*e+9*i-9*n+3*r,a=t*s+6*e-12*i+6*n;return t*a-3*e+3*i}function d(t,e){for(var i=[],n=0,r=t.length;r-2*!e>n;n+=2){var s=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?r-4==n?s[3]={x:+t[0],y:+t[1]}:r-2==n&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[r-2],y:+t[r-1]}:r-4==n?s[3]=s[2]:n||(s[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return i}function f(){return this.hex}function p(t,e,i){function n(){var r=Array.prototype.slice.call(arguments,0),s=r.join("\u2400"),a=n.cache=n.cache||{},o=n.count=n.count||[];return a[k](s)?(g(o,s),i?i(a[s]):a[s]):(o.length>=1e3&&delete a[o.shift()],o.push(s),a[s]=t[T](e,r),i?i(a[s]):a[s])}return n}function g(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function m(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[k](i)&&(e[i]=m(t[i]));return e}function v(t){if(v.is(t,"function"))return y?t():eve.on("raphael.DOMload",t);if(v.is(t,U))return v._engine.create[T](v,t.splice(0,3+v.is(t[0],Y))).add(t);var e=Array.prototype.slice.call(arguments,0);if(v.is(e[e.length-1],"function")){var i=e.pop();return y?i.call(v._engine.create[T](v,e)):eve.on("raphael.DOMload",function(){i.call(v._engine.create[T](v,e))})}return v._engine.create[T](v,arguments)}v.version="2.1.0",v.eve=eve;var y,b,x=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},_=/\{(\d+)\}/g,k="hasOwnProperty",C={doc:document,win:window},M={was:Object.prototype[k].call(C.win,"Raphael"),is:C.win.Raphael},S=function(){this.ca=this.customAttributes={}},T="apply",D="concat",E="createTouch"in C.doc,P="",A=" ",F=String,I="split",z="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](A),L={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},R=F.prototype.toLowerCase,N=Math,H=N.max,O=N.min,W=N.abs,j=N.pow,B=N.PI,Y="number",q="string",U="array",V=Object.prototype.toString,G=(v._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),$={NaN:1,Infinity:1,"-Infinity":1},X=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=N.round,Q=parseFloat,K=parseInt,J=F.prototype.toUpperCase,tt=v._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},et=v._availableAnimAttrs={blur:Y,"clip-rect":"csv",cx:Y,cy:Y,fill:"colour","fill-opacity":Y,"font-size":Y,height:Y,opacity:Y,path:"path",r:Y,rx:Y,ry:Y,stroke:"colour","stroke-opacity":Y,"stroke-width":Y,transform:"transform",width:Y,x:Y,y:Y},it=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,nt={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,st=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ot=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,lt=(v._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ht=function(t,e){return Q(t)-Q(e)},ut=function(){},ct=function(t){return t},dt=v._rectPath=function(t,e,i,n,r){return r?[["M",t+r,e],["l",i-2*r,0],["a",r,r,0,0,1,r,r],["l",0,n-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-i,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-n],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},ft=function(t,e,i,n){return null==n&&(n=i),[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},pt=v._getPath={
path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return ft(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return dt(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return dt(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return dt(e.x,e.y,e.width,e.height)}},gt=v.mapPath=function(t,e){if(!e)return t;var i,n,r,s,a,o,l;for(t=zt(t),r=0,a=t.length;r<a;r++)for(l=t[r],s=1,o=l.length;s<o;s+=2)i=e.x(l[s],l[s+1]),n=e.y(l[s],l[s+1]),l[s]=i,l[s+1]=n;return t};if(v._g=C,v.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==v.type){var mt,vt=C.doc.createElement("div");if(vt.innerHTML='<v:shape adj="1"/>',mt=vt.firstChild,mt.style.behavior="url(#default#VML)",!mt||"object"!=typeof mt.adj)return v.type=P;vt=null}v.svg=!(v.vml="VML"==v.type),v._Paper=S,v.fn=b=S.prototype=v.prototype,v._id=0,v._oid=0,v.is=function(t,e){return e=R.call(e),"finite"==e?!$[k](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||V.call(t).slice(8,-1).toLowerCase()==e},v.angle=function(t,e,i,n,r,s){if(null==r){var a=t-i,o=e-n;return a||o?(180+180*N.atan2(-o,-a)/B+360)%360:0}return v.angle(t,e,r,s)-v.angle(i,n,r,s)},v.rad=function(t){return t%360*B/180},v.deg=function(t){return 180*t/B%360},v.snapTo=function(t,e,i){if(i=v.is(i,"finite")?i:10,v.is(t,U)){for(var n=t.length;n--;)if(W(t[n]-e)<=i)return t[n]}else{t=+t;var r=e%t;if(r<i)return e-r;if(r>t-i)return e-r+t}return e};v.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*N.random()|0,i="x"==t?e:3&e|8;return i.toString(16)});v.setWindow=function(t){eve("raphael.setWindow",v,C.win,t),C.win=t,C.doc=C.win.document,v._engine.initWin&&v._engine.initWin(C.win)};var yt=function(t){if(v.vml){var e,i=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),e=n.body}catch(t){e=createPopup().document.body}var r=e.createTextRange();yt=p(function(t){try{e.style.color=F(t).replace(i,P);var n=r.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(t){return"none"}})}else{var s=C.doc.createElement("i");s.title="Rapha\xebl Colour Picker",s.style.display="none",C.doc.body.appendChild(s),yt=p(function(t){return s.style.color=t,C.doc.defaultView.getComputedStyle(s,P).getPropertyValue("color")})}return yt(t)},bt=function(){return"hsb("+[this.h,this.s,this.b]+")"},xt=function(){return"hsl("+[this.h,this.s,this.l]+")"},wt=function(){return this.hex},_t=function(t,e,i){if(null==e&&v.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&v.is(t,q)){var n=v.getRGB(t);t=n.r,e=n.g,i=n.b}return(t>1||e>1||i>1)&&(t/=255,e/=255,i/=255),[t,e,i]},kt=function(t,e,i,n){t*=255,e*=255,i*=255;var r={r:t,g:e,b:i,hex:v.rgb(t,e,i),toString:wt};return v.is(n,"finite")&&(r.opacity=n),r};v.color=function(t){var e;return v.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=v.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):v.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=v.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(v.is(t,"string")&&(t=v.getRGB(t)),v.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=v.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=v.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=wt,t},v.hsb2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,t=t.h,n=t.o),t*=360;var r,s,a,o,l;return t=t%360/60,l=i*e,o=l*(1-W(t%2-1)),r=s=a=i-l,t=~~t,r+=[l,o,0,0,o,l][t],s+=[o,l,l,o,0,0][t],a+=[0,0,o,l,l,o][t],kt(r,s,a,n)},v.hsl2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),t*=360;var r,s,a,o,l;return t=t%360/60,l=2*e*(i<.5?i:1-i),o=l*(1-W(t%2-1)),r=s=a=i-l/2,t=~~t,r+=[l,o,0,0,o,l][t],s+=[o,l,l,o,0,0][t],a+=[0,0,o,l,l,o][t],kt(r,s,a,n)},v.rgb2hsb=function(t,e,i){i=_t(t,e,i),t=i[0],e=i[1],i=i[2];var n,r,s,a;return s=H(t,e,i),a=s-O(t,e,i),n=0==a?null:s==t?(e-i)/a:s==e?(i-t)/a+2:(t-e)/a+4,n=(n+360)%6*60/360,r=0==a?0:a/s,{h:n,s:r,b:s,toString:bt}},v.rgb2hsl=function(t,e,i){i=_t(t,e,i),t=i[0],e=i[1],i=i[2];var n,r,s,a,o,l;return a=H(t,e,i),o=O(t,e,i),l=a-o,n=0==l?null:a==t?(e-i)/l:a==e?(i-t)/l+2:(t-e)/l+4,n=(n+360)%6*60/360,s=(a+o)/2,r=0==l?0:s<.5?l/(2*s):l/(2-2*s),{h:n,s:r,l:s,toString:xt}},v._path2string=function(){return this.join(",").replace(rt,"$1")};v._preload=function(t,e){var i=C.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,C.doc.body.removeChild(this)},i.onerror=function(){C.doc.body.removeChild(this)},C.doc.body.appendChild(i),i.src=t};v.getRGB=p(function(t){if(!t||(t=F(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:f};!nt[k](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=yt(t));var e,i,n,r,s,a,o=t.match(G);return o?(o[2]&&(n=K(o[2].substring(5),16),i=K(o[2].substring(3,5),16),e=K(o[2].substring(1,3),16)),o[3]&&(n=K((s=o[3].charAt(3))+s,16),i=K((s=o[3].charAt(2))+s,16),e=K((s=o[3].charAt(1))+s,16)),o[4]&&(a=o[4][I](it),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),"rgba"==o[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100)),o[5]?(a=o[5][I](it),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(e/=360),"hsba"==o[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100),v.hsb2rgb(e,i,n,r)):o[6]?(a=o[6][I](it),e=Q(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(e/=360),"hsla"==o[1].toLowerCase().slice(0,4)&&(r=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(r/=100),v.hsl2rgb(e,i,n,r)):(o={r:e,g:i,b:n,toString:f},o.hex="#"+(16777216|n|i<<8|e<<16).toString(16).slice(1),v.is(r,"finite")&&(o.opacity=r),o)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f}},v),v.hsb=p(function(t,e,i){return v.hsb2rgb(t,e,i).hex}),v.hsl=p(function(t,e,i){return v.hsl2rgb(t,e,i).hex}),v.rgb=p(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),v.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},v.getColor.reset=function(){delete this.start},v.parsePathString=function(t){if(!t)return null;var e=Ct(t);if(e.arr)return St(e.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return v.is(t,U)&&v.is(t[0],U)&&(n=St(t)),n.length||F(t).replace(st,function(t,e,r){var s=[],a=e.toLowerCase();if(r.replace(ot,function(t,e){e&&s.push(+e)}),"m"==a&&s.length>2&&(n.push([e][D](s.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)n.push([e][D](s));else for(;s.length>=i[a]&&(n.push([e][D](s.splice(0,i[a]))),i[a]););}),n.toString=v._path2string,e.arr=St(n),n},v.parseTransformString=p(function(t){if(!t)return null;var e=[];return v.is(t,U)&&v.is(t[0],U)&&(e=St(t)),e.length||F(t).replace(at,function(t,i,n){var r=[];R.call(i);n.replace(ot,function(t,e){e&&r.push(+e)}),e.push([i][D](r))}),e.toString=v._path2string,e});var Ct=function(t){var e=Ct.ps=Ct.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var i in e)e[k](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])}),e[t]};v.findDotsAtSegment=function(t,e,i,n,r,s,a,o,l){var h=1-l,u=j(h,3),c=j(h,2),d=l*l,f=d*l,p=u*t+3*c*l*i+3*h*l*l*r+f*a,g=u*e+3*c*l*n+3*h*l*l*s+f*o,m=t+2*l*(i-t)+d*(r-2*i+t),v=e+2*l*(n-e)+d*(s-2*n+e),y=i+2*l*(r-i)+d*(a-2*r+i),b=n+2*l*(s-n)+d*(o-2*s+n),x=h*t+l*i,w=h*e+l*n,_=h*r+l*a,k=h*s+l*o,C=90-180*N.atan2(m-y,v-b)/B;return(m>y||v<b)&&(C+=180),{x:p,y:g,m:{x:m,y:v},n:{x:y,y:b},start:{x:x,y:w},end:{x:_,y:k},alpha:C}},v.bezierBBox=function(t,e,i,n,r,s,a,o){v.is(t,"array")||(t=[t,e,i,n,r,s,a,o]);var l=It.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},v.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},v.isBBoxIntersect=function(t,e){var i=v.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},v.pathIntersection=function(t,e){return a(t,e)},v.pathIntersectionNumber=function(t,e){return a(t,e,1)},v.isPointInsidePath=function(t,e,i){var n=v.pathBBox(t);return v.isPointInsideBBox(n,e,i)&&a(t,[["M",e,i],["H",n.x2+10]],1)%2==1},v._removedFactory=function(t){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var Mt=v.pathBBox=function(t){var e=Ct(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=zt(t);for(var i,n=0,r=0,s=[],a=[],o=0,l=t.length;o<l;o++)if(i=t[o],"M"==i[0])n=i[1],r=i[2],s.push(n),a.push(r);else{var h=It(n,r,i[1],i[2],i[3],i[4],i[5],i[6]);s=s[D](h.min.x,h.max.x),a=a[D](h.min.y,h.max.y),n=i[5],r=i[6]}var u=O[T](0,s),c=O[T](0,a),d=H[T](0,s),f=H[T](0,a),p={x:u,y:c,x2:d,y2:f,width:d-u,height:f-c};return e.bbox=m(p),p},St=function(t){var e=m(t);return e.toString=v._path2string,e},Tt=v._pathToRelative=function(t){var e=Ct(t);if(e.rel)return St(e.rel);v.is(t,U)&&v.is(t&&t[0],U)||(t=v.parsePathString(t));var i=[],n=0,r=0,s=0,a=0,o=0;"M"==t[0][0]&&(n=t[0][1],r=t[0][2],s=n,a=r,o++,i.push(["M",n,r]));for(var l=o,h=t.length;l<h;l++){var u=i[l]=[],c=t[l];if(c[0]!=R.call(c[0]))switch(u[0]=R.call(c[0]),u[0]){case"a":u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=+(c[6]-n).toFixed(3),u[7]=+(c[7]-r).toFixed(3);break;case"v":u[1]=+(c[1]-r).toFixed(3);break;case"m":s=c[1],a=c[2];default:for(var d=1,f=c.length;d<f;d++)u[d]=+(c[d]-(d%2?n:r)).toFixed(3)}else{u=i[l]=[],"m"==c[0]&&(s=c[1]+n,a=c[2]+r);for(var p=0,g=c.length;p<g;p++)i[l][p]=c[p]}var m=i[l].length;switch(i[l][0]){case"z":n=s,r=a;break;case"h":n+=+i[l][m-1];break;case"v":r+=+i[l][m-1];break;default:n+=+i[l][m-2],r+=+i[l][m-1]}}return i.toString=v._path2string,e.rel=St(i),i},Dt=v._pathToAbsolute=function(t){var e=Ct(t);if(e.abs)return St(e.abs);if(v.is(t,U)&&v.is(t&&t[0],U)||(t=v.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i=[],n=0,r=0,s=0,a=0,o=0;"M"==t[0][0]&&(n=+t[0][1],r=+t[0][2],s=n,a=r,o++,i[0]=["M",n,r]);for(var l,h,u=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),c=o,f=t.length;c<f;c++){if(i.push(l=[]),h=t[c],h[0]!=J.call(h[0]))switch(l[0]=J.call(h[0]),l[0]){case"A":l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=+(h[6]+n),l[7]=+(h[7]+r);break;case"V":l[1]=+h[1]+r;break;case"H":l[1]=+h[1]+n;break;case"R":for(var p=[n,r][D](h.slice(1)),g=2,m=p.length;g<m;g++)p[g]=+p[g]+n,p[++g]=+p[g]+r;i.pop(),i=i[D](d(p,u));break;case"M":s=+h[1]+n,a=+h[2]+r;default:for(g=1,m=h.length;g<m;g++)l[g]=+h[g]+(g%2?n:r)}else if("R"==h[0])p=[n,r][D](h.slice(1)),i.pop(),i=i[D](d(p,u)),l=["R"][D](h.slice(-2));else for(var y=0,b=h.length;y<b;y++)l[y]=h[y];switch(l[0]){case"Z":n=s,r=a;break;case"H":n=l[1];break;case"V":r=l[1];break;case"M":s=l[l.length-2],a=l[l.length-1];default:n=l[l.length-2],r=l[l.length-1]}}return i.toString=v._path2string,e.abs=St(i),i},Et=function(t,e,i,n){return[t,e,i,n,i,n]},Pt=function(t,e,i,n,r,s){var a=1/3,o=2/3;return[a*t+o*i,a*e+o*n,a*r+o*i,a*s+o*n,r,s]},At=function(t,e,i,n,r,s,a,o,l,h){var u,c=120*B/180,d=B/180*(+r||0),f=[],g=p(function(t,e,i){var n=t*N.cos(i)-e*N.sin(i),r=t*N.sin(i)+e*N.cos(i);return{x:n,y:r}});if(h)C=h[0],M=h[1],_=h[2],k=h[3];else{u=g(t,e,-d),t=u.x,e=u.y,u=g(o,l,-d),o=u.x,l=u.y;var m=(N.cos(B/180*r),N.sin(B/180*r),(t-o)/2),v=(e-l)/2,y=m*m/(i*i)+v*v/(n*n);y>1&&(y=N.sqrt(y),i*=y,n*=y);var b=i*i,x=n*n,w=(s==a?-1:1)*N.sqrt(W((b*x-b*v*v-x*m*m)/(b*v*v+x*m*m))),_=w*i*v/n+(t+o)/2,k=w*-n*m/i+(e+l)/2,C=N.asin(((e-k)/n).toFixed(9)),M=N.asin(((l-k)/n).toFixed(9));C=t<_?B-C:C,M=o<_?B-M:M,C<0&&(C=2*B+C),M<0&&(M=2*B+M),a&&C>M&&(C-=2*B),!a&&M>C&&(M-=2*B)}var S=M-C;if(W(S)>c){var T=M,E=o,P=l;M=C+c*(a&&M>C?1:-1),o=_+i*N.cos(M),l=k+n*N.sin(M),f=At(o,l,i,n,r,0,a,E,P,[M,T,_,k])}S=M-C;var A=N.cos(C),F=N.sin(C),z=N.cos(M),L=N.sin(M),R=N.tan(S/4),H=4/3*i*R,O=4/3*n*R,j=[t,e],Y=[t+H*F,e-O*A],q=[o+H*L,l-O*z],U=[o,l];if(Y[0]=2*j[0]-Y[0],Y[1]=2*j[1]-Y[1],h)return[Y,q,U][D](f);f=[Y,q,U][D](f).join()[I](",");for(var V=[],G=0,$=f.length;G<$;G++)V[G]=G%2?g(f[G-1],f[G],d).y:g(f[G],f[G+1],d).x;return V},Ft=function(t,e,i,n,r,s,a,o,l){var h=1-l;return{x:j(h,3)*t+3*j(h,2)*l*i+3*h*l*l*r+j(l,3)*a,y:j(h,3)*e+3*j(h,2)*l*n+3*h*l*l*s+j(l,3)*o}},It=p(function(t,e,i,n,r,s,a,o){var l,h=r-2*i+t-(a-2*r+i),u=2*(i-t)-2*(r-i),c=t-i,d=(-u+N.sqrt(u*u-4*h*c))/2/h,f=(-u-N.sqrt(u*u-4*h*c))/2/h,p=[e,o],g=[t,a];return W(d)>"1e12"&&(d=.5),W(f)>"1e12"&&(f=.5),d>0&&d<1&&(l=Ft(t,e,i,n,r,s,a,o,d),g.push(l.x),p.push(l.y)),f>0&&f<1&&(l=Ft(t,e,i,n,r,s,a,o,f),g.push(l.x),p.push(l.y)),h=s-2*n+e-(o-2*s+n),u=2*(n-e)-2*(s-n),c=e-n,d=(-u+N.sqrt(u*u-4*h*c))/2/h,f=(-u-N.sqrt(u*u-4*h*c))/2/h,W(d)>"1e12"&&(d=.5),W(f)>"1e12"&&(f=.5),d>0&&d<1&&(l=Ft(t,e,i,n,r,s,a,o,d),g.push(l.x),p.push(l.y)),f>0&&f<1&&(l=Ft(t,e,i,n,r,s,a,o,f),g.push(l.x),p.push(l.y)),{min:{x:O[T](0,g),y:O[T](0,p)},max:{x:H[T](0,g),y:H[T](0,p)}}}),zt=v._path2curve=p(function(t,e){var i=!e&&Ct(t);if(!e&&i.curve)return St(i.curve);for(var n=Dt(t),r=e&&Dt(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=(function(t,e){var i,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][D](At[T](0,[e.x,e.y][D](t.slice(1))));break;case"S":i=e.x+(e.x-(e.bx||e.x)),n=e.y+(e.y-(e.by||e.y)),t=["C",i,n][D](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][D](Pt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][D](Pt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][D](Et(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][D](Et(e.x,e.y,t[1],e.y));break;case"V":t=["C"][D](Et(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][D](Et(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][D](i.splice(0,6)));t.splice(e,1),c=H(n.length,r&&r.length||0)}},h=function(t,e,i,s,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",s.x,s.y]),i.bx=0,i.by=0,i.x=t[a][1],i.y=t[a][2],c=H(n.length,r&&r.length||0))},u=0,c=H(n.length,r&&r.length||0);u<c;u++){n[u]=o(n[u],s),l(n,u),r&&(r[u]=o(r[u],a)),r&&l(r,u),h(n,r,s,a,u),h(r,n,a,s,u);var d=n[u],f=r&&r[u],p=d.length,g=r&&f.length;s.x=d[p-2],s.y=d[p-1],s.bx=Q(d[p-4])||s.x,s.by=Q(d[p-3])||s.y,a.bx=r&&(Q(f[g-4])||a.x),a.by=r&&(Q(f[g-3])||a.y),a.x=r&&f[g-2],a.y=r&&f[g-1]}return r||(i.curve=St(n)),r?[n,r]:n},null,St),Lt=(v._parseDots=p(function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r={},s=t[i].match(/^([^:]*):?([\d\.]*)/);if(r.color=v.getRGB(s[1]),r.color.error)return null;r.color=r.color.hex,s[2]&&(r.offset=s[2]+"%"),e.push(r)}for(i=1,n=e.length-1;i<n;i++)if(!e[i].offset){for(var a=Q(e[i-1].offset||0),o=0,l=i+1;l<n;l++)if(e[l].offset){o=e[l].offset;break}o||(o=100,l=n),o=Q(o);for(var h=(o-a)/(l-i+1);i<l;i++)a+=h,e[i].offset=a+"%"}return e}),v._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Rt=(v._tofront=function(t,e){e.top!==t&&(Lt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},v._toback=function(t,e){e.bottom!==t&&(Lt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},v._insertafter=function(t,e,i){Lt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},v._insertbefore=function(t,e,i){Lt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},v.toMatrix=function(t,e){var i=Mt(t),n={_:{transform:P},getBBox:function(){return i}};return Nt(n,e),n.matrix}),Nt=(v.transformPath=function(t,e){return gt(t,Rt(t,e))},v._extractTransform=function(t,e){if(null==e)return t._.transform;e=F(e).replace(/\.{3}|\u2026/g,t._.transform||P);var i=v.parseTransformString(e),n=0,r=0,a=0,o=1,l=1,h=t._,u=new s;if(h.transform=i||[],i)for(var c=0,d=i.length;c<d;c++){var f,p,g,m,y,b=i[c],x=b.length,w=F(b[0]).toLowerCase(),_=b[0]!=w,k=_?u.invert():0;"t"==w&&3==x?_?(f=k.x(0,0),p=k.y(0,0),g=k.x(b[1],b[2]),m=k.y(b[1],b[2]),u.translate(g-f,m-p)):u.translate(b[1],b[2]):"r"==w?2==x?(y=y||t.getBBox(1),u.rotate(b[1],y.x+y.width/2,y.y+y.height/2),n+=b[1]):4==x&&(_?(g=k.x(b[2],b[3]),m=k.y(b[2],b[3]),u.rotate(b[1],g,m)):u.rotate(b[1],b[2],b[3]),n+=b[1]):"s"==w?2==x||3==x?(y=y||t.getBBox(1),u.scale(b[1],b[x-1],y.x+y.width/2,y.y+y.height/2),o*=b[1],l*=b[x-1]):5==x&&(_?(g=k.x(b[3],b[4]),m=k.y(b[3],b[4]),u.scale(b[1],b[2],g,m)):u.scale(b[1],b[2],b[3],b[4]),o*=b[1],l*=b[2]):"m"==w&&7==x&&u.add(b[1],b[2],b[3],b[4],b[5],b[6]),h.dirtyT=1,t.matrix=u}t.matrix=u,h.sx=o,h.sy=l,h.deg=n,h.dx=r=u.e,h.dy=a=u.f,1==o&&1==l&&!n&&h.bbox?(h.bbox.x+=+r,h.bbox.y+=+a):h.dirtyT=1}),Ht=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ot=v._equaliseTransform=function(t,e){e=F(e).replace(/\.{3}|\u2026/g,t),t=v.parseTransformString(t)||[],e=v.parseTransformString(e)||[];for(var i,n,r,s,a=H(t.length,e.length),o=[],l=[],h=0;h<a;h++){if(r=t[h]||Ht(e[h]),s=e[h]||Ht(r),r[0]!=s[0]||"r"==r[0].toLowerCase()&&(r[2]!=s[2]||r[3]!=s[3])||"s"==r[0].toLowerCase()&&(r[3]!=s[3]||r[4]!=s[4]))return;for(o[h]=[],l[h]=[],i=0,n=H(r.length,s.length);i<n;i++)i in r&&(o[h][i]=r[i]),i in s&&(l[h][i]=s[i])}return{from:o,to:l}};v._getContainer=function(t,e,i,n){var r;if(r=null!=n||v.is(t,"object")?t:C.doc.getElementById(t),null!=r)return r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:i}:{container:1,x:t,y:e,width:i,height:n}},v.pathToRelative=Tt,v._engine={},v.path2curve=zt,v.matrix=function(t,e,i,n,r,a){return new s(t,e,i,n,r,a)},function(t){function e(t){var e=N.sqrt(i(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function i(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,i,n,r,a){var o,l,h,u,c=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[t,i,r],[e,n,a],[0,0,1]];for(t&&t instanceof s&&(f=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;o<3;o++)for(l=0;l<3;l++){for(u=0,h=0;h<3;h++)u+=d[o][h]*f[h][l];c[o][l]=u}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new s(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){null==e&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,e,i){t=v.rad(t),e=e||0,i=i||0;var n=+N.cos(t).toFixed(9),r=+N.sin(t).toFixed(9);this.add(n,r,-r,n,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[F.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return v.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=N.sqrt(i(n[0])),e(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=N.sqrt(i(n[1])),e(n[1]),t.shear/=t.scaley;var r=-n[0][1],s=n[1][1];return s<0?(t.rotate=v.deg(N.acos(s)),r<0&&(t.rotate=360-t.rotate)):t.rotate=v.deg(N.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[I]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:P)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:P)+(e.rotate?"r"+[e.rotate,0,0]:P)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(s.prototype);var Wt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Wt&&Wt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Wt&&Wt[1]<8?b.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:b.safari=ut;for(var jt=function(){this.returnValue=!1},Bt=function(){return this.originalEvent.preventDefault()},Yt=function(){this.cancelBubble=!0},qt=function(){return this.originalEvent.stopPropagation()},Ut=function(){return C.doc.addEventListener?function(t,e,i,n){var r=E&&L[e]?L[e]:e,s=function(r){var s=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,a=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,o=r.clientX+a,l=r.clientY+s;if(E&&L[k](e))for(var h=0,u=r.targetTouches&&r.targetTouches.length;h<u;h++)if(r.targetTouches[h].target==t){var c=r;r=r.targetTouches[h],r.originalEvent=c,r.preventDefault=Bt,r.stopPropagation=qt;break}return i.call(n,r,o,l)};return t.addEventListener(r,s,!1),function(){return t.removeEventListener(r,s,!1),!0}}:C.doc.attachEvent?function(t,e,i,n){var r=function(t){t=t||C.win.event;var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,r=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,s=t.clientX+r,a=t.clientY+e;return t.preventDefault=t.preventDefault||jt,t.stopPropagation=t.stopPropagation||Yt,i.call(n,t,s,a)};t.attachEvent("on"+e,r);var s=function(){return t.detachEvent("on"+e,r),!0};return s}:void 0}(),Vt=[],Gt=function(t){for(var e,i=t.clientX,n=t.clientY,r=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,s=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,a=Vt.length;a--;){if(e=Vt[a],E){for(var o,l=t.touches.length;l--;)if(o=t.touches[l],o.identifier==e.el._drag.id){i=o.clientX,n=o.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h,u=e.el.node,c=u.nextSibling,d=u.parentNode,f=u.style.display;C.win.opera&&d.removeChild(u),u.style.display="none",h=e.el.paper.getElementByPoint(i,n),u.style.display=f,C.win.opera&&(c?d.insertBefore(u,c):d.appendChild(u)),h&&eve("raphael.drag.over."+e.el.id,e.el,h),i+=s,n+=r,eve("raphael.drag.move."+e.el.id,e.move_scope||e.el,i-e.el._drag.x,n-e.el._drag.y,i,n,t)}},$t=function(t){v.unmousemove(Gt).unmouseup($t);for(var e,i=Vt.length;i--;)e=Vt[i],e.el._drag={},eve("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);Vt=[]},Xt=v.el={},Zt=z.length;Zt--;)(function(t){v[t]=Xt[t]=function(e,i){return v.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Ut(this.shape||this.node||C.doc,t,e,i||this)})),this},v["un"+t]=Xt["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==t&&i[n].f==e)return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}})(z[Zt]);Xt.data=function(t,e){var i=lt[this.id]=lt[this.id]||{};if(1==arguments.length){if(v.is(t,"object")){for(var n in t)t[k](n)&&this.data(n,t[n]);return this}return eve("raphael.data.get."+this.id,this,i[t],t),i[t]}return i[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},Xt.removeData=function(t){return null==t?lt[this.id]={}:lt[this.id]&&delete lt[this.id][t],this},Xt.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},Xt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Qt=[];Xt.drag=function(t,e,i,n,r,s){function a(a){(a.originalEvent||a).preventDefault();var o=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,l=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;this._drag.x=a.clientX+l,this._drag.y=a.clientY+o,this._drag.id=a.identifier,!Vt.length&&v.mousemove(Gt).mouseup($t),Vt.push({el:this,move_scope:n,start_scope:r,end_scope:s}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),i&&eve.on("raphael.drag.end."+this.id,i),eve("raphael.drag.start."+this.id,r||n||this,a.clientX+l,a.clientY+o,a)}return this._drag={},Qt.push({el:this,start:a}),this.mousedown(a),this},Xt.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},Xt.undrag=function(){for(var t=Qt.length;t--;)Qt[t].el==this&&(this.unmousedown(Qt[t].start),Qt.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!Qt.length&&v.unmousemove(Gt).unmouseup($t)},b.circle=function(t,e,i){var n=v._engine.circle(this,t||0,e||0,i||0);return this.__set__&&this.__set__.push(n),n},b.rect=function(t,e,i,n,r){var s=v._engine.rect(this,t||0,e||0,i||0,n||0,r||0);return this.__set__&&this.__set__.push(s),s},b.ellipse=function(t,e,i,n){var r=v._engine.ellipse(this,t||0,e||0,i||0,n||0);return this.__set__&&this.__set__.push(r),r},b.path=function(t){t&&!v.is(t,q)&&!v.is(t[0],U)&&(t+=P);var e=v._engine.path(v.format[T](v,arguments),this);return this.__set__&&this.__set__.push(e),e},b.image=function(t,e,i,n,r){var s=v._engine.image(this,t||"about:blank",e||0,i||0,n||0,r||0);return this.__set__&&this.__set__.push(s),s},b.text=function(t,e,i){var n=v._engine.text(this,t||0,e||0,F(i));return this.__set__&&this.__set__.push(n),n},b.set=function(t){!v.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new he(t);return this.__set__&&this.__set__.push(e),e},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(){var t=this.__set__;return delete this.__set__,t},b.setSize=function(t,e){return v._engine.setSize.call(this,t,e)},b.setViewBox=function(t,e,i,n,r){return v._engine.setViewBox.call(this,t,e,i,n,r)},b.top=b.bottom=null,b.raphael=v;var Kt=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,r=i.documentElement,s=r.clientTop||n.clientTop||0,a=r.clientLeft||n.clientLeft||0,o=e.top+(C.win.pageYOffset||r.scrollTop||n.scrollTop)-s,l=e.left+(C.win.pageXOffset||r.scrollLeft||n.scrollLeft)-a;return{y:o,x:l}};b.getElementByPoint=function(t,e){var i=this,n=i.canvas,r=C.doc.elementFromPoint(t,e);if(C.win.opera&&"svg"==r.tagName){var s=Kt(n),a=n.createSVGRect();a.x=t-s.x,a.y=e-s.y,a.width=a.height=1;var o=n.getIntersectionList(a,null);o.length&&(r=o[o.length-1])}if(!r)return null;for(;r.parentNode&&r!=n.parentNode&&!r.raphael;)r=r.parentNode;return r==i.canvas.parentNode&&(r=n),r=r&&r.raphael?i.getById(r.raphaelid):null},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var i=this.bottom;i;){if(t.call(e,i)===!1)return this;i=i.next}return this},b.getElementsByPoint=function(t,e){var i=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&i.push(n)}),i},Xt.isPointInside=function(t,e){var i=this.realPath=this.realPath||pt[this.type](this);return v.isPointInsidePath(i,t,e)},Xt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=pt[this.type](this),e.bboxwt=Mt(this.realPath),e.bboxwt.toString=r,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=pt[this.type](this)),e.bbox=Mt(gt(this.realPath,this.matrix)),e.bbox.toString=r,e.dirty=e.dirtyT=0),e.bbox)},Xt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Xt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,r=n.set(),s=this.realPath||pt[this.type](this);s=this.matrix?gt(s,this.matrix):s;for(var a=1;a<i+1;a++)r.push(n.path(s).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*a).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Jt=function(t,e,i,n,r,s,a,o,l){return null==l?u(t,e,i,n,r,s,a,o):v.findDotsAtSegment(t,e,i,n,r,s,a,o,h(t,e,i,n,r,s,a,o,l))},te=function(t,e){return function(i,n,r){i=zt(i);for(var s,a,o,l,h,u="",c={},d=0,f=0,p=i.length;f<p;f++){if(o=i[f],"M"==o[0])s=+o[1],a=+o[2];else{if(l=Jt(s,a,o[1],o[2],o[3],o[4],o[5],o[6]),d+l>n){if(e&&!c.start){if(h=Jt(s,a,o[1],o[2],o[3],o[4],o[5],o[6],n-d),u+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],r)return u;c.start=u,u=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,o[5],o[6]].join(),d+=l,s=+o[5],a=+o[6];continue}if(!t&&!e)return h=Jt(s,a,o[1],o[2],o[3],o[4],o[5],o[6],n-d),{x:h.x,y:h.y,alpha:h.alpha}}d+=l,s=+o[5],a=+o[6]}u+=o.shift()+o}return c.end=u,h=t?d:e?c:v.findDotsAtSegment(s,a,o[0],o[1],o[2],o[3],o[4],o[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},ee=te(1),ie=te(),ne=te(0,1);v.getTotalLength=ee,v.getPointAtLength=ie,v.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return ne(t,e).end;var n=ne(t,i,1);return e?ne(n,e).end:n},Xt.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():ee(this.attrs.path)},Xt.getPointAtLength=function(t){if("path"==this.type)return ie(this.attrs.path,t)},Xt.getSubpath=function(t,e){if("path"==this.type)return v.getSubpath(this.attrs.path,t,e)};var re=v.easing_formulas={linear:function(t){return t},"<":function(t){return j(t,1.7)},">":function(t){return j(t,.48)},"<>":function(t){var e=.48-t/1.04,i=N.sqrt(.1734+e*e),n=i-e,r=j(W(n),1/3)*(n<0?-1:1),s=-i-e,a=j(W(s),1/3)*(s<0?-1:1),o=r+a+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:j(2,-10*t)*N.sin(2*(t-.075)*B/.3)+1},bounce:function(t){var e,i=7.5625,n=2.75;return t<1/n?e=i*t*t:t<2/n?(t-=1.5/n,e=i*t*t+.75):t<2.5/n?(t-=2.25/n,e=i*t*t+.9375):(t-=2.625/n,e=i*t*t+.984375),e}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var se=[],ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},oe=function(){for(var t=+new Date,i=0;i<se.length;i++){var n=se[i];if(!n.el.removed&&!n.paused){var r,s,a=t-n.start,o=n.ms,l=n.easing,h=n.from,u=n.diff,c=n.to,d=(n.t,n.el),f={},p={};if(n.initstatus?(a=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*o,n.status=n.initstatus,delete n.initstatus,n.stop&&se.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(a/o))/n.anim.top,!(a<0))if(a<o){var g=l(a/o);for(var m in h)if(h[k](m)){switch(et[m]){case Y:r=+h[m]+g*o*u[m];break;case"colour":r="rgb("+[le(Z(h[m].r+g*o*u[m].r)),le(Z(h[m].g+g*o*u[m].g)),le(Z(h[m].b+g*o*u[m].b))].join(",")+")";break;case"path":r=[];for(var y=0,b=h[m].length;y<b;y++){r[y]=[h[m][y][0]];for(var x=1,w=h[m][y].length;x<w;x++)r[y][x]=+h[m][y][x]+g*o*u[m][y][x];r[y]=r[y].join(A)}r=r.join(A);break;case"transform":if(u[m].real)for(r=[],y=0,b=h[m].length;y<b;y++)for(r[y]=[h[m][y][0]],x=1,w=h[m][y].length;x<w;x++)r[y][x]=h[m][y][x]+g*o*u[m][y][x];else{var _=function(t){return+h[m][t]+g*o*u[m][t]};r=[["m",_(0),_(1),_(2),_(3),_(4),_(5)]]}break;case"csv":if("clip-rect"==m)for(r=[],y=4;y--;)r[y]=+h[m][y]+g*o*u[m][y];break;default:var C=[][D](h[m]);for(r=[],y=d.paper.customAttributes[m].length;y--;)r[y]=+C[y]+g*o*u[m][y]}f[m]=r}d.attr(f),function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+t,e,i)})}(d.id,d,n.anim)}else{if(function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,i),eve("raphael.anim.finish."+e.id,e,i),v.is(t,"function")&&t.call(e)})}(n.callback,d,n.anim),d.attr(c),
se.splice(i--,1),n.repeat>1&&!n.next){for(s in c)c[k](s)&&(p[s]=n.totalOrigin[s]);n.el.attr(p),e(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&e(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}v.svg&&d&&d.paper&&d.paper.safari(),se.length&&ae(oe)},le=function(t){return t>255?255:t<0?0:t};Xt.animateWith=function(t,n,r,s,a,o){var l=this;if(l.removed)return o&&o.call(l),l;var h=r instanceof i?r:v.animation(r,s,a,o);e(h,l,h.percents[0],null,l.attr());for(var u=0,c=se.length;u<c;u++)if(se[u].anim==n&&se[u].el==t){se[c-1].start=se[u].start;break}return l},Xt.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},i.prototype.delay=function(t){var e=new i(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},i.prototype.repeat=function(t){var e=new i(this.anim,this.ms);return e.del=this.del,e.times=N.floor(H(t,0))||1,e},v.animation=function(t,e,n,r){if(t instanceof i)return t;!v.is(n,"function")&&n||(r=r||n||null,n=null),t=Object(t),e=+e||0;var s,a,o={};for(a in t)t[k](a)&&Q(a)!=a&&Q(a)+"%"!=a&&(s=!0,o[a]=t[a]);return s?(n&&(o.easing=n),r&&(o.callback=r),new i({100:o},e)):new i(t,e)},Xt.animate=function(t,n,r,s){var a=this;if(a.removed)return s&&s.call(a),a;var o=t instanceof i?t:v.animation(t,n,r,s);return e(o,a,o.percents[0],null,a.attr()),a},Xt.setTime=function(t,e){return t&&null!=e&&this.status(t,O(e,t.ms)/t.ms),this},Xt.status=function(t,i){var n,r,s=[],a=0;if(null!=i)return e(t,this,-1,O(i,1)),this;for(n=se.length;a<n;a++)if(r=se[a],r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;s.push({anim:r.anim,status:r.status})}return t?0:s},Xt.pause=function(t){for(var e=0;e<se.length;e++)se[e].el.id==this.id&&(!t||se[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,se[e].anim)!==!1&&(se[e].paused=!0);return this},Xt.resume=function(t){for(var e=0;e<se.length;e++)if(se[e].el.id==this.id&&(!t||se[e].anim==t)){var i=se[e];eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},Xt.stop=function(t){for(var e=0;e<se.length;e++)se[e].el.id==this.id&&(!t||se[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,se[e].anim)!==!1&&se.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),Xt.toString=function(){return"Rapha\xebl\u2019s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;e<i;e++)t[e]&&(t[e].constructor==Xt.constructor||t[e].constructor==he)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ue=he.prototype;ue.push=function(){for(var t,e,i=0,n=arguments.length;i<n;i++)t=arguments[i],t&&(t.constructor==Xt.constructor||t.constructor==he)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},ue.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ue.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(t.call(e,this.items[i],i)===!1)return this;return this};for(var ce in Xt)Xt[k](ce)&&(ue[ce]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t][T](i,e)})}}(ce));ue.attr=function(t,e){if(t&&v.is(t,U)&&v.is(t[0],"object"))for(var i=0,n=t.length;i<n;i++)this.items[i].attr(t[i]);else for(var r=0,s=this.items.length;r<s;r++)this.items[r].attr(t,e);return this},ue.clear=function(){for(;this.length;)this.pop()},ue.splice=function(t,e){t=t<0?H(this.length+t,0):t,e=H(0,O(this.length-t,e));var i,n=[],r=[],s=[];for(i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<e;i++)r.push(this[t+i]);for(;i<this.length-t;i++)n.push(this[t+i]);var a=s.length;for(i=0;i<a+n.length;i++)this.items[t+i]=this[t+i]=i<a?s[i]:n[i-a];for(i=this.items.length=this.length-=e-a;this[i];)delete this[i++];return new he(r)},ue.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t)return this.splice(e,1),!0},ue.animate=function(t,e,i,n){(v.is(i,"function")||!i)&&(n=i||null);var r,s,a=this.items.length,o=a,l=this;if(!a)return this;n&&(s=function(){!--a&&n.call(l)}),i=v.is(i,q)?i:s;var h=v.animation(t,e,i,s);for(r=this.items[--o].animate(h);o--;)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(r,h,h);return this},ue.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ue.getBBox=function(){for(var t=[],e=[],i=[],n=[],r=this.items.length;r--;)if(!this.items[r].removed){var s=this.items[r].getBBox();t.push(s.x),e.push(s.y),i.push(s.x+s.width),n.push(s.y+s.height)}return t=O[T](0,t),e=O[T](0,e),i=H[T](0,i),n=H[T](0,n),{x:t,y:e,x2:i,y2:n,width:i-t,height:n-e}},ue.clone=function(t){t=new he;for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},ue.toString=function(){return"Rapha\xebl\u2018s set"},v.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[k](n)&&(e.face[n]=t.face[n]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg){e.face["units-per-em"]=K(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[k](r)){var s=t.glyphs[r];if(e.glyphs[r]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},s.k)for(var a in s.k)s[k](a)&&(e.glyphs[r].k[a]=s.k[a])}}return t},b.getFont=function(t,e,i,n){if(n=n||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,v.fonts){var r=v.fonts[t];if(!r){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,P)+"(\\s|$)","i");for(var a in v.fonts)if(v.fonts[k](a)&&s.test(a)){r=v.fonts[a];break}}var o;if(r)for(var l=0,h=r.length;l<h&&(o=r[l],o.face["font-weight"]!=e||o.face["font-style"]!=i&&o.face["font-style"]||o.face["font-stretch"]!=n);l++);return o}},b.print=function(t,e,i,n,r,s,a){s=s||"middle",a=H(O(a||0,1),-1);var o,l=F(i)[I](P),h=0,u=0,c=P;if(v.is(n,i)&&(n=this.getFont(n)),n){o=(r||16)/n.face["units-per-em"];for(var d=n.face.bbox[I](x),f=+d[0],p=d[3]-d[1],g=0,m=+d[1]+("baseline"==s?p+ +n.face.descent:p/2),y=0,b=l.length;y<b;y++){if("\n"==l[y])h=0,_=0,u=0,g+=p;else{var w=u&&n.glyphs[l[y-1]]||{},_=n.glyphs[l[y]];h+=u?(w.w||n.w)+(w.k&&w.k[l[y]]||0)+n.w*a:0,u=1}_&&_.d&&(c+=v.transformPath(_.d,["t",h*o,g*o,"s",o,o,f,m,"t",(t-f)/o,(e-m)/o]))}}return this.path(c).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(v.is(t,"array"))for(var e,i=this.set(),n=0,r=t.length;n<r;n++)e=t[n]||{},w[k](e.type)&&i.push(this[e.type]().attr(e));return i},v.format=function(t,e){var i=v.is(e,U)?[0][D](e):arguments;return t&&v.is(t,q)&&i.length-1&&(t=t.replace(_,function(t,e){return null==i[++e]?P:i[e]})),t||P},v.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(t,i,n){var r=n;return i.replace(e,function(t,e,i,n,s){e=e||n,r&&(e in r&&(r=r[e]),"function"==typeof r&&s&&(r=r()))}),r=(null==r||r==n?t:r)+""};return function(e,n){return String(e).replace(t,function(t,e){return i(t,e,n)})}}(),v.ninja=function(){return M.was?C.win.Raphael=M.is:delete Raphael,v},v.st=ue,function(t,e,i){function n(){/in/.test(t.readyState)?setTimeout(n,9):v.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,i=function(){t.removeEventListener(e,i,!1),t.readyState="complete"},!1),t.readyState="loading"),n()}(document,"DOMContentLoaded"),M.was?C.win.Raphael=v:Raphael=v,eve.on("raphael.DOMload",function(){y=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",i=String,n=parseFloat,r=parseInt,s=Math,a=s.max,o=s.abs,l=s.pow,h=/[, ]+/,u=t.eve,c="",d=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var m=function(n,r){if(r){"string"==typeof n&&(n=m(n));for(var s in r)r[e](s)&&("xlink:"==s.substring(0,6)?n.setAttributeNS(f,s.substring(6),i(r[s])):n.setAttribute(s,i(r[s])))}else n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(e,r){var h="linear",u=e.id+r,d=.5,f=.5,p=e.node,g=e.paper,v=p.style,y=t._g.doc.getElementById(u);if(!y){if(r=i(r).replace(t._radial_gradient,function(t,e,i){if(h="radial",e&&i){d=n(e),f=n(i);var r=2*(f>.5)-1;l(d-.5,2)+l(f-.5,2)>.25&&(f=s.sqrt(.25-l(d-.5,2))*r+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*r)}return c}),r=r.split(/\s*\-\s*/),"linear"==h){var b=r.shift();if(b=-n(b),isNaN(b))return null;var x=[0,0,s.cos(t.rad(b)),s.sin(t.rad(b))],w=1/(a(o(x[2]),o(x[3]))||1);x[2]*=w,x[3]*=w,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var _=t._parseDots(r);if(!_)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=m(h+"Gradient",{id:u}),e.gradient=y,m(y,"radial"==h?{fx:d,fy:f}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(y);for(var k=0,C=_.length;k<C;k++)y.appendChild(m("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}return m(p,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),v.fill=c,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(n,r,s){if("path"==n.type){for(var a,o,l,h,u,d=i(r).toLowerCase().split("-"),f=n.paper,v=s?"end":"start",y=n.node,b=n.attrs,x=b["stroke-width"],w=d.length,_="classic",k=3,C=3,M=5;w--;)switch(d[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=d[w];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==_?(k+=2,C+=2,M+=2,l=1,h=s?4:1,u={fill:"none",stroke:b.stroke}):(h=l=k/2,u={fill:b.stroke,stroke:"none"}),n._.arrows?s?(n._.arrows.endPath&&g[n._.arrows.endPath]--,n._.arrows.endMarker&&g[n._.arrows.endMarker]--):(n._.arrows.startPath&&g[n._.arrows.startPath]--,n._.arrows.startMarker&&g[n._.arrows.startMarker]--):n._.arrows={},"none"!=_){var S="raphael-marker-"+_,T="raphael-marker-"+v+_+k+C;t._g.doc.getElementById(S)?g[S]++:(f.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:p[_],id:S})),g[S]=1);var D,E=t._g.doc.getElementById(T);E?(g[T]++,D=E.getElementsByTagName("use")[0]):(E=m(m("marker"),{id:T,markerHeight:C,markerWidth:k,orient:"auto",refX:h,refY:C/2}),D=m(m("use"),{"xlink:href":"#"+S,transform:(s?"rotate(180 "+k/2+" "+C/2+") ":c)+"scale("+k/M+","+C/M+")","stroke-width":(1/((k/M+C/M)/2)).toFixed(4)}),E.appendChild(D),f.defs.appendChild(E),g[T]=1),m(D,u);var P=l*("diamond"!=_&&"oval"!=_);s?(a=n._.arrows.startdx*x||0,o=t.getTotalLength(b.path)-P*x):(a=P*x,o=t.getTotalLength(b.path)-(n._.arrows.enddx*x||0)),u={},u["marker-"+v]="url(#"+T+")",(o||a)&&(u.d=Raphael.getSubpath(b.path,a,o)),m(y,u),n._.arrows[v+"Path"]=S,n._.arrows[v+"Marker"]=T,n._.arrows[v+"dx"]=P,n._.arrows[v+"Type"]=_,n._.arrows[v+"String"]=r}else s?(a=n._.arrows.startdx*x||0,o=t.getTotalLength(b.path)-a):(a=0,o=t.getTotalLength(b.path)-(n._.arrows.enddx*x||0)),n._.arrows[v+"Path"]&&m(y,{d:Raphael.getSubpath(b.path,a,o)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(u in g)if(g[e](u)&&!g[u]){var A=t._g.doc.getElementById(u);A&&A.parentNode.removeChild(A)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,n){if(e=x[i(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",s={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,a=[],o=e.length;o--;)a[o]=e[o]*r+(o%2?1:-1)*s;m(t.node,{"stroke-dasharray":a.join(",")})}},_=function(n,s){var l=n.node,u=n.attrs,d=l.style.visibility;l.style.visibility="hidden";for(var p in s)if(s[e](p)){if(!t._availableAttrs[e](p))continue;var g=s[p];switch(u[p]=g,p){case"blur":n.blur(g);break;case"href":case"title":case"target":var x=l.parentNode;if("a"!=x.tagName.toLowerCase()){var _=m("a");x.insertBefore(_,l),_.appendChild(l),x=_}"target"==p?x.setAttributeNS(f,"show","blank"==g?"new":g):x.setAttributeNS(f,p,g);break;case"cursor":l.style.cursor=g;break;case"transform":n.transform(g);break;case"arrow-start":b(n,g);break;case"arrow-end":b(n,g,1);break;case"clip-rect":var k=i(g).split(h);if(4==k.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var M=m("clipPath"),S=m("rect");M.id=t.createUUID(),m(S,{x:k[0],y:k[1],width:k[2],height:k[3]}),M.appendChild(S),n.paper.defs.appendChild(M),m(l,{"clip-path":"url(#"+M.id+")"}),n.clip=S}if(!g){var T=l.getAttribute("clip-path");if(T){var D=t._g.doc.getElementById(T.replace(/(^url\(#|\)$)/g,c));D&&D.parentNode.removeChild(D),m(l,{"clip-path":c}),delete n.clip}}break;case"path":"path"==n.type&&(m(l,{d:g?u.path=t._pathToAbsolute(g):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,g),n._.dirty=1,!u.fx)break;p="x",g=u.x;case"x":u.fx&&(g=-u.x-(u.width||0));case"rx":if("rx"==p&&"rect"==n.type)break;case"cx":l.setAttribute(p,g),n.pattern&&y(n),n._.dirty=1;break;case"height":if(l.setAttribute(p,g),n._.dirty=1,!u.fy)break;p="y",g=u.y;case"y":u.fy&&(g=-u.y-(u.height||0));case"ry":if("ry"==p&&"rect"==n.type)break;case"cy":l.setAttribute(p,g),n.pattern&&y(n),n._.dirty=1;break;case"r":"rect"==n.type?m(l,{rx:g,ry:g}):l.setAttribute(p,g),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(f,"href",g);break;case"stroke-width":1==n._.sx&&1==n._.sy||(g/=a(o(n._.sx),o(n._.sy))||1),n.paper._vbSize&&(g*=n.paper._vbSize),l.setAttribute(p,g),u["stroke-dasharray"]&&w(n,u["stroke-dasharray"],s),n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"stroke-dasharray":w(n,g,s);break;case"fill":var E=i(g).match(t._ISURL);if(E){M=m("pattern");var P=m("image");M.id=t.createUUID(),m(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(P,{x:0,y:0,"xlink:href":E[1]}),M.appendChild(P),function(e){t._preload(E[1],function(){var t=this.offsetWidth,i=this.offsetHeight;m(e,{width:t,height:i}),m(P,{width:t,height:i}),n.paper.safari()})}(M),n.paper.defs.appendChild(M),m(l,{fill:"url(#"+M.id+")"}),n.pattern=M,n.pattern&&y(n);break}var A=t.getRGB(g);if(A.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g)){if("opacity"in u||"fill-opacity"in u){var F=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(F){var I=F.getElementsByTagName("stop");m(I[I.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=g,u.fill="none";break}}else delete s.gradient,delete u.gradient,!t.is(u.opacity,"undefined")&&t.is(s.opacity,"undefined")&&m(l,{opacity:u.opacity}),!t.is(u["fill-opacity"],"undefined")&&t.is(s["fill-opacity"],"undefined")&&m(l,{"fill-opacity":u["fill-opacity"]});A[e]("opacity")&&m(l,{"fill-opacity":A.opacity>1?A.opacity/100:A.opacity});case"stroke":A=t.getRGB(g),l.setAttribute(p,A.hex),"stroke"==p&&A[e]("opacity")&&m(l,{"stroke-opacity":A.opacity>1?A.opacity/100:A.opacity}),"stroke"==p&&n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g);break;case"opacity":u.gradient&&!u[e]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(u.gradient){F=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,c)),F&&(I=F.getElementsByTagName("stop"),m(I[I.length-1],{"stop-opacity":g}));break}default:"font-size"==p&&(g=r(g,10)+"px");var z=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[z]=g,n._.dirty=1,l.setAttribute(p,g)}}C(n,s),l.style.visibility=d},k=1.2,C=function(n,s){if("text"==n.type&&(s[e]("text")||s[e]("font")||s[e]("font-size")||s[e]("x")||s[e]("y"))){var a=n.attrs,o=n.node,l=o.firstChild?r(t._g.doc.defaultView.getComputedStyle(o.firstChild,c).getPropertyValue("font-size"),10):10;if(s[e]("text")){for(a.text=s.text;o.firstChild;)o.removeChild(o.firstChild);for(var h,u=i(s.text).split("\n"),d=[],f=0,p=u.length;f<p;f++)h=m("tspan"),f&&m(h,{dy:l*k,x:a.x}),h.appendChild(t._g.doc.createTextNode(u[f])),o.appendChild(h),d[f]=h}else for(d=o.getElementsByTagName("tspan"),f=0,p=d.length;f<p;f++)f?m(d[f],{dy:l*k,x:a.x}):m(d[0],{dy:0});m(o,{x:a.x,y:a.y}),n._.dirty=1;var g=n._getBBox(),v=a.y-(g.y+g.height/2);v&&t.is(v,"finite")&&m(d[0],{dy:v})}},M=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},S=t.el;M.prototype=S,S.constructor=M,t._engine.path=function(t,e){var i=m("path");e.canvas&&e.canvas.appendChild(i);var n=new M(i,e);return n.type="path",_(n,{fill:"none",stroke:"#000",path:t}),n},S.rotate=function(t,e,r){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(e=r),null==e||null==r){var s=this.getBBox(1);e=s.x+s.width/2,r=s.y+s.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},S.scale=function(t,e,r,s){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),r=n(t[2]),s=n(t[3])),t=n(t[0]),null==e&&(e=t),null==s&&(r=s),null==r||null==s)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,s=null==s?a.y+a.height/2:s,this.transform(this._.transform.concat([["s",t,e,r,s]])),this},S.translate=function(t,e){return this.removed?this:(t=i(t).split(h),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},S.transform=function(i){var n=this._;if(null==i)return n.transform;if(t._extractTransform(this,i),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]="function"==typeof this[i]?t._removedFactory(i):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(i,n){if(this.removed)return this;if(null==i){var r={};for(var s in this.attrs)this.attrs[e](s)&&(r[s]=this.attrs[s]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&t.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var a=i.split(h),o={},l=0,c=a.length;l<c;l++)i=a[l],i in this.attrs?o[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?o[i]=this.paper.customAttributes[i].def:o[i]=t._availableAttrs[i];return c-1?o:o[a[0]]}if(null==n&&t.is(i,"array")){for(o={},l=0,c=i.length;l<c;l++)o[i[l]]=this.attr(i[l]);return o}if(null!=n){var d={};d[i]=n}else null!=i&&t.is(i,"object")&&(d=i);for(var f in d)u("raphael.attr."+f+"."+this.id,this,d[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&d[e](f)&&t.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(d[f]));this.attrs[f]=d[f];for(var g in p)p[e](g)&&(d[g]=p[g])}return _(this,d),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},S.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);this.paper;return this},S.insertAfter=function(e){if(this.removed)return this;var i=e.node||e[e.length-1].node;return i.nextSibling?i.parentNode.insertBefore(this.node,i.nextSibling):i.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},S.insertBefore=function(e){if(this.removed)return this;var i=e.node||e[0].node;return i.parentNode.insertBefore(this.node,i),t._insertbefore(this,e,this.paper),this},S.blur=function(e){var i=this;if(0!==+e){var n=m("filter"),r=m("feGaussianBlur");i.attrs.blur=e,n.id=t.createUUID(),m(r,{stdDeviation:+e||1.5}),n.appendChild(r),i.paper.defs.appendChild(n),i._blur=n,m(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter")},t._engine.circle=function(t,e,i,n){var r=m("circle");t.canvas&&t.canvas.appendChild(r);var s=new M(r,t);return s.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},s.type="circle",m(r,s.attrs),s},t._engine.rect=function(t,e,i,n,r,s){var a=m("rect");t.canvas&&t.canvas.appendChild(a);var o=new M(a,t);return o.attrs={x:e,y:i,width:n,height:r,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},o.type="rect",m(a,o.attrs),o},t._engine.ellipse=function(t,e,i,n,r){var s=m("ellipse");t.canvas&&t.canvas.appendChild(s);var a=new M(s,t);return a.attrs={cx:e,cy:i,rx:n,ry:r,fill:"none",stroke:"#000"},a.type="ellipse",m(s,a.attrs),a},t._engine.image=function(t,e,i,n,r,s){var a=m("image");m(a,{x:i,y:n,width:r,height:s,preserveAspectRatio:"none"}),a.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(a);var o=new M(a,t);return o.attrs={x:i,y:n,width:r,height:s,src:e},o.type="image",o},t._engine.text=function(e,i,n,r){var s=m("text");e.canvas&&e.canvas.appendChild(s);var a=new M(s,e);return a.attrs={x:i,y:n,"text-anchor":"middle",text:r,font:t._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",_(a,a.attrs),a},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e&&e.container,n=e.x,r=e.y,s=e.width,a=e.height;if(!i)throw new Error("SVG container not found.");var o,l=m("svg"),h="overflow:hidden;";return n=n||0,r=r||0,s=s||512,a=a||342,m(l,{height:a,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),1==i?(l.style.cssText=h+"position:absolute;left:"+n+"px;top:"+r+"px",t._g.doc.body.appendChild(l),o=1):(l.style.cssText=h+"position:relative",i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l)),i=new t._Paper,i.width=s,i.height=a,i.canvas=l,i.clear(),i._left=i._top=0,o&&(i.renderfix=function(){}),i.renderfix(),i},t._engine.setViewBox=function(t,e,i,n,r){u("raphael.setViewBox",this,this._viewBox,[t,e,i,n,r]);var s,o,l=a(i/this.width,n/this.height),h=this.top,c=r?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,s="0 0 "+this.width+d+this.height):(this._vbSize=l,s=t+d+e+d+i+d+n),m(this.canvas,{viewBox:s,preserveAspectRatio:c});l&&h;)o="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":o}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[t,e,i,n,!!r],this},t.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var n=-t.e%1,r=-t.f%1;(n||r)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),r&&(this._top=(this._top+r)%1,i.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(t._g.doc.createTextNode("Created with Rapha\xebl "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},t.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var T=t.st;for(var D in S)S[e](D)&&!T[e](D)&&(T[D]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(D))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",i=String,n=parseFloat,r=Math,s=r.round,a=r.max,o=r.min,l=r.abs,h="fill",u=/[, ]+/,c=t.eve,d=" progid:DXImageTransform.Microsoft",f=" ",p="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,w={path:1,rect:1,image:1},_={circle:1,ellipse:1},k=function(e){var n=/[ahqstv]/gi,r=t._pathToAbsolute;if(i(e).match(n)&&(r=t._path2curve),n=/[clmz]/g,r==t._pathToAbsolute&&!i(e).match(n)){var a=i(e).replace(m,function(t,e,i){var n=[],r="m"==e.toLowerCase(),a=g[e];return i.replace(y,function(t){r&&2==n.length&&(a+=n+g["m"==e?"l":"L"],n=[]),n.push(s(t*x))}),a+n});return a}var o,l,h=r(e);a=[];for(var u=0,c=h.length;u<c;u++){o=h[u],l=h[u][0].toLowerCase(),"z"==l&&(l="x");for(var d=1,v=o.length;d<v;d++)l+=s(o[d]*x)+(d!=v-1?",":p);a.push(l)}return a.join(f)},C=function(e,i,n){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(i,n),dy:r.y(i,n)}},M=function(t,e,i,n,r,s){var a=t._,o=t.matrix,u=a.fillpos,c=t.node,d=c.style,p=1,g="",m=x/e,v=x/i;if(d.visibility="hidden",e&&i){if(c.coordsize=l(m)+f+l(v),d.rotation=s*(e*i<0?-1:1),s){var y=C(s,n,r);n=y.dx,r=y.dy}if(e<0&&(g+="x"),i<0&&(g+=" y")&&(p=-1),d.flip=g,c.coordorigin=n*-m+f+r*-v,u||a.fillsize){var b=c.getElementsByTagName(h);b=b&&b[0],c.removeChild(b),u&&(y=C(s,o.x(u[0],u[1]),o.y(u[0],u[1])),b.position=y.dx*p+f+y.dy*p),a.fillsize&&(b.size=a.fillsize[0]*l(e)+f+a.fillsize[1]*l(i)),c.appendChild(b)}d.visibility="visible"}};t.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var S=function(t,e,n){for(var r=i(e).toLowerCase().split("-"),s=n?"end":"start",a=r.length,o="classic",l="medium",h="medium";a--;)switch(r[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=r[a];break;case"wide":case"narrow":h=r[a];break;case"long":case"short":l=r[a]}var u=t.node.getElementsByTagName("stroke")[0];u[s+"arrow"]=o,u[s+"arrowlength"]=l,u[s+"arrowwidth"]=h},T=function(r,l){r.attrs=r.attrs||{};var c=r.node,d=r.attrs,g=c.style,m=w[r.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),v=_[r.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),y=r;for(var b in l)l[e](b)&&(d[b]=l[b]);if(m&&(d.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(c.href=l.href),l.title&&(c.title=l.title),l.target&&(c.target=l.target),l.cursor&&(g.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||m)&&(c.path=k(~i(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),"image"==r.type&&(r._.fillpos=[d.x,d.y],r._.fillsize=[d.width,d.height],M(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),v){var C=+d.cx,T=+d.cy,E=+d.rx||+d.r||0,P=+d.ry||+d.r||0;c.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((C-E)*x),s((T-P)*x),s((C+E)*x),s((T+P)*x),s(C*x))}if("clip-rect"in l){var F=i(l["clip-rect"]).split(u);if(4==F.length){F[2]=+F[2]+ +F[0],F[3]=+F[3]+ +F[1];var I=c.clipRect||t._g.doc.createElement("div"),z=I.style;z.clip=t.format("rect({1}px {2}px {3}px {0}px)",F),c.clipRect||(z.position="absolute",z.top=0,z.left=0,z.width=r.paper.width+"px",z.height=r.paper.height+"px",c.parentNode.insertBefore(I,c),I.appendChild(c),c.clipRect=I)}l["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(r.textpath){var L=r.textpath.style;l.font&&(L.font=l.font),l["font-family"]&&(L.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(L.fontSize=l["font-size"]),l["font-weight"]&&(L.fontWeight=l["font-weight"]),l["font-style"]&&(L.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var R=c.getElementsByTagName(h),N=!1;if(R=R&&R[0],!R&&(N=R=A(h)),"image"==r.type&&l.src&&(R.src=l.src),l.fill&&(R.on=!0),null!=R.on&&"none"!=l.fill&&null!==l.fill||(R.on=!1),R.on&&l.fill){var H=i(l.fill).match(t._ISURL);if(H){R.parentNode==c&&c.removeChild(R),R.rotate=!0,R.src=H[1],R.type="tile";var O=r.getBBox(1);R.position=O.x+f+O.y,r._.fillpos=[O.x,O.y],t._preload(H[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else R.color=t.getRGB(l.fill).hex,R.src=p,R.type="solid",t.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=i(l.fill).charAt())&&D(y,l.fill,R)&&(d.fill="none",d.gradient=l.fill,R.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var W=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);W=o(a(W,0),1),R.opacity=W,R.src&&(R.color="none")}c.appendChild(R);var j=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],B=!1;!j&&(B=j=A("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(j.on=!0),("none"==l.stroke||null===l.stroke||null==j.on||0==l.stroke||0==l["stroke-width"])&&(j.on=!1);var Y=t.getRGB(l.stroke);j.on&&l.stroke&&(j.color=Y.hex),W=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+Y.o+1||2)-1);var q=.75*(n(l["stroke-width"])||1);if(W=o(a(W,0),1),null==l["stroke-width"]&&(q=d["stroke-width"]),l["stroke-width"]&&(j.weight=q),q&&q<1&&(W*=q)&&(j.weight=1),j.opacity=W,l["stroke-linejoin"]&&(j.joinstyle=l["stroke-linejoin"]||"miter"),j.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(j.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};j.dashstyle=U[e](l["stroke-dasharray"])?U[l["stroke-dasharray"]]:p}B&&c.appendChild(j)}if("text"==y.type){y.paper.canvas.style.display=p;var V=y.paper.span,G=100,$=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);g=V.style,d.font&&(g.font=d.font),d["font-family"]&&(g.fontFamily=d["font-family"]),d["font-weight"]&&(g.fontWeight=d["font-weight"]),d["font-style"]&&(g.fontStyle=d["font-style"]),$=n(d["font-size"]||$&&$[0])||10,g.fontSize=$*G+"px",y.textpath.string&&(V.innerHTML=i(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=V.getBoundingClientRect();y.W=d.w=(X.right-X.left)/G,y.H=d.h=(X.bottom-X.top)/G,y.X=d.x,y.Y=d.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=t.format("m{0},{1}l{2},{1}",s(d.x*x),s(d.y*x),s(d.x*x)+1));for(var Z=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,K=Z.length;Q<K;Q++)if(Z[Q]in l){y._.dirty=1;break}switch(d["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},D=function(e,s,a){e.attrs=e.attrs||{};var o=(e.attrs,Math.pow),l="linear",h=".5 .5";if(e.attrs.gradient=s,s=i(s).replace(t._radial_gradient,function(t,e,i){return l="radial",e&&i&&(e=n(e),i=n(i),o(e-.5,2)+o(i-.5,2)>.25&&(i=r.sqrt(.25-o(e-.5,2))*(2*(i>.5)-1)+.5),h=e+f+i),p}),s=s.split(/\s*\-\s*/),"linear"==l){var u=s.shift();if(u=-n(u),isNaN(u))return null}var c=t._parseDots(s);
if(!c)return null;if(e=e.shape||e.node,c.length){e.removeChild(a),a.on=!0,a.method="none",a.color=c[0].color,a.color2=c[c.length-1].color;for(var d=[],g=0,m=c.length;g<m;g++)c[g].offset&&d.push(c[g].offset+f+c[g].color);a.colors=d.length?d.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=h,a.angle=0):(a.type="gradient",a.angle=(270-u)%360),e.appendChild(a)}return 1},E=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},P=t.el;E.prototype=P,P.constructor=E,P.transform=function(e){if(null==e)return this._.transform;var n,r=this.paper._viewBoxShift,s=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:p;r&&(n=e=i(e).replace(/\.{3}|\u2026/g,this._.transform||p)),t._extractTransform(this,s+e);var a,o=this.matrix.clone(),l=this.skew,h=this.node,u=~i(this.attrs.fill).indexOf("-"),c=!i(this.attrs.fill).indexOf("url(");if(o.translate(-.5,-.5),c||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=o.split(),u&&a.noRotation||!a.isSimple){h.style.filter=o.toFilter();var d=this.getBBox(),g=this.getBBox(1),m=d.x-g.x,v=d.y-g.y;h.coordorigin=m*-x+f+v*-x,M(this,1,1,m,v,0)}else h.style.filter=p,M(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else h.style.filter=p,l.matrix=i(o),l.offset=o.offset();return n&&(this._.transform=n),this},P.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if(t=i(t).split(u),t.length-1&&(e=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(e=r),null==e||null==r){var s=this.getBBox(1);e=s.x+s.width/2,r=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},P.translate=function(t,e){return this.removed?this:(t=i(t).split(u),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},P.scale=function(t,e,r,s){if(this.removed)return this;if(t=i(t).split(u),t.length-1&&(e=n(t[1]),r=n(t[2]),s=n(t[3]),isNaN(r)&&(r=null),isNaN(s)&&(s=null)),t=n(t[0]),null==e&&(e=t),null==s&&(r=s),null==r||null==s)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,s=null==s?a.y+a.height/2:s,this.transform(this._.transform.concat([["s",t,e,r,s]])),this._.dirtyT=1,this},P.hide=function(){return!this.removed&&(this.node.style.display="none"),this},P.show=function(){return!this.removed&&(this.node.style.display=p),this},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},P.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},P.attr=function(i,n){if(this.removed)return this;if(null==i){var r={};for(var s in this.attrs)this.attrs[e](s)&&(r[s]=this.attrs[s]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&t.is(i,"string")){if(i==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=i.split(u),o={},l=0,d=a.length;l<d;l++)i=a[l],i in this.attrs?o[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?o[i]=this.paper.customAttributes[i].def:o[i]=t._availableAttrs[i];return d-1?o:o[a[0]]}if(this.attrs&&null==n&&t.is(i,"array")){for(o={},l=0,d=i.length;l<d;l++)o[i[l]]=this.attr(i[l]);return o}var f;null!=n&&(f={},f[i]=n),null==n&&t.is(i,"object")&&(f=i);for(var p in f)c("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&t.is(this.paper.customAttributes[p],"function")){var g=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var m in g)g[e](m)&&(f[m]=g[m])}f.text&&"text"==this.type&&(this.textpath.string=f.text),T(this,f)}return this},P.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},P.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},P.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},P.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},P.blur=function(e){var i=this.node.runtimeStyle,n=i.filter;n=n.replace(v,p),0!==+e?(this.attrs.blur=e,i.filter=n+f+d+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",s(+e||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var i=A("shape");i.style.cssText=b,i.coordsize=x+f+x,i.coordorigin=e.coordorigin;var n=new E(i,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),n.type="path",n.path=[],n.Path=p,T(n,r),e.canvas.appendChild(i);var s=A("skew");return s.on=!0,i.appendChild(s),n.skew=s,n.transform(p),n},t._engine.rect=function(e,i,n,r,s,a){var o=t._rectPath(i,n,r,s,a),l=e.path(o),h=l.attrs;return l.X=h.x=i,l.Y=h.y=n,l.W=h.width=r,l.H=h.height=s,h.r=a,h.path=o,l.type="rect",l},t._engine.ellipse=function(t,e,i,n,r){var s=t.path();s.attrs;return s.X=e-n,s.Y=i-r,s.W=2*n,s.H=2*r,s.type="ellipse",T(s,{cx:e,cy:i,rx:n,ry:r}),s},t._engine.circle=function(t,e,i,n){var r=t.path();r.attrs;return r.X=e-n,r.Y=i-n,r.W=r.H=2*n,r.type="circle",T(r,{cx:e,cy:i,r:n}),r},t._engine.image=function(e,i,n,r,s,a){var o=t._rectPath(n,r,s,a),l=e.path(o).attr({stroke:"none"}),u=l.attrs,c=l.node,d=c.getElementsByTagName(h)[0];return u.src=i,l.X=u.x=n,l.Y=u.y=r,l.W=u.width=s,l.H=u.height=a,u.path=o,l.type="image",d.parentNode==c&&c.removeChild(d),d.rotate=!0,d.src=i,d.type="tile",l._.fillpos=[n,r],l._.fillsize=[s,a],c.appendChild(d),M(l,1,1,0,0,0),l},t._engine.text=function(e,n,r,a){var o=A("shape"),l=A("path"),h=A("textpath");n=n||0,r=r||0,a=a||"",l.v=t.format("m{0},{1}l{2},{1}",s(n*x),s(r*x),s(n*x)+1),l.textpathok=!0,h.string=i(a),h.on=!0,o.style.cssText=b,o.coordsize=x+f+x,o.coordorigin="0 0";var u=new E(o,e),c={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:a};u.shape=o,u.path=l,u.textpath=h,u.type="text",u.attrs.text=i(a),u.attrs.x=n,u.attrs.y=r,u.attrs.w=1,u.attrs.h=1,T(u,c),o.appendChild(h),o.appendChild(l),e.canvas.appendChild(o);var d=A("skew");return d.on=!0,o.appendChild(d),u.skew=d,u.transform(p),u},t._engine.setSize=function(e,i){var n=this.canvas.style;return this.width=e,this.height=i,e==+e&&(e+="px"),i==+i&&(i+="px"),n.width=e,n.height=i,n.clip="rect(0 "+e+" "+i+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,i,n,r,s){t.eve("raphael.setViewBox",this,this._viewBox,[e,i,n,r,s]);var o,l,h=this.width,u=this.height,c=1/a(n/h,r/u);return s&&(o=u/r,l=h/n,n*o<h&&(e-=(h-n*o)/2/o),r*l<u&&(i-=(u-r*l)/2/l)),this._viewBox=[e,i,n,r,!!s],this._viewBoxShift={dx:-e,dy:-i,scale:c},this.forEach(function(t){t.transform("...")}),this};var A;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){A=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e.container,n=e.height,r=e.width,s=e.x,a=e.y;if(!i)throw new Error("VML container not found.");var o=new t._Paper,l=o.canvas=t._g.doc.createElement("div"),h=l.style;return s=s||0,a=a||0,r=r||512,n=n||342,o.width=r,o.height=n,r==+r&&(r+="px"),n==+n&&(n+="px"),o.coordsize=1e3*x+f+1e3*x,o.coordorigin="0 0",o.span=t._g.doc.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(o.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,n),1==i?(t._g.doc.body.appendChild(l),h.left=s+"px",h.top=a+"px",h.position="absolute"):i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),o.renderfix=function(){},o},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var F=t.st;for(var I in P)P[e](I)&&!F[e](I)&&(F[I]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(I))}(window.Raphael),function(){var t,e,i,n,r=[].slice,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,o=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};e=window.Morris={},t=jQuery,e.EventEmitter=function(){function t(){}return t.prototype.on=function(t,e){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this},t.prototype.fire=function(){var t,e,i,n,s,a,o;if(i=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[i]){for(a=this.handlers[i],o=[],n=0,s=a.length;n<s;n++)e=a[n],o.push(e.apply(null,t));return o}},t}(),e.commas=function(t){var e,i,n,r;return null!=t?(n=t<0?"-":"",e=Math.abs(t),i=Math.floor(e).toFixed(0),n+=i.replace(/(?=(?:\d{3})+$)(?!^)/g,","),r=e.toString(),r.length>i.length&&(n+=r.slice(i.length)),n):"-"},e.pad2=function(t){return(t<10?"0":"")+t},e.Grid=function(i){function n(e){this.resizeHandler=s(this.resizeHandler,this);var i=this;if("string"==typeof e.element?this.el=t(document.getElementById(e.element)):this.el=t(e.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=t.extend({},this.gridDefaults,this.defaults||{},e),"string"==typeof this.options.units&&(this.options.postUnits=e.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var e,n,r,s,a;return n=i.el.offset(),a=t.pageX-n.left,i.selectFrom?(e=i.data[i.hitTest(Math.min(a,i.selectFrom))]._x,r=i.data[i.hitTest(Math.max(a,i.selectFrom))]._x,s=r-e,i.selectionRect.attr({x:e,width:s})):i.fire("hovermove",a,t.pageY-n.top)}),this.el.bind("mouseleave",function(){return i.selectFrom&&(i.selectionRect.hide(),i.selectFrom=null),i.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var e,n;return n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],e=i.el.offset(),i.fire("hovermove",n.pageX-e.left,n.pageY-e.top)}),this.el.bind("click",function(t){var e;return e=i.el.offset(),i.fire("gridclick",t.pageX-e.left,t.pageY-e.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(t){var e;return e=i.el.offset(),i.startRange(t.pageX-e.left)}),this.el.bind("mouseup",function(t){var e;return e=i.el.offset(),i.endRange(t.pageX-e.left),i.fire("hovermove",t.pageX-e.left,t.pageY-e.top)})),this.options.resize&&t(window).bind("resize",function(){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return o(n,i),n.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},n.prototype.setData=function(t,i){var n,r,s,a,o,l,h,u,c,d,f,p,g,m,v;return null==i&&(i=!0),this.options.data=t,null==t||0===t.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(p=this.cumulative?0:null,g=this.cumulative?0:null,this.options.goals.length>0&&(o=Math.min.apply(Math,this.options.goals),a=Math.max.apply(Math,this.options.goals),g=null!=g?Math.min(g,o):o,p=null!=p?Math.max(p,a):a),this.data=function(){var i,n,a;for(a=[],s=i=0,n=t.length;i<n;s=++i)h=t[s],l={src:h},l.label=h[this.options.xkey],this.options.parseTime?(l.x=e.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):(l.x=s,this.options.xLabelFormat&&(l.label=this.options.xLabelFormat(l))),c=0,l.y=function(){var t,e,i,n;for(i=this.options.ykeys,n=[],r=t=0,e=i.length;t<e;r=++t)f=i[r],m=h[f],"string"==typeof m&&(m=parseFloat(m)),null!=m&&"number"!=typeof m&&(m=null),null!=m&&(this.cumulative?c+=m:null!=p?(p=Math.max(m,p),g=Math.min(m,g)):p=g=m),this.cumulative&&null!=c&&(p=Math.max(c,p),g=Math.min(c,g)),n.push(m);return n}.call(this),a.push(l);return a}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.options.parseTime?this.events=function(){var t,i,r,s;for(r=this.options.events,s=[],t=0,i=r.length;t<i;t++)n=r[t],s.push(e.parseDate(n));return s}.call(this):this.events=this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",g),this.ymax=this.yboundary("max",p),this.ymin===this.ymax&&(g&&(this.ymin-=1),this.ymax+=1),(v=this.options.axes)!==!0&&"both"!==v&&"y"!==v&&this.options.grid!==!0||(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(u=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var t,e,i,n;for(n=[],d=t=e=this.ymin,i=this.ymax;u>0?t<=i:t>=i;d=t+=u)n.push(d);return n}.call(this))),this.dirty=!0,i?this.redraw():void 0)},n.prototype.yboundary=function(t,e){var i,n;return i=this.options["y"+t],"string"==typeof i?"auto"===i.slice(0,4)?i.length>5?(n=parseInt(i.slice(5),10),null==e?n:Math[t](e,n)):null!=e?e:0:parseInt(i,10):i},n.prototype.autoGridLines=function(t,e,i){var n,r,s,a,o,l,h,u,c;return o=e-t,c=Math.floor(Math.log(o)/Math.log(10)),h=Math.pow(10,c),r=Math.floor(t/h)*h,n=Math.ceil(e/h)*h,l=(n-r)/(i-1),1===h&&l>1&&Math.ceil(l)!==l&&(l=Math.ceil(l),n=r+l*(i-1)),r<0&&n>0&&(r=Math.floor(t/l)*l,n=Math.ceil(e/l)*l),l<1?(a=Math.floor(Math.log(l)/Math.log(10)),s=function(){var t,e;for(e=[],u=t=r;l>0?t<=n:t>=n;u=t+=l)e.push(parseFloat(u.toFixed(1-a)));return e}()):s=function(){var t,e;for(e=[],u=t=r;l>0?t<=n:t>=n;u=t+=l)e.push(u);return e}(),s},n.prototype._calc=function(){var t,e,i,n,r,s,a,o;if(r=this.el.width(),i=this.el.height(),(this.elementWidth!==r||this.elementHeight!==i||this.dirty)&&(this.elementWidth=r,this.elementHeight=i,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,(a=this.options.axes)!==!0&&"both"!==a&&"y"!==a||(s=function(){var t,i,n,r;for(n=this.grid,r=[],t=0,i=n.length;t<i;t++)e=n[t],r.push(this.measureText(this.yAxisFormat(e)).width);return r}.call(this),this.left+=Math.max.apply(Math,s)),(o=this.options.axes)!==!0&&"both"!==o&&"x"!==o||(t=function(){var t,e,i;for(i=[],n=t=0,e=this.data.length;0<=e?t<e:t>e;n=0<=e?++t:--t)i.push(this.measureText(this.data[n].text,-this.options.xLabelAngle).height);return i}.call(this),this.bottom-=Math.max.apply(Math,t)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc))return this.calc()},n.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy},n.prototype.transX=function(t){return 1===this.data.length?(this.left+this.right)/2:this.left+(t-this.xmin)*this.dx},n.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},n.prototype.measureText=function(t,e){var i,n;return null==e&&(e=0),n=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(e),i=n.getBBox(),n.remove(),i},n.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)},n.prototype.yLabelFormat=function(t){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t):""+this.options.preUnits+e.commas(t)+this.options.postUnits},n.prototype.drawGrid=function(){var t,e,i,n,r,s,a,o;if(this.options.grid!==!1||(r=this.options.axes)===!0||"both"===r||"y"===r){for(s=this.grid,o=[],i=0,n=s.length;i<n;i++)t=s[i],e=this.transY(t),(a=this.options.axes)!==!0&&"both"!==a&&"y"!==a||this.drawYAxisLabel(this.left-this.options.padding/2,e,this.yAxisFormat(t)),this.options.grid?o.push(this.drawGridLine("M"+this.left+","+e+"H"+(this.left+this.width))):o.push(void 0);return o}},n.prototype.drawGoals=function(){var t,e,i,n,r,s,a;for(s=this.options.goals,a=[],i=n=0,r=s.length;n<r;i=++n)e=s[i],t=this.options.goalLineColors[i%this.options.goalLineColors.length],a.push(this.drawGoal(e,t));return a},n.prototype.drawEvents=function(){var t,e,i,n,r,s,a;for(s=this.events,a=[],i=n=0,r=s.length;n<r;i=++n)e=s[i],t=this.options.eventLineColors[i%this.options.eventLineColors.length],a.push(this.drawEvent(e,t));return a},n.prototype.drawGoal=function(t,e){return this.raphael.path("M"+this.left+","+this.transY(t)+"H"+this.right).attr("stroke",e).attr("stroke-width",this.options.goalStrokeWidth)},n.prototype.drawEvent=function(t,e){return this.raphael.path("M"+this.transX(t)+","+this.bottom+"V"+this.top).attr("stroke",e).attr("stroke-width",this.options.eventStrokeWidth)},n.prototype.drawYAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},n.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},n.prototype.startRange=function(t){return this.hover.hide(),this.selectFrom=t,this.selectionRect.attr({x:t,width:0}).show()},n.prototype.endRange=function(t){var e,i;if(this.selectFrom)return i=Math.min(this.selectFrom,t),e=Math.max(this.selectFrom,t),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(i)].x,end:this.data[this.hitTest(e)].x}),this.selectFrom=null},n.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},n}(e.EventEmitter),e.parseDate=function(t){var e,i,n,r,s,a,o,l,h,u,c;return"number"==typeof t?t:(i=t.match(/^(\d+) Q(\d)$/),r=t.match(/^(\d+)-(\d+)$/),s=t.match(/^(\d+)-(\d+)-(\d+)$/),o=t.match(/^(\d+) W(\d+)$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),h=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),i?new Date(parseInt(i[1],10),3*parseInt(i[2],10)-1,1).getTime():r?new Date(parseInt(r[1],10),parseInt(r[2],10)-1,1).getTime():s?new Date(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10)).getTime():o?(u=new Date(parseInt(o[1],10),0,1),4!==u.getDay()&&u.setMonth(0,1+(4-u.getDay()+7)%7),u.getTime()+6048e5*parseInt(o[2],10)):l?l[6]?(a=0,"Z"!==l[6]&&(a=60*parseInt(l[8],10)+parseInt(l[9],10),"+"===l[7]&&(a=0-a)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+a)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime():h?(c=parseFloat(h[6]),e=Math.floor(c),n=Math.round(1e3*(c-e)),h[8]?(a=0,"Z"!==h[8]&&(a=60*parseInt(h[10],10)+parseInt(h[11],10),"+"===h[9]&&(a=0-a)),Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+a,e,n)):new Date(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),e,n).getTime()):new Date(parseInt(t,10),0,1).getTime())},e.Hover=function(){function i(i){null==i&&(i={}),this.options=t.extend({},e.Hover.defaults,i),this.el=t("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return i.defaults={"class":"morris-hover morris-default-style"},i.prototype.update=function(t,e,i){return t?(this.html(t),this.show(),this.moveTo(e,i)):this.hide()},i.prototype.html=function(t){return this.el.html(t)},i.prototype.moveTo=function(t,e){var i,n,r,s,a,o;return a=this.options.parent.innerWidth(),s=this.options.parent.innerHeight(),n=this.el.outerWidth(),i=this.el.outerHeight(),r=Math.min(Math.max(0,t-n/2),a-n),null!=e?(o=e-i-10,o<0&&(o=e+10,o+i>s&&(o=s/2-i/2))):o=s/2-i/2,this.el.css({left:r+"px",top:parseInt(o)+"px"})},i.prototype.show=function(){return this.el.show()},i.prototype.hide=function(){return this.el.hide()},i}(),e.Line=function(t){function i(t){return this.hilight=s(this.hilight,this),this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof e.Line?void i.__super__.constructor.call(this,t):new e.Line(t)}return o(i,t),i.prototype.init=function(){if("always"!==this.options.hideHover)return this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},i.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},i.prototype.calcPoints=function(){var t,e,i,n,r,s;for(r=this.data,s=[],i=0,n=r.length;i<n;i++)t=r[i],t._x=this.transX(t.x),t._y=function(){var i,n,r,s;for(r=t.y,s=[],i=0,n=r.length;i<n;i++)e=r[i],null!=e?s.push(this.transY(e)):s.push(e);return s}.call(this),s.push(t._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var i,n,r,s;for(r=t._y,s=[],i=0,n=r.length;i<n;i++)e=r[i],null!=e&&s.push(e);return s}())));return s},i.prototype.hitTest=function(t){var e,i,n,r,s;if(0===this.data.length)return null;for(s=this.data.slice(1),e=n=0,r=s.length;n<r&&(i=s[e],!(t<(i._x+this.data[e]._x)/2));e=++n);return e},i.prototype.onGridClick=function(t,e){var i;return i=this.hitTest(t),this.fire("click",i,this.data[i].src,t,e)},i.prototype.onHoverMove=function(t){var e;return e=this.hitTest(t),this.displayHoverForRow(e)},i.prototype.onHoverOut=function(){if(this.options.hideHover!==!1)return this.displayHoverForRow(null)},i.prototype.displayHoverForRow=function(t){var e;return null!=t?((e=this.hover).update.apply(e,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},i.prototype.hoverContentForRow=function(t){var e,i,n,r,s,a,o;for(n=this.data[t],e="<div class='morris-hover-row-label'>"+n.label+"</div>",o=n.y,i=s=0,a=o.length;s<a;i=++s)r=o[i],e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(r)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,n.src)),[e,n._x,n._ymax]},i.prototype.generatePaths=function(){var t,i,n,r;return this.paths=function(){var s,a,o,h;for(h=[],i=s=0,a=this.options.ykeys.length;0<=a?s<a:s>a;i=0<=a?++s:--s)r="boolean"==typeof this.options.smooth?this.options.smooth:(o=this.options.ykeys[i],l.call(this.options.smooth,o)>=0),t=function(){var t,e,r,s;for(r=this.data,s=[],t=0,e=r.length;t<e;t++)n=r[t],void 0!==n._y[i]&&s.push({x:n._x,y:n._y[i]});return s}.call(this),t.length>1?h.push(e.Line.createPath(t,r,this.bottom)):h.push(null);return h}.call(this)},i.prototype.draw=function(){var t;if((t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1)return this.displayHoverForRow(this.data.length-1)},i.prototype.drawXAxis=function(){var t,i,n,r,s,a,o,l,h,u,c=this;for(o=this.bottom+this.options.padding/2,s=null,r=null,t=function(t,e){var i,n,a,l,h;return i=c.drawXAxisLabel(c.transX(e),o,t),h=i.getBBox(),i.transform("r"+-c.options.xLabelAngle),n=i.getBBox(),i.transform("t0,"+n.height/2+"..."),0!==c.options.xLabelAngle&&(l=-.5*h.width*Math.cos(c.options.xLabelAngle*Math.PI/180),i.transform("t"+l+",0...")),n=i.getBBox(),(null==s||s>=n.x+n.width||null!=r&&r>=n.x)&&n.x>=0&&n.x+n.width<c.el.width()?(0!==c.options.xLabelAngle&&(a=1.25*c.options.gridTextSize/Math.sin(c.options.xLabelAngle*Math.PI/180),r=n.x-a),s=n.x-c.options.xLabelMargin):i.remove()},n=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:e.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,e,i,n;for(i=this.data,n=[],t=0,e=i.length;t<e;t++)a=i[t],n.push([a.label,a.x]);return n}.call(this),n.reverse(),u=[],l=0,h=n.length;l<h;l++)i=n[l],u.push(t(i[0],i[1]));return u},i.prototype.drawSeries=function(){var t,e,i,n,r,s;for(this.seriesPoints=[],t=e=n=this.options.ykeys.length-1;n<=0?e<=0:e>=0;t=n<=0?++e:--e)this._drawLineFor(t);for(s=[],t=i=r=this.options.ykeys.length-1;r<=0?i<=0:i>=0;t=r<=0?++i:--i)s.push(this._drawPointFor(t));return s},i.prototype._drawPointFor=function(t){var e,i,n,r,s,a;for(this.seriesPoints[t]=[],s=this.data,a=[],n=0,r=s.length;n<r;n++)i=s[n],e=null,null!=i._y[t]&&(e=this.drawLinePoint(i._x,i._y[t],this.colorFor(i,t,"point"),t)),a.push(this.seriesPoints[t].push(e));return a},i.prototype._drawLineFor=function(t){var e;if(e=this.paths[t],null!==e)return this.drawLinePath(e,this.colorFor(null,t,"line"),t)},i.createPath=function(t,i,n){var r,s,a,o,l,h,u,c,d,f,p,g,m,v;for(u="",i&&(a=e.Line.gradients(t)),c={y:null},o=m=0,v=t.length;m<v;o=++m)r=t[o],null!=r.y&&(null!=c.y?i?(s=a[o],h=a[o-1],l=(r.x-c.x)/4,d=c.x+l,p=Math.min(n,c.y+l*h),f=r.x-l,g=Math.min(n,r.y-l*s),u+="C"+d+","+p+","+f+","+g+","+r.x+","+r.y):u+="L"+r.x+","+r.y:i&&null==a[o]||(u+="M"+r.x+","+r.y)),c=r;return u},i.gradients=function(t){var e,i,n,r,s,a,o,l;for(i=function(t,e){return(t.y-e.y)/(t.x-e.x)},l=[],n=a=0,o=t.length;a<o;n=++a)e=t[n],null!=e.y?(r=t[n+1]||{y:null},s=t[n-1]||{y:null},null!=s.y&&null!=r.y?l.push(i(s,r)):null!=s.y?l.push(i(s,e)):null!=r.y?l.push(i(e,r)):l.push(null)):l.push(null);return l},i.prototype.hilight=function(t){var e,i,n,r,s;if(null!==this.prevHilight&&this.prevHilight!==t)for(e=i=0,r=this.seriesPoints.length-1;0<=r?i<=r:i>=r;e=0<=r?++i:--i)this.seriesPoints[e][this.prevHilight]&&this.seriesPoints[e][this.prevHilight].animate(this.pointShrinkSeries(e));if(null!==t&&this.prevHilight!==t)for(e=n=0,s=this.seriesPoints.length-1;0<=s?n<=s:n>=s;e=0<=s?++n:--n)this.seriesPoints[e][t]&&this.seriesPoints[e][t].animate(this.pointGrowSeries(e));return this.prevHilight=t},i.prototype.colorFor=function(t,e,i){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,e,i):"point"===i?this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]:this.options.lineColors[e%this.options.lineColors.length]},i.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawLinePath=function(t,e,i){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.lineWidthForSeries(i))},i.prototype.drawLinePoint=function(t,e,i,n){return this.raphael.circle(t,e,this.pointSizeForSeries(n)).attr("fill",i).attr("stroke-width",this.pointStrokeWidthForSeries(n)).attr("stroke",this.pointStrokeColorForSeries(n))},i.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]},i.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},i.prototype.lineWidthForSeries=function(t){return this.options.lineWidth instanceof Array?this.options.lineWidth[t%this.options.lineWidth.length]:this.options.lineWidth},i.prototype.pointSizeForSeries=function(t){return this.options.pointSize instanceof Array?this.options.pointSize[t%this.options.pointSize.length]:this.options.pointSize},i.prototype.pointGrowSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear")},i.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")},i}(e.Grid),e.labelSeries=function(i,n,r,s,a){var o,l,h,u,c,d,f,p,g,m,v;if(h=200*(n-i)/r,l=new Date(i),f=e.LABEL_SPECS[s],void 0===f)for(v=e.AUTO_LABEL_ORDER,g=0,m=v.length;g<m;g++)if(u=v[g],d=e.LABEL_SPECS[u],h>=d.span){f=d;break}for(void 0===f&&(f=e.LABEL_SPECS.second),a&&(f=t.extend({},f,{fmt:a})),o=f.start(l),c=[];(p=o.getTime())<=n;)p>=i&&c.push([f.fmt(o),p]),f.incr(o);return c},i=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+t)}}},n=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())+":"+e.pad2(t.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+t)}}},e.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:i(60),"30min":i(30),"15min":i(15),"10min":i(10),"5min":i(5),minute:i(1),"30sec":n(30),"15sec":n(15),"10sec":n(10),"5sec":n(5),second:n(1)},e.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],
e.Area=function(i){function n(i){var s;return this instanceof e.Area?(s=t.extend({},r,i),this.cumulative=!s.behaveLikeLine,"auto"===s.fillOpacity&&(s.fillOpacity=s.behaveLikeLine?.8:1),void n.__super__.constructor.call(this,s)):new e.Area(i)}var r;return o(n,i),r={fillOpacity:"auto",behaveLikeLine:!1},n.prototype.calcPoints=function(){var t,e,i,n,r,s,a;for(s=this.data,a=[],n=0,r=s.length;n<r;n++)t=s[n],t._x=this.transX(t.x),e=0,t._y=function(){var n,r,s,a;for(s=t.y,a=[],n=0,r=s.length;n<r;n++)i=s[n],this.options.behaveLikeLine?a.push(this.transY(i)):(e+=i||0,a.push(this.transY(e)));return a}.call(this),a.push(t._ymax=Math.max.apply(Math,t._y));return a},n.prototype.drawSeries=function(){var t,e,i,n,r,s,a,o;for(this.seriesPoints=[],e=this.options.behaveLikeLine?function(){s=[];for(var t=0,e=this.options.ykeys.length-1;0<=e?t<=e:t>=e;0<=e?t++:t--)s.push(t);return s}.apply(this):function(){a=[];for(var t=r=this.options.ykeys.length-1;r<=0?t<=0:t>=0;r<=0?t++:t--)a.push(t);return a}.apply(this),o=[],i=0,n=e.length;i<n;i++)t=e[i],this._drawFillFor(t),this._drawLineFor(t),o.push(this._drawPointFor(t));return o},n.prototype._drawFillFor=function(t){var e;if(e=this.paths[t],null!==e)return e+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(e,this.fillForSeries(t))},n.prototype.fillForSeries=function(t){var e;return e=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line")),Raphael.hsl(e.h,this.options.behaveLikeLine?.9*e.s:.75*e.s,Math.min(.98,this.options.behaveLikeLine?1.2*e.l:1.25*e.l))},n.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},n}(e.Line),e.Bar=function(i){function n(i){return this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof e.Bar?void n.__super__.constructor.call(this,t.extend({},i,{parseTime:!1})):new e.Bar(i)}return o(n,i),n.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new e.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)},n.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},n.prototype.calc=function(){var t;if(this.calcBars(),this.options.hideHover===!1)return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))},n.prototype.calcBars=function(){var t,e,i,n,r,s,a;for(s=this.data,a=[],t=n=0,r=s.length;n<r;t=++n)e=s[t],e._x=this.left+this.width*(t+.5)/this.data.length,a.push(e._y=function(){var t,n,r,s;for(r=e.y,s=[],t=0,n=r.length;t<n;t++)i=r[t],null!=i?s.push(this.transY(i)):s.push(null);return s}.call(this));return a},n.prototype.draw=function(){var t;return(t=this.options.axes)!==!0&&"both"!==t&&"x"!==t||this.drawXAxis(),this.drawSeries()},n.prototype.drawXAxis=function(){var t,e,i,n,r,s,a,o,l,h,u,c,d;for(h=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),a=null,s=null,d=[],t=u=0,c=this.data.length;0<=c?u<c:u>c;t=0<=c?++u:--u)o=this.data[this.data.length-1-t],e=this.drawXAxisLabel(o._x,h,o.label),l=e.getBBox(),e.transform("r"+-this.options.xLabelAngle),i=e.getBBox(),e.transform("t0,"+i.height/2+"..."),0!==this.options.xLabelAngle&&(r=-.5*l.width*Math.cos(this.options.xLabelAngle*Math.PI/180),e.transform("t"+r+",0...")),(null==a||a>=i.x+i.width||null!=s&&s>=i.x)&&i.x>=0&&i.x+i.width<this.el.width()?(0!==this.options.xLabelAngle&&(n=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),s=i.x-n),d.push(a=i.x-this.options.xLabelMargin)):d.push(e.remove());return d},n.prototype.drawSeries=function(){var t,e,i,n,r,s,a,o,l,h,u,c,d,f,p;return i=this.width/this.options.data.length,o=this.options.stacked?1:this.options.ykeys.length,t=(i*this.options.barSizeRatio-this.options.barGap*(o-1))/o,this.options.barSize&&(t=Math.min(t,this.options.barSize)),c=i-t*o-this.options.barGap*(o-1),a=c/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var o,c,g,m;for(g=this.data,m=[],n=o=0,c=g.length;o<c;n=++o)l=g[n],r=0,m.push(function(){var o,c,g,m;for(g=l._y,m=[],h=o=0,c=g.length;o<c;h=++o)f=g[h],null!==f?(p?(d=Math.min(f,p),e=Math.max(f,p)):(d=f,e=this.bottom),s=this.left+n*i+a,this.options.stacked||(s+=h*(t+this.options.barGap)),u=e-d,this.options.verticalGridCondition&&this.options.verticalGridCondition(l.x)&&this.drawBar(this.left+n*i,this.top,i,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(d-=r),this.drawBar(s,d,t,u,this.colorFor(l,h,"bar"),this.options.barOpacity,this.options.barRadius),m.push(r+=u)):m.push(null);return m}.call(this));return m}.call(this)},n.prototype.colorFor=function(t,e,i){var n,r;return"function"==typeof this.options.barColors?(n={x:t.x,y:t.y[e],label:t.label},r={index:e,key:this.options.ykeys[e],label:this.options.labels[e]},this.options.barColors.call(this,n,r,i)):this.options.barColors[e%this.options.barColors.length]},n.prototype.hitTest=function(t){return 0===this.data.length?null:(t=Math.max(Math.min(t,this.right),this.left),Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length))))},n.prototype.onGridClick=function(t,e){var i;return i=this.hitTest(t),this.fire("click",i,this.data[i].src,t,e)},n.prototype.onHoverMove=function(t){var e,i;return e=this.hitTest(t),(i=this.hover).update.apply(i,this.hoverContentForRow(e))},n.prototype.onHoverOut=function(){if(this.options.hideHover!==!1)return this.hover.hide()},n.prototype.hoverContentForRow=function(t){var e,i,n,r,s,a,o,l;for(n=this.data[t],e="<div class='morris-hover-row-label'>"+n.label+"</div>",l=n.y,i=a=0,o=l.length;a<o;i=++a)s=l[i],e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(s)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(e=this.options.hoverCallback(t,this.options,e,n.src)),r=this.left+(t+.5)*this.width/this.data.length,[e,r]},n.prototype.drawXAxisLabel=function(t,e,i){var n;return n=this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},n.prototype.drawBar=function(t,e,i,n,r,s,a){var o,l;return o=Math.max.apply(Math,a),l=0===o||o>n?this.raphael.rect(t,e,i,n):this.raphael.path(this.roundedRect(t,e,i,n,a)),l.attr("fill",r).attr("fill-opacity",s).attr("stroke","none")},n.prototype.roundedRect=function(t,e,i,n,r){return null==r&&(r=[0,0,0,0]),["M",t,r[0]+e,"Q",t,e,t+r[0],e,"L",t+i-r[1],e,"Q",t+i,e,t+i,e+r[1],"L",t+i,e+n-r[2],"Q",t+i,e+n,t+i-r[2],e+n,"L",t+r[3],e+n,"Q",t,e+n,t,e+n-r[3],"Z"]},n}(e.Grid),e.Donut=function(i){function n(i){this.resizeHandler=s(this.resizeHandler,this),this.select=s(this.select,this),this.click=s(this.click,this);var n=this;if(!(this instanceof e.Donut))return new e.Donut(i);if(this.options=t.extend({},this.defaults,i),"string"==typeof i.element?this.el=t(document.getElementById(i.element)):this.el=t(i.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==i.data&&0!==i.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&t(window).bind("resize",function(){return null!=n.timeoutId&&window.clearTimeout(n.timeoutId),n.timeoutId=window.setTimeout(n.resizeHandler,100)}),this.setData(i.data))}return o(n,i),n.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:e.commas,resize:!1},n.prototype.redraw=function(){var t,i,n,r,s,a,o,l,h,u,c,d,f,p,g,m,v,y,b,x,w,_,k;for(this.raphael.clear(),i=this.el.width()/2,n=this.el.height()/2,f=(Math.min(i,n)-10)/3,c=0,x=this.values,p=0,v=x.length;p<v;p++)d=x[p],c+=d;for(l=5/(2*f),t=1.9999*Math.PI-l*this.data.length,a=0,s=0,this.segments=[],w=this.values,r=g=0,y=w.length;g<y;r=++g)d=w[r],h=a+l+t*(d/c),u=new e.DonutSegment(i,n,2*f,f,a,h,this.data[r].color||this.options.colors[s%this.options.colors.length],this.options.backgroundColor,s,this.raphael),u.render(),this.segments.push(u),u.on("hover",this.select),u.on("click",this.click),a=h,s+=1;for(this.text1=this.drawEmptyDonutLabel(i,n-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(i,n+10,this.options.labelColor,14),o=Math.max.apply(Math,this.values),s=0,_=this.values,k=[],m=0,b=_.length;m<b;m++){if(d=_[m],d===o){this.select(s);break}k.push(s+=1)}return k},n.prototype.setData=function(t){var e;return this.data=t,this.values=function(){var t,i,n,r;for(n=this.data,r=[],t=0,i=n.length;t<i;t++)e=n[t],r.push(parseFloat(e.value));return r}.call(this),this.redraw()},n.prototype.click=function(t){return this.fire("click",t,this.data[t])},n.prototype.select=function(t){var e,i,n,r,s,a;for(a=this.segments,r=0,s=a.length;r<s;r++)i=a[r],i.deselect();return n=this.segments[t],n.select(),e=this.data[t],this.setLabels(e.label,this.options.formatter(e.value,e))},n.prototype.setLabels=function(t,e){var i,n,r,s,a,o,l,h;return i=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,s=1.8*i,r=i/2,n=i/3,this.text1.attr({text:t,transform:""}),a=this.text1.getBBox(),o=Math.min(s/a.width,r/a.height),this.text1.attr({transform:"S"+o+","+o+","+(a.x+a.width/2)+","+(a.y+a.height)}),this.text2.attr({text:e,transform:""}),l=this.text2.getBBox(),h=Math.min(s/l.width,n/l.height),this.text2.attr({transform:"S"+h+","+h+","+(l.x+l.width/2)+","+l.y})},n.prototype.drawEmptyDonutLabel=function(t,e,i,n,r){var s;return s=this.raphael.text(t,e,"").attr("font-size",n).attr("fill",i),null!=r&&s.attr("font-weight",r),s},n.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},n}(e.EventEmitter),e.DonutSegment=function(t){function e(t,e,i,n,r,a,o,l,h,u){this.cx=t,this.cy=e,this.inner=i,this.outer=n,this.color=o,this.backgroundColor=l,this.index=h,this.raphael=u,this.deselect=s(this.deselect,this),this.select=s(this.select,this),this.sin_p0=Math.sin(r),this.cos_p0=Math.cos(r),this.sin_p1=Math.sin(a),this.cos_p1=Math.cos(a),this.is_long=a-r>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return o(e,t),e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},e.prototype.calcSegment=function(t,e){var i,n,r,s,a,o,l,h,u,c;return u=this.calcArcPoints(t),i=u[0],r=u[1],n=u[2],s=u[3],c=this.calcArcPoints(e),a=c[0],l=c[1],o=c[2],h=c[3],"M"+i+","+r+("A"+t+","+t+",0,"+this.is_long+",0,"+n+","+s)+("L"+o+","+h)+("A"+e+","+e+",0,"+this.is_long+",1,"+a+","+l)+"Z"},e.prototype.calcArc=function(t){var e,i,n,r,s;return s=this.calcArcPoints(t),e=s[0],n=s[1],i=s[2],r=s[3],"M"+e+","+n+("A"+t+","+t+",0,"+this.is_long+",0,"+i+","+r)},e.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})},e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})},e.prototype.drawDonutSegment=function(t,e,i,n,r){return this.raphael.path(t).attr({fill:e,stroke:i,"stroke-width":3}).hover(n).click(r)},e.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},e.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},e}(e.EventEmitter)}.call(this),d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function i(t){for(var e=1;t*e%1;)e*=10;return e}function n(t,e){try{for(var i in e)Object.defineProperty(t.prototype,i,{value:e[i],enumerable:!1})}catch(i){t.prototype=e}}function r(){}function s(){}function a(t,e,i){return function(){var n=i.apply(e,arguments);return n===e?t:n}}function o(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var i=0,n=As.length;n>i;++i){var r=As[i]+e;if(r in t)return r}}function l(){}function h(){}function u(t){function e(){for(var e,n=i,r=-1,s=n.length;++r<s;)(e=n[r].on)&&e.apply(this,arguments);return t}var i=[],n=new r;return e.on=function(e,r){var s,a=n.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,i=i.slice(0,s=i.indexOf(a)).concat(i.slice(s+1)),n.remove(e)),r&&i.push(n.set(e,{on:r})),t)},e}function c(){vs.event.preventDefault()}function d(){for(var t,e=vs.event;t=e.sourceEvent;)e=t;return e}function f(t){for(var e=new h,i=0,n=arguments.length;++i<n;)e[arguments[i]]=u(e);return e.of=function(i,n){return function(r){try{var s=r.sourceEvent=vs.event;r.target=t,vs.event=r,e[r.type].apply(i,n)}finally{vs.event=s}}},e}function p(t){return Is(t,Hs),t}function g(t){return"function"==typeof t?t:function(){return zs(t,this)}}function m(t){return"function"==typeof t?t:function(){return Ls(t,this)}}function v(t,e){function i(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function s(){this.setAttributeNS(t.space,t.local,e)}function a(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}function o(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}return t=vs.ns.qualify(t),null==e?t.local?n:i:"function"==typeof e?t.local?o:a:t.local?s:r}function y(t){return t.trim().replace(/\s+/g," ")}function b(t){return new RegExp("(?:^|\\s+)"+vs.requote(t)+"(?:\\s+|$)","g")}function x(t,e){function i(){for(var i=-1;++i<r;)t[i](this,e)}function n(){for(var i=-1,n=e.apply(this,arguments);++i<r;)t[i](this,n)}t=t.trim().split(/\s+/).map(w);var r=t.length;return"function"==typeof e?n:i}function w(t){var e=b(t);return function(i,n){if(r=i.classList)return n?r.add(t):r.remove(t);var r=i.getAttribute("class")||"";n?(e.lastIndex=0,e.test(r)||i.setAttribute("class",y(r+" "+t))):i.setAttribute("class",y(r.replace(e," ")))}}function _(t,e,i){function n(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,i)}function s(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,i)}return null==e?n:"function"==typeof e?s:r}function k(t,e){function i(){delete this[t]}function n(){this[t]=e}function r(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}return null==e?i:"function"==typeof e?r:n}function C(t){return"function"==typeof t?t:(t=vs.ns.qualify(t)).local?function(){return xs.createElementNS(t.space,t.local)}:function(){return xs.createElementNS(this.namespaceURI,t)}}function M(t){return{__data__:t}}function S(t){return function(){return Ns(this,t)}}function T(t){return arguments.length||(t=vs.ascending),function(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}}function D(t,e){for(var i=0,n=t.length;n>i;i++)for(var r,s=t[i],a=0,o=s.length;o>a;a++)(r=s[a])&&e(r,a,i);return t}function E(t){return Is(t,Ws),t}function P(t){var e,i;return function(n,r,s){var a,o=t[s].update,l=o.length;for(s!=i&&(i=s,e=0),r>=e&&(e=r+1);!(a=o[e])&&++e<l;);return a}}function A(){var t=this.__transition__;t&&++t.active}function F(t,e,i){function n(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=h(e,bs(arguments));n.call(this),this.addEventListener(t,this[a]=r,r.$=i),r._=e}function s(){var e,i=new RegExp("^__on([^.]+)"+vs.requote(t)+"$");for(var n in this)if(e=n.match(i)){var r=this[n];this.removeEventListener(e[1],r,r.$),delete this[n]}}var a="__on"+t,o=t.indexOf("."),h=I;o>0&&(t=t.substring(0,o));var u=Bs.get(t);return u&&(t=u,h=z),o?e?r:n:e?l:s}function I(t,e){return function(i){var n=vs.event;vs.event=i,e[0]=this.__data__;try{t.apply(this,e)}finally{vs.event=n}}}function z(t,e){var i=I(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||i.call(e,t)}}function L(){var t=".dragsuppress-"+ ++qs,e="touchmove"+t,i="selectstart"+t,n="dragstart"+t,r="click"+t,s=vs.select(_s).on(e,c).on(i,c).on(n,c),a=ws.style,o=a[Ys];return a[Ys]="none",function(e){function i(){s.on(r,null)}s.on(t,null),a[Ys]=o,e&&(s.on(r,function(){c(),i()},!0),setTimeout(i,0))}}function R(t,e){e.changedTouches&&(e=e.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var n=i.createSVGPoint();if(0>Us&&(_s.scrollX||_s.scrollY)){i=vs.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=i[0][0].getScreenCTM();Us=!(r.f||r.e),i.remove()}return Us?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function N(t){return t>0?1:0>t?-1:0}function H(t){return t>1?0:-1>t?Vs:Math.acos(t)}function O(t){return t>1?$s:-1>t?-$s:Math.asin(t)}function W(t){return((t=Math.exp(t))-1/t)/2}function j(t){return((t=Math.exp(t))+1/t)/2}function B(t){return((t=Math.exp(2*t))-1)/(t+1)}function Y(t){return(t=Math.sin(t/2))*t}function q(){}function U(t,e,i){return new V(t,e,i)}function V(t,e,i){this.h=t,this.s=e,this.l=i}function G(t,e,i){function n(t){return t>360?t-=360:0>t&&(t+=360),60>t?s+(a-s)*t/60:180>t?a:240>t?s+(a-s)*(240-t)/60:s}function r(t){return Math.round(255*n(t))}var s,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,i=0>i?0:i>1?1:i,a=.5>=i?i*(1+e):i+e-i*e,s=2*i-a,at(r(t+120),r(t),r(t-120))}function $(t,e,i){return new X(t,e,i)}function X(t,e,i){this.h=t,this.c=e,this.l=i}function Z(t,e,i){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),Q(i,Math.cos(t*=Qs)*e,Math.sin(t)*e)}function Q(t,e,i){return new K(t,e,i)}function K(t,e,i){this.l=t,this.a=e,this.b=i}function J(t,e,i){var n=(t+16)/116,r=n+e/500,s=n-i/200;return r=et(r)*la,n=et(n)*ha,s=et(s)*ua,at(nt(3.2404542*r-1.5371385*n-.4985314*s),nt(-.969266*r+1.8760108*n+.041556*s),nt(.0556434*r-.2040259*n+1.0572252*s))}function tt(t,e,i){return t>0?$(Math.atan2(i,e)*Ks,Math.sqrt(e*e+i*i),t):$(NaN,NaN,t)}function et(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function it(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function nt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function rt(t){return at(t>>16,255&t>>8,255&t)}function st(t){return rt(t)+""}function at(t,e,i){return new ot(t,e,i)}function ot(t,e,i){this.r=t,this.g=e,this.b=i}function lt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ht(t,e,i){var n,r,s,a=0,o=0,l=0;if(n=/([a-z]+)\((.*)\)/i.exec(t))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(ft(r[0]),ft(r[1]),ft(r[2]))}return(s=fa.get(t))?e(s.r,s.g,s.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(a=t.charAt(1),a+=a,o=t.charAt(2),o+=o,l=t.charAt(3),l+=l):7===t.length&&(a=t.substring(1,3),o=t.substring(3,5),l=t.substring(5,7)),a=parseInt(a,16),o=parseInt(o,16),l=parseInt(l,16)),e(a,o,l))}function ut(t,e,i){var n,r,s=Math.min(t/=255,e/=255,i/=255),a=Math.max(t,e,i),o=a-s,l=(a+s)/2;return o?(r=.5>l?o/(a+s):o/(2-a-s),n=t==a?(e-i)/o+(i>e?6:0):e==a?(i-t)/o+2:(t-e)/o+4,n*=60):(n=NaN,r=l>0&&1>l?0:n),U(n,r,l)}function ct(t,e,i){t=dt(t),e=dt(e),i=dt(i);var n=it((.4124564*t+.3575761*e+.1804375*i)/la),r=it((.2126729*t+.7151522*e+.072175*i)/ha),s=it((.0193339*t+.119192*e+.9503041*i)/ua);return Q(116*r-16,500*(n-r),200*(r-s))}function dt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ft(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function pt(t){return"function"==typeof t?t:function(){return t}}function gt(t){return t}function mt(t){return function(e,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=null),vt(e,i,t,n)}}function vt(t,e,i,n){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=i.call(s,l)}catch(t){return void a.error.call(s,t)}a.load.call(s,t)}else a.error.call(s,l)}var s={},a=vs.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,h=null;return!_s.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=vs.event;vs.event=t;try{a.progress.call(s,l)}finally{vs.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?o[t]:(null==e?delete o[t]:o[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",s):e},s.responseType=function(t){return arguments.length?(h=t,s):h},s.response=function(t){return i=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(bs(arguments)))}}),s.send=function(i,n,r){if(2===arguments.length&&"function"==typeof n&&(r=n,n=null),l.open(i,t,!0),null==e||"accept"in o||(o.accept=e+",*/*"),l.setRequestHeader)for(var u in o)l.setRequestHeader(u,o[u]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=h&&(l.responseType=h),null!=r&&s.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(s,l),l.send(null==n?null:n),s},s.abort=function(){return l.abort(),s},vs.rebind(s,a,"on"),null==n?s:s.get(yt(n))}function yt(t){return 1===t.length?function(e,i){t(null==e?i:null)}:t}function bt(){var t=wt(),e=_t()-t;e>24?(isFinite(e)&&(clearTimeout(va),va=setTimeout(bt,e)),ma=0):(ma=1,ba(bt))}function xt(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now()),ya.callback=t,ya.time=i+e}function wt(){var t=Date.now();for(ya=pa;ya;)t>=ya.time&&(ya.flush=ya.callback(t-ya.time)),ya=ya.next;return t}function _t(){for(var t,e=pa,i=1/0;e;)e.flush?e=t?t.next=e.next:pa=e.next:(e.time<i&&(i=e.time),e=(t=e).next);return ga=t,i}function kt(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}}function Ct(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Mt(t){return t+""}function St(){}function Tt(t,e,i){var n=i.s=t+e,r=n-t,s=n-r;i.t=t-s+(e-r)}function Dt(t,e){t&&Aa.hasOwnProperty(t.type)&&Aa[t.type](t,e)}function Et(t,e,i){var n,r=-1,s=t.length-i;for(e.lineStart();++r<s;)n=t[r],e.point(n[0],n[1],n[2]);e.lineEnd()}function Pt(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)Et(t[i],e,1);e.polygonEnd()}function At(){function t(t,e){t*=Qs,e=e*Qs/2+Vs/4;var i=t-n,a=Math.cos(e),o=Math.sin(e),l=s*o,h=r*a+l*Math.cos(i),u=l*Math.sin(i);Ia.add(Math.atan2(u,h)),n=t,r=a,s=o}var e,i,n,r,s;za.point=function(a,o){za.point=t,n=(e=a)*Qs,r=Math.cos(o=(i=o)*Qs/2+Vs/4),s=Math.sin(o)},za.lineEnd=function(){t(e,i)}}function Ft(t){var e=t[0],i=t[1],n=Math.cos(i);return[n*Math.cos(e),n*Math.sin(e),Math.sin(i)]}function It(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Lt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Rt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nt(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ht(t){return[Math.atan2(t[1],t[0]),O(t[2])]}function Ot(t,e){return Math.abs(t[0]-e[0])<Xs&&Math.abs(t[1]-e[1])<Xs}function Wt(t,e){t*=Qs;var i=Math.cos(e*=Qs);jt(i*Math.cos(t),i*Math.sin(t),Math.sin(e))}function jt(t,e,i){++La,Na+=(t-Na)/La,Ha+=(e-Ha)/La,Oa+=(i-Oa)/La}function Bt(){function t(t,r){t*=Qs;var s=Math.cos(r*=Qs),a=s*Math.cos(t),o=s*Math.sin(t),l=Math.sin(r),h=Math.atan2(Math.sqrt((h=i*l-n*o)*h+(h=n*a-e*l)*h+(h=e*o-i*a)*h),e*a+i*o+n*l);Ra+=h,Wa+=h*(e+(e=a)),ja+=h*(i+(i=o)),Ba+=h*(n+(n=l)),jt(e,i,n)}var e,i,n;Va.point=function(r,s){r*=Qs;var a=Math.cos(s*=Qs);e=a*Math.cos(r),i=a*Math.sin(r),n=Math.sin(s),Va.point=t,jt(e,i,n)}}function Yt(){Va.point=Wt}function qt(){function t(t,e){t*=Qs;var i=Math.cos(e*=Qs),a=i*Math.cos(t),o=i*Math.sin(t),l=Math.sin(e),h=r*l-s*o,u=s*a-n*l,c=n*o-r*a,d=Math.sqrt(h*h+u*u+c*c),f=n*a+r*o+s*l,p=d&&-H(f)/d,g=Math.atan2(d,f);Ya+=p*h,qa+=p*u,Ua+=p*c,Ra+=g,Wa+=g*(n+(n=a)),ja+=g*(r+(r=o)),Ba+=g*(s+(s=l)),jt(n,r,s)}var e,i,n,r,s;Va.point=function(a,o){e=a,i=o,Va.point=t,a*=Qs;var l=Math.cos(o*=Qs);n=l*Math.cos(a),r=l*Math.sin(a),s=Math.sin(o),jt(n,r,s)},Va.lineEnd=function(){t(e,i),Va.lineEnd=Yt,Va.point=Wt}}function Ut(){return!0}function Vt(t,e,i,n,r){var s=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i=t[0],n=t[e];if(Ot(i,n)){r.lineStart();for(var o=0;e>o;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}var l={point:i,points:t,other:null,visited:!1,entry:!0,subject:!0},h={point:i,points:[i],other:l,visited:!1,entry:!1,subject:!1};l.other=h,s.push(l),a.push(h),l={point:n,points:[n],other:null,visited:!1,entry:!1,subject:!0},h={point:n,points:[n],other:l,visited:!1,entry:!0,subject:!1},l.other=h,s.push(l),a.push(h)}}),a.sort(e),Gt(s),Gt(a),s.length){for(var o=0,l=i,h=a.length;h>o;++o)a[o].entry=l=!l;for(var u,c,d,f=s[0];;){for(u=f;u.visited;)if((u=u.next)===f)return;c=u.points,r.lineStart();do{if(u.visited=u.other.visited=!0,u.entry){if(u.subject)for(var o=0;o<c.length;o++)r.point((d=c[o])[0],d[1]);else n(u.point,u.next.point,1,r);u=u.next}else{if(u.subject){c=u.prev.points;for(var o=c.length;--o>=0;)r.point((d=c[o])[0],d[1])}else n(u.point,u.prev.point,-1,r);u=u.prev}u=u.other,c=u.points}while(!u.visited);r.lineEnd()}}}function Gt(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.next=i=t[n],i.prev=r,r=i;r.next=i=t[0],i.prev=r}}function $t(t,e,i,n){return function(r,s){function a(e,i){var n=r(e,i);t(e=n[0],i=n[1])&&s.point(e,i)}function o(t,e){var i=r(t,e);m.point(i[0],i[1])}function l(){y.point=o,m.lineStart()}function h(){y.point=a,m.lineEnd()}function u(t,e){g.push([t,e]);var i=r(t,e);x.point(i[0],i[1])}function c(){x.lineStart(),g=[]}function d(){u(g[0][0],g[0][1]),x.lineEnd();var t,e=x.clean(),i=b.buffer(),n=i.length;if(g.pop(),p.push(g),g=null,n){if(1&e){t=i[0];var r,n=t.length-1,a=-1;for(s.lineStart();++a<n;)s.point((r=t[a])[0],r[1]);return void s.lineEnd()}n>1&&2&e&&i.push(i.pop().concat(i.shift())),f.push(i.filter(Xt))}}var f,p,g,m=e(s),v=r.invert(n[0],n[1]),y={point:a,lineStart:l,lineEnd:h,polygonStart:function(){y.point=u,y.lineStart=c,y.lineEnd=d,f=[],p=[],s.polygonStart()},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=h,f=vs.merge(f);var t=Kt(v,p);f.length?Vt(f,Qt,t,i,s):t&&(s.lineStart(),i(null,null,1,s),s.lineEnd()),s.polygonEnd(),f=p=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=Zt(),x=e(b);return y}}function Xt(t){return t.length>1}function Zt(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,i){t.push([e,i])},lineEnd:l,buffer:function(){var i=e;return e=[],t=null,i},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Qt(t,e){return((t=t.point)[0]<0?t[1]-$s-Xs:$s-t[1])-((e=e.point)[0]<0?e[1]-$s-Xs:$s-e[1])}function Kt(t,e){var i=t[0],n=t[1],r=[Math.sin(i),-Math.cos(i),0],s=0,a=0;Ia.reset();for(var o=0,l=e.length;l>o;++o){var h=e[o],u=h.length;if(u)for(var c=h[0],d=c[0],f=c[1]/2+Vs/4,p=Math.sin(f),g=Math.cos(f),m=1;;){m===u&&(m=0),t=h[m];var v=t[0],y=t[1]/2+Vs/4,b=Math.sin(y),x=Math.cos(y),w=v-d,_=Math.abs(w)>Vs,k=p*b;if(Ia.add(Math.atan2(k*Math.sin(w),g*x+k*Math.cos(w))),s+=_?w+(w>=0?2:-2)*Vs:w,_^d>=i^v>=i){var C=zt(Ft(c),Ft(t));Nt(C);var M=zt(r,C);Nt(M);var S=(_^w>=0?-1:1)*O(M[2]);(n>S||n===S&&(C[0]||C[1]))&&(a+=_^w>=0?1:-1)}if(!m++)break;d=v,p=b,g=x,c=t}}return(-Xs>s||Xs>s&&0>Ia)^1&a}function Jt(t){var e,i=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var o=s>0?Vs:-Vs,l=Math.abs(s-i);Math.abs(l-Vs)<Xs?(t.point(i,n=(n+a)/2>0?$s:-$s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(s,n),e=0):r!==o&&l>=Vs&&(Math.abs(i-r)<Xs&&(i-=r*Xs),Math.abs(s-o)<Xs&&(s-=o*Xs),n=te(i,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),e=0),t.point(i=s,n=a),r=o},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function te(t,e,i,n){var r,s,a=Math.sin(t-i);return Math.abs(a)>Xs?Math.atan((Math.sin(e)*(s=Math.cos(n))*Math.sin(i)-Math.sin(n)*(r=Math.cos(e))*Math.sin(t))/(r*s*a)):(e+n)/2}function ee(t,e,i,n){var r;if(null==t)r=i*$s,n.point(-Vs,r),n.point(0,r),n.point(Vs,r),n.point(Vs,0),n.point(Vs,-r),n.point(0,-r),n.point(-Vs,-r),n.point(-Vs,0),n.point(-Vs,r);else if(Math.abs(t[0]-e[0])>Xs){var s=(t[0]<e[0]?1:-1)*Vs;r=i*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function ie(t){function e(t,e){return Math.cos(t)*Math.cos(e)>s}function i(t){var i,s,l,h,u;return{lineStart:function(){h=l=!1,u=1},point:function(c,d){var f,p=[c,d],g=e(c,d),m=a?g?0:r(c,d):g?r(c+(0>c?Vs:-Vs),d):0;if(!i&&(h=l=g)&&t.lineStart(),g!==l&&(f=n(i,p),(Ot(i,f)||Ot(p,f))&&(p[0]+=Xs,p[1]+=Xs,g=e(p[0],p[1]))),g!==l)u=0,g?(t.lineStart(),f=n(p,i),t.point(f[0],f[1])):(f=n(i,p),t.point(f[0],f[1]),t.lineEnd()),i=f;else if(o&&i&&a^g){var v;m&s||!(v=n(p,i,!0))||(u=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||i&&Ot(i,p)||t.point(p[0],p[1]),i=p,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return u|(h&&l)<<1}}}function n(t,e,i){var n=Ft(t),r=Ft(e),a=[1,0,0],o=zt(n,r),l=It(o,o),h=o[0],u=l-h*h;if(!u)return!i&&t;var c=s*l/u,d=-s*h/u,f=zt(a,o),p=Rt(a,c),g=Rt(o,d);Lt(p,g);var m=f,v=It(p,m),y=It(m,m),b=v*v-y*(It(p,p)-1);if(!(0>b)){var x=Math.sqrt(b),w=Rt(m,(-v-x)/y);if(Lt(w,p),w=Ht(w),!i)return w;var _,k=t[0],C=e[0],M=t[1],S=e[1];k>C&&(_=k,k=C,C=_);var T=C-k,D=Math.abs(T-Vs)<Xs,E=D||Xs>T;if(!D&&M>S&&(_=M,M=S,S=_),E?D?M+S>0^w[1]<(Math.abs(w[0]-k)<Xs?M:S):M<=w[1]&&w[1]<=S:T>Vs^(k<=w[0]&&w[0]<=C)){var P=Rt(m,(-v+x)/y);return Lt(P,p),[w,Ht(P)]}}}function r(e,i){var n=a?t:Vs-t,r=0;return-n>e?r|=1:e>n&&(r|=2),-n>i?r|=4:i>n&&(r|=8),r}var s=Math.cos(t),a=s>0,o=Math.abs(s)>Xs,l=Ee(t,6*Qs);return $t(e,i,l,a?[0,-t]:[-Vs,t-Vs])}function ne(t,e,i,n){function r(n,r){return Math.abs(n[0]-t)<Xs?r>0?0:3:Math.abs(n[0]-i)<Xs?r>0?2:1:Math.abs(n[1]-e)<Xs?r>0?1:0:r>0?3:2}function s(t,e){return a(t.point,e.point)}function a(t,e){var i=r(t,1),n=r(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}function o(r,s){var a=s[0]-r[0],o=s[1]-r[1],l=[0,1];return Math.abs(a)<Xs&&Math.abs(o)<Xs?t<=r[0]&&r[0]<=i&&e<=r[1]&&r[1]<=n:!!(re(t-r[0],a,l)&&re(r[0]-i,-a,l)&&re(e-r[1],o,l)&&re(r[1]-n,-o,l))&&(l[1]<1&&(s[0]=r[0]+l[1]*a,s[1]=r[1]+l[1]*o),l[0]>0&&(r[0]+=l[0]*a,r[1]+=l[0]*o),!0)}return function(l){function h(t){for(var e=0,i=y.length,n=t[1],r=0;i>r;++r)for(var s,a=1,o=y[r],l=o.length,h=o[0];l>a;++a)s=o[a],h[1]<=n?s[1]>n&&u(h,s,t)>0&&++e:s[1]<=n&&u(h,s,t)<0&&--e,h=s;return 0!==e}function u(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function c(s,o,l,h){var u=0,c=0;if(null==s||(u=r(s,l))!==(c=r(o,l))||a(s,o)<0^l>0){do h.point(0===u||3===u?t:i,u>1?n:e);while((u=(u+l+4)%4)!==c)}else h.point(o[0],o[1])}function d(r,s){return r>=t&&i>=r&&s>=e&&n>=s}function f(t,e){d(t,e)&&l.point(t,e)}function p(){P.point=m,y&&y.push(b=[]),S=!0,M=!1,k=C=NaN}function g(){v&&(m(x,w),_&&M&&E.rejoin(),v.push(E.buffer())),P.point=f,M&&l.lineEnd()}function m(t,e){t=Math.max(-$a,Math.min($a,t)),e=Math.max(-$a,Math.min($a,e));var i=d(t,e);if(y&&b.push([t,e]),S)x=t,w=e,_=i,S=!1,i&&(l.lineStart(),l.point(t,e));else if(i&&M)l.point(t,e);else{var n=[k,C],r=[t,e];o(n,r)?(M||(l.lineStart(),l.point(n[0],n[1])),l.point(r[0],r[1]),i||l.lineEnd(),T=!1):i&&(l.lineStart(),l.point(t,e),T=!1)}k=t,C=e,M=i}var v,y,b,x,w,_,k,C,M,S,T,D=l,E=Zt(),P={point:f,lineStart:p,lineEnd:g,polygonStart:function(){l=E,v=[],y=[],T=!0},polygonEnd:function(){l=D,v=vs.merge(v);var e=h([t,n]),i=T&&e,r=v.length;(i||r)&&(l.polygonStart(),i&&(l.lineStart(),c(null,null,1,l),l.lineEnd()),r&&Vt(v,s,e,c,l),l.polygonEnd()),v=y=b=null}};return P}}function re(t,e,i){if(Math.abs(e)<Xs)return 0>=t;var n=t/e;if(e>0){if(n>i[1])return!1;n>i[0]&&(i[0]=n)}else{if(n<i[0])return!1;n<i[1]&&(i[1]=n)}return!0}function se(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,n){return i=e.invert(i,n),i&&t.invert(i[0],i[1])}),i}function ae(t){var e=0,i=Vs/3,n=we(t),r=n(e,i);return r.parallels=function(t){return arguments.length?n(e=t[0]*Vs/180,i=t[1]*Vs/180):[180*(e/Vs),180*(i/Vs)];
},r}function oe(t,e){function i(t,e){var i=Math.sqrt(s-2*r*Math.sin(e))/r;return[i*Math.sin(t*=r),a-i*Math.cos(t)]}var n=Math.sin(t),r=(n+Math.sin(e))/2,s=1+n*(2*r-n),a=Math.sqrt(s)/r;return i.invert=function(t,e){var i=a-e;return[Math.atan2(t,i)/r,O((s-(t*t+i*i)*r*r)/(2*r))]},i}function le(){function t(t,e){Za+=r*t-n*e,n=t,r=e}var e,i,n,r;eo.point=function(s,a){eo.point=t,e=n=s,i=r=a},eo.lineEnd=function(){t(e,i)}}function he(t,e){Qa>t&&(Qa=t),t>Ja&&(Ja=t),Ka>e&&(Ka=e),e>to&&(to=e)}function ue(){function t(t,e){a.push("M",t,",",e,s)}function e(t,e){a.push("M",t,",",e),o.point=i}function i(t,e){a.push("L",t,",",e)}function n(){o.point=t}function r(){a.push("Z")}var s=ce(4.5),a=[],o={point:t,lineStart:function(){o.point=e},lineEnd:n,polygonStart:function(){o.lineEnd=r},polygonEnd:function(){o.lineEnd=n,o.point=t},pointRadius:function(t){return s=ce(t),o},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return o}function ce(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function de(t,e){Na+=t,Ha+=e,++Oa}function fe(){function t(t,n){var r=t-e,s=n-i,a=Math.sqrt(r*r+s*s);Wa+=a*(e+t)/2,ja+=a*(i+n)/2,Ba+=a,de(e=t,i=n)}var e,i;no.point=function(n,r){no.point=t,de(e=n,i=r)}}function pe(){no.point=de}function ge(){function t(t,e){var i=t-n,s=e-r,a=Math.sqrt(i*i+s*s);Wa+=a*(n+t)/2,ja+=a*(r+e)/2,Ba+=a,a=r*t-n*e,Ya+=a*(n+t),qa+=a*(r+e),Ua+=3*a,de(n=t,r=e)}var e,i,n,r;no.point=function(s,a){no.point=t,de(e=n=s,i=r=a)},no.lineEnd=function(){t(e,i)}}function me(t){function e(e,i){t.moveTo(e,i),t.arc(e,i,a,0,Gs)}function i(e,i){t.moveTo(e,i),o.point=n}function n(e,i){t.lineTo(e,i)}function r(){o.point=e}function s(){t.closePath()}var a=4.5,o={point:e,lineStart:function(){o.point=i},lineEnd:r,polygonStart:function(){o.lineEnd=s},polygonEnd:function(){o.lineEnd=r,o.point=e},pointRadius:function(t){return a=t,o},result:l};return o}function ve(t){function e(e){function n(i,n){i=t(i,n),e.point(i[0],i[1])}function r(){b=NaN,C.point=a,e.lineStart()}function a(n,r){var a=Ft([n,r]),o=t(n,r);i(b,x,y,w,_,k,b=o[0],x=o[1],y=n,w=a[0],_=a[1],k=a[2],s,e),e.point(b,x)}function o(){C.point=n,e.lineEnd()}function l(){r(),C.point=h,C.lineEnd=u}function h(t,e){a(c=t,d=e),f=b,p=x,g=w,m=_,v=k,C.point=a}function u(){i(b,x,y,w,_,k,f,p,c,g,m,v,s,e),C.lineEnd=o,o()}var c,d,f,p,g,m,v,y,b,x,w,_,k,C={point:n,lineStart:r,lineEnd:o,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=r}};return C}function i(e,s,a,o,l,h,u,c,d,f,p,g,m,v){var y=u-e,b=c-s,x=y*y+b*b;if(x>4*n&&m--){var w=o+f,_=l+p,k=h+g,C=Math.sqrt(w*w+_*_+k*k),M=Math.asin(k/=C),S=Math.abs(Math.abs(k)-1)<Xs?(a+d)/2:Math.atan2(_,w),T=t(S,M),D=T[0],E=T[1],P=D-e,A=E-s,F=b*P-y*A;(F*F/x>n||Math.abs((y*P+b*A)/x-.5)>.3||r>o*f+l*p+h*g)&&(i(e,s,a,o,l,h,D,E,S,w/=C,_/=C,k,m,v),v.point(D,E),i(D,E,S,w,_,k,u,c,d,f,p,g,m,v))}}var n=.5,r=Math.cos(30*Qs),s=16;return e.precision=function(t){return arguments.length?(s=(n=t*t)>0&&16,e):Math.sqrt(n)},e}function ye(t){this.stream=t}function be(t){var e=ve(function(e,i){return t([e*Ks,i*Ks])});return function(t){var i=new ye(t=e(t));return i.point=function(e,i){t.point(e*Qs,i*Qs)},i}}function xe(t){return we(function(){return t})()}function we(t){function e(t){return t=o(t[0]*Qs,t[1]*Qs),[t[0]*d+l,h-t[1]*d]}function i(t){return t=o.invert((t[0]-l)/d,(h-t[1])/d),t&&[t[0]*Ks,t[1]*Ks]}function n(){o=se(a=Me(v,y,b),s);var t=s(g,m);return l=f-t[0]*d,h=p+t[1]*d,r()}function r(){return u&&(u.valid=!1,u=null),e}var s,a,o,l,h,u,c=ve(function(t,e){return t=s(t,e),[t[0]*d+l,h-t[1]*d]}),d=150,f=480,p=250,g=0,m=0,v=0,y=0,b=0,x=Ga,w=gt,_=null,k=null;return e.stream=function(t){return u&&(u.valid=!1),u=_e(x(a,c(w(t)))),u.valid=!0,u},e.clipAngle=function(t){return arguments.length?(x=null==t?(_=t,Ga):ie((_=+t)*Qs),r()):_},e.clipExtent=function(t){return arguments.length?(k=t,w=t?ne(t[0][0],t[0][1],t[1][0],t[1][1]):gt,r()):k},e.scale=function(t){return arguments.length?(d=+t,n()):d},e.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],n()):[f,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Qs,m=t[1]%360*Qs,n()):[g*Ks,m*Ks]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Qs,y=t[1]%360*Qs,b=t.length>2?t[2]%360*Qs:0,n()):[v*Ks,y*Ks,b*Ks]},vs.rebind(e,c,"precision"),function(){return s=t.apply(this,arguments),e.invert=s.invert&&i,n()}}function _e(t){var e=new ye(t);return e.point=function(e,i){t.point(e*Qs,i*Qs)},e}function ke(t,e){return[t,e]}function Ce(t,e){return[t>Vs?t-Gs:-Vs>t?t+Gs:t,e]}function Me(t,e,i){return t?e||i?se(Te(t),De(e,i)):Te(t):e||i?De(e,i):Ce}function Se(t){return function(e,i){return e+=t,[e>Vs?e-Gs:-Vs>e?e+Gs:e,i]}}function Te(t){var e=Se(t);return e.invert=Se(-t),e}function De(t,e){function i(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),u=h*n+o*r;return[Math.atan2(l*s-u*a,o*n-h*r),O(u*s+l*a)]}var n=Math.cos(t),r=Math.sin(t),s=Math.cos(e),a=Math.sin(e);return i.invert=function(t,e){var i=Math.cos(e),o=Math.cos(t)*i,l=Math.sin(t)*i,h=Math.sin(e),u=h*s-l*a;return[Math.atan2(l*s+h*a,o*n+u*r),O(u*n-o*r)]},i}function Ee(t,e){var i=Math.cos(t),n=Math.sin(t);return function(r,s,a,o){var l=a*e;null!=r?(r=Pe(i,r),s=Pe(i,s),(a>0?s>r:r>s)&&(r+=a*Gs)):(r=t+a*Gs,s=t-.5*l);for(var h,u=r;a>0?u>s:s>u;u-=l)o.point((h=Ht([i,-n*Math.cos(u),-n*Math.sin(u)]))[0],h[1])}}function Pe(t,e){var i=Ft(e);i[0]-=t,Nt(i);var n=H(-i[1]);return((-i[2]<0?-n:n)+2*Math.PI-Xs)%(2*Math.PI)}function Ae(t,e,i){var n=vs.range(t,e-Xs,i).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function Fe(t,e,i){var n=vs.range(t,e-Xs,i).concat(e);return function(t){return n.map(function(e){return[e,t]})}}function Ie(t){return t.source}function ze(t){return t.target}function Le(t,e,i,n){var r=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=r*Math.cos(t),h=r*Math.sin(t),u=a*Math.cos(i),c=a*Math.sin(i),d=2*Math.asin(Math.sqrt(Y(n-e)+r*a*Y(i-t))),f=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*f,i=Math.sin(d-t)*f,n=i*l+e*u,r=i*h+e*c,a=i*s+e*o;return[Math.atan2(r,n)*Ks,Math.atan2(a,Math.sqrt(n*n+r*r))*Ks]}:function(){return[t*Ks,e*Ks]};return p.distance=d,p}function Re(){function t(t,r){var s=Math.sin(r*=Qs),a=Math.cos(r),o=Math.abs((t*=Qs)-e),l=Math.cos(o);ro+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=n*s-i*a*l)*o),i*s+n*a*l),e=t,i=s,n=a}var e,i,n;so.point=function(r,s){e=r*Qs,i=Math.sin(s*=Qs),n=Math.cos(s),so.point=t},so.lineEnd=function(){so.point=so.lineEnd=l}}function Ne(t,e){function i(e,i){var n=Math.cos(e),r=Math.cos(i),s=t(n*r);return[s*r*Math.sin(e),s*Math.sin(i)]}return i.invert=function(t,i){var n=Math.sqrt(t*t+i*i),r=e(n),s=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*s,n*a),Math.asin(n&&i*s/n)]},i}function He(t,e){function i(t,e){var i=Math.abs(Math.abs(e)-$s)<Xs?0:a/Math.pow(r(e),s);return[i*Math.sin(s*t),a-i*Math.cos(s*t)]}var n=Math.cos(t),r=function(t){return Math.tan(Vs/4+t/2)},s=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),s)/s;return s?(i.invert=function(t,e){var i=a-e,n=N(s)*Math.sqrt(t*t+i*i);return[Math.atan2(t,i)/s,2*Math.atan(Math.pow(a/n,1/s))-$s]},i):We}function Oe(t,e){function i(t,e){var i=s-e;return[i*Math.sin(r*t),s-i*Math.cos(r*t)]}var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),s=n/r+t;return Math.abs(r)<Xs?ke:(i.invert=function(t,e){var i=s-e;return[Math.atan2(t,i)/r,s-N(r)*Math.sqrt(t*t+i*i)]},i)}function We(t,e){return[t,Math.log(Math.tan(Vs/4+e/2))]}function je(t){var e,i=xe(t),n=i.scale,r=i.translate,s=i.clipExtent;return i.scale=function(){var t=n.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.translate=function(){var t=r.apply(i,arguments);return t===i?e?i.clipExtent(null):i:t},i.clipExtent=function(t){var a=s.apply(i,arguments);if(a===i){if(e=null==t){var o=Vs*n(),l=r();s([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else e&&(a=null);return a},i.clipExtent(null)}function Be(t,e){var i=Math.cos(e)*Math.sin(t);return[Math.log((1+i)/(1-i))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function Ye(t){function e(e){function a(){h.push("M",s(t(u),o))}for(var l,h=[],u=[],c=-1,d=e.length,f=pt(i),p=pt(n);++c<d;)r.call(this,l=e[c],c)?u.push([+f.call(this,l,c),+p.call(this,l,c)]):u.length&&(a(),u=[]);return u.length&&a(),h.length?h.join(""):null}var i=qe,n=Ue,r=Ut,s=Ve,a=s.key,o=.7;return e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?s=t:(s=co.get(t)||Ve).key,e):a},e.tension=function(t){return arguments.length?(o=t,e):o},e}function qe(t){return t[0]}function Ue(t){return t[1]}function Ve(t){return t.join("L")}function Ge(t){return Ve(t)+"Z"}function $e(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);return i>1&&r.push("H",n[0]),r.join("")}function Xe(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("V",(n=t[e])[1],"H",n[0]);return r.join("")}function Ze(t){for(var e=0,i=t.length,n=t[0],r=[n[0],",",n[1]];++e<i;)r.push("H",(n=t[e])[0],"V",n[1]);return r.join("")}function Qe(t,e){return t.length<4?Ve(t):t[1]+ti(t.slice(1,t.length-1),ei(t,e))}function Ke(t,e){return t.length<3?Ve(t):t[0]+ti((t.push(t[0]),t),ei([t[t.length-2]].concat(t,[t[1]]),e))}function Je(t,e){return t.length<3?Ve(t):t[0]+ti(t,ei(t,e))}function ti(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ve(t);var i=t.length!=e.length,n="",r=t[0],s=t[1],a=e[0],o=a,l=1;if(i&&(n+="Q"+(s[0]-2*a[0]/3)+","+(s[1]-2*a[1]/3)+","+s[0]+","+s[1],r=t[1],l=2),e.length>1){o=e[1],s=t[l],l++,n+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1];for(var h=2;h<e.length;h++,l++)s=t[l],o=e[h],n+="S"+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1]}if(i){var u=t[l];n+="Q"+(s[0]+2*o[0]/3)+","+(s[1]+2*o[1]/3)+","+u[0]+","+u[1]}return n}function ei(t,e){for(var i,n=[],r=(1-e)/2,s=t[0],a=t[1],o=1,l=t.length;++o<l;)i=s,s=a,a=t[o],n.push([r*(a[0]-i[0]),r*(a[1]-i[1])]);return n}function ii(t){if(t.length<3)return Ve(t);var e=1,i=t.length,n=t[0],r=n[0],s=n[1],a=[r,r,r,(n=t[1])[0]],o=[s,s,s,n[1]],l=[r,",",s,"L",ai(go,a),",",ai(go,o)];for(t.push(t[i-1]);++e<=i;)n=t[e],a.shift(),a.push(n[0]),o.shift(),o.push(n[1]),oi(l,a,o);return t.pop(),l.push("L",n),l.join("")}function ni(t){if(t.length<4)return Ve(t);for(var e,i=[],n=-1,r=t.length,s=[0],a=[0];++n<3;)e=t[n],s.push(e[0]),a.push(e[1]);for(i.push(ai(go,s)+","+ai(go,a)),--n;++n<r;)e=t[n],s.shift(),s.push(e[0]),a.shift(),a.push(e[1]),oi(i,s,a);return i.join("")}function ri(t){for(var e,i,n=-1,r=t.length,s=r+4,a=[],o=[];++n<4;)i=t[n%r],a.push(i[0]),o.push(i[1]);for(e=[ai(go,a),",",ai(go,o)],--n;++n<s;)i=t[n%r],a.shift(),a.push(i[0]),o.shift(),o.push(i[1]),oi(e,a,o);return e.join("")}function si(t,e){var i=t.length-1;if(i)for(var n,r,s=t[0][0],a=t[0][1],o=t[i][0]-s,l=t[i][1]-a,h=-1;++h<=i;)n=t[h],r=h/i,n[0]=e*n[0]+(1-e)*(s+r*o),n[1]=e*n[1]+(1-e)*(a+r*l);return ii(t)}function ai(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function oi(t,e,i){t.push("C",ai(fo,e),",",ai(fo,i),",",ai(po,e),",",ai(po,i),",",ai(go,e),",",ai(go,i))}function li(t,e){return(e[1]-t[1])/(e[0]-t[0])}function hi(t){for(var e=0,i=t.length-1,n=[],r=t[0],s=t[1],a=n[0]=li(r,s);++e<i;)n[e]=(a+(a=li(r=s,s=t[e+1])))/2;return n[e]=a,n}function ui(t){for(var e,i,n,r,s=[],a=hi(t),o=-1,l=t.length-1;++o<l;)e=li(t[o],t[o+1]),Math.abs(e)<Xs?a[o]=a[o+1]=0:(i=a[o]/e,n=a[o+1]/e,r=i*i+n*n,r>9&&(r=3*e/Math.sqrt(r),a[o]=r*i,a[o+1]=r*n));for(o=-1;++o<=l;)r=(t[Math.min(l,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),s.push([r||0,a[o]*r||0]);return s}function ci(t){return t.length<3?Ve(t):t[0]+ti(t,ui(t))}function di(t,e,i,n){var r,s,a,o,l,h,u;return r=n[t],s=r[0],a=r[1],r=n[e],o=r[0],l=r[1],r=n[i],h=r[0],u=r[1],(u-a)*(o-s)-(l-a)*(h-s)>0}function fi(t,e,i){return(i[0]-e[0])*(t[1]-e[1])<(i[1]-e[1])*(t[0]-e[0])}function pi(t,e,i,n){var r=t[0],s=i[0],a=e[0]-r,o=n[0]-s,l=t[1],h=i[1],u=e[1]-l,c=n[1]-h,d=(o*(l-h)-c*(r-s))/(c*a-o*u);return[r+d*a,l+d*u]}function gi(t){var e=t[0],i=t[t.length-1];return!(e[0]-i[0]||e[1]-i[1])}function mi(t,e){var i={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},n={list:[],leftEnd:null,rightEnd:null,init:function(){n.leftEnd=n.createHalfEdge(null,"l"),n.rightEnd=n.createHalfEdge(null,"l"),n.leftEnd.r=n.rightEnd,n.rightEnd.l=n.leftEnd,n.list.unshift(n.leftEnd,n.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=n.leftEnd;do e=e.r;while(e!=n.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?i.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?i.bottomSite:t.edge.region[vo[t.side]]}},r={bisect:function(t,e){var i={region:{l:t,r:e},ep:{l:null,r:null}},n=e.x-t.x,r=e.y-t.y,s=n>0?n:-n,a=r>0?r:-r;return i.c=t.x*n+t.y*r+.5*(n*n+r*r),s>a?(i.a=1,i.b=r/n,i.c/=n):(i.b=1,i.a=n/r,i.c/=r),i},intersect:function(t,e){var i=t.edge,n=e.edge;if(!i||!n||i.region.r==n.region.r)return null;var r=i.a*n.b-i.b*n.a;if(Math.abs(r)<1e-10)return null;var s,a,o=(i.c*n.b-n.c*i.b)/r,l=(n.c*i.a-i.c*n.a)/r,h=i.region.r,u=n.region.r;h.y<u.y||h.y==u.y&&h.x<u.x?(s=t,a=i):(s=e,a=n);var c=o>=a.region.r.x;return c&&"l"===s.side||!c&&"r"===s.side?null:{x:o,y:l}},rightOf:function(t,e){var i=t.edge,n=i.region.r,r=e.x>n.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===i.a){var s=e.y-n.y,a=e.x-n.x,o=0,l=0;if(!r&&i.b<0||r&&i.b>=0?l=o=s>=i.b*a:(l=e.x+e.y*i.b>i.c,i.b<0&&(l=!l),l||(o=1)),!o){var h=n.x-i.region.l.x;l=i.b*(a*a-s*s)<h*s*(1+2*a/h+i.b*i.b),i.b<0&&(l=!l)}}else{var u=i.c-i.a*e.x,c=e.y-u,d=e.x-n.x,f=u-n.y;l=c*c>d*d+f*f}return"l"===t.side?l:!l},endPoint:function(t,i,n){t.ep[i]=n,t.ep[vo[i]]&&e(t)},distance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}},s={list:[],insert:function(t,e,i){t.vertex=e,t.ystar=e.y+i;for(var n=0,r=s.list,a=r.length;a>n;n++){var o=r[n];if(!(t.ystar>o.ystar||t.ystar==o.ystar&&e.x>o.vertex.x))break}r.splice(n,0,t)},del:function(t){for(var e=0,i=s.list,n=i.length;n>e&&i[e]!=t;++e);i.splice(e,1)},empty:function(){return 0===s.list.length},nextEvent:function(t){for(var e=0,i=s.list,n=i.length;n>e;++e)if(i[e]==t)return i[e+1];return null},min:function(){var t=s.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return s.list.shift()}};n.init(),i.bottomSite=i.list.shift();for(var a,o,l,h,u,c,d,f,p,g,m,v,y,b=i.list.shift();;)if(s.empty()||(a=s.min()),b&&(s.empty()||b.y<a.y||b.y==a.y&&b.x<a.x))o=n.leftBound(b),l=n.right(o),d=n.rightRegion(o),v=r.bisect(d,b),c=n.createHalfEdge(v,"l"),n.insert(o,c),g=r.intersect(o,c),g&&(s.del(o),s.insert(o,g,r.distance(g,b))),o=c,c=n.createHalfEdge(v,"r"),n.insert(o,c),g=r.intersect(c,l),g&&s.insert(c,g,r.distance(g,b)),b=i.list.shift();else{if(s.empty())break;o=s.extractMin(),h=n.left(o),l=n.right(o),u=n.right(l),d=n.leftRegion(o),f=n.rightRegion(l),m=o.vertex,r.endPoint(o.edge,o.side,m),r.endPoint(l.edge,l.side,m),n.del(o),s.del(l),n.del(l),y="l",d.y>f.y&&(p=d,d=f,f=p,y="r"),v=r.bisect(d,f),c=n.createHalfEdge(v,y),n.insert(h,c),r.endPoint(v,vo[y],m),g=r.intersect(h,c),g&&(s.del(h),s.insert(h,g,r.distance(g,d))),g=r.intersect(c,u),g&&s.insert(c,g,r.distance(g,d))}for(o=n.right(n.leftEnd);o!=n.rightEnd;o=n.right(o))e(o.edge)}function vi(t){return t.x}function yi(t){return t.y}function bi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function xi(t,e,i,n,r,s){if(!t(e,i,n,r,s)){var a=.5*(i+r),o=.5*(n+s),l=e.nodes;l[0]&&xi(t,l[0],i,n,a,o),l[1]&&xi(t,l[1],a,n,r,o),l[2]&&xi(t,l[2],i,o,a,s),l[3]&&xi(t,l[3],a,o,r,s)}}function wi(t,e){t=vs.rgb(t),e=vs.rgb(e);var i=t.r,n=t.g,r=t.b,s=e.r-i,a=e.g-n,o=e.b-r;return function(t){return"#"+lt(Math.round(i+s*t))+lt(Math.round(n+a*t))+lt(Math.round(r+o*t))}}function _i(t,e){var i,n={},r={};for(i in t)i in e?n[i]=Mi(t[i],e[i]):r[i]=t[i];for(i in e)i in t||(r[i]=e[i]);return function(t){for(i in n)r[i]=n[i](t);return r}}function ki(t,e){return e-=t=+t,function(i){return t+e*i}}function Ci(t,e){var i,n,r,s,a,o=0,l=0,h=[],u=[];for(t+="",e+="",yo.lastIndex=0,n=0;i=yo.exec(e);++n)i.index&&h.push(e.substring(o,l=i.index)),u.push({i:h.length,x:i[0]}),h.push(null),o=yo.lastIndex;for(o<e.length&&h.push(e.substring(o)),n=0,s=u.length;(i=yo.exec(t))&&s>n;++n)if(a=u[n],a.x==i[0]){if(a.i)if(null==h[a.i+1])for(h[a.i-1]+=a.x,h.splice(a.i,1),r=n+1;s>r;++r)u[r].i--;else for(h[a.i-1]+=a.x+h[a.i+1],h.splice(a.i,2),r=n+1;s>r;++r)u[r].i-=2;else if(null==h[a.i+1])h[a.i]=a.x;else for(h[a.i]=a.x+h[a.i+1],h.splice(a.i+1,1),r=n+1;s>r;++r)u[r].i--;u.splice(n,1),s--,n--}else a.x=ki(parseFloat(i[0]),parseFloat(a.x));for(;s>n;)a=u.pop(),null==h[a.i+1]?h[a.i]=a.x:(h[a.i]=a.x+h[a.i+1],h.splice(a.i+1,1)),s--;return 1===h.length?null==h[0]?(a=u[0].x,function(t){return a(t)+""}):function(){return e}:function(t){for(n=0;s>n;++n)h[(a=u[n]).i]=a.x(t);return h.join("")}}function Mi(t,e){for(var i,n=vs.interpolators.length;--n>=0&&!(i=vs.interpolators[n](t,e)););return i}function Si(t,e){var i,n=[],r=[],s=t.length,a=e.length,o=Math.min(t.length,e.length);for(i=0;o>i;++i)n.push(Mi(t[i],e[i]));for(;s>i;++i)r[i]=t[i];for(;a>i;++i)r[i]=e[i];return function(t){for(i=0;o>i;++i)r[i]=n[i](t);return r}}function Ti(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Di(t){return function(e){return 1-t(1-e)}}function Ei(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Pi(t){return t*t}function Ai(t){return t*t*t}function Fi(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(.5>t?i:3*(t-e)+i-.75)}function Ii(t){return function(e){return Math.pow(e,t)}}function zi(t){return 1-Math.cos(t*$s)}function Li(t){return Math.pow(2,10*(t-1))}function Ri(t){return 1-Math.sqrt(1-t*t)}function Ni(t,e){var i;return arguments.length<2&&(e=.45),arguments.length?i=e/Gs*Math.asin(1/t):(t=1,i=e/4),function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-i)*Gs/e)}}function Hi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Oi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Wi(t,e){t=vs.hcl(t),e=vs.hcl(e);var i=t.h,n=t.c,r=t.l,s=e.h-i,a=e.c-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.c:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return Z(i+s*t,n+a*t,r+o*t)+""}}function ji(t,e){t=vs.hsl(t),e=vs.hsl(e);var i=t.h,n=t.s,r=t.l,s=e.h-i,a=e.s-n,o=e.l-r;return isNaN(a)&&(a=0,n=isNaN(n)?e.s:n),isNaN(s)?(s=0,i=isNaN(i)?e.h:i):s>180?s-=360:-180>s&&(s+=360),function(t){return G(i+s*t,n+a*t,r+o*t)+""}}function Bi(t,e){t=vs.lab(t),e=vs.lab(e);var i=t.l,n=t.a,r=t.b,s=e.l-i,a=e.a-n,o=e.b-r;return function(t){return J(i+s*t,n+a*t,r+o*t)+""}}function Yi(t,e){return e-=t,function(i){return Math.round(t+e*i)}}function qi(t){var e=[t.a,t.b],i=[t.c,t.d],n=Vi(e),r=Ui(e,i),s=Vi(Gi(i,e,-r))||0;e[0]*i[1]<i[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,r*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-i[0],i[1]))*Ks,this.translate=[t.e,t.f],this.scale=[n,s],this.skew=s?Math.atan2(r,s)*Ks:0}function Ui(t,e){return t[0]*e[0]+t[1]*e[1]}function Vi(t){var e=Math.sqrt(Ui(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Gi(t,e,i){return t[0]+=i*e[0],t[1]+=i*e[1],t}function $i(t,e){var i,n=[],r=[],s=vs.transform(t),a=vs.transform(e),o=s.translate,l=a.translate,h=s.rotate,u=a.rotate,c=s.skew,d=a.skew,f=s.scale,p=a.scale;return o[0]!=l[0]||o[1]!=l[1]?(n.push("translate(",null,",",null,")"),r.push({i:1,x:ki(o[0],l[0])},{i:3,x:ki(o[1],l[1])})):l[0]||l[1]?n.push("translate("+l+")"):n.push(""),h!=u?(h-u>180?u+=360:u-h>180&&(h+=360),r.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:ki(h,u)})):u&&n.push(n.pop()+"rotate("+u+")"),c!=d?r.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:ki(c,d)}):d&&n.push(n.pop()+"skewX("+d+")"),f[0]!=p[0]||f[1]!=p[1]?(i=n.push(n.pop()+"scale(",null,",",null,")"),r.push({i:i-4,x:ki(f[0],p[0])},{i:i-2,x:ki(f[1],p[1])})):(1!=p[0]||1!=p[1])&&n.push(n.pop()+"scale("+p+")"),i=r.length,function(t){for(var e,s=-1;++s<i;)n[(e=r[s]).i]=e.x(t);return n.join("")}}function Xi(t,e){return e=e-(t=+t)?1/(e-t):0,function(i){return(i-t)*e}}function Zi(t,e){return e=e-(t=+t)?1/(e-t):0,function(i){return Math.max(0,Math.min(1,(i-t)*e))}}function Qi(t){for(var e=t.source,i=t.target,n=Ji(e,i),r=[e];e!==n;)e=e.parent,r.push(e);for(var s=r.length;i!==n;)r.splice(s,0,i),i=i.parent;return r}function Ki(t){for(var e=[],i=t.parent;null!=i;)e.push(t),t=i,i=i.parent;return e.push(t),e}function Ji(t,e){if(t===e)return t;for(var i=Ki(t),n=Ki(e),r=i.pop(),s=n.pop(),a=null;r===s;)a=r,r=i.pop(),s=n.pop();return a}function tn(t){t.fixed|=2}function en(t){t.fixed&=-7}function nn(t){t.fixed|=4,t.px=t.x,t.py=t.y}function rn(t){t.fixed&=-5}function sn(t,e,i){var n=0,r=0;if(t.charge=0,!t.leaf)for(var s,a=t.nodes,o=a.length,l=-1;++l<o;)s=a[l],null!=s&&(sn(s,e,i),t.charge+=s.charge,n+=s.charge*s.cx,r+=s.charge*s.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var h=e*i[t.point.index];t.charge+=t.pointCharge=h,n+=h*t.point.x,r+=h*t.point.y}t.cx=n/t.charge,t.cy=r/t.charge}function an(t,e){return vs.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=un,t}function on(t){return t.children}function ln(t){return t.value}function hn(t,e){return e.value-t.value}function un(t){return vs.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function cn(t){return t.x}function dn(t){return t.y}function fn(t,e,i){t.y0=e,t.y=i}function pn(t){return vs.range(t.length)}function gn(t){for(var e=-1,i=t[0].length,n=[];++e<i;)n[e]=0;return n}function mn(t){for(var e,i=1,n=0,r=t[0][1],s=t.length;s>i;++i)(e=t[i][1])>r&&(n=i,r=e);return n}function vn(t){return t.reduce(yn,0)}function yn(t,e){return t+e[1]}function bn(t,e){return xn(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function xn(t,e){for(var i=-1,n=+t[0],r=(t[1]-n)/e,s=[];++i<=e;)s[i]=r*i+n;return s}function wn(t){return[vs.min(t),vs.max(t)]}function _n(t,e){return t.parent==e.parent?1:2}function kn(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Cn(t){var e,i=t.children;return i&&(e=i.length)?i[e-1]:t._tree.thread}function Mn(t,e){var i=t.children;if(i&&(r=i.length))for(var n,r,s=-1;++s<r;)e(n=Mn(i[s],e),t)>0&&(t=n);return t}function Sn(t,e){return t.x-e.x}function Tn(t,e){return e.x-t.x}function Dn(t,e){return t.depth-e.depth}function En(t,e){function i(t,n){var r=t.children;if(r&&(a=r.length))for(var s,a,o=null,l=-1;++l<a;)s=r[l],i(s,o),o=s;e(t,n)}i(t,null)}function Pn(t){for(var e,i=0,n=0,r=t.children,s=r.length;--s>=0;)e=r[s]._tree,e.prelim+=i,e.mod+=i,i+=e.shift+(n+=e.change)}function An(t,e,i){t=t._tree,e=e._tree;var n=i/(e.number-t.number);t.change+=n,e.change-=n,e.shift+=i,e.prelim+=i,e.mod+=i}function Fn(t,e,i){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:i}function In(t,e){return t.value-e.value}function zn(t,e){var i=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=i,i._pack_prev=e}function Ln(t,e){t._pack_next=e,e._pack_prev=t}function Rn(t,e){var i=e.x-t.x,n=e.y-t.y,r=t.r+e.r;return.999*r*r>i*i+n*n}function Nn(t){function e(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),d=Math.min(t.y-t.r,d),f=Math.max(t.y+t.r,f)}if((i=t.children)&&(h=i.length)){var i,n,r,s,a,o,l,h,u=1/0,c=-1/0,d=1/0,f=-1/0;if(i.forEach(Hn),n=i[0],n.x=-n.r,n.y=0,e(n),h>1&&(r=i[1],r.x=r.r,r.y=0,e(r),h>2))for(s=i[2],jn(n,r,s),e(s),zn(n,s),n._pack_prev=s,zn(s,r),r=n._pack_next,a=3;h>a;a++){jn(n,r,s=i[a]);var p=0,g=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,g++)if(Rn(o,s)){p=1;break}if(1==p)for(l=n._pack_prev;l!==o._pack_prev&&!Rn(l,s);l=l._pack_prev,m++);p?(m>g||g==m&&r.r<n.r?Ln(n,r=o):Ln(n=l,r),a--):(zn(n,s),r=s,e(s))}var v=(u+c)/2,y=(d+f)/2,b=0;for(a=0;h>a;a++)s=i[a],s.x-=v,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));t.r=b,i.forEach(On)}}function Hn(t){t._pack_next=t._pack_prev=t}function On(t){delete t._pack_next,delete t._pack_prev}function Wn(t,e,i,n){var r=t.children;if(t.x=e+=n*t.x,t.y=i+=n*t.y,t.r*=n,r)for(var s=-1,a=r.length;++s<a;)Wn(r[s],e,i,n)}function jn(t,e,i){var n=t.r+i.r,r=e.x-t.x,s=e.y-t.y;if(n&&(r||s)){var a=e.r+i.r,o=r*r+s*s;a*=a,n*=n;var l=.5+(n-a)/(2*o),h=Math.sqrt(Math.max(0,2*a*(n+o)-(n-=o)*n-a*a))/(2*o);i.x=t.x+l*r+h*s,i.y=t.y+l*s-h*r}else i.x=t.x+n,i.y=t.y}function Bn(t){return 1+vs.max(t,function(t){return t.y})}function Yn(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function qn(t){var e=t.children;return e&&e.length?qn(e[0]):t}function Un(t){var e,i=t.children;return i&&(e=i.length)?Un(i[e-1]):t}function Vn(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Gn(t,e){var i=t.x+e[3],n=t.y+e[0],r=t.dx-e[1]-e[3],s=t.dy-e[0]-e[2];return 0>r&&(i+=r/2,r=0),0>s&&(n+=s/2,s=0),{x:i,y:n,dx:r,dy:s}}function $n(t){var e=t[0],i=t[t.length-1];return i>e?[e,i]:[i,e]}function Xn(t){return t.rangeExtent?t.rangeExtent():$n(t.range())}function Zn(t,e,i,n){var r=i(t[0],t[1]),s=n(e[0],e[1]);return function(t){return s(r(t))}}function Qn(t,e){var i,n=0,r=t.length-1,s=t[n],a=t[r];return s>a&&(i=n,n=r,r=i,i=s,s=a,a=i),t[n]=e.floor(s),t[r]=e.ceil(a),t}function Kn(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Do}function Jn(t,e,i,n){var r=[],s=[],a=0,o=Math.min(t.length,e.length)-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=o;)r.push(i(t[a-1],t[a])),s.push(n(e[a-1],e[a]));return function(e){var i=vs.bisect(t,e,1,o)-1;return s[i](r[i](e))}}function tr(t,e,i,n){function r(){var r=Math.min(t.length,e.length)>2?Jn:Zn,l=n?Zi:Xi;return a=r(t,e,l,i),o=r(e,t,l,Mi),s}function s(t){return a(t)}var a,o;return s.invert=function(t){return o(t)},s.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},s.range=function(t){return arguments.length?(e=t,r()):e},s.rangeRound=function(t){return s.range(t).interpolate(Yi)},s.clamp=function(t){return arguments.length?(n=t,r()):n},s.interpolate=function(t){return arguments.length?(i=t,r()):i},s.ticks=function(e){return rr(t,e)},s.tickFormat=function(e,i){return sr(t,e,i)},s.nice=function(e){return ir(t,e),r()},s.copy=function(){return tr(t,e,i,n)},r()}function er(t,e){return vs.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ir(t,e){return Qn(t,Kn(nr(t,e)[2]))}function nr(t,e){null==e&&(e=10);var i=$n(t),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),s=e/n*r;return.15>=s?r*=10:.35>=s?r*=5:.75>=s&&(r*=2),i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function rr(t,e){return vs.range.apply(vs,nr(t,e))}function sr(t,e,i){var n=-Math.floor(Math.log(nr(t,e)[2])/Math.LN10+.01);return vs.format(i?i.replace(Ma,function(t,e,i,r,s,a,o,l,h,u){return[e,i,r,s,a,o,l,h||"."+(n-2*("%"===u)),u].join("")}):",."+n+"f")}function ar(t,e,i,n){function r(t){return(i?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function s(t){return i?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return s(t.invert(e))},a.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((n=e.map(Number)).map(r)),a):n},a.base=function(i){return arguments.length?(e=+i,t.domain(n.map(r)),a):e},a.nice=function(){var e=Qn(n.map(r),i?Math:Po);return t.domain(e),n=e.map(s),a},a.ticks=function(){var t=$n(n),a=[],o=t[0],l=t[1],h=Math.floor(r(o)),u=Math.ceil(r(l)),c=e%1?2:e;if(isFinite(u-h)){if(i){for(;u>h;h++)for(var d=1;c>d;d++)a.push(s(h)*d);a.push(s(h))}else for(a.push(s(h));h++<u;)for(var d=c-1;d>0;d--)a.push(s(h)*d);for(h=0;a[h]<o;h++);for(u=a.length;a[u-1]>l;u--);a=a.slice(h,u)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Eo;arguments.length<2?e=Eo:"function"!=typeof e&&(e=vs.format(e));var n,o=Math.max(.1,t/a.ticks().length),l=i?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(t){return t/s(l(r(t)+n))<=o?e(t):""}},a.copy=function(){return ar(t.copy(),e,i,n)},er(a,t)}function or(t,e,i){function n(e){return t(r(e))}var r=lr(e),s=lr(1/e);return n.invert=function(e){return s(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(r)),n):i},n.ticks=function(t){return rr(i,t)},n.tickFormat=function(t,e){return sr(i,t,e)},n.nice=function(t){return n.domain(ir(i,t))},n.exponent=function(a){return arguments.length?(r=lr(e=a),s=lr(1/e),t.domain(i.map(r)),n):e},n.copy=function(){return or(t.copy(),e,i)},er(n,t)}function lr(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function hr(t,e){function i(i){return a[((s.get(i)||"range"===e.t&&s.set(i,t.push(i)))-1)%a.length]}function n(e,i){return vs.range(t.length).map(function(t){return e+i*t})}var s,a,o;return i.domain=function(n){if(!arguments.length)return t;t=[],s=new r;for(var a,o=-1,l=n.length;++o<l;)s.has(a=n[o])||s.set(a,t.push(a));return i[e.t].apply(i,e.a)},i.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},i):a},i.rangePoints=function(r,s){arguments.length<2&&(s=0);var l=r[0],h=r[1],u=(h-l)/(Math.max(1,t.length-1)+s);return a=n(t.length<2?(l+h)/2:l+u*s/2,u),o=0,e={t:"rangePoints",a:arguments},i},i.rangeBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var h=r[1]<r[0],u=r[h-0],c=r[1-h],d=(c-u)/(t.length-s+2*l);return a=n(u+d*l,d),h&&a.reverse(),o=d*(1-s),e={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(r,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var h=r[1]<r[0],u=r[h-0],c=r[1-h],d=Math.floor((c-u)/(t.length-s+2*l)),f=c-u-(t.length-s)*d;return a=n(u+Math.round(f/2),d),h&&a.reverse(),o=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return o},i.rangeExtent=function(){return $n(e.a[0])},i.copy=function(){return hr(t,e)},i.domain(t)}function ur(t,e){function i(){var i=0,s=e.length;for(r=[];++i<s;)r[i-1]=vs.quantile(t,i/s);return n}function n(t){return isNaN(t=+t)?void 0:e[vs.bisect(r,t)]}var r;return n.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(vs.ascending),i()):t},n.range=function(t){return arguments.length?(e=t,i()):e},n.quantiles=function(){return r},n.invertExtent=function(i){return i=e.indexOf(i),0>i?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},n.copy=function(){return ur(t,e)},i()}function cr(t,e,i){function n(e){return i[Math.max(0,Math.min(a,Math.floor(s*(e-t))))]}function r(){return s=i.length/(e-t),a=i.length-1,n}var s,a;return n.domain=function(i){return arguments.length?(t=+i[0],e=+i[i.length-1],r()):[t,e]},n.range=function(t){return arguments.length?(i=t,r()):i},n.invertExtent=function(e){return e=i.indexOf(e),e=0>e?NaN:e/s+t,[e,e+1/s]},n.copy=function(){return cr(t,e,i)},r()}function dr(t,e){function i(i){return i>=i?e[vs.bisect(t,i)]:void 0}return i.domain=function(e){return arguments.length?(t=e,i):t},i.range=function(t){return arguments.length?(e=t,i):e},i.invertExtent=function(i){return i=e.indexOf(i),[t[i-1],t[i]]},i.copy=function(){return dr(t,e)},i}function fr(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(i){return arguments.length?(t=i.map(e),e):t},e.ticks=function(e){return rr(t,e)},e.tickFormat=function(e,i){return sr(t,e,i)},e.copy=function(){return fr(t)},e}function pr(t){return t.innerRadius}function gr(t){return t.outerRadius}function mr(t){return t.startAngle}function vr(t){return t.endAngle}function yr(t){for(var e,i,n,r=-1,s=t.length;++r<s;)e=t[r],i=e[0],n=e[1]+Lo,e[0]=i*Math.cos(n),e[1]=i*Math.sin(n);return t}function br(t){function e(e){function l(){g.push("M",o(t(v),c),u,h(t(m.reverse()),c),"Z")}for(var d,f,p,g=[],m=[],v=[],y=-1,b=e.length,x=pt(i),w=pt(r),_=i===n?function(){return f}:pt(n),k=r===s?function(){return p}:pt(s);++y<b;)a.call(this,d=e[y],y)?(m.push([f=+x.call(this,d,y),p=+w.call(this,d,y)]),v.push([+_.call(this,d,y),+k.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var i=qe,n=qe,r=0,s=Ue,a=Ut,o=Ve,l=o.key,h=o,u="L",c=.7;return e.x=function(t){return arguments.length?(i=n=t,e):n},e.x0=function(t){return arguments.length?(i=t,e):i},e.x1=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=s=t,e):s},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(s=t,e):s},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=co.get(t)||Ve).key,h=o.reverse||o,u=o.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(c=t,e):c},e}function xr(t){return t.radius}function wr(t){return[t.x,t.y]}function _r(t){return function(){var e=t.apply(this,arguments),i=e[0],n=e[1]+Lo;
return[i*Math.cos(n),i*Math.sin(n)]}}function kr(){return 64}function Cr(){return"circle"}function Mr(t){var e=Math.sqrt(t/Vs);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Sr(t,e){return Is(t,Bo),t.id=e,t}function Tr(t,e,i,n){var r=t.id;return D(t,"function"==typeof i?function(t,s,a){t.__transition__[r].tween.set(e,n(i.call(t,t.__data__,s,a)))}:(i=n(i),function(t){t.__transition__[r].tween.set(e,i)}))}function Dr(t){return null==t&&(t=""),function(){this.textContent=t}}function Er(t,e,i,n){var s=t.__transition__||(t.__transition__={active:0,count:0}),a=s[i];if(!a){var o=n.time;a=s[i]={tween:new r,time:o,ease:n.ease,delay:n.delay,duration:n.duration},++s.count,vs.timer(function(n){function r(n){return s.active>i?h():(s.active=i,a.event&&a.event.start.call(t,u,e),a.tween.forEach(function(i,n){(n=n.call(t,u,e))&&p.push(n)}),l(n||1)?1:void xt(l,d,o))}function l(n){if(s.active!==i)return h();for(var r=n/f,o=c(r),l=p.length;l>0;)p[--l].call(t,o);return r>=1?(a.event&&a.event.end.call(t,u,e),h()):void 0}function h(){return--s.count?delete s[i]:delete t.__transition__,1}var u=t.__data__,c=a.ease,d=a.delay,f=a.duration,p=[];return n>=d?r(n-d):void xt(r,d,o)},0,o)}}function Pr(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function Ar(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Fr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ir(t,e,i){function n(e){var i=t(e),n=s(i,1);return n-e>e-i?i:n}function r(i){return e(i=t(new Xo(i-1)),1),i}function s(t,i){return e(t=new Xo(+t),i),t}function a(t,n,s){var a=r(t),o=[];if(s>1)for(;n>a;)i(a)%s||o.push(new Date(+a)),e(a,1);else for(;n>a;)o.push(new Date(+a)),e(a,1);return o}function o(t,e,i){try{Xo=Fr;var n=new Fr;return n._=t,a(n,e,i)}finally{Xo=Date}}t.floor=t,t.round=n,t.ceil=r,t.offset=s,t.range=a;var l=t.utc=zr(t);return l.floor=l,l.round=zr(n),l.ceil=zr(r),l.offset=zr(s),l.range=o,t}function zr(t){return function(e,i){try{Xo=Fr;var n=new Fr;return n._=e,t(n,i)._}finally{Xo=Date}}}function Lr(t){function e(e){for(var n,r,s,a=[],o=-1,l=0;++o<i;)37===t.charCodeAt(o)&&(a.push(t.substring(l,o)),null!=(r=pl[n=t.charAt(++o)])&&(n=t.charAt(++o)),(s=gl[n])&&(n=s(e,null==r?"e"===n?" ":"0":r)),a.push(n),l=o+1);return a.push(t.substring(l,o)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=Rr(i,t,e,0);if(n!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&Xo!==Fr,s=new(r?Fr:Xo);return"j"in i?s.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(s.setFullYear(i.y,0,1),s.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(s.getDay()+5)%7:i.w+7*i.U-(s.getDay()+6)%7)):s.setFullYear(i.y,i.m,i.d),s.setHours(i.H+Math.floor(i.Z/100),i.M+i.Z%100,i.S,i.L),r?s._:s},e.toString=function(){return t},e}function Rr(t,e,i,n){for(var r,s,a,o=0,l=e.length,h=i.length;l>o;){if(n>=h)return-1;if(r=e.charCodeAt(o++),37===r){if(a=e.charAt(o++),s=ml[a in pl?e.charAt(o++):a],!s||(n=s(t,i,n))<0)return-1}else if(r!=i.charCodeAt(n++))return-1}return n}function Nr(t){return new RegExp("^(?:"+t.map(vs.requote).join("|")+")","i")}function Hr(t){for(var e=new r,i=-1,n=t.length;++i<n;)e.set(t[i].toLowerCase(),i);return e}function Or(t,e,i){var n=0>t?"-":"",r=(n?-t:t)+"",s=r.length;return n+(i>s?new Array(i-s+1).join(e)+r:r)}function Wr(t,e,i){ol.lastIndex=0;var n=ol.exec(e.substring(i));return n?(t.w=ll.get(n[0].toLowerCase()),i+n[0].length):-1}function jr(t,e,i){sl.lastIndex=0;var n=sl.exec(e.substring(i));return n?(t.w=al.get(n[0].toLowerCase()),i+n[0].length):-1}function Br(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function Yr(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i));return n?(t.U=+n[0],i+n[0].length):-1}function qr(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i));return n?(t.W=+n[0],i+n[0].length):-1}function Ur(t,e,i){cl.lastIndex=0;var n=cl.exec(e.substring(i));return n?(t.m=dl.get(n[0].toLowerCase()),i+n[0].length):-1}function Vr(t,e,i){hl.lastIndex=0;var n=hl.exec(e.substring(i));return n?(t.m=ul.get(n[0].toLowerCase()),i+n[0].length):-1}function Gr(t,e,i){return Rr(t,gl.c.toString(),e,i)}function $r(t,e,i){return Rr(t,gl.x.toString(),e,i)}function Xr(t,e,i){return Rr(t,gl.X.toString(),e,i)}function Zr(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Qr(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+2));return n?(t.y=Jr(+n[0]),i+n[0].length):-1}function Kr(t,e,i){return/^[+-]\d{4}$/.test(e=e.substring(i,i+5))?(t.Z=+e,i+5):-1}function Jr(t){return t+(t>68?1900:2e3)}function ts(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function es(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function is(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+3));return n?(t.j=+n[0],i+n[0].length):-1}function ns(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function rs(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function ss(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function as(t,e,i){vl.lastIndex=0;var n=vl.exec(e.substring(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function os(t,e,i){var n=yl.get(e.substring(i,i+=2).toLowerCase());return null==n?-1:(t.p=n,i)}function ls(t){var e=t.getTimezoneOffset(),i=e>0?"-":"+",n=~~(Math.abs(e)/60),r=Math.abs(e)%60;return i+Or(n,"0",2)+Or(r,"0",2)}function hs(t,e,i){fl.lastIndex=0;var n=fl.exec(e.substring(i,i+1));return n?i+n[0].length:-1}function us(t){function e(t){try{Xo=Fr;var e=new Xo;return e._=t,i(e)}finally{Xo=Date}}var i=Lr(t);return e.parse=function(t){try{Xo=Fr;var e=i.parse(t);return e&&e._}finally{Xo=Date}},e.toString=i.toString,e}function cs(t){return t.toISOString()}function ds(t,e,i){function n(e){return t(e)}function r(t,i){var n=t[1]-t[0],r=n/i,s=vs.bisect(xl,r);return s==xl.length?[e.year,nr(t.map(function(t){return t/31536e6}),i)[2]]:s?e[r/xl[s-1]<xl[s]/r?s-1:s]:[Cl,nr(t,i)[2]]}return n.invert=function(e){return fs(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(fs)},n.nice=function(t,e){function i(i){return!isNaN(i)&&!t.range(i,fs(+i+1),e).length}var s=n.domain(),a=$n(s),o=null==t?r(a,10):"number"==typeof t&&r(a,t);return o&&(t=o[0],e=o[1]),n.domain(Qn(s,e>1?{floor:function(e){for(;i(e=t.floor(e));)e=fs(e-1);return e},ceil:function(e){for(;i(e=t.ceil(e));)e=fs(+e+1);return e}}:t))},n.ticks=function(t,e){var i=$n(n.domain()),s=null==t?r(i,10):"number"==typeof t?r(i,t):!t.range&&[{range:t},e];return s&&(t=s[0],e=s[1]),t.range(i[0],fs(+i[1]+1),1>e?1:e)},n.tickFormat=function(){return i},n.copy=function(){return ds(t.copy(),e,i)},er(n,t)}function fs(t){return new Date(t)}function ps(t){return function(e){for(var i=t.length-1,n=t[i];!n[1](e);)n=t[--i];return n[0](e)}}function gs(t){return JSON.parse(t.responseText)}function ms(t){var e=xs.createRange();return e.selectNode(xs.body),e.createContextualFragment(t.responseText)}var vs={version:"3.3.6"};Date.now||(Date.now=function(){return+new Date});var ys=[].slice,bs=function(t){return ys.call(t)},xs=document,ws=xs.documentElement,_s=window;try{bs(ws.childNodes)[0].nodeType}catch(t){bs=function(t){for(var e=t.length,i=new Array(e);e--;)i[e]=t[e];return i}}try{xs.createElement("div").style.setProperty("opacity",0,"")}catch(t){var ks=_s.Element.prototype,Cs=ks.setAttribute,Ms=ks.setAttributeNS,Ss=_s.CSSStyleDeclaration.prototype,Ts=Ss.setProperty;ks.setAttribute=function(t,e){Cs.call(this,t,e+"")},ks.setAttributeNS=function(t,e,i){Ms.call(this,t,e,i+"")},Ss.setProperty=function(t,e,i){Ts.call(this,t,e+"",i)}}vs.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:NaN},vs.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},vs.min=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(i=t[r])&&i>=i);)i=void 0;for(;++r<s;)null!=(n=t[r])&&i>n&&(i=n)}else{for(;++r<s&&!(null!=(i=e.call(t,t[r],r))&&i>=i);)i=void 0;for(;++r<s;)null!=(n=e.call(t,t[r],r))&&i>n&&(i=n)}return i},vs.max=function(t,e){var i,n,r=-1,s=t.length;if(1===arguments.length){for(;++r<s&&!(null!=(i=t[r])&&i>=i);)i=void 0;for(;++r<s;)null!=(n=t[r])&&n>i&&(i=n)}else{for(;++r<s&&!(null!=(i=e.call(t,t[r],r))&&i>=i);)i=void 0;for(;++r<s;)null!=(n=e.call(t,t[r],r))&&n>i&&(i=n)}return i},vs.extent=function(t,e){var i,n,r,s=-1,a=t.length;if(1===arguments.length){for(;++s<a&&!(null!=(i=r=t[s])&&i>=i);)i=r=void 0;for(;++s<a;)null!=(n=t[s])&&(i>n&&(i=n),n>r&&(r=n))}else{for(;++s<a&&!(null!=(i=r=e.call(t,t[s],s))&&i>=i);)i=void 0;for(;++s<a;)null!=(n=e.call(t,t[s],s))&&(i>n&&(i=n),n>r&&(r=n))}return[i,r]},vs.sum=function(t,e){var i,n=0,r=t.length,s=-1;if(1===arguments.length)for(;++s<r;)isNaN(i=+t[s])||(n+=i);else for(;++s<r;)isNaN(i=+e.call(t,t[s],s))||(n+=i);return n},vs.mean=function(e,i){var n,r=e.length,s=0,a=-1,o=0;if(1===arguments.length)for(;++a<r;)t(n=e[a])&&(s+=(n-s)/++o);else for(;++a<r;)t(n=i.call(e,e[a],a))&&(s+=(n-s)/++o);return o?s:void 0},vs.quantile=function(t,e){var i=(t.length-1)*e+1,n=Math.floor(i),r=+t[n-1],s=i-n;return s?r+s*(t[n]-r):r},vs.median=function(e,i){return arguments.length>1&&(e=e.map(i)),e=e.filter(t),e.length?vs.quantile(e.sort(vs.ascending),.5):void 0},vs.bisector=function(t){return{left:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;t.call(e,e[s],s)<i?n=s+1:r=s}return n},right:function(e,i,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);r>n;){var s=n+r>>>1;i<t.call(e,e[s],s)?r=s:n=s+1}return n}}};var Ds=vs.bisector(function(t){return t});vs.bisectLeft=Ds.left,vs.bisect=vs.bisectRight=Ds.right,vs.shuffle=function(t){for(var e,i,n=t.length;n;)i=0|Math.random()*n--,e=t[n],t[n]=t[i],t[i]=e;return t},vs.permute=function(t,e){for(var i=e.length,n=new Array(i);i--;)n[i]=t[e[i]];return n},vs.pairs=function(t){for(var e,i=0,n=t.length-1,r=t[0],s=new Array(0>n?0:n);n>i;)s[i]=[e=r,r=t[++i]];return s},vs.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,i=vs.min(arguments,e),n=new Array(i);++t<i;)for(var r,s=-1,a=n[t]=new Array(r);++s<r;)a[s]=arguments[s][t];return n},vs.transpose=function(t){return vs.zip.apply(vs,t)},vs.keys=function(t){var e=[];for(var i in t)e.push(i);return e},vs.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},vs.entries=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},vs.merge=function(t){return Array.prototype.concat.apply([],t)},vs.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),1/0===(e-t)/n)throw new Error("infinite range");var r,s=[],a=i(Math.abs(n)),o=-1;if(t*=a,e*=a,n*=a,0>n)for(;(r=t+n*++o)>e;)s.push(r/a);else for(;(r=t+n*++o)<e;)s.push(r/a);return s},vs.map=function(t){var e=new r;if(t instanceof r)t.forEach(function(t,i){e.set(t,i)});else for(var i in t)e.set(i,t[i]);return e},n(r,{has:function(t){return Es+t in this},get:function(t){return this[Es+t]},set:function(t,e){return this[Es+t]=e},remove:function(t){return t=Es+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,i){t.push(i)}),t},entries:function(){var t=[];return this.forEach(function(e,i){t.push({key:e,value:i})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ps&&t.call(this,e.substring(1),this[e])}});var Es="\0",Ps=Es.charCodeAt(0);vs.nest=function(){function t(e,o,l){if(l>=a.length)return n?n.call(s,o):i?o.sort(i):o;for(var h,u,c,d,f=-1,p=o.length,g=a[l++],m=new r;++f<p;)(d=m.get(h=g(u=o[f])))?d.push(u):m.set(h,[u]);return e?(u=e(),c=function(i,n){u.set(i,t(e,n,l))}):(u={},c=function(i,n){u[i]=t(e,n,l)}),m.forEach(c),u}function e(t,i){if(i>=a.length)return t;var n=[],r=o[i++];return t.forEach(function(t,r){n.push({key:t,values:e(r,i)})}),r?n.sort(function(t,e){return r(t.key,e.key)}):n}var i,n,s={},a=[],o=[];return s.map=function(e,i){return t(i,e,0)},s.entries=function(i){return e(t(vs.map,i,0),0)},s.key=function(t){return a.push(t),s},s.sortKeys=function(t){return o[a.length-1]=t,s},s.sortValues=function(t){return i=t,s},s.rollup=function(t){return n=t,s},s},vs.set=function(t){var e=new s;if(t)for(var i=0,n=t.length;n>i;++i)e.add(t[i]);return e},n(s,{has:function(t){return Es+t in this},add:function(t){return this[Es+t]=!0,t},remove:function(t){return t=Es+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Ps&&t.call(this,e.substring(1))}}),vs.behavior={},vs.rebind=function(t,e){for(var i,n=1,r=arguments.length;++n<r;)t[i=arguments[n]]=a(t,e,e[i]);return t};var As=["webkit","ms","moz","Moz","o","O"];vs.dispatch=function(){for(var t=new h,e=-1,i=arguments.length;++e<i;)t[arguments[e]]=u(t);return t},h.prototype.on=function(t,e){var i=t.indexOf("."),n="";if(i>=0&&(n=t.substring(i+1),t=t.substring(0,i)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},vs.event=null,vs.requote=function(t){return t.replace(Fs,"\\$&")};var Fs=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Is={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)t[i]=e[i]},zs=function(t,e){return e.querySelector(t)},Ls=function(t,e){return e.querySelectorAll(t)},Rs=ws[o(ws,"matchesSelector")],Ns=function(t,e){return Rs.call(t,e)};"function"==typeof Sizzle&&(zs=function(t,e){return Sizzle(t,e)[0]||null},Ls=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Ns=Sizzle.matchesSelector),vs.selection=function(){return js};var Hs=vs.selection.prototype=[];Hs.select=function(t){var e,i,n,r,s=[];t=g(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=-1,h=n.length;++l<h;)(r=n[l])?(e.push(i=t.call(r,r.__data__,l,a)),i&&"__data__"in r&&(i.__data__=r.__data__)):e.push(null)}return p(s)},Hs.selectAll=function(t){var e,i,n=[];t=m(t);for(var r=-1,s=this.length;++r<s;)for(var a=this[r],o=-1,l=a.length;++o<l;)(i=a[o])&&(n.push(e=bs(t.call(i,i.__data__,o,r))),e.parentNode=i);return p(n)};var Os={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};vs.ns={prefix:Os,qualify:function(t){var e=t.indexOf(":"),i=t;return e>=0&&(i=t.substring(0,e),t=t.substring(e+1)),Os.hasOwnProperty(i)?{space:Os[i],local:t}:t}},Hs.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node();return t=vs.ns.qualify(t),t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}for(e in t)this.each(v(e,t[e]));return this}return this.each(v(t,e))},Hs.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var i=this.node(),n=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=i.classList){for(;++r<n;)if(!e.contains(t[r]))return!1}else for(e=i.getAttribute("class");++r<n;)if(!b(t[r]).test(e))return!1;return!0}for(e in t)this.each(x(e,t[e]));return this}return this.each(x(t,e))},Hs.style=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e="");for(i in t)this.each(_(i,t[i],e));return this}if(2>n)return _s.getComputedStyle(this.node(),null).getPropertyValue(t);i=""}return this.each(_(t,e,i))},Hs.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(k(e,t[e]));return this}return this.each(k(t,e))},Hs.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Hs.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Hs.append=function(t){return t=C(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Hs.insert=function(t,e){return t=C(t),e=g(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments))})},Hs.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Hs.data=function(t,e){function i(t,i){var n,s,a,o=t.length,c=i.length,d=Math.min(o,c),f=new Array(c),p=new Array(c),g=new Array(o);if(e){var m,v=new r,y=new r,b=[];for(n=-1;++n<o;)m=e.call(s=t[n],s.__data__,n),v.has(m)?g[n]=s:v.set(m,s),b.push(m);for(n=-1;++n<c;)m=e.call(i,a=i[n],n),(s=v.get(m))?(f[n]=s,s.__data__=a):y.has(m)||(p[n]=M(a)),y.set(m,a),v.remove(m);for(n=-1;++n<o;)v.has(b[n])&&(g[n]=t[n])}else{for(n=-1;++n<d;)s=t[n],a=i[n],s?(s.__data__=a,f[n]=s):p[n]=M(a);for(;c>n;++n)p[n]=M(i[n]);for(;o>n;++n)g[n]=t[n]}p.update=f,p.parentNode=f.parentNode=g.parentNode=t.parentNode,l.push(p),h.push(f),u.push(g)}var n,s,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++a<o;)(s=n[a])&&(t[a]=s.__data__);return t}var l=E([]),h=p([]),u=p([]);if("function"==typeof t)for(;++a<o;)i(n=this[a],t.call(n,n.parentNode.__data__,a));else for(;++a<o;)i(n=this[a],t);return h.enter=function(){return l},h.exit=function(){return u},h},Hs.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Hs.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=S(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o)&&e.push(n)}return p(r)},Hs.order=function(){for(var t=-1,e=this.length;++t<e;)for(var i,n=this[t],r=n.length-1,s=n[r];--r>=0;)(i=n[r])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},Hs.sort=function(t){t=T.apply(this,arguments);for(var e=-1,i=this.length;++e<i;)this[e].sort(t);return this.order()},Hs.each=function(t){return D(this,function(e,i,n){t.call(e,e.__data__,i,n)})},Hs.call=function(t){var e=bs(arguments);return t.apply(e[0]=this,e),this},Hs.empty=function(){return!this.node()},Hs.node=function(){for(var t=0,e=this.length;e>t;t++)for(var i=this[t],n=0,r=i.length;r>n;n++){var s=i[n];if(s)return s}return null},Hs.size=function(){var t=0;return this.each(function(){++t}),t};var Ws=[];vs.selection.enter=E,vs.selection.enter.prototype=Ws,Ws.append=Hs.append,Ws.empty=Hs.empty,Ws.node=Hs.node,Ws.call=Hs.call,Ws.size=Hs.size,Ws.select=function(t){for(var e,i,n,r,s,a=[],o=-1,l=this.length;++o<l;){n=(r=this[o]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var h=-1,u=r.length;++h<u;)(s=r[h])?(e.push(n[h]=i=t.call(r.parentNode,s.__data__,h,o)),i.__data__=s.__data__):e.push(null)}return p(a)},Ws.insert=function(t,e){return arguments.length<2&&(e=P(this)),Hs.insert.call(this,t,e)},Hs.transition=function(){for(var t,e,i=Ho||++Yo,n=[],r=Oo||{time:Date.now(),ease:Fi,delay:0,duration:250},s=-1,a=this.length;++s<a;){n.push(t=[]);for(var o=this[s],l=-1,h=o.length;++l<h;)(e=o[l])&&Er(e,l,i,r),t.push(e)}return Sr(n,i)},Hs.interrupt=function(){return this.each(A)},vs.select=function(t){var e=["string"==typeof t?zs(t,xs):t];return e.parentNode=ws,p([e])},vs.selectAll=function(t){var e=bs("string"==typeof t?Ls(t,xs):t);return e.parentNode=ws,p([e])};var js=vs.select(ws);Hs.on=function(t,e,i){var n=arguments.length;if(3>n){if("string"!=typeof t){2>n&&(e=!1);for(i in t)this.each(F(i,t[i],e));return this}if(2>n)return(n=this.node()["__on"+t])&&n._;i=!1}return this.each(F(t,e,i))};var Bs=vs.map({mouseenter:"mouseover",mouseleave:"mouseout"});Bs.forEach(function(t){"on"+t in xs&&Bs.remove(t)});var Ys=o(ws.style,"userSelect"),qs=0;vs.mouse=function(t){return R(t,d())};var Us=/WebKit/.test(_s.navigator.userAgent)?-1:0;vs.touches=function(t,e){return arguments.length<2&&(e=d().touches),e?bs(e).map(function(e){var i=R(t,e);return i.identifier=e.identifier,i}):[]},vs.behavior.drag=function(){function t(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function e(){return vs.event.changedTouches[0].identifier}function i(t,e){return vs.touches(t).filter(function(t){return t.identifier===e})[0]}function n(t,e,i,n){return function(){function a(){var t=e(u,f),i=t[0]-g[0],n=t[1]-g[1];m|=i|n,g=t,c({type:"drag",x:t[0]+l[0],y:t[1]+l[1],dx:i,dy:n})}function o(){v.on(i+"."+p,null).on(n+"."+p,null),y(m&&vs.event.target===d),c({type:"dragend"})}var l,h=this,u=h.parentNode,c=r.of(h,arguments),d=vs.event.target,f=t(),p=null==f?"drag":"drag-"+f,g=e(u,f),m=0,v=vs.select(_s).on(i+"."+p,a).on(n+"."+p,o),y=L();s?(l=s.apply(h,arguments),l=[l.x-g[0],l.y-g[1]]):l=[0,0],c({type:"dragstart"})}}var r=f(t,"drag","dragstart","dragend"),s=null,a=n(l,vs.mouse,"mousemove","mouseup"),o=n(e,i,"touchmove","touchend");return t.origin=function(e){return arguments.length?(s=e,t):s},vs.rebind(t,r,"on")};var Vs=Math.PI,Gs=2*Vs,$s=Vs/2,Xs=1e-6,Zs=Xs*Xs,Qs=Vs/180,Ks=180/Vs,Js=Math.SQRT2,ta=2,ea=4;vs.interpolateZoom=function(t,e){function i(t){var e=t*y;if(v){var i=j(g),a=s/(ta*d)*(i*B(Js*e+g)-W(g));return[n+a*h,r+a*u,s*i/j(Js*e+g)]}return[n+t*h,r+t*u,s*Math.exp(Js*e)]}var n=t[0],r=t[1],s=t[2],a=e[0],o=e[1],l=e[2],h=a-n,u=o-r,c=h*h+u*u,d=Math.sqrt(c),f=(l*l-s*s+ea*c)/(2*s*ta*d),p=(l*l-s*s-ea*c)/(2*l*ta*d),g=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(p*p+1)-p),v=m-g,y=(v||Math.log(l/s))/Js;return i.duration=1e3*y,i},vs.behavior.zoom=function(){function t(t){t.on(T,h).on(ra+".zoom",d).on(D,p).on("dblclick.zoom",g).on(P,u)}function e(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function i(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function n(t){C.k=Math.max(S[0],Math.min(S[1],t))}function r(t,e){e=i(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function s(){w&&w.domain(x.range().map(function(t){return(t-C.x)/C.k}).map(x.invert)),k&&k.domain(_.range().map(function(t){return(t-C.y)/C.k}).map(_.invert))}function a(t){t({type:"zoomstart"})}function o(t){s(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function l(t){t({type:"zoomend"})}function h(){function t(){u=1,r(vs.mouse(n),d),o(s)}function i(){c.on(D,_s===n?p:null).on(E,null),f(u&&vs.event.target===h),l(s)}var n=this,s=F.of(n,arguments),h=vs.event.target,u=0,c=vs.select(_s).on(D,t).on(E,i),d=e(vs.mouse(n)),f=L();A.call(n),a(s)}function u(){function t(){var t=vs.touches(p);return f=C.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function i(){for(var e=vs.event.changedTouches,i=0,s=e.length;s>i;++i)m[e[i].identifier]=null;var a=t(),l=Date.now();if(1===a.length){if(500>l-b){var h=a[0],u=m[h.identifier];n(2*C.k),r(h,u),c(),o(g)}b=l}else if(a.length>1){var h=a[0],d=a[1],f=h[0]-d[0],p=h[1]-d[1];v=f*f+p*p}}function s(){for(var t,e,i,s,a=vs.touches(p),l=0,h=a.length;h>l;++l,s=null)if(i=a[l],s=m[i.identifier]){if(e)break;t=i,e=s}if(s){var u=(u=i[0]-t[0])*u+(u=i[1]-t[1])*u,c=v&&Math.sqrt(u/v);t=[(t[0]+i[0])/2,(t[1]+i[1])/2],e=[(e[0]+s[0])/2,(e[1]+s[1])/2],n(c*f)}b=null,r(t,e),o(g)}function d(){if(vs.event.touches.length){for(var e=vs.event.changedTouches,i=0,n=e.length;n>i;++i)delete m[e[i].identifier];for(var r in m)return void t()}_.on(x,null).on(w,null),k.on(T,h).on(P,u),M(),l(g)}var f,p=this,g=F.of(p,arguments),m={},v=0,y=vs.event.changedTouches[0].identifier,x="touchmove.zoom-"+y,w="touchend.zoom-"+y,_=vs.select(_s).on(x,s).on(w,d),k=vs.select(p).on(T,null).on(P,i),M=L();A.call(p),i(),a(g)}function d(){var t=F.of(this,arguments);y?clearTimeout(y):(A.call(this),a(t)),y=setTimeout(function(){y=null,l(t)},50),c();var i=v||vs.mouse(this);m||(m=e(i)),n(Math.pow(2,.002*ia())*C.k),r(i,m),o(t)}function p(){m=null}function g(){var t=F.of(this,arguments),i=vs.mouse(this),s=e(i),h=Math.log(C.k)/Math.LN2;a(t),n(Math.pow(2,vs.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1)),r(i,s),o(t),l(t)}var m,v,y,b,x,w,_,k,C={x:0,y:0,k:1},M=[960,500],S=na,T="mousedown.zoom",D="mousemove.zoom",E="mouseup.zoom",P="touchstart.zoom",F=f(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=F.of(this,arguments),e=C;Ho?vs.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var i=M[0],n=M[1],r=i/2,s=n/2,a=vs.interpolateZoom([(r-C.x)/C.k,(s-C.y)/C.k,i/C.k],[(r-e.x)/e.k,(s-e.y)/e.k,i/e.k]);return function(e){var n=a(e),l=i/n[2];this.__chart__=C={x:r-n[0]*l,y:s-n[1]*l,k:l},o(t)}}).each("end.zoom",function(){l(t)}):(this.__chart__=C,a(t),o(t),l(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},s(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},s(),t):C.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?na:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(M=e&&[+e[0],+e[1]],t):M},t.x=function(e){return arguments.length?(w=e,x=e.copy(),C={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(k=e,_=e.copy(),C={x:0,y:0,k:1},t):k},vs.rebind(t,F,"on")};var ia,na=[0,1/0],ra="onwheel"in xs?(ia=function(){return-vs.event.deltaY*(vs.event.deltaMode?120:1)},"wheel"):"onmousewheel"in xs?(ia=function(){return vs.event.wheelDelta},"mousewheel"):(ia=function(){return-vs.event.detail},"MozMousePixelScroll");q.prototype.toString=function(){return this.rgb()+""},vs.hsl=function(t,e,i){return 1===arguments.length?t instanceof V?U(t.h,t.s,t.l):ht(""+t,ut,U):U(+t,+e,+i)};var sa=V.prototype=new q;sa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),U(this.h,this.s,this.l/t)},sa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),U(this.h,this.s,t*this.l)},sa.rgb=function(){return G(this.h,this.s,this.l)},vs.hcl=function(t,e,i){return 1===arguments.length?t instanceof X?$(t.h,t.c,t.l):t instanceof K?tt(t.l,t.a,t.b):tt((t=ct((t=vs.rgb(t)).r,t.g,t.b)).l,t.a,t.b):$(+t,+e,+i)};var aa=X.prototype=new q;aa.brighter=function(t){return $(this.h,this.c,Math.min(100,this.l+oa*(arguments.length?t:1)))},aa.darker=function(t){return $(this.h,this.c,Math.max(0,this.l-oa*(arguments.length?t:1)))},aa.rgb=function(){return Z(this.h,this.c,this.l).rgb()},vs.lab=function(t,e,i){return 1===arguments.length?t instanceof K?Q(t.l,t.a,t.b):t instanceof X?Z(t.l,t.c,t.h):ct((t=vs.rgb(t)).r,t.g,t.b):Q(+t,+e,+i)};var oa=18,la=.95047,ha=1,ua=1.08883,ca=K.prototype=new q;ca.brighter=function(t){return Q(Math.min(100,this.l+oa*(arguments.length?t:1)),this.a,this.b)},ca.darker=function(t){return Q(Math.max(0,this.l-oa*(arguments.length?t:1)),this.a,this.b)},ca.rgb=function(){return J(this.l,this.a,this.b)},vs.rgb=function(t,e,i){return 1===arguments.length?t instanceof ot?at(t.r,t.g,t.b):ht(""+t,at,G):at(~~t,~~e,~~i)};var da=ot.prototype=new q;da.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,i=this.g,n=this.b,r=30;return e||i||n?(e&&r>e&&(e=r),i&&r>i&&(i=r),n&&r>n&&(n=r),at(Math.min(255,~~(e/t)),Math.min(255,~~(i/t)),Math.min(255,~~(n/t)))):at(r,r,r)},da.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),at(~~(t*this.r),~~(t*this.g),~~(t*this.b))},da.hsl=function(){return ut(this.r,this.g,this.b)},da.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var fa=vs.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});fa.forEach(function(t,e){fa.set(t,rt(e))}),vs.functor=pt,vs.xhr=mt(gt),vs.dsv=function(t,e){function i(t,i,s){arguments.length<3&&(s=i,i=null);var a=vs.xhr(t,e,s);return a.row=function(t){return arguments.length?a.response(null==(i=t)?n:r(t)):i},a.row(i)}function n(t){return i.parse(t.responseText)}function r(t){return function(e){return i.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),h=t.charCodeAt(0);return i.parse=function(t,e){var n;return i.parseRows(t,function(t,i){if(n)return n(t,i-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,i){return e(r(t),i)}:r})},i.parseRows=function(t,e){function i(){if(u>=l)return a;if(r)return r=!1,s;var e=u;if(34===t.charCodeAt(e)){for(var i=e;i++<l;)if(34===t.charCodeAt(i)){if(34!==t.charCodeAt(i+1))break;++i}u=i+2;var n=t.charCodeAt(i+1);return 13===n?(r=!0,10===t.charCodeAt(i+2)&&++u):10===n&&(r=!0),t.substring(e+1,i).replace(/""/g,'"')}for(;l>u;){var n=t.charCodeAt(u++),o=1;if(10===n)r=!0;else if(13===n)r=!0,10===t.charCodeAt(u)&&(++u,++o);else if(n!==h)continue;return t.substring(e,u-o)}return t.substring(e)}for(var n,r,s={},a={},o=[],l=t.length,u=0,c=0;(n=i())!==a;){for(var d=[];n!==s&&n!==a;)d.push(n),n=i();(!e||(d=e(d,c++)))&&o.push(d)}return o},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new s,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(o).join(t)].concat(e.map(function(e){return r.map(function(t){return o(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(a).join("\n")},i},vs.csv=vs.dsv(",","text/csv"),vs.tsv=vs.dsv("\t","text/tab-separated-values");var pa,ga,ma,va,ya,ba=_s[o(_s,"requestAnimationFrame")]||function(t){setTimeout(t,17)};vs.timer=function(t,e,i){var n=arguments.length;2>n&&(e=0),3>n&&(i=Date.now());var r=i+e,s={callback:t,time:r,next:null};ga?ga.next=s:pa=s,ga=s,ma||(va=clearTimeout(va),ma=1,ba(bt))},vs.timer.flush=function(){wt(),_t()};var xa=".",wa=",",_a=[3,3],ka="$",Ca=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(kt);vs.formatPrefix=function(t,e){var i=0;return t&&(0>t&&(t*=-1),e&&(t=vs.round(t,Ct(t,e))),i=1+Math.floor(1e-12+Math.log(t)/Math.LN10),i=Math.max(-24,Math.min(24,3*Math.floor((0>=i?i+1:i-1)/3)))),Ca[8+i/3]},vs.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},vs.format=function(t){var e=Ma.exec(t),i=e[1]||" ",n=e[2]||">",r=e[3]||"",s=e[4]||"",a=e[5],o=+e[6],l=e[7],h=e[8],u=e[9],c=1,d="",f=!1;switch(h&&(h=+h.substring(1)),(a||"0"===i&&"="===n)&&(a=i="0",n="=",l&&(o-=Math.floor((o-1)/4))),u){case"n":l=!0,u="g";break;case"%":c=100,d="%",u="f";break;case"p":
c=100,d="%",u="r";break;case"b":case"o":case"x":case"X":"#"===s&&(s="0"+u.toLowerCase());case"c":case"d":f=!0,h=0;break;case"s":c=-1,u="r"}"#"===s?s="":"$"===s&&(s=ka),"r"!=u||h||(u="g"),null!=h&&("g"==u?h=Math.max(1,Math.min(21,h)):("e"==u||"f"==u)&&(h=Math.max(0,Math.min(20,h)))),u=Sa.get(u)||Mt;var p=a&&l;return function(t){if(f&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>c){var g=vs.formatPrefix(t,h);t=g.scale(t),d=g.symbol}else t*=c;t=u(t,h);var m=t.lastIndexOf("."),v=0>m?t:t.substring(0,m),y=0>m?"":xa+t.substring(m+1);!a&&l&&(v=Ta(v));var b=s.length+v.length+y.length+(p?0:e.length),x=o>b?new Array(b=o-b+1).join(i):"";return p&&(v=Ta(x+v)),e+=s,t=v+y,("<"===n?e+t+x:">"===n?x+e+t:"^"===n?x.substring(0,b>>=1)+e+t+x.substring(b):e+(p?t:x+t))+d}};var Ma=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Sa=vs.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=vs.round(t,Ct(t,e))).toFixed(Math.max(0,Math.min(20,Ct(t*(1+1e-15),e))))}}),Ta=gt;if(_a){var Da=_a.length;Ta=function(t){for(var e=t.length,i=[],n=0,r=_a[0];e>0&&r>0;)i.push(t.substring(e-=r,e+r)),r=_a[n=(n+1)%Da];return i.reverse().join(wa)}}vs.geo={},St.prototype={s:0,t:0,add:function(t){Tt(t,this.t,Ea),Tt(Ea.s,this.s,this),this.s?this.t+=Ea.t:this.s=Ea.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ea=new St;vs.geo.stream=function(t,e){t&&Pa.hasOwnProperty(t.type)?Pa[t.type](t,e):Dt(t,e)};var Pa={Feature:function(t,e){Dt(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)Dt(i[n].geometry,e)}},Aa={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){Et(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)Et(i[n],e,0)},Polygon:function(t,e){Pt(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)Pt(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)Dt(i[n],e)}};vs.geo.area=function(t){return Fa=0,vs.geo.stream(t,za),Fa};var Fa,Ia=new St,za={sphere:function(){Fa+=4*Vs},point:l,lineStart:l,lineEnd:l,polygonStart:function(){Ia.reset(),za.lineStart=At},polygonEnd:function(){var t=2*Ia;Fa+=0>t?4*Vs+t:t,za.lineStart=za.lineEnd=za.point=l}};vs.geo.bounds=function(){function t(t,e){b.push(x=[u=t,d=t]),c>e&&(c=e),e>f&&(f=e)}function e(e,i){var n=Ft([e*Qs,i*Qs]);if(v){var r=zt(v,n),s=[r[1],-r[0],0],a=zt(s,r);Nt(a),a=Ht(a);var l=e-p,h=l>0?1:-1,g=a[0]*Ks*h,m=Math.abs(l)>180;if(m^(g>h*p&&h*e>g)){var y=a[1]*Ks;y>f&&(f=y)}else if(g=(g+360)%360-180,m^(g>h*p&&h*e>g)){var y=-a[1]*Ks;c>y&&(c=y)}else c>i&&(c=i),i>f&&(f=i);m?p>e?o(u,e)>o(u,d)&&(d=e):o(e,d)>o(u,d)&&(u=e):d>=u?(u>e&&(u=e),e>d&&(d=e)):e>p?o(u,e)>o(u,d)&&(d=e):o(e,d)>o(u,d)&&(u=e)}else t(e,i);v=n,p=e}function i(){w.point=e}function n(){x[0]=u,x[1]=d,w.point=t,v=null}function r(t,i){if(v){var n=t-p;y+=Math.abs(n)>180?n+(n>0?360:-360):n}else g=t,m=i;za.point(t,i),e(t,i)}function s(){za.lineStart()}function a(){r(g,m),za.lineEnd(),Math.abs(y)>Xs&&(u=-(d=180)),x[0]=u,x[1]=d,v=null}function o(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function h(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var u,c,d,f,p,g,m,v,y,b,x,w={point:t,lineStart:i,lineEnd:n,polygonStart:function(){w.point=r,w.lineStart=s,w.lineEnd=a,y=0,za.polygonStart()},polygonEnd:function(){za.polygonEnd(),w.point=t,w.lineStart=i,w.lineEnd=n,0>Ia?(u=-(d=180),c=-(f=90)):y>Xs?f=90:-Xs>y&&(c=-90),x[0]=u,x[1]=d}};return function(t){f=d=-(u=c=1/0),b=[],vs.geo.stream(t,w);var e=b.length;if(e){b.sort(l);for(var i,n=1,r=b[0],s=[r];e>n;++n)i=b[n],h(i[0],r)||h(i[1],r)?(o(r[0],i[1])>o(r[0],r[1])&&(r[1]=i[1]),o(i[0],r[1])>o(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(var a,i,p=-1/0,e=s.length-1,n=0,r=s[e];e>=n;r=i,++n)i=s[n],(a=o(r[1],i[0]))>p&&(p=a,u=i[0],d=r[1])}return b=x=null,1/0===u||1/0===c?[[NaN,NaN],[NaN,NaN]]:[[u,c],[d,f]]}}(),vs.geo.centroid=function(t){La=Ra=Na=Ha=Oa=Wa=ja=Ba=Ya=qa=Ua=0,vs.geo.stream(t,Va);var e=Ya,i=qa,n=Ua,r=e*e+i*i+n*n;return Zs>r&&(e=Wa,i=ja,n=Ba,Xs>Ra&&(e=Na,i=Ha,n=Oa),r=e*e+i*i+n*n,Zs>r)?[NaN,NaN]:[Math.atan2(i,e)*Ks,O(n/Math.sqrt(r))*Ks]};var La,Ra,Na,Ha,Oa,Wa,ja,Ba,Ya,qa,Ua,Va={sphere:l,point:Wt,lineStart:Bt,lineEnd:Yt,polygonStart:function(){Va.lineStart=qt},polygonEnd:function(){Va.lineStart=Bt}},Ga=$t(Ut,Jt,ee,[-Vs,-Vs/2]),$a=1e9;vs.geo.clipExtent=function(){var t,e,i,n,r,s,a={stream:function(t){return r&&(r.valid=!1),r=s(t),r.valid=!0,r},extent:function(o){return arguments.length?(s=ne(t=+o[0][0],e=+o[0][1],i=+o[1][0],n=+o[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[i,n]]}};return a.extent([[0,0],[960,500]])},(vs.geo.conicEqualArea=function(){return ae(oe)}).raw=oe,vs.geo.albers=function(){return vs.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},vs.geo.albersUsa=function(){function t(t){var s=t[0],a=t[1];return e=null,i(s,a),e||(n(s,a),e)||r(s,a),e}var e,i,n,r,s=vs.geo.albers(),a=vs.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=vs.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,i){e=[t,i]}};return t.invert=function(t){var e=s.scale(),i=s.translate(),n=(t[0]-i[0])/e,r=(t[1]-i[1])/e;return(r>=.12&&.234>r&&n>=-.425&&-.214>n?a:r>=.166&&.234>r&&n>=-.214&&-.115>n?o:s).invert(t)},t.stream=function(t){var e=s.stream(t),i=a.stream(t),n=o.stream(t);return{point:function(t,r){e.point(t,r),i.point(t,r),n.point(t,r)},sphere:function(){e.sphere(),i.sphere(),n.sphere()},lineStart:function(){e.lineStart(),i.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),i.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),i.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),i.polygonEnd(),n.polygonEnd()}}},t.precision=function(e){return arguments.length?(s.precision(e),a.precision(e),o.precision(e),t):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),a.scale(.35*e),o.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(e){if(!arguments.length)return s.translate();var h=s.scale(),u=+e[0],c=+e[1];return i=s.translate(e).clipExtent([[u-.455*h,c-.238*h],[u+.455*h,c+.238*h]]).stream(l).point,n=a.translate([u-.307*h,c+.201*h]).clipExtent([[u-.425*h+Xs,c+.12*h+Xs],[u-.214*h-Xs,c+.234*h-Xs]]).stream(l).point,r=o.translate([u-.205*h,c+.212*h]).clipExtent([[u-.214*h+Xs,c+.166*h+Xs],[u-.115*h-Xs,c+.234*h-Xs]]).stream(l).point,t},t.scale(1070)};var Xa,Za,Qa,Ka,Ja,to,eo={point:l,lineStart:l,lineEnd:l,polygonStart:function(){Za=0,eo.lineStart=le},polygonEnd:function(){eo.lineStart=eo.lineEnd=eo.point=l,Xa+=Math.abs(Za/2)}},io={point:he,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},no={point:de,lineStart:fe,lineEnd:pe,polygonStart:function(){no.lineStart=ge},polygonEnd:function(){no.point=de,no.lineStart=fe,no.lineEnd=pe}};vs.geo.transform=function(t){return{stream:function(e){var i=new ye(e);for(var n in t)i[n]=t[n];return i}}},ye.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},vs.geo.path=function(){function t(t){return t&&("function"==typeof o&&s.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=r(s)),vs.geo.stream(t,a)),s.result()}function e(){return a=null,t}var i,n,r,s,a,o=4.5;return t.area=function(t){return Xa=0,vs.geo.stream(t,r(eo)),Xa},t.centroid=function(t){return Na=Ha=Oa=Wa=ja=Ba=Ya=qa=Ua=0,vs.geo.stream(t,r(no)),Ua?[Ya/Ua,qa/Ua]:Ba?[Wa/Ba,ja/Ba]:Oa?[Na/Oa,Ha/Oa]:[NaN,NaN]},t.bounds=function(t){return Ja=to=-(Qa=Ka=1/0),vs.geo.stream(t,r(io)),[[Qa,Ka],[Ja,to]]},t.projection=function(t){return arguments.length?(r=(i=t)?t.stream||be(t):gt,e()):i},t.context=function(t){return arguments.length?(s=null==(n=t)?new ue:new me(t),"function"!=typeof o&&s.pointRadius(o),e()):n},t.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(s.pointRadius(+e),+e),t):o},t.projection(vs.geo.albersUsa()).context(null)},vs.geo.projection=xe,vs.geo.projectionMutator=we,(vs.geo.equirectangular=function(){return xe(ke)}).raw=ke.invert=ke,vs.geo.rotation=function(t){function e(e){return e=t(e[0]*Qs,e[1]*Qs),e[0]*=Ks,e[1]*=Ks,e}return t=Me(t[0]%360*Qs,t[1]*Qs,t.length>2?t[2]*Qs:0),e.invert=function(e){return e=t.invert(e[0]*Qs,e[1]*Qs),e[0]*=Ks,e[1]*=Ks,e},e},Ce.invert=ke,vs.geo.circle=function(){function t(){var t="function"==typeof n?n.apply(this,arguments):n,e=Me(-t[0]*Qs,-t[1]*Qs,0).invert,r=[];return i(null,null,1,{point:function(t,i){r.push(t=e(t,i)),t[0]*=Ks,t[1]*=Ks}}),{type:"Polygon",coordinates:[r]}}var e,i,n=[0,0],r=6;return t.origin=function(e){return arguments.length?(n=e,t):n},t.angle=function(n){return arguments.length?(i=Ee((e=+n)*Qs,r*Qs),t):e},t.precision=function(n){return arguments.length?(i=Ee(e*Qs,(r=+n)*Qs),t):r},t.angle(90)},vs.geo.distance=function(t,e){var i,n=(e[0]-t[0])*Qs,r=t[1]*Qs,s=e[1]*Qs,a=Math.sin(n),o=Math.cos(n),l=Math.sin(r),h=Math.cos(r),u=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((i=c*a)*i+(i=h*u-l*c*o)*i),l*u+h*c*o)},vs.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return vs.range(Math.ceil(s/m)*m,r,m).map(d).concat(vs.range(Math.ceil(h/v)*v,l,v).map(f)).concat(vs.range(Math.ceil(n/p)*p,i,p).filter(function(t){return Math.abs(t%m)>Xs}).map(u)).concat(vs.range(Math.ceil(o/g)*g,a,g).filter(function(t){return Math.abs(t%v)>Xs}).map(c))}var i,n,r,s,a,o,l,h,u,c,d,f,p=10,g=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(s).concat(f(l).slice(1),d(r).reverse().slice(1),f(h).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(s=+e[0][0],r=+e[1][0],h=+e[0][1],l=+e[1][1],s>r&&(e=s,s=r,r=e),h>l&&(e=h,h=l,l=e),t.precision(y)):[[s,h],[r,l]]},t.minorExtent=function(e){return arguments.length?(n=+e[0][0],i=+e[1][0],o=+e[0][1],a=+e[1][1],n>i&&(e=n,n=i,i=e),o>a&&(e=o,o=a,a=e),t.precision(y)):[[n,o],[i,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,u=Ae(o,a,90),c=Fe(n,i,y),d=Ae(h,l,90),f=Fe(s,r,y),t):y},t.majorExtent([[-180,-90+Xs],[180,90-Xs]]).minorExtent([[-180,-80-Xs],[180,80+Xs]])},vs.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),i||r.apply(this,arguments)]}}var e,i,n=Ie,r=ze;return t.distance=function(){return vs.geo.distance(e||n.apply(this,arguments),i||r.apply(this,arguments))},t.source=function(i){return arguments.length?(n=i,e="function"==typeof i?null:i,t):n},t.target=function(e){return arguments.length?(r=e,i="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},vs.geo.interpolate=function(t,e){return Le(t[0]*Qs,t[1]*Qs,e[0]*Qs,e[1]*Qs)},vs.geo.length=function(t){return ro=0,vs.geo.stream(t,so),ro};var ro,so={sphere:l,point:l,lineStart:Re,lineEnd:l,polygonStart:l,polygonEnd:l},ao=Ne(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(vs.geo.azimuthalEqualArea=function(){return xe(ao)}).raw=ao;var oo=Ne(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},gt);(vs.geo.azimuthalEquidistant=function(){return xe(oo)}).raw=oo,(vs.geo.conicConformal=function(){return ae(He)}).raw=He,(vs.geo.conicEquidistant=function(){return ae(Oe)}).raw=Oe;var lo=Ne(function(t){return 1/t},Math.atan);(vs.geo.gnomonic=function(){return xe(lo)}).raw=lo,We.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-$s]},(vs.geo.mercator=function(){return je(We)}).raw=We;var ho=Ne(function(){return 1},Math.asin);(vs.geo.orthographic=function(){return xe(ho)}).raw=ho;var uo=Ne(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(vs.geo.stereographic=function(){return xe(uo)}).raw=uo,Be.invert=function(t,e){return[Math.atan2(W(t),Math.cos(e)),O(Math.sin(e)/j(t))]},(vs.geo.transverseMercator=function(){return je(Be)}).raw=Be,vs.geom={},vs.svg={},vs.svg.line=function(){return Ye(gt)};var co=vs.map({linear:Ve,"linear-closed":Ge,step:$e,"step-before":Xe,"step-after":Ze,basis:ii,"basis-open":ni,"basis-closed":ri,bundle:si,cardinal:Je,"cardinal-open":Qe,"cardinal-closed":Ke,monotone:ci});co.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var fo=[0,2/3,1/3,0],po=[0,1/3,2/3,0],go=[0,1/6,2/3,1/6];vs.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r,s,a,o,l,h,u,c,d,f,p,g=pt(i),m=pt(n),v=t.length,y=v-1,b=[],x=[],w=0;if(g===qe&&n===Ue)e=t;else for(s=0,e=[];v>s;++s)e.push([+g.call(this,r=t[s],s),+m.call(this,r,s)]);for(s=1;v>s;++s)(e[s][1]<e[w][1]||e[s][1]==e[w][1]&&e[s][0]<e[w][0])&&(w=s);for(s=0;v>s;++s)s!==w&&(l=e[s][1]-e[w][1],o=e[s][0]-e[w][0],b.push({angle:Math.atan2(l,o),index:s}));for(b.sort(function(t,e){return t.angle-e.angle}),f=b[0].angle,d=b[0].index,c=0,s=1;y>s;++s){if(a=b[s].index,f==b[s].angle){if(o=e[d][0]-e[w][0],l=e[d][1]-e[w][1],h=e[a][0]-e[w][0],u=e[a][1]-e[w][1],o*o+l*l>=h*h+u*u){b[s].index=-1;continue}b[c].index=-1}f=b[s].angle,c=s,d=a}for(x.push(w),s=0,a=0;2>s;++a)b[a].index>-1&&(x.push(b[a].index),s++);for(p=x.length;y>a;++a)if(!(b[a].index<0)){for(;!di(x[p-2],x[p-1],b[a].index,e);)--p;x[p++]=b[a].index}var _=[];for(s=p-1;s>=0;--s)_.push(t[x[s]]);return _}var i=qe,n=Ue;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e)},vs.geom.polygon=function(t){return Is(t,mo),t};var mo=vs.geom.polygon.prototype=[];mo.area=function(){for(var t,e=-1,i=this.length,n=this[i-1],r=0;++e<i;)t=n,n=this[e],r+=t[1]*n[0]-t[0]*n[1];return.5*r},mo.centroid=function(t){var e,i,n=-1,r=this.length,s=0,a=0,o=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++n<r;)e=o,o=this[n],i=e[0]*o[1]-o[0]*e[1],s+=(e[0]+o[0])*i,a+=(e[1]+o[1])*i;return[s*t,a*t]},mo.clip=function(t){for(var e,i,n,r,s,a,o=gi(t),l=-1,h=this.length-gi(this),u=this[h-1];++l<h;){for(e=t.slice(),t.length=0,r=this[l],s=e[(n=e.length-o)-1],i=-1;++i<n;)a=e[i],fi(a,u,r)?(fi(s,u,r)||t.push(pi(s,a,u,r)),t.push(a)):fi(s,u,r)&&t.push(pi(s,a,u,r)),s=a;o&&t.push(t[0]),u=r}return t},vs.geom.delaunay=function(t){var e=t.map(function(){return[]}),i=[];return mi(t,function(i){e[i.region.l.index].push(t[i.region.r.index])}),e.forEach(function(e,n){var r=t[n],s=r[0],a=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-s,t[1]-a)}),e.sort(function(t,e){return t.angle-e.angle});for(var o=0,l=e.length-1;l>o;o++)i.push([r,e[o],e[o+1]])}),i},vs.geom.voronoi=function(t){function e(t){var e,s,a,o=t.map(function(){return[]}),l=pt(i),h=pt(n),u=t.length,c=1e6;if(l===qe&&h===Ue)e=t;else for(e=new Array(u),a=0;u>a;++a)e[a]=[+l.call(this,s=t[a],a),+h.call(this,s,a)];if(mi(e,function(t){var e,i,n,r,s,a;1===t.a&&t.b>=0?(e=t.ep.r,i=t.ep.l):(e=t.ep.l,i=t.ep.r),1===t.a?(s=e?e.y:-c,n=t.c-t.b*s,a=i?i.y:c,r=t.c-t.b*a):(n=e?e.x:-c,s=t.c-t.a*n,r=i?i.x:c,a=t.c-t.a*r);var l=[n,s],h=[r,a];o[t.region.l.index].push(l,h),o[t.region.r.index].push(l,h)}),o=o.map(function(t,i){var n=e[i][0],r=e[i][1],s=t.map(function(t){return Math.atan2(t[0]-n,t[1]-r)}),a=vs.range(t.length).sort(function(t,e){return s[t]-s[e]});return a.filter(function(t,e){return!e||s[t]-s[a[e-1]]>Xs}).map(function(e){return t[e]})}),o.forEach(function(t,i){var n=t.length;if(!n)return t.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(n>2)){var r=e[i],s=t[0],a=t[1],o=r[0],l=r[1],h=s[0],u=s[1],d=a[0],f=a[1],p=Math.abs(d-h),g=f-u;if(Math.abs(g)<Xs){var m=u>l?-c:c;t.push([-c,m],[c,m])}else if(Xs>p){var v=h>o?-c:c;t.push([v,-c],[v,c])}else{var m=(h-o)*(f-u)>(d-h)*(u-l)?c:-c,y=Math.abs(g)-p;Math.abs(y)<Xs?t.push([0>g?m:-m,m]):(y>0&&(m*=-1),t.push([-c,m],[c,m]))}}}),r)for(a=0;u>a;++a)r.clip(o[a]);for(a=0;u>a;++a)o[a].point=t[a];return o}var i=qe,n=Ue,r=null;return arguments.length?e(t):(e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(n=t,e):n},e.clipExtent=function(t){if(!arguments.length)return r&&[r[0],r[2]];if(null==t)r=null;else{var i=+t[0][0],n=+t[0][1],s=+t[1][0],a=+t[1][1];r=vs.geom.polygon([[i,n],[i,a],[s,a],[s,n]])}return e},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):r&&r[2]},e.links=function(t){var e,r,s,a=t.map(function(){return[]}),o=[],l=pt(i),h=pt(n),u=t.length;if(l===qe&&h===Ue)e=t;else for(e=new Array(u),s=0;u>s;++s)e[s]=[+l.call(this,r=t[s],s),+h.call(this,r,s)];return mi(e,function(e){var i=e.region.l.index,n=e.region.r.index;a[i][n]||(a[i][n]=a[n][i]=!0,o.push({source:t[i],target:t[n]}))}),o},e.triangles=function(t){if(i===qe&&n===Ue)return vs.geom.delaunay(t);for(var e,r=new Array(l),s=pt(i),a=pt(n),o=-1,l=t.length;++o<l;)(r[o]=[+s.call(this,e=t[o],o),+a.call(this,e,o)]).data=e;return vs.geom.delaunay(r).map(function(t){return t.map(function(t){return t.data})})},e)};var vo={l:"r",r:"l"};vs.geom.quadtree=function(t,e,i,n,r){function s(t){function s(t,e,i,n,r,s,a,o){if(!isNaN(i)&&!isNaN(n))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(Math.abs(l-i)+Math.abs(u-n)<.01)h(t,e,i,n,r,s,a,o);else{var c=t.point;t.x=t.y=t.point=null,h(t,c,l,u,r,s,a,o),h(t,e,i,n,r,s,a,o)}else t.x=i,t.y=n,t.point=e}else h(t,e,i,n,r,s,a,o)}function h(t,e,i,n,r,a,o,l){var h=.5*(r+o),u=.5*(a+l),c=i>=h,d=n>=u,f=(d<<1)+c;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=bi()),c?r=h:o=h,d?a=u:l=u,s(t,e,i,n,r,a,o,l)}var u,c,d,f,p,g,m,v,y,b=pt(o),x=pt(l);if(null!=e)g=e,m=i,v=n,y=r;else if(v=y=-(g=m=1/0),c=[],d=[],p=t.length,a)for(f=0;p>f;++f)u=t[f],u.x<g&&(g=u.x),u.y<m&&(m=u.y),u.x>v&&(v=u.x),u.y>y&&(y=u.y),c.push(u.x),d.push(u.y);else for(f=0;p>f;++f){var w=+b(u=t[f],f),_=+x(u,f);g>w&&(g=w),m>_&&(m=_),w>v&&(v=w),_>y&&(y=_),c.push(w),d.push(_)}var k=v-g,C=y-m;k>C?y=m+k:v=g+C;var M=bi();if(M.add=function(t){s(M,t,+b(t,++f),+x(t,f),g,m,v,y)},M.visit=function(t){xi(t,M,g,m,v,y)},f=-1,null==e){for(;++f<p;)s(M,t[f],c[f],d[f],g,m,v,y);--f}else t.forEach(M.add);return c=d=t=u=null,M}var a,o=qe,l=Ue;return(a=arguments.length)?(o=vi,l=yi,3===a&&(r=i,n=e,i=e=0),s(t)):(s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(l=t,s):l},s.extent=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=+t[0][0],i=+t[0][1],n=+t[1][0],r=+t[1][1]),s):null==e?null:[[e,i],[n,r]]},s.size=function(t){return arguments.length?(null==t?e=i=n=r=null:(e=i=0,n=+t[0],r=+t[1]),s):null==e?null:[n-e,r-i]},s)},vs.interpolateRgb=wi,vs.interpolateObject=_i,vs.interpolateNumber=ki,vs.interpolateString=Ci;var yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;vs.interpolate=Mi,vs.interpolators=[function(t,e){var i=typeof e;return("string"===i?fa.has(e)||/^(#|rgb\(|hsl\()/.test(e)?wi:Ci:e instanceof q?wi:"object"===i?Array.isArray(e)?Si:_i:ki)(t,e)}],vs.interpolateArray=Si;var bo=function(){return gt},xo=vs.map({linear:bo,poly:Ii,quad:function(){return Pi},cubic:function(){return Ai},sin:function(){return zi},exp:function(){return Li},circle:function(){return Ri},elastic:Ni,back:Hi,bounce:function(){return Oi}}),wo=vs.map({"in":gt,out:Di,"in-out":Ei,"out-in":function(t){return Ei(Di(t))}});vs.ease=function(t){var e=t.indexOf("-"),i=e>=0?t.substring(0,e):t,n=e>=0?t.substring(e+1):"in";return i=xo.get(i)||bo,n=wo.get(n)||gt,Ti(n(i.apply(null,Array.prototype.slice.call(arguments,1))))},vs.interpolateHcl=Wi,vs.interpolateHsl=ji,vs.interpolateLab=Bi,vs.interpolateRound=Yi,vs.transform=function(t){var e=xs.createElementNS(vs.ns.prefix.svg,"g");return(vs.transform=function(t){if(null!=t){e.setAttribute("transform",t);var i=e.transform.baseVal.consolidate()}return new qi(i?i.matrix:_o)})(t)},qi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var _o={a:1,b:0,c:0,d:1,e:0,f:0};vs.interpolateTransform=$i,vs.layout={},vs.layout.bundle=function(){return function(t){for(var e=[],i=-1,n=t.length;++i<n;)e.push(Qi(t[i]));return e}},vs.layout.chord=function(){function t(){var t,h,c,d,f,p={},g=[],m=vs.range(s),v=[];for(i=[],n=[],t=0,d=-1;++d<s;){for(h=0,f=-1;++f<s;)h+=r[d][f];g.push(h),v.push(vs.range(s)),t+=h}for(a&&m.sort(function(t,e){return a(g[t],g[e])}),o&&v.forEach(function(t,e){t.sort(function(t,i){return o(r[e][t],r[e][i])})}),t=(Gs-u*s)/t,h=0,d=-1;++d<s;){for(c=h,f=-1;++f<s;){var y=m[d],b=v[y][f],x=r[y][b],w=h,_=h+=x*t;p[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:_,value:x}}n[y]={index:y,startAngle:c,endAngle:h,value:(h-c)/t},h+=u}for(d=-1;++d<s;)for(f=d-1;++f<s;){var k=p[d+"-"+f],C=p[f+"-"+d];(k.value||C.value)&&i.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){i.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var i,n,r,s,a,o,l,h={},u=0;return h.matrix=function(t){return arguments.length?(s=(r=t)&&r.length,i=n=null,h):r},h.padding=function(t){return arguments.length?(u=t,i=n=null,h):u},h.sortGroups=function(t){return arguments.length?(a=t,i=n=null,h):a},h.sortSubgroups=function(t){return arguments.length?(o=t,i=null,h):o},h.sortChords=function(t){return arguments.length?(l=t,i&&e(),h):l},h.chords=function(){return i||t(),i},h.groups=function(){return n||t(),n},h},vs.layout.force=function(){function t(t){return function(e,i,n,r){if(e.point!==t){var s=e.cx-t.x,a=e.cy-t.y,o=1/Math.sqrt(s*s+a*a);if(g>(r-i)*o){var l=e.charge*o*o;return t.px-=s*l,t.py-=a*l,!0}if(e.point&&isFinite(o)){var l=e.pointCharge*o*o;t.px-=s*l,t.py-=a*l}}return!e.charge}}function e(t){t.px=vs.event.x,t.py=vs.event.y,o.resume()}var i,n,r,s,a,o={},l=vs.dispatch("start","tick","end"),h=[1,1],u=.9,c=ko,d=Co,f=-30,p=.1,g=.8,m=[],v=[];return o.tick=function(){if((n*=.99)<.005)return l.end({type:"end",alpha:n=0}),!0;var e,i,o,c,d,g,y,b,x,w=m.length,_=v.length;for(i=0;_>i;++i)o=v[i],c=o.source,d=o.target,b=d.x-c.x,x=d.y-c.y,(g=b*b+x*x)&&(g=n*s[i]*((g=Math.sqrt(g))-r[i])/g,b*=g,x*=g,d.x-=b*(y=c.weight/(d.weight+c.weight)),d.y-=x*y,c.x+=b*(y=1-y),c.y+=x*y);if((y=n*p)&&(b=h[0]/2,x=h[1]/2,i=-1,y))for(;++i<w;)o=m[i],o.x+=(b-o.x)*y,o.y+=(x-o.y)*y;if(f)for(sn(e=vs.geom.quadtree(m),n,a),i=-1;++i<w;)(o=m[i]).fixed||e.visit(t(o));for(i=-1;++i<w;)o=m[i],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*u,o.y-=(o.py-(o.py=o.y))*u);l.tick({type:"tick",alpha:n})},o.nodes=function(t){return arguments.length?(m=t,o):m},o.links=function(t){return arguments.length?(v=t,o):v},o.size=function(t){return arguments.length?(h=t,o):h},o.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,o):c},o.distance=o.linkDistance,o.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,o):d},o.friction=function(t){return arguments.length?(u=+t,o):u},o.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,o):f},o.gravity=function(t){return arguments.length?(p=+t,o):p},o.theta=function(t){return arguments.length?(g=+t,o):g},o.alpha=function(t){return arguments.length?(t=+t,n?n=t>0?t:0:t>0&&(l.start({type:"start",alpha:n=t}),vs.timer(o.tick)),o):n},o.start=function(){function t(t,n){for(var r,s=e(i),a=-1,o=s.length;++a<o;)if(!isNaN(r=s[a][t]))return r;return Math.random()*n}function e(){if(!l){for(l=[],n=0;p>n;++n)l[n]=[];for(n=0;g>n;++n){var t=v[n];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[i]}var i,n,l,u,p=m.length,g=v.length,y=h[0],b=h[1];for(i=0;p>i;++i)(u=m[i]).index=i,u.weight=0;for(i=0;g>i;++i)u=v[i],"number"==typeof u.source&&(u.source=m[u.source]),"number"==typeof u.target&&(u.target=m[u.target]),++u.source.weight,++u.target.weight;for(i=0;p>i;++i)u=m[i],isNaN(u.x)&&(u.x=t("x",y)),isNaN(u.y)&&(u.y=t("y",b)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y);if(r=[],"function"==typeof c)for(i=0;g>i;++i)r[i]=+c.call(this,v[i],i);else for(i=0;g>i;++i)r[i]=c;if(s=[],"function"==typeof d)for(i=0;g>i;++i)s[i]=+d.call(this,v[i],i);else for(i=0;g>i;++i)s[i]=d;if(a=[],"function"==typeof f)for(i=0;p>i;++i)a[i]=+f.call(this,m[i],i);else for(i=0;p>i;++i)a[i]=f;return o.resume()},o.resume=function(){return o.alpha(.1)},o.stop=function(){return o.alpha(0)},o.drag=function(){return i||(i=vs.behavior.drag().origin(gt).on("dragstart.force",tn).on("drag.force",e).on("dragend.force",en)),arguments.length?void this.on("mouseover.force",nn).on("mouseout.force",rn).call(i):i},vs.rebind(o,l,"on")};var ko=20,Co=1;vs.layout.hierarchy=function(){function t(e,a,o){var l=r.call(i,e,a);if(e.depth=a,o.push(e),l&&(h=l.length)){for(var h,u,c=-1,d=e.children=[],f=0,p=a+1;++c<h;)u=t(l[c],p,o),u.parent=e,d.push(u),f+=u.value;n&&d.sort(n),s&&(e.value=f)}else s&&(e.value=+s.call(i,e,a)||0);return e}function e(t,n){var r=t.children,a=0;if(r&&(o=r.length))for(var o,l=-1,h=n+1;++l<o;)a+=e(r[l],h);else s&&(a=+s.call(i,t,n)||0);return s&&(t.value=a),a}function i(e){var i=[];return t(e,0,i),i}var n=hn,r=on,s=ln;return i.sort=function(t){return arguments.length?(n=t,i):n},i.children=function(t){return arguments.length?(r=t,i):r},i.value=function(t){return arguments.length?(s=t,i):s},i.revalue=function(t){return e(t,0),t},i},vs.layout.partition=function(){function t(e,i,n,r){var s=e.children;if(e.x=i,e.y=e.depth*r,e.dx=n,e.dy=r,s&&(a=s.length)){var a,o,l,h=-1;for(n=e.value?n/e.value:0;++h<a;)t(o=s[h],i,l=o.value*n,r),i+=l}}function e(t){var i=t.children,n=0;if(i&&(r=i.length))for(var r,s=-1;++s<r;)n=Math.max(n,e(i[s]));return 1+n}function i(i,s){var a=n.call(this,i,s);return t(a[0],0,r[0],r[1]/e(a[0])),a}var n=vs.layout.hierarchy(),r=[1,1];return i.size=function(t){return arguments.length?(r=t,i):r},an(i,n)},vs.layout.pie=function(){function t(s){var a=s.map(function(i,n){return+e.call(t,i,n)}),o=+("function"==typeof n?n.apply(this,arguments):n),l=(("function"==typeof r?r.apply(this,arguments):r)-o)/vs.sum(a),h=vs.range(s.length);null!=i&&h.sort(i===Mo?function(t,e){return a[e]-a[t]}:function(t,e){return i(s[t],s[e])});var u=[];return h.forEach(function(t){var e;u[t]={data:s[t],value:e=a[t],startAngle:o,endAngle:o+=e*l}}),u}var e=Number,i=Mo,n=0,r=Gs;return t.value=function(i){return arguments.length?(e=i,t):e},t.sort=function(e){return arguments.length?(i=e,t):i},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var Mo={};vs.layout.stack=function(){function t(o,l){var h=o.map(function(i,n){return e.call(t,i,n)}),u=h.map(function(e){return e.map(function(e,i){return[s.call(t,e,i),a.call(t,e,i)]})}),c=i.call(t,u,l);h=vs.permute(h,c),u=vs.permute(u,c);var d,f,p,g=n.call(t,u,l),m=h.length,v=h[0].length;for(f=0;v>f;++f)for(r.call(t,h[0][f],p=g[f],u[0][f][1]),d=1;m>d;++d)r.call(t,h[d][f],p+=u[d-1][f][1],u[d][f][1]);return o}var e=gt,i=pn,n=gn,r=fn,s=cn,a=dn;return t.values=function(i){return arguments.length?(e=i,t):e},t.order=function(e){return arguments.length?(i="function"==typeof e?e:So.get(e)||pn,t):i},t.offset=function(e){return arguments.length?(n="function"==typeof e?e:To.get(e)||gn,t):n},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var So=vs.map({"inside-out":function(t){var e,i,n=t.length,r=t.map(mn),s=t.map(vn),a=vs.range(n).sort(function(t,e){return r[t]-r[e]}),o=0,l=0,h=[],u=[];for(e=0;n>e;++e)i=a[e],l>o?(o+=s[i],h.push(i)):(l+=s[i],u.push(i));return u.reverse().concat(h)},reverse:function(t){return vs.range(t.length).reverse()},"default":pn}),To=vs.map({silhouette:function(t){var e,i,n,r=t.length,s=t[0].length,a=[],o=0,l=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];n>o&&(o=n),a.push(n)}for(i=0;s>i;++i)l[i]=(o-a[i])/2;return l},wiggle:function(t){var e,i,n,r,s,a,o,l,h,u=t.length,c=t[0],d=c.length,f=[];for(f[0]=l=h=0,i=1;d>i;++i){for(e=0,r=0;u>e;++e)r+=t[e][i][1];for(e=0,s=0,o=c[i][0]-c[i-1][0];u>e;++e){for(n=0,a=(t[e][i][1]-t[e][i-1][1])/(2*o);e>n;++n)a+=(t[n][i][1]-t[n][i-1][1])/o;s+=a*t[e][i][1]}f[i]=l-=r?s/r*o:0,h>l&&(h=l)}for(i=0;d>i;++i)f[i]-=h;return f},expand:function(t){var e,i,n,r=t.length,s=t[0].length,a=1/r,o=[];for(i=0;s>i;++i){for(e=0,n=0;r>e;e++)n+=t[e][i][1];if(n)for(e=0;r>e;e++)t[e][i][1]/=n;else for(e=0;r>e;e++)t[e][i][1]=a}for(i=0;s>i;++i)o[i]=0;return o},zero:gn});vs.layout.histogram=function(){function t(t,s){for(var a,o,l=[],h=t.map(i,this),u=n.call(this,h,s),c=r.call(this,u,h,s),s=-1,d=h.length,f=c.length-1,p=e?1:1/d;++s<f;)a=l[s]=[],a.dx=c[s+1]-(a.x=c[s]),a.y=0;if(f>0)for(s=-1;++s<d;)o=h[s],o>=u[0]&&o<=u[1]&&(a=l[vs.bisect(c,o,1,f)-1],a.y+=p,a.push(t[s]));return l}var e=!0,i=Number,n=wn,r=bn;return t.value=function(e){return arguments.length?(i=e,t):i},t.range=function(e){return arguments.length?(n=pt(e),t):n},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return xn(t,e)}:pt(e),t):r},t.frequency=function(i){return arguments.length?(e=!!i,t):e},t},vs.layout.tree=function(){function t(t,s){function a(t,e){var n=t.children,r=t._tree;if(n&&(s=n.length)){for(var s,o,h,u=n[0],c=u,d=-1;++d<s;)h=n[d],a(h,o),c=l(h,o,c),o=h;Pn(t);var f=.5*(u._tree.prelim+h._tree.prelim);e?(r.prelim=e._tree.prelim+i(t,e),r.mod=r.prelim-f):r.prelim=f}else e&&(r.prelim=e._tree.prelim+i(t,e))}function o(t,e){t.x=t._tree.prelim+e;var i=t.children;if(i&&(n=i.length)){var n,r=-1;for(e+=t._tree.mod;++r<n;)o(i[r],e)}}function l(t,e,n){if(e){for(var r,s=t,a=t,o=e,l=t.parent.children[0],h=s._tree.mod,u=a._tree.mod,c=o._tree.mod,d=l._tree.mod;o=Cn(o),s=kn(s),o&&s;)l=kn(l),a=Cn(a),a._tree.ancestor=t,r=o._tree.prelim+c-s._tree.prelim-h+i(o,s),r>0&&(An(Fn(o,t,n),t,r),h+=r,u+=r),c+=o._tree.mod,h+=s._tree.mod,d+=l._tree.mod,u+=a._tree.mod;o&&!Cn(a)&&(a._tree.thread=o,a._tree.mod+=c-u),s&&!kn(l)&&(l._tree.thread=s,l._tree.mod+=h-d,n=t)}return n}var h=e.call(this,t,s),u=h[0];En(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),a(u),o(u,-u._tree.prelim);var c=Mn(u,Tn),d=Mn(u,Sn),f=Mn(u,Dn),p=c.x-i(c,d)/2,g=d.x+i(d,c)/2,m=f.depth||1;return En(u,r?function(t){t.x*=n[0],t.y=t.depth*n[1],delete t._tree}:function(t){t.x=(t.x-p)/(g-p)*n[0],t.y=t.depth/m*n[1],delete t._tree}),h}var e=vs.layout.hierarchy().sort(null).value(null),i=_n,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},an(t,e)},vs.layout.pack=function(){function t(t,s){var a=i.call(this,t,s),o=a[0],l=r[0],h=r[1],u=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(o.x=o.y=0,En(o,function(t){t.r=+u(t.value)}),En(o,Nn),n){var c=n*(e?1:Math.max(2*o.r/l,2*o.r/h))/2;En(o,function(t){t.r+=c}),En(o,Nn),En(o,function(t){t.r-=c})}return Wn(o,l/2,h/2,e?1:1/Math.max(2*o.r/l,2*o.r/h)),a}var e,i=vs.layout.hierarchy().sort(In),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(i){return arguments.length?(e=null==i||"function"==typeof i?i:+i,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},an(t,i)},vs.layout.cluster=function(){function t(t,s){var a,o=e.call(this,t,s),l=o[0],h=0;En(l,function(t){var e=t.children;e&&e.length?(t.x=Yn(e),t.y=Bn(e)):(t.x=a?h+=i(t,a):0,t.y=0,a=t)});var u=qn(l),c=Un(l),d=u.x-i(u,c)/2,f=c.x+i(c,u)/2;return En(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(f-d)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),o}var e=vs.layout.hierarchy().sort(null).value(null),i=_n,n=[1,1],r=!1;return t.separation=function(e){return arguments.length?(i=e,t):i},t.size=function(e){return arguments.length?(r=null==(n=e),t):r?null:n},t.nodeSize=function(e){return arguments.length?(r=null!=(n=e),t):r?n:null},an(t,e)},vs.layout.treemap=function(){function t(t,e){for(var i,n,r=-1,s=t.length;++r<s;)n=(i=t[r]).value*(0>e?0:e),i.area=isNaN(n)||0>=n?0:n}function e(i){var s=i.children;if(s&&s.length){var a,o,l,h=c(i),u=[],d=s.slice(),p=1/0,g="slice"===f?h.dx:"dice"===f?h.dy:"slice-dice"===f?1&i.depth?h.dy:h.dx:Math.min(h.dx,h.dy);for(t(d,h.dx*h.dy/i.value),u.area=0;(l=d.length)>0;)u.push(a=d[l-1]),u.area+=a.area,"squarify"!==f||(o=n(u,g))<=p?(d.pop(),p=o):(u.area-=u.pop().area,r(u,g,h,!1),
g=Math.min(h.dx,h.dy),u.length=u.area=0,p=1/0);u.length&&(r(u,g,h,!0),u.length=u.area=0),s.forEach(e)}}function i(e){var n=e.children;if(n&&n.length){var s,a=c(e),o=n.slice(),l=[];for(t(o,a.dx*a.dy/e.value),l.area=0;s=o.pop();)l.push(s),l.area+=s.area,null!=s.z&&(r(l,s.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);n.forEach(i)}}function n(t,e){for(var i,n=t.area,r=0,s=1/0,a=-1,o=t.length;++a<o;)(i=t[a].area)&&(s>i&&(s=i),i>r&&(r=i));return n*=n,e*=e,n?Math.max(e*r*p/n,n/(e*s*p)):1/0}function r(t,e,i,n){var r,s=-1,a=t.length,o=i.x,h=i.y,u=e?l(t.area/e):0;if(e==i.dx){for((n||u>i.dy)&&(u=i.dy);++s<a;)r=t[s],r.x=o,r.y=h,r.dy=u,o+=r.dx=Math.min(i.x+i.dx-o,u?l(r.area/u):0);r.z=!0,r.dx+=i.x+i.dx-o,i.y+=u,i.dy-=u}else{for((n||u>i.dx)&&(u=i.dx);++s<a;)r=t[s],r.x=o,r.y=h,r.dx=u,h+=r.dy=Math.min(i.y+i.dy-h,u?l(r.area/u):0);r.z=!1,r.dy+=i.y+i.dy-h,i.x+=u,i.dx-=u}}function s(n){var r=a||o(n),s=r[0];return s.x=0,s.y=0,s.dx=h[0],s.dy=h[1],a&&o.revalue(s),t([s],s.dx*s.dy/s.value),(a?i:e)(s),d&&(a=r),r}var a,o=vs.layout.hierarchy(),l=Math.round,h=[1,1],u=null,c=Vn,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(h=t,s):h},s.padding=function(t){function e(e){var i=t.call(s,e,e.depth);return null==i?Vn(e):Gn(e,"number"==typeof i?[i,i,i,i]:i)}function i(e){return Gn(e,t)}if(!arguments.length)return u;var n;return c=null==(u=t)?Vn:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],i):i,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(d=t,a=null,s):d},s.ratio=function(t){return arguments.length?(p=t,s):p},s.mode=function(t){return arguments.length?(f=t+"",s):f},an(s,o)},vs.random={normal:function(t,e){var i=arguments.length;return 2>i&&(e=1),1>i&&(t=0),function(){var i,n,r;do i=2*Math.random()-1,n=2*Math.random()-1,r=i*i+n*n;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=vs.random.normal.apply(vs,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,i=0;t>i;i++)e+=Math.random();return e/t}}},vs.scale={};var Do={floor:gt,ceil:gt};vs.scale.linear=function(){return tr([0,1],[0,1],Mi,!1)},vs.scale.log=function(){return ar(vs.scale.linear().domain([0,1]),10,!0,[1,10])};var Eo=vs.format(".0e"),Po={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};vs.scale.pow=function(){return or(vs.scale.linear(),1,[0,1])},vs.scale.sqrt=function(){return vs.scale.pow().exponent(.5)},vs.scale.ordinal=function(){return hr([],{t:"range",a:[[]]})},vs.scale.category10=function(){return vs.scale.ordinal().range(Ao)},vs.scale.category20=function(){return vs.scale.ordinal().range(Fo)},vs.scale.category20b=function(){return vs.scale.ordinal().range(Io)},vs.scale.category20c=function(){return vs.scale.ordinal().range(zo)};var Ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),Fo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),Io=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),zo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);vs.scale.quantile=function(){return ur([],[])},vs.scale.quantize=function(){return cr(0,1,[0,1])},vs.scale.threshold=function(){return dr([.5],[0,1])},vs.scale.identity=function(){return fr([0,1])},vs.svg.arc=function(){function t(){var t=e.apply(this,arguments),s=i.apply(this,arguments),a=n.apply(this,arguments)+Lo,o=r.apply(this,arguments)+Lo,l=(a>o&&(l=a,a=o,o=l),o-a),h=Vs>l?"0":"1",u=Math.cos(a),c=Math.sin(a),d=Math.cos(o),f=Math.sin(o);return l>=Ro?t?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":t?"M"+s*u+","+s*c+"A"+s+","+s+" 0 "+h+",1 "+s*d+","+s*f+"L"+t*d+","+t*f+"A"+t+","+t+" 0 "+h+",0 "+t*u+","+t*c+"Z":"M"+s*u+","+s*c+"A"+s+","+s+" 0 "+h+",1 "+s*d+","+s*f+"L0,0Z"}var e=pr,i=gr,n=mr,r=vr;return t.innerRadius=function(i){return arguments.length?(e=pt(i),t):e},t.outerRadius=function(e){return arguments.length?(i=pt(e),t):i},t.startAngle=function(e){return arguments.length?(n=pt(e),t):n},t.endAngle=function(e){return arguments.length?(r=pt(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+i.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Lo;return[Math.cos(s)*t,Math.sin(s)*t]},t};var Lo=-$s,Ro=Gs-Xs;vs.svg.line.radial=function(){var t=Ye(yr);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Xe.reverse=Ze,Ze.reverse=Xe,vs.svg.area=function(){return br(gt)},vs.svg.area.radial=function(){var t=br(yr);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},vs.svg.chord=function(){function t(t,o){var l=e(this,s,t,o),h=e(this,a,t,o);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(i(l,h)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,h.r,h.p0)+n(h.r,h.p1,h.a1-h.a0)+r(h.r,h.p1,l.r,l.p0))+"Z"}function e(t,e,i,n){var r=e.call(t,i,n),s=o.call(t,r,n),a=l.call(t,r,n)+Lo,u=h.call(t,r,n)+Lo;return{r:s,a0:a,a1:u,p0:[s*Math.cos(a),s*Math.sin(a)],p1:[s*Math.cos(u),s*Math.sin(u)]}}function i(t,e){return t.a0==e.a0&&t.a1==e.a1}function n(t,e,i){return"A"+t+","+t+" 0 "+ +(i>Vs)+",1 "+e}function r(t,e,i,n){return"Q 0,0 "+n}var s=Ie,a=ze,o=xr,l=mr,h=vr;return t.radius=function(e){return arguments.length?(o=pt(e),t):o},t.source=function(e){return arguments.length?(s=pt(e),t):s},t.target=function(e){return arguments.length?(a=pt(e),t):a},t.startAngle=function(e){return arguments.length?(l=pt(e),t):l},t.endAngle=function(e){return arguments.length?(h=pt(e),t):h},t},vs.svg.diagonal=function(){function t(t,r){var s=e.call(this,t,r),a=i.call(this,t,r),o=(s.y+a.y)/2,l=[s,{x:s.x,y:o},{x:a.x,y:o},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Ie,i=ze,n=wr;return t.source=function(i){return arguments.length?(e=pt(i),t):e},t.target=function(e){return arguments.length?(i=pt(e),t):i},t.projection=function(e){return arguments.length?(n=e,t):n},t},vs.svg.diagonal.radial=function(){var t=vs.svg.diagonal(),e=wr,i=t.projection;return t.projection=function(t){return arguments.length?i(_r(e=t)):e},t},vs.svg.symbol=function(){function t(t,n){return(No.get(e.call(this,t,n))||Mr)(i.call(this,t,n))}var e=Cr,i=kr;return t.type=function(i){return arguments.length?(e=pt(i),t):e},t.size=function(e){return arguments.length?(i=pt(e),t):i},t};var No=vs.map({circle:Mr,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*jo)),i=e*jo;return"M0,"+-e+"L"+i+",0 0,"+e+" "+-i+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Wo),i=e*Wo/2;return"M0,"+i+"L"+e+","+-i+" "+-e+","+-i+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Wo),i=e*Wo/2;return"M0,"+-i+"L"+e+","+i+" "+-e+","+i+"Z"}});vs.svg.symbolTypes=No.keys();var Ho,Oo,Wo=Math.sqrt(3),jo=Math.tan(30*Qs),Bo=[],Yo=0;Bo.call=Hs.call,Bo.empty=Hs.empty,Bo.node=Hs.node,Bo.size=Hs.size,vs.transition=function(t){return arguments.length?Ho?t.transition():t:js.transition()},vs.transition.prototype=Bo,Bo.select=function(t){var e,i,n,r=this.id,s=[];t=g(t);for(var a=-1,o=this.length;++a<o;){s.push(e=[]);for(var l=this[a],h=-1,u=l.length;++h<u;)(n=l[h])&&(i=t.call(n,n.__data__,h,a))?("__data__"in n&&(i.__data__=n.__data__),Er(i,h,r,n.__transition__[r]),e.push(i)):e.push(null)}return Sr(s,r)},Bo.selectAll=function(t){var e,i,n,r,s,a=this.id,o=[];t=m(t);for(var l=-1,h=this.length;++l<h;)for(var u=this[l],c=-1,d=u.length;++c<d;)if(n=u[c]){s=n.__transition__[a],i=t.call(n,n.__data__,c,l),o.push(e=[]);for(var f=-1,p=i.length;++f<p;)(r=i[f])&&Er(r,f,a,s),e.push(r)}return Sr(o,a)},Bo.filter=function(t){var e,i,n,r=[];"function"!=typeof t&&(t=S(t));for(var s=0,a=this.length;a>s;s++){r.push(e=[]);for(var i=this[s],o=0,l=i.length;l>o;o++)(n=i[o])&&t.call(n,n.__data__,o)&&e.push(n)}return Sr(r,this.id)},Bo.tween=function(t,e){var i=this.id;return arguments.length<2?this.node().__transition__[i].tween.get(t):D(this,null==e?function(e){e.__transition__[i].tween.remove(t)}:function(n){n.__transition__[i].tween.set(t,e)})},Bo.attr=function(t,e){function i(){this.removeAttribute(o)}function n(){this.removeAttributeNS(o.space,o.local)}function r(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(o);return i!==t&&(e=a(i,t),function(t){this.setAttribute(o,e(t))})})}function s(t){return null==t?n:(t+="",function(){var e,i=this.getAttributeNS(o.space,o.local);return i!==t&&(e=a(i,t),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?$i:Mi,o=vs.ns.qualify(t);return Tr(this,"attr."+t,e,o.local?s:r)},Bo.attrTween=function(t,e){function i(t,i){var n=e.call(this,t,i,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}}function n(t,i){var n=e.call(this,t,i,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}var r=vs.ns.qualify(t);return this.tween("attr."+t,r.local?n:i)},Bo.style=function(t,e,i){function n(){this.style.removeProperty(t)}function r(e){return null==e?n:(e+="",function(){var n,r=_s.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(n=Mi(r,e),function(e){this.style.setProperty(t,n(e),i)})})}var s=arguments.length;if(3>s){if("string"!=typeof t){2>s&&(e="");for(i in t)this.style(i,t[i],e);return this}i=""}return Tr(this,"style."+t,e,r)},Bo.styleTween=function(t,e,i){function n(n,r){var s=e.call(this,n,r,_s.getComputedStyle(this,null).getPropertyValue(t));return s&&function(e){this.style.setProperty(t,s(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,n)},Bo.text=function(t){return Tr(this,"text",t,Dr)},Bo.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},Bo.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=vs.ease.apply(vs,arguments)),D(this,function(i){i.__transition__[e].ease=t}))},Bo.delay=function(t){var e=this.id;return D(this,"function"==typeof t?function(i,n,r){i.__transition__[e].delay=+t.call(i,i.__data__,n,r)}:(t=+t,function(i){i.__transition__[e].delay=t}))},Bo.duration=function(t){var e=this.id;return D(this,"function"==typeof t?function(i,n,r){i.__transition__[e].duration=Math.max(1,t.call(i,i.__data__,n,r))}:(t=Math.max(1,t),function(i){i.__transition__[e].duration=t}))},Bo.each=function(t,e){var i=this.id;if(arguments.length<2){var n=Oo,r=Ho;Ho=i,D(this,function(e,n,r){Oo=e.__transition__[i],t.call(e,e.__data__,n,r)}),Oo=n,Ho=r}else D(this,function(n){var r=n.__transition__[i];(r.event||(r.event=vs.dispatch("start","end"))).on(t,e)});return this},Bo.transition=function(){for(var t,e,i,n,r=this.id,s=++Yo,a=[],o=0,l=this.length;l>o;o++){a.push(t=[]);for(var e=this[o],h=0,u=e.length;u>h;h++)(i=e[h])&&(n=Object.create(i.__transition__[r]),n.delay+=n.duration,Er(i,h,s,n)),t.push(i)}return Sr(a,s)},vs.svg.axis=function(){function t(t){t.each(function(){var t,h=vs.select(this),u=this.__chart__||i,c=this.__chart__=i.copy(),d=null==l?c.ticks?c.ticks.apply(c,o):c.domain():l,f=null==e?c.tickFormat?c.tickFormat.apply(c,o):gt:e,p=h.selectAll(".tick").data(d,c),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Xs),m=vs.transition(p.exit()).style("opacity",Xs).remove(),v=vs.transition(p).style("opacity",1),y=Xn(c),b=h.selectAll(".domain").data([0]),x=(b.enter().append("path").attr("class","domain"),vs.transition(b));g.append("line"),g.append("text");var w=g.select("line"),_=v.select("line"),k=p.select("text").text(f),C=g.select("text"),M=v.select("text");switch(n){case"bottom":t=Pr,w.attr("y2",r),C.attr("y",Math.max(r,0)+a),_.attr("x2",0).attr("y2",r),M.attr("x",0).attr("y",Math.max(r,0)+a),k.attr("dy",".71em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":t=Pr,w.attr("y2",-r),C.attr("y",-(Math.max(r,0)+a)),_.attr("x2",0).attr("y2",-r),M.attr("x",0).attr("y",-(Math.max(r,0)+a)),k.attr("dy","0em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+-s+"V0H"+y[1]+"V"+-s);break;case"left":t=Ar,w.attr("x2",-r),C.attr("x",-(Math.max(r,0)+a)),_.attr("x2",-r).attr("y2",0),M.attr("x",-(Math.max(r,0)+a)).attr("y",0),k.attr("dy",".32em").style("text-anchor","end"),x.attr("d","M"+-s+","+y[0]+"H0V"+y[1]+"H"+-s);break;case"right":t=Ar,w.attr("x2",r),C.attr("x",Math.max(r,0)+a),_.attr("x2",r).attr("y2",0),M.attr("x",Math.max(r,0)+a).attr("y",0),k.attr("dy",".32em").style("text-anchor","start"),x.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var S=c.rangeBand()/2,T=function(t){return c(t)+S};g.call(t,T),v.call(t,T)}else g.call(t,u),v.call(t,c),m.call(t,c)})}var e,i=vs.scale.linear(),n=qo,r=6,s=6,a=3,o=[10],l=null;return t.scale=function(e){return arguments.length?(i=e,t):i},t.orient=function(e){return arguments.length?(n=e in Uo?e+"":qo,t):n},t.ticks=function(){return arguments.length?(o=arguments,t):o},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(i){return arguments.length?(e=i,t):e},t.tickSize=function(e){var i=arguments.length;return i?(r=+e,s=+arguments[i-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(s=+e,t):s},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var qo="bottom",Uo={top:1,right:1,bottom:1,left:1};vs.svg.brush=function(){function t(s){s.each(function(){var s=vs.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=s.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=s.selectAll(".resize").data(m,gt);o.exit().remove(),o.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Vo[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",t.empty()?"none":null);var u,c=vs.transition(s),d=vs.transition(a);l&&(u=Xn(l),d.attr("x",u[0]).attr("width",u[1]-u[0]),i(c)),h&&(u=Xn(h),d.attr("y",u[0]).attr("height",u[1]-u[0]),n(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+u[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",u[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function n(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){32==vs.event.keyCode&&(D||(b=null,P[0]-=u[1],P[1]-=d[1],D=2),c())}function f(){32==vs.event.keyCode&&2==D&&(P[0]+=u[1],P[1]+=d[1],D=0,c())}function m(){var t=vs.mouse(w),r=!1;x&&(t[0]+=x[0],t[1]+=x[1]),D||(vs.event.altKey?(b||(b=[(u[0]+u[1])/2,(d[0]+d[1])/2]),P[0]=u[+(t[0]<b[0])],P[1]=d[+(t[1]<b[1])]):b=null),S&&v(t,l,0)&&(i(C),r=!0),T&&v(t,h,1)&&(n(C),r=!0),r&&(e(C),k({type:"brush",mode:D?"move":"resize"}))}function v(t,e,i){var n,r,o=Xn(e),l=o[0],h=o[1],c=P[i],f=i?d:u,m=f[1]-f[0];return D&&(l-=c,h-=m+c),n=(i?g:p)?Math.max(l,Math.min(h,t[i])):t[i],D?r=(n+=c)+m:(b&&(c=Math.max(l,Math.min(h,2*b[i]-n))),n>c?(r=n,n=c):r=c),f[0]!=n||f[1]!=r?(i?a=null:s=null,f[0]=n,f[1]=r,!0):void 0}function y(){m(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),vs.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),k({type:"brushend"})}var b,x,w=this,_=vs.select(vs.event.target),k=o.of(w,arguments),C=vs.select(w),M=_.datum(),S=!/^(n|s)$/.test(M)&&l,T=!/^(e|w)$/.test(M)&&h,D=_.classed("extent"),E=L(),P=vs.mouse(w),A=vs.select(_s).on("keydown.brush",r).on("keyup.brush",f);if(vs.event.changedTouches?A.on("touchmove.brush",m).on("touchend.brush",y):A.on("mousemove.brush",m).on("mouseup.brush",y),C.interrupt().selectAll("*").interrupt(),D)P[0]=u[0]-P[0],P[1]=d[0]-P[1];else if(M){var F=+/w$/.test(M),I=+/^n/.test(M);x=[u[1-F]-P[0],d[1-I]-P[1]],P[0]=u[F],P[1]=d[I]}else vs.event.altKey&&(b=P.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),vs.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),m()}var s,a,o=f(t,"brushstart","brush","brushend"),l=null,h=null,u=[0,0],d=[0,0],p=!0,g=!0,m=Go[0];return t.event=function(t){t.each(function(){var t=o.of(this,arguments),e={x:u,y:d,i:s,j:a},i=this.__chart__||e;this.__chart__=e,Ho?vs.select(this).transition().each("start.brush",function(){s=i.i,a=i.j,u=i.x,d=i.y,t({type:"brushstart"})}).tween("brush:brush",function(){var i=Si(u,e.x),n=Si(d,e.y);return s=a=null,function(r){u=e.x=i(r),d=e.y=n(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=e.i,a=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,m=Go[!l<<1|!h],t):l},t.y=function(e){return arguments.length?(h=e,m=Go[!l<<1|!h],t):h},t.clamp=function(e){return arguments.length?(l&&h?(p=!!e[0],g=!!e[1]):l?p=!!e:h&&(g=!!e),t):l&&h?[p,g]:l?p:h?g:null},t.extent=function(e){var i,n,r,o,c;return arguments.length?(l&&(i=e[0],n=e[1],h&&(i=i[0],n=n[0]),s=[i,n],l.invert&&(i=l(i),n=l(n)),i>n&&(c=i,i=n,n=c),(i!=u[0]||n!=u[1])&&(u=[i,n])),h&&(r=e[0],o=e[1],l&&(r=r[1],o=o[1]),a=[r,o],h.invert&&(r=h(r),o=h(o)),r>o&&(c=r,r=o,o=c),(r!=d[0]||o!=d[1])&&(d=[r,o])),t):(l&&(s?(i=s[0],n=s[1]):(i=u[0],n=u[1],l.invert&&(i=l.invert(i),n=l.invert(n)),i>n&&(c=i,i=n,n=c))),h&&(a?(r=a[0],o=a[1]):(r=d[0],o=d[1],h.invert&&(r=h.invert(r),o=h.invert(o)),r>o&&(c=r,r=o,o=c))),l&&h?[[i,r],[n,o]]:l?[i,n]:h&&[r,o])},t.clear=function(){return t.empty()||(u=[0,0],d=[0,0],s=a=null),t},t.empty=function(){return!!l&&u[0]==u[1]||!!h&&d[0]==d[1]},vs.rebind(t,o,"on")};var Vo={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Go=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$o=vs.time={},Xo=Date,Zo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Fr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Qo.setUTCDate.apply(this._,arguments)},setDay:function(){Qo.setUTCDay.apply(this._,arguments)},setFullYear:function(){Qo.setUTCFullYear.apply(this._,arguments)},setHours:function(){Qo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Qo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Qo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Qo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Qo.setUTCSeconds.apply(this._,arguments)},setTime:function(){Qo.setTime.apply(this._,arguments)}};var Qo=Date.prototype,Ko="%a %b %e %X %Y",Jo="%m/%d/%Y",tl="%H:%M:%S",el=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],il=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nl=["January","February","March","April","May","June","July","August","September","October","November","December"],rl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$o.year=Ir(function(t){return t=$o.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),$o.years=$o.year.range,$o.years.utc=$o.year.utc.range,$o.day=Ir(function(t){var e=new Xo(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),$o.days=$o.day.range,$o.days.utc=$o.day.utc.range,$o.dayOfYear=function(t){var e=$o.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},Zo.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var i=$o[t]=Ir(function(t){return(t=$o.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var i=$o.year(t).getDay();return Math.floor(($o.dayOfYear(t)+(i+e)%7)/7)-(i!==e)});$o[t+"s"]=i.range,$o[t+"s"].utc=i.utc.range,$o[t+"OfYear"]=function(t){var i=$o.year(t).getDay();return Math.floor(($o.dayOfYear(t)+(i+e)%7)/7)}}),$o.week=$o.sunday,$o.weeks=$o.sunday.range,$o.weeks.utc=$o.sunday.utc.range,$o.weekOfYear=$o.sundayOfYear,$o.format=Lr;var sl=Nr(el),al=Hr(el),ol=Nr(il),ll=Hr(il),hl=Nr(nl),ul=Hr(nl),cl=Nr(rl),dl=Hr(rl),fl=/^%/,pl={"-":"",_:" ",0:"0"},gl={a:function(t){return il[t.getDay()]},A:function(t){return el[t.getDay()]},b:function(t){return rl[t.getMonth()]},B:function(t){return nl[t.getMonth()]},c:Lr(Ko),d:function(t,e){return Or(t.getDate(),e,2)},e:function(t,e){return Or(t.getDate(),e,2)},H:function(t,e){return Or(t.getHours(),e,2)},I:function(t,e){return Or(t.getHours()%12||12,e,2)},j:function(t,e){return Or(1+$o.dayOfYear(t),e,3)},L:function(t,e){return Or(t.getMilliseconds(),e,3)},m:function(t,e){return Or(t.getMonth()+1,e,2)},M:function(t,e){return Or(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Or(t.getSeconds(),e,2)},U:function(t,e){return Or($o.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Or($o.mondayOfYear(t),e,2)},x:Lr(Jo),X:Lr(tl),y:function(t,e){return Or(t.getFullYear()%100,e,2)},Y:function(t,e){return Or(t.getFullYear()%1e4,e,4)},Z:ls,"%":function(){return"%"}},ml={a:Wr,A:jr,b:Ur,B:Vr,c:Gr,d:es,e:es,H:ns,I:ns,j:is,L:as,m:ts,M:rs,p:os,S:ss,U:Yr,w:Br,W:qr,x:$r,X:Xr,y:Qr,Y:Zr,Z:Kr,"%":hs},vl=/^\s*\d+/,yl=vs.map({am:0,pm:1});Lr.utc=us;var bl=us("%Y-%m-%dT%H:%M:%S.%LZ");Lr.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?cs:bl,cs.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},cs.toString=bl.toString,$o.second=Ir(function(t){return new Xo(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),$o.seconds=$o.second.range,$o.seconds.utc=$o.second.utc.range,$o.minute=Ir(function(t){return new Xo(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),$o.minutes=$o.minute.range,$o.minutes.utc=$o.minute.utc.range,$o.hour=Ir(function(t){var e=t.getTimezoneOffset()/60;return new Xo(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),$o.hours=$o.hour.range,$o.hours.utc=$o.hour.utc.range,$o.month=Ir(function(t){return t=$o.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),$o.months=$o.month.range,$o.months.utc=$o.month.utc.range;var xl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],wl=[[$o.second,1],[$o.second,5],[$o.second,15],[$o.second,30],[$o.minute,1],[$o.minute,5],[$o.minute,15],[$o.minute,30],[$o.hour,1],[$o.hour,3],[$o.hour,6],[$o.hour,12],[$o.day,1],[$o.day,2],[$o.week,1],[$o.month,1],[$o.month,3],[$o.year,1]],_l=[[Lr("%Y"),Ut],[Lr("%B"),function(t){return t.getMonth()}],[Lr("%b %d"),function(t){return 1!=t.getDate()}],[Lr("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[Lr("%I %p"),function(t){return t.getHours()}],[Lr("%I:%M"),function(t){return t.getMinutes()}],[Lr(":%S"),function(t){return t.getSeconds()}],[Lr(".%L"),function(t){return t.getMilliseconds()}]],kl=ps(_l);wl.year=$o.year,$o.scale=function(){return ds(vs.scale.linear(),wl,kl)};var Cl={range:function(t,e,i){return vs.range(+t,+e,i).map(fs)}},Ml=wl.map(function(t){return[t[0].utc,t[1]]}),Sl=[[us("%Y"),Ut],[us("%B"),function(t){return t.getUTCMonth()}],[us("%b %d"),function(t){return 1!=t.getUTCDate()}],[us("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[us("%I %p"),function(t){return t.getUTCHours()}],[us("%I:%M"),function(t){return t.getUTCMinutes()}],[us(":%S"),function(t){return t.getUTCSeconds()}],[us(".%L"),function(t){return t.getUTCMilliseconds()}]],Tl=ps(Sl);return Ml.year=$o.year.utc,$o.scale.utc=function(){return ds(vs.scale.linear(),Ml,Tl)},vs.text=mt(function(t){return t.responseText}),vs.json=function(t,e){return vt(t,"application/json",gs,e)},vs.html=function(t,e){return vt(t,"text/html",ms,e)},vs.xml=mt(function(t){return t.responseXML}),vs}(),function(t,e){"function"==typeof define&&define.amd?define(["d3"],function(i){return t.Rickshaw=e(i)}):"object"==typeof exports?module.exports=e(require("d3")):t.Rickshaw=e(d3)}(this,function(t){var e={namespace:function(t){for(var i=t.split("."),n=e,r=1,s=i.length;r<s;r++){var a=i[r];n[a]=n[a]||{},n=n[a]}return n},keys:function(t){var e=[];for(var i in t)e.push(i);return e},extend:function(t,e){for(var i in e)t[i]=e[i];return t},clone:function(t){return JSON.parse(JSON.stringify(t))}};return function(t){function e(t){return c.call(t)===y}function i(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function n(t){if(r(t)!==v)throw new TypeError;var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}function r(t){switch(t){case null:return d;case void 0:return f}var e=typeof t;switch(e){case"boolean":return p;case"number":return g;case"string":return m}return v}function s(t){return"undefined"==typeof t}function a(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function o(t,e){var i=t;return function(){var t=l([u(i,this)],arguments);return e.apply(this,t)}}function l(t,e){for(var i=t.length,n=e.length;n--;)t[i+n]=e[n];return t}function h(t,e){return t=b.call(t,0),l(t,e)}function u(t,e){if(arguments.length<2&&s(arguments[0]))return this;var i=t,n=b.call(arguments,2);return function(){var t=h(n,arguments);return i.apply(e,t)}}var c=Object.prototype.toString,d="Null",f="Undefined",p="Boolean",g="Number",m="String",v="Object",y="[object Function]",b=Array.prototype.slice,x=function(){},w=function(){function t(){}function r(){function n(){this.initialize.apply(this,arguments)}var r=null,s=[].slice.apply(arguments);if(e(s[0])&&(r=s.shift()),i(n,w.Methods),n.superclass=r,n.subclasses=[],r){t.prototype=r.prototype,n.prototype=new t;try{r.subclasses.push(n)}catch(t){}}for(var a=0,o=s.length;a<o;a++)n.addMethods(s[a]);return n.prototype.initialize||(n.prototype.initialize=x),n.prototype.constructor=n,n}function s(t){var i=this.superclass&&this.superclass.prototype,r=n(t);l&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var s=0,h=r.length;s<h;s++){var c=r[s],d=t[c];if(i&&e(d)&&"$super"==a(d)[0]){var f=d;d=o(function(t){return function(){return i[t].apply(this,arguments)}}(c),f),d.valueOf=u(f.valueOf,f),d.toString=u(f.toString,f)}this.prototype[c]=d}return this}var l=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();return{create:r,Methods:{addMethods:s}}}();t.exports?t.exports.Class=w:t.Class=w}(e),e.namespace("Rickshaw.Compat.ClassList"),e.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";var e="classList",i="prototype",n=(t.HTMLElement||t.Element)[i],r=Object,s=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[i].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},h=function(t){for(var e=s.call(t.className),i=e?e.split(/\s+/):[],n=0,r=i.length;n<r;n++)this.push(i[n]);this._updateClassName=function(){t.className=this.toString()}},u=h[i]=[],c=function(){return new h(this)};if(o[i]=Error[i],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",l(this,t)!==-1},u.add=function(t){t+="",l(this,t)===-1&&(this.push(t),this._updateClassName())},u.remove=function(t){t+="";var e=l(this,t);e!==-1&&(this.splice(e,1),this._updateClassName())},u.toggle=function(t){t+="",l(this,t)===-1?this.add(t):this.remove(t)},u.toString=function(){return this.join(" ")},r.defineProperty){var d={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(n,e,d)}catch(t){t.number===-2146823252&&(d.enumerable=!1,r.defineProperty(n,e,d))}}else r[i].__defineGetter__&&n.__defineGetter__(e,c)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new e.Compat.ClassList,e.namespace("Rickshaw.Graph"),e.Graph=function(i){var n=this;this.initialize=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==e.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=e.element,this.series=e.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(e),this.validateSeries(e.series),this.series.active=function(){return n.series.filter(function(t){return!t.disabled})},this.setSize({width:e.width,height:e.height}),this.element.classList.add("rickshaw_graph"),this.vis=t.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var t in e.Graph.Renderer)if(t&&e.Graph.Renderer.hasOwnProperty(t)){var i=e.Graph.Renderer[t];i&&i.prototype&&i.prototype.render&&n.registerRenderer(new i({graph:n}))}},this.validateSeries=function(t){if(!(Array.isArray(t)||t instanceof e.Series)){var i=Object.prototype.toString.apply(t);throw"series is not an array: "+i}t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!Array.isArray(t.data))throw"series data is not an array: "+JSON.stringify(t.data);if(t.data.length>0){var e=t.data[0].x,i=t.data[0].y;if("number"!=typeof e||"number"!=typeof i&&null!==i)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof i}if(t.data.length>=3&&(t.data[2].x<t.data[1].x||t.data[1].x<t.data[0].x||t.data[t.data.length-1].x<t.data[0].x))throw"series data needs to be sorted on x values for series name: "+t.name},this)},this.dataDomain=function(){var e=this.series.map(function(t){return t.data}),i=t.min(e.map(function(t){return t[0].x})),n=t.max(e.map(function(t){return t[t.length-1].x}));return[i,n]},this.discoverRange=function(){var e=this.renderer.domain();this.x=(this.xScale||t.scale.linear()).copy().domain(e.x).range([0,this.width]),this.y=(this.yScale||t.scale.linear()).copy().domain(e.y).range([this.height,0]),this.x.magnitude=t.scale.linear().domain([e.x[0]-e.x[0],e.x[1]-e.x[0]]).range([0,this.width]),this.y.magnitude=t.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])},this.render=function(){this.stackData();this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var i=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this),r=this.preserve;
r||this.series.forEach(function(t){t.scale&&(r=!0)}),i=r?e.clone(i):i,this.series.active().forEach(function(t,e){if(t.scale){var n=i[e];n&&n.forEach(function(e){e.y=t.scale(e.y)})}}),this.stackData.hooks.data.forEach(function(t){i=t.f.apply(n,[i])});var s;if(!this.renderer.unstack){this._validateStackable();var a=t.layout.stack();a.offset(n.offset),s=a(i)}s=s||i,this.renderer.unstack&&s.forEach(function(t){t.forEach(function(t){t.y0=void 0===t.y0?0:t.y0})}),this.stackData.hooks.after.forEach(function(t){s=t.f.apply(n,[i])});var o=0;return this.series.forEach(function(t){t.disabled||(t.stack=s[o++])}),this.stackedData=s,s},this._validateStackable=function(){var t,e=this.series;e.forEach(function(e){if(t=t||e.data.length,t&&e.data.length!=t)throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.onConfigure=function(t){this.configureCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(t){this.config=this.config||{},(t.width||t.height)&&this.setSize(t),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this),e.keys(this.config).forEach(function(t){this[t]=this.config[t]},this),"stack"in t&&(t.unstack=!t.stack);var i=t.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(i,t),this.configureCallbacks.forEach(function(e){e(t)})},this.setRenderer=function(t,e){if("function"==typeof t)this.renderer=new t({graph:n}),this.registerRenderer(this.renderer);else{if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t]}"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if(t=t||{},void 0!==typeof window)var e=window.getComputedStyle(this.element,null),i=parseInt(e.getPropertyValue("width"),10),n=parseInt(e.getPropertyValue("height"),10);this.width=t.width||i||400,this.height=t.height||n||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(i)},e.namespace("Rickshaw.Fixtures.Color"),e.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},e.namespace("Rickshaw.Fixtures.RandomData"),e.Fixtures.RandomData=function(t){t=t||1;var e=200,i=Math.floor((new Date).getTime()/1e3);this.addData=function(n){var r=100*Math.random()+15+e,s=n[0].length,a=1;n.forEach(function(e){var n=20*Math.random(),o=r/25+a++ +15*(Math.cos(s*a*11/960)+2)+7*(Math.cos(s/7)+2)+1*(Math.cos(s/17)+2);e.push({x:s*t+i,y:o+n})}),e=.85*r},this.removeData=function(e){e.forEach(function(t){t.shift()}),i+=t}},e.namespace("Rickshaw.Fixtures.Time"),e.Fixtures.Time=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getUTCMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var i,n,r;if("month"==e.name){if(i=new Date(1e3*t),n=Date.UTC(i.getUTCFullYear(),i.getUTCMonth())/1e3,n==t)return t;r=i.getUTCFullYear();var s=i.getUTCMonth();return 11==s?(s=0,r+=1):s+=1,Date.UTC(r,s)/1e3}return"year"==e.name?(i=new Date(1e3*t),n=Date.UTC(i.getUTCFullYear(),0)/1e3,n==t?t:(r=i.getUTCFullYear()+1,Date.UTC(r,0)/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Time.Local"),e.Fixtures.Time.Local=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getMilliseconds()+"ms"}}],this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()},this.formatDate=function(e){return t.time.format("%b %e")(e)},this.formatTime=function(t){return t.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var i,n,r;if("day"==e.name){var s=new Date(1e3*(t+e.seconds-1)),a=new Date(0);return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a.setDate(s.getDate()),a.setMonth(s.getMonth()),a.setFullYear(s.getFullYear()),a.getTime()/1e3}if("month"==e.name){if(i=new Date(1e3*t),n=new Date(i.getFullYear(),i.getMonth()).getTime()/1e3,n==t)return t;r=i.getFullYear();var o=i.getMonth();return 11==o?(o=0,r+=1):o+=1,new Date(r,o).getTime()/1e3}return"year"==e.name?(i=new Date(1e3*t),n=new Date(i.getUTCFullYear(),0).getTime()/1e3,n==t?t:(r=i.getFullYear()+1,new Date(r,0).getTime()/1e3)):Math.ceil(t/e.seconds)*e.seconds}},e.namespace("Rickshaw.Fixtures.Number"),e.Fixtures.Number.formatKMBT=function(t){var e=Math.abs(t);return e>=1e12?t/1e12+"T":e>=1e9?t/1e9+"B":e>=1e6?t/1e6+"M":e>=1e3?t/1e3+"K":e<1&&t>0?t.toFixed(2):0===e?"":t},e.Fixtures.Number.formatBase1024KMGTP=function(t){var e=Math.abs(t);return e>=0x4000000000000?t/0x4000000000000+"P":e>=1099511627776?t/1099511627776+"T":e>=1073741824?t/1073741824+"G":e>=1048576?t/1048576+"M":e>=1024?t/1024+"K":e<1&&t>0?t.toFixed(2):0===e?"":t},e.namespace("Rickshaw.Color.Palette"),e.Color.Palette=function(i){var n=new e.Fixtures.Color;if(i=i||{},this.schemes={},this.scheme=n.schemes[i.scheme]||i.scheme||n.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,i.interpolatedStopCount){var r,s,a=this.scheme.length-1,o=[];for(r=0;r<a;r++){o.push(this.scheme[r]);var l=t.interpolateHsl(this.scheme[r],this.scheme[r+1]);for(s=1;s<i.interpolatedStopCount;s++)o.push(l(1/i.interpolatedStopCount*s))}o.push(this.scheme[this.scheme.length-1]),this.scheme=o}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(e=t.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(e),e}}},e.namespace("Rickshaw.Graph.Ajax"),e.Graph.Ajax=e.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new e.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,i=t.series;return t.series?(i.forEach(function(t){var i=t.key||t.name;if(!i)throw"series needs a key or a name";e.forEach(function(e){var n=e.key||e.name;if(!n)throw"data needs a key or a name";if(i==n){var r=["color","name","data"];r.forEach(function(i){e[i]&&(t[i]=e[i])})}})}),i):e}}),e.namespace("Rickshaw.Graph.Annotate"),e.Graph.Annotate=function(t){this.graph=t.graph;this.elements={intimeline:t.element};var i=this;this.data={},this.elements.intimeline.classList.add("rickshaw_annotation_intimeline"),this.add=function(t,e,n){i.data[t]=i.data[t]||{boxes:[]},i.data[t].boxes.push({content:e,end:n})},this.update=function(){e.keys(i.data).forEach(function(t){var e=i.data[t],n=i.graph.x(t);if(n<0||n>i.graph.x.range()[1])return e.element&&(e.line.classList.add("offscreen"),e.element.style.display="none"),void e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!e.element){var r=e.element=document.createElement("div");r.classList.add("annotation"),this.elements.intimeline.appendChild(r),r.addEventListener("click",function(){r.classList.toggle("active"),e.line.classList.toggle("active"),e.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}e.element.style.left=n+"px",e.element.style.display="block",e.boxes.forEach(function(t){var r=t.element;if(r||(r=t.element=document.createElement("div"),r.classList.add("content"),r.innerHTML=t.content,e.element.appendChild(r),e.line=document.createElement("div"),e.line.classList.add("annotation_line"),i.graph.element.appendChild(e.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),i.graph.element.appendChild(t.rangeElement))),t.end){var s=n,a=Math.min(i.graph.x(t.end),i.graph.x.range()[1]);s>a&&(a=n,s=Math.max(i.graph.x(t.end),i.graph.x.range()[0]));var o=a-s;t.rangeElement.style.left=s+"px",t.rangeElement.style.width=o+"px",t.rangeElement.classList.remove("offscreen")}e.line.classList.remove("offscreen"),e.line.style.left=n+"px"})},this)},this.graph.onUpdate(function(){i.update()})},e.namespace("Rickshaw.Graph.Axis.Time"),e.Graph.Axis.Time=function(t){var i=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var n=t.timeFixture||new e.Fixtures.Time;this.appropriateTimeUnit=function(){var t,e=n.units,i=this.graph.x.domain(),r=i[1]-i[0];return e.forEach(function(e){Math.floor(r/e.seconds)>=2&&(t=t||e)}),t||n.units[n.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),i=Math.ceil((t[1]-t[0])/e.seconds),r=t[0],s=[],a=0;a<i;a++){var o=n.ceil(r,e);r=o+e.seconds/2,s.push({value:o,unit:e})}return s},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[];var t=this.tickOffsets();t.forEach(function(t){if(!(i.graph.x(t.value)>i.graph.x.range()[1])){var e=document.createElement("div");e.style.left=i.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(i.ticksTreatment);var n=document.createElement("div");n.classList.add("title"),n.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(n),i.graph.element.appendChild(e),i.elements.push(e)}})},this.graph.onUpdate(function(){i.render()})},e.namespace("Rickshaw.Graph.Axis.X"),e.Graph.Axis.X=function(e){var i=this,n=.1;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"top",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=t.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){i.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",this.width*(1+n));var e=Math.floor(this.width*n/2);this.element.style.left=-1*e+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var i=t.svg.axis().scale(this.graph.x).orient(this.orientation);i.tickFormat(e.tickFormat||function(t){return t}),this.tickValues&&i.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var r,s=Math.floor(this.width*n/2)||0;if("top"==this.orientation){var a=this.height||this.graph.height;r="translate("+s+","+a+")"}else r="translate("+s+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",r).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var o=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(i.ticks(this.ticks).tickSubdivide(0).tickSize(o)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var i=window.getComputedStyle(t,null),r=parseInt(i.getPropertyValue("height"),10);if(!e.auto)var s=parseInt(i.getPropertyValue("width"),10)}this.width=(e.width||s||this.graph.width)*(1+n),this.height=e.height||r||40},this.initialize(e)},e.namespace("Rickshaw.Graph.Axis.Y"),e.Graph.Axis.Y=e.Class.create({initialize:function(e){this.graph=e.graph,this.orientation=e.orientation||"right",this.pixelsPerTick=e.pixelsPerTick||75,e.ticks&&(this.staticTicks=e.ticks),e.tickValues&&(this.tickValues=e.tickValues),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",this.tickFormat=e.tickFormat||function(t){return t},this.berthRate=.1,e.element?(this.element=e.element,this.vis=t.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis;var i=this;this.graph.onUpdate(function(){i.render()})},setSize:function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),i=parseInt(e.getPropertyValue("width"),10);if(!t.auto)var n=parseInt(e.getPropertyValue("height"),10)}this.width=t.width||i||this.graph.width*this.berthRate,this.height=t.height||n||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var r=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*r+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var t=this._drawAxis(this.graph.y);this._drawGrid(t),this._renderHeight=this.graph.height},_drawAxis:function(e){var i=t.svg.axis().scale(e).orient(this.orientation);if(i.tickFormat(this.tickFormat),this.tickValues&&i.tickValues(this.tickValues),"left"==this.orientation)var n=this.height*this.berthRate,r="translate("+this.width+", "+n+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",r).call(i.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),i},_drawGrid:function(t){var e=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(e)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),e.namespace("Rickshaw.Graph.Axis.Y.Scaled"),e.Graph.Axis.Y.Scaled=e.Class.create(e.Graph.Axis.Y,{initialize:function($super,t){if("undefined"==typeof t.scale)throw new Error("Scaled requires scale");this.scale=t.scale,"undefined"==typeof t.grid?this.grid=!0:this.grid=t.grid,$super(t)},_drawAxis:function($super,e){var i=this.scale.domain(),n=this.graph.renderer.domain().y,r=[Math.min.apply(Math,i),Math.max.apply(Math,i)],s=t.scale.linear().domain([0,1]).range(r),a=[s(n[0]),s(n[1])],o=t.scale.linear().domain(r).range(a),l=this.scale.copy().domain(i.map(o)).range(e.range());return $super(l)},_drawGrid:function($super,t){this.grid&&$super(t)}}),e.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),e.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph,this.legend=e.legend;var i=this,n={},r=null,s=e.disabledColor||function(e){return t.interpolateRgb(e,t.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(t){t.element.addEventListener("mouseover",function(){r||(r=t,i.legend.lines.forEach(function(e){if(t!==e)n[e.series.name]=n[e.series.name]||e.series.color,e.series.color=s(e.series.color);else if(i.graph.renderer.unstack&&(!e.series.renderer||e.series.renderer.unstack)){var r=i.graph.series.indexOf(e.series);e.originalIndex=r;var a=i.graph.series.splice(r,1)[0];i.graph.series.push(a)}}),i.graph.update())},!1),t.element.addEventListener("mouseout",function(){r&&(r=null,i.legend.lines.forEach(function(e){if(t===e&&e.hasOwnProperty("originalIndex")){var r=i.graph.series.pop();i.graph.series.splice(e.originalIndex,0,r),delete e.originalIndex}n[e.series.name]&&(e.series.color=n[e.series.name])}),i.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){i.addHighlightEvents(t)})},e.namespace("Rickshaw.Graph.Behavior.Series.Order"),e.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if("undefined"==typeof window.jQuery)throw"couldn't find jQuery at window.jQuery";if("undefined"==typeof window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(e.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var t=[];jQuery(e.legend.list).find("li").each(function(e,i){i.series&&t.push(i.series)});for(var i=e.graph.series.length-1;i>=0;i--)e.graph.series[i]=t.shift();e.graph.update()}}),jQuery(e.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(e.legend.element).height;e.legend.element.style.height=t})},e.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),e.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var e=this;if(this.addAnchor=function(t){var i=document.createElement("a");i.innerHTML="&#10004;",i.classList.add("action"),t.element.insertBefore(i,t.element.firstChild),i.onclick=function(){if(t.series.disabled)t.series.enable(),t.element.classList.remove("disabled");else{if(this.graph.series.filter(function(t){return!t.disabled}).length<=1)return;t.series.disable(),t.element.classList.add("disabled")}}.bind(this);var n=t.element.getElementsByTagName("span")[0];n.onclick=function(){var i=t.series.disabled;if(!i)for(var n=0;n<e.legend.lines.length;n++){var r=e.legend.lines[n];if(t.series===r.series);else if(!r.series.disabled){i=!0;break}}i?(t.series.enable(),t.element.classList.remove("disabled"),e.legend.lines.forEach(function(e){t.series===e.series||(e.series.disable(),e.element.classList.add("disabled"))})):e.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")})}},this.legend){var i=jQuery;"undefined"!=typeof i&&i(this.legend.list).sortable&&i(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){e.addAnchor(t)})}this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(e.graph.series.length<=1)throw"only one series left";t.disabled=!0,e.graph.update()},t.enable=function(){t.disabled=!1,e.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},e.namespace("Rickshaw.Graph.HoverDetail"),e.Graph.HoverDetail=e.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var i=this.element=document.createElement("div");i.className="detail",this.visible=!0,e.element.appendChild(i),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,i,n,r){return t.name+":&nbsp;"+r},update:function(e){if(e=e||this.lastEvent,e&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect|circle)$/))){var i,n=this.graph,r=e.offsetX||e.layerX,s=e.offsetY||e.layerY,a=0,o=[];if(this.graph.series.active().forEach(function(e){var l=this.graph.stackedData[a++];if(l.length){var h=n.x.invert(r),u=t.scale.linear().domain([l[0].x,l.slice(-1)[0].x]).range([0,l.length-1]),c=Math.round(u(h));c==l.length-1&&c--;for(var d=Math.min(c||0,l.length-1),f=c;f<l.length-1&&(l[f]&&l[f+1]);){if(l[f].x<=h&&l[f+1].x>h){d=Math.abs(h-l[f].x)<Math.abs(h-l[f+1].x)?f:f+1;break}l[f+1].x<=h?f++:f--}d<0&&(d=0);var p=l[d],g=Math.sqrt(Math.pow(Math.abs(n.x(p.x)-r),2)+Math.pow(Math.abs(n.y(p.y+p.y0)-s),2)),m=e.xFormatter||this.xFormatter,v=e.yFormatter||this.yFormatter,y={formattedXValue:m(p.x),formattedYValue:v(e.scale?e.scale.invert(p.y):p.y),series:e,value:p,distance:g,order:a,name:e.name};(!i||g<i.distance)&&(i=y),o.push(y)}},this),i){i.active=!0;var l=i.value.x,h=i.formattedXValue;this.element.innerHTML="",this.element.style.left=n.x(l)+"px",this.visible&&this.render({points:o,detail:o,mouseX:r,mouseY:s,formattedXValue:h,domainX:l})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,i=t.points,n=i.filter(function(t){return t.active}).shift();if(null!==n.value.y){var r=n.formattedXValue,s=n.formattedYValue;this.element.innerHTML="",this.element.style.left=e.x(n.value.x)+"px";var a=document.createElement("div");a.className="x_label",a.innerHTML=r,this.element.appendChild(a);var o=document.createElement("div");o.className="item";var l=n.series,h=l.scale?l.scale.invert(n.value.y):n.value.y;o.innerHTML=this.formatter(l,n.value.x,h,r,s,n),o.style.top=this.graph.y(n.value.y0+n.value.y)+"px",this.element.appendChild(o);var u=document.createElement("div");u.className="dot",u.style.top=o.style.top,u.style.borderColor=l.color,this.element.appendChild(u),n.active&&(o.classList.add("active"),u.classList.add("active"));var c=[a,o];c.forEach(function(t){t.classList.add("left")}),this.show();var d=this._calcLayoutError(c);if(d>0){c.forEach(function(t){t.classList.remove("left"),t.classList.add("right")});var f=this._calcLayoutError(c);f>d&&c.forEach(function(t){t.classList.remove("right"),t.classList.add("left")})}"function"==typeof this.onRender&&this.onRender(t)}},_calcLayoutError:function(t){var e=this.element.parentNode.getBoundingClientRect(),i=0;t.forEach(function(t){var n=t.getBoundingClientRect();n.width&&(n.right>e.right&&(i+=n.right-e.right),n.left<e.left&&(i+=e.left-n.left))});return i},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(t){this.visible=!0,this.update(t)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),e.namespace("Rickshaw.Graph.JSONP"),e.Graph.JSONP=e.Class.create(e.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),e.namespace("Rickshaw.Graph.Legend"),e.Graph.Legend=e.Class.create({className:"rickshaw_legend",initialize:function(t){this.element=t.element,this.graph=t.graph,this.naturalOrder=t.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var e=this.graph.series.map(function(t){return t});this.naturalOrder||(e=e.reverse()),e.forEach(function(e){t.addLine(e)})},addLine:function(e){var i=document.createElement("li");i.className="line",e.disabled&&(i.className+=" disabled"),e.className&&t.select(i).classed(e.className,!0);var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=e.color,i.appendChild(n);var r=document.createElement("span");r.className="label",r.innerHTML=e.name,i.appendChild(r),this.list.appendChild(i),i.series=e,e.noLegend&&(i.style.display="none");var s={element:i,series:e};return this.shelving&&(this.shelving.addAnchor(s),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(s),this.lines.push(s),i}}),e.namespace("Rickshaw.Graph.RangeSlider"),e.Graph.RangeSlider=e.Class.create({initialize:function(t){var e=(this.element=t.element,this.graph=t.graph);this.slideCallbacks=[],this.build(),e.onUpdate(function(){this.update()}.bind(this))},build:function(){var t=this.element,e=this.graph,i=jQuery,n=e.dataDomain(),r=this;i(function(){i(t).slider({range:!0,min:n[0],max:n[1],values:[n[0],n[1]],slide:function(t,i){if(!(i.values[1]<=i.values[0])){e.window.xMin=i.values[0],e.window.xMax=i.values[1],e.update();var n=e.dataDomain();n[0]==i.values[0]&&(e.window.xMin=void 0),n[1]==i.values[1]&&(e.window.xMax=void 0),r.slideCallbacks.forEach(function(t){t(e,e.window.xMin,e.window.xMax)})}}})}),i(t)[0].style.width=e.width+"px"},update:function(){var t=this.element,e=this.graph,i=jQuery,n=i(t).slider("option","values"),r=e.dataDomain();i(t).slider("option","min",r[0]),i(t).slider("option","max",r[1]),null==e.window.xMin&&(n[0]=r[0]),null==e.window.xMax&&(n[1]=r[1]),i(t).slider("option","values",n)},onSlide:function(t){this.slideCallbacks.push(t)}}),e.namespace("Rickshaw.Graph.RangeSlider.Preview"),e.Graph.RangeSlider.Preview=e.Class.create({initialize:function(e){if(!e.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!e.graph&&!e.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=e.element,this.element.style.position="relative",this.graphs=e.graph?[e.graph]:e.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=e.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=t.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],e.width||(this.widthFromGraph=!0),e.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(e),this.render()}.bind(this)),e.width=e.width||this.graphs[0].width||this.defaults.width,e.height=e.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(e),this.render()},onSlide:function(t){this.slideCallbacks.push(t)},onConfigure:function(t){this.configureCallbacks.push(t)},configure:function(t){this.config=this.config||{},this.configureCallbacks.forEach(function(e){e(t)}),e.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this.config?this.config[e]:this.defaults[e]},this),("width"in t||"height"in t)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(t){var e=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,i=this.config.width-2*this.config.frameHandleThickness;if(t.setSize({width:i,height:e}),this.svg){var n=e+2*this.config.frameHandleThickness,r=i+2*this.config.frameHandleThickness;this.svg.style("width",r+"px"),this.svg.style("height",n+"px")}},this))},render:function(){var i=this;this.svg=t.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var n=function(t){var n=e.extend({},t.config),r=i.previewHeight/i.graphs.length,s=t.renderer.name;e.extend(n,{element:this.appendChild(document.createElement("div")),height:r,width:i.previewWidth,series:t.series,renderer:s});var a=new e.Graph(n);i.previews.push(a),t.onUpdate(function(){a.render(),i.render()}),t.onConfigure(function(t){delete t.height,t.width=t.width-2*i.config.frameHandleThickness,a.configure(t),a.render()}),a.render()},r=t.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),s="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";r.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",s).style("-moz-transform",s).style("-ms-transform",s).style("transform",s).each(n),r.exit().remove();var a=this.graphs[0],o=t.scale.linear().domain([0,this.previewWidth]).range(a.dataDomain()),l=[a.window.xMin,a.window.xMax];this.currentFrame[0]=void 0===l[0]?0:Math.round(o.invert(l[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===l[1]?this.previewWidth:o.invert(l[1]),this.currentFrame[1]-this.currentFrame[0]<i.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+i.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),
this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]);t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var e="";e+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,e+=" h "+this.previewWidth,e+=" v "+this.previewHeight,e+=" h "+-this.previewWidth,e+=" z ",e+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]);t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var e="";e+=" M "+this.currentFrame[0]+" 0",e+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),e+=" V "+this.config.height,e+=" H "+this.currentFrame[0],e+=" z",e+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]);t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var e="";[.4,.6].forEach(function(t){e+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height),e+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height)}.bind(this)),t.attr("d",e)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),t.attr("x",this.currentFrame[0]).attr("height",this.config.height);var e=this.svg.selectAll("rect.right_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),e.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var t=this.svg.selectAll("rect.middle_handle").data([null]);t.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),t.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){function e(){l.stop=h._getClientXFromEvent(t.event,l);var e=l.stop-l.start,i=h.frameBeforeDrag.slice(0),n=h.config.minimumFrameWidth;l.rigid&&(n=h.frameBeforeDrag[1]-h.frameBeforeDrag[0]),l.left&&(i[0]=Math.max(i[0]+e,0)),l.right&&(i[1]=Math.min(i[1]+e,h.previewWidth));var r=i[1]-i[0];r<=n&&(l.left&&(i[0]=i[1]-n),l.right&&(i[1]=i[0]+n),i[0]<=0&&(i[1]-=i[0],i[0]=0),i[1]>=h.previewWidth&&(i[0]-=i[1]-h.previewWidth,i[1]=h.previewWidth)),h.graphs.forEach(function(e){var n=t.scale.linear().interpolate(t.interpolateNumber).domain([0,h.previewWidth]).range(e.dataDomain()),r=[n(i[0]),n(i[1])];h.slideCallbacks.forEach(function(t){t(e,r[0],r[1])}),0===i[0]&&(r[0]=void 0),i[1]===h.previewWidth&&(r[1]=void 0),e.window.xMin=r[0],e.window.xMax=r[1],e.update()})}function i(){l.target=t.event.target,l.start=h._getClientXFromEvent(t.event,l),h.frameBeforeDrag=h.currentFrame.slice(),t.event.preventDefault?t.event.preventDefault():t.event.returnValue=!1,t.select(document).on("mousemove.rickshaw_range_slider_preview",e),t.select(document).on("mouseup.rickshaw_range_slider_preview",a),t.select(document).on("touchmove.rickshaw_range_slider_preview",e),t.select(document).on("touchend.rickshaw_range_slider_preview",a),t.select(document).on("touchcancel.rickshaw_range_slider_preview",a)}function n(){l.left=!0,i()}function r(){l.right=!0,i()}function s(){l.left=!0,l.right=!0,l.rigid=!0,i()}function a(){t.select(document).on("mousemove.rickshaw_range_slider_preview",null),t.select(document).on("mouseup.rickshaw_range_slider_preview",null),t.select(document).on("touchmove.rickshaw_range_slider_preview",null),t.select(document).on("touchend.rickshaw_range_slider_preview",null),t.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete h.frameBeforeDrag,l.left=!1,l.right=!1,l.rigid=!1}var o=t.select(this.element),l={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},h=this;o.select("rect.left_handle").on("mousedown",n),o.select("rect.right_handle").on("mousedown",r),o.select("rect.middle_handle").on("mousedown",s),o.select("rect.left_handle").on("touchstart",n),o.select("rect.right_handle").on("touchstart",r),o.select("rect.middle_handle").on("touchstart",s)},_getClientXFromEvent:function(t,e){switch(t.type){case"touchstart":case"touchmove":for(var i=t.changedTouches,n=null,r=0;r<i.length;r++)if(i[r].target===e.target){n=i[r];break}return null!==n?n.clientX:void 0;default:return t.clientX}}}),e.namespace("Rickshaw.Graph.Renderer"),e.Graph.Renderer=e.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(t){var e=t||this.graph.stackedData||this.graph.stackData(),i=+(1/0),n=-(1/0),r=+(1/0),s=-(1/0);return e.forEach(function(t){t.forEach(function(t){if(null!=t.y){var e=t.y+t.y0;e<r&&(r=e),e>s&&(s=e)}}),t.length&&(t[0].x<i&&(i=t[0].x),t[t.length-1].x>n&&(n=t[t.length-1].x))}),i-=(n-i)*this.padding.left,n+=(n-i)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,s=void 0===this.graph.max?s:this.graph.max,("auto"===this.graph.min||r<0)&&(r-=(s-r)*this.padding.bottom),void 0===this.graph.max&&(s+=(s-r)*this.padding.top),{x:[i,n],y:[r,s]}},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),s=n.selectAll("path.path").data(r).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var a=n.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var o=0;i.forEach(function(t){t.disabled||(t.path=s[0][o],this.stroke&&(t.stroke=a[0][o]),this._styleSeries(t),o++)},this)},_styleSeries:function(e){var i=this.fill?e.color:"none",n=this.stroke?e.color:"none";e.path.setAttribute("fill",i),e.path.setAttribute("stroke",n),e.path.setAttribute("stroke-width",this.strokeWidth),e.className&&t.select(e.path).classed(e.className,!0),e.className&&this.stroke&&t.select(e.stroke).classed(e.className,!0)},configure:function(t){t=t||{},e.keys(this.defaults()).forEach(function(i){return t.hasOwnProperty(i)?void("object"==typeof this.defaults()[i]?e.keys(this.defaults()[i]).forEach(function(e){this[i][e]=void 0!==t[i][e]?t[i][e]:void 0!==this[i][e]?this[i][e]:this.defaults()[i][e]},this):this[i]=void 0!==t[i]?t[i]:void 0!==this[i]?this[i]:void 0!==this.graph[i]?this.graph[i]:this.defaults()[i]):void(this[i]=this[i]||this.graph[i]||this.defaults()[i])},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),e.namespace("Rickshaw.Graph.Renderer.Line"),e.Graph.Renderer.Line=e.Class.create(e.Graph.Renderer,{name:"line",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i}}),e.namespace("Rickshaw.Graph.Renderer.Stack"),e.Graph.Renderer.Stack=e.Class.create(e.Graph.Renderer,{name:"stack",defaults:function($super){return e.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,i=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i}}),e.namespace("Rickshaw.Graph.Renderer.Bar"),e.Graph.Renderer.Bar=e.Class.create(e.Graph.Renderer,{name:"bar",defaults:function($super){var t=e.extend($super(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return t.x[1]+=Number(e.magnitude),t},barWidth:function(t){var e=this._frequentInterval(t.stack),i=this.graph.x.magnitude(e.magnitude)*(1-this.gapSize);return i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=this.barWidth(i.active()[0]),s=0,a=i.filter(function(t){return!t.disabled}).length,o=this.unstack?r/a:r,l=function(t){var i=[1,0,0,t.y<0?-1:1,0,t.y<0?2*e.y.magnitude(Math.abs(t.y)):0];return"matrix("+i.join(",")+")"};i.forEach(function(t){if(!t.disabled){var i=(this.barWidth(t),n.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(t){return e.x(t.x)+s}).attr("y",function(t){return e.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",o).attr("height",function(t){return e.y.magnitude(Math.abs(t.y))}).attr("transform",l));Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)}),this.unstack&&(s+=o)}},this)},_frequentInterval:function(t){for(var i={},n=0;n<t.length-1;n++){var r=t[n+1].x-t[n].x;i[r]=i[r]||0,i[r]++}var s={count:0,magnitude:1};return e.keys(i).forEach(function(t){s.count<i[t]&&(s={count:i[t],magnitude:t})}),s}}),e.namespace("Rickshaw.Graph.Renderer.Area"),e.Graph.Renderer.Area=e.Class.create(e.Graph.Renderer,{name:"area",defaults:function($super){return e.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,i=t.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},seriesStrokeFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis;n.selectAll("*").remove();var r=this.unstack?"append":"insert",s=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=n.selectAll("path").data(s).enter()[r]("svg:g","g");a.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&a.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var o=0;i.forEach(function(t){t.disabled||(t.path=a[0][o++],this._styleSeries(t))},this)},_styleSeries:function(e){e.path&&(t.select(e.path).select(".area").attr("fill",e.color),this.stroke&&t.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||t.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth),e.className&&e.path.setAttribute("class",e.className))}}),e.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),e.Graph.Renderer.ScatterPlot=e.Class.create(e.Graph.Renderer,{name:"scatterplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis,r=this.dotSize;n.selectAll("*").remove(),i.forEach(function(t){if(!t.disabled){var i=n.selectAll("path").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});t.className&&i.classed(t.className,!0),Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)})}},this)}}),e.namespace("Rickshaw.Graph.Renderer.Multi"),e.Graph.Renderer.Multi=e.Class.create(e.Graph.Renderer,{name:"multi",initialize:function($super,t){$super(t)},defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,t){t=t||{},this.config=t,$super(t)},domain:function($super){this.graph.stackData();var e=[],i=this._groups();this._stack(i),i.forEach(function(t){var i=t.series.filter(function(t){return!t.disabled}).map(function(t){return t.stack});if(i.length){var n=null;n=t.renderer&&t.renderer.domain?t.renderer.domain(i):$super(i),e.push(n)}});var n=t.min(e.map(function(t){return t.x[0]})),r=t.max(e.map(function(t){return t.x[1]})),s=t.min(e.map(function(t){return t.y[0]})),a=t.max(e.map(function(t){return t.y[1]}));return{x:[n,r],y:[s,a]}},_groups:function(){var i=this.graph,n={};i.series.forEach(function(r){if(!r.disabled){if(!n[r.renderer]){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"g");i.vis[0][0].appendChild(a);var o=i._renderers[r.renderer],l={},h=[this.defaults(),o.defaults(),this.config,this.graph];h.forEach(function(t){e.extend(l,t)}),o.configure(l),n[r.renderer]={renderer:o,series:[],vis:t.select(a)}}n[r.renderer].series.push(r)}},this);var r=[];return Object.keys(n).forEach(function(t){var e=n[t];r.push(e)}),r},_stack:function(i){return i.forEach(function(i){var n=i.series.filter(function(t){return!t.disabled}),r=n.map(function(t){return t.stack});if(!i.renderer.unstack){var s=t.layout.stack(),a=e.clone(s(r));n.forEach(function(t,i){t._stack=e.clone(a[i])})}},this),i},render:function(){this.graph.series.forEach(function(t){if(!t.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var t=this._groups();t=this._stack(t),t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled});e.active=function(){return e},t.renderer.render({series:e,vis:t.vis}),e.forEach(function(t){t.stack=t._stack||t.stack||t.data})})}}),e.namespace("Rickshaw.Graph.Renderer.LinePlot"),e.Graph.Renderer.LinePlot=e.Class.create(e.Graph.Renderer,{name:"lineplot",defaults:function($super){return e.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var e=this.graph,i=t.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return i.defined&&i.defined(function(t){return null!==t.y}),i},render:function(t){t=t||{};var e=this.graph,i=t.series||e.series,n=t.vis||e.vis,r=this.dotSize;n.selectAll("*").remove();var s=i.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=n.selectAll("path").data(s).enter().append("svg:path").attr("d",this.seriesPathFactory()),o=0;i.forEach(function(t){t.disabled||(t.path=a[0][o++],this._styleSeries(t))},this),i.forEach(function(t){if(!t.disabled){var i=n.selectAll("x").data(t.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});Array.prototype.forEach.call(i[0],function(e){e&&(e.setAttribute("data-color",t.color),e.setAttribute("fill","white"),e.setAttribute("stroke",t.color),e.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),e.namespace("Rickshaw.Graph.Smoother"),e.Graph.Smoother=e.Class.create({initialize:function(t){this.graph=t.graph,this.element=t.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var t=this,e=jQuery;this.element&&e(function(){e(t.element).slider({min:1,max:100,slide:function(e,i){t.setScale(i.value),t.graph.update()}})})},setScale:function(t){if(t<1)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()},transformer:function(t){if(1==this.aggregationScale)return t;var e=[];return t.forEach(function(t){for(var i=[];t.length;){var n=0,r=0,s=t.splice(0,this.aggregationScale);s.forEach(function(t){n+=t.x/s.length,r+=t.y/s.length}),i.push({x:n,y:r})}e.push(i)}.bind(this)),e}}),e.namespace("Rickshaw.Graph.Socketio"),e.Graph.Socketio=e.Class.create(e.Graph.Ajax,{request:function(){var t=io.connect(this.dataURL),e=this;t.on("rickshaw",function(t){e.success(t)})}}),e.namespace("Rickshaw.Series"),e.Series=e.Class.create(Array,{initialize:function(t,i,n){n=n||{},this.palette=new e.Color.Palette(i),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase;var r="undefined"==typeof n.timeInterval?1e3:n.timeInterval;this.setTimeInterval(r),t&&"object"==typeof t&&Array.isArray(t)&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(t){if("undefined"==typeof t.name)throw"addItem() needs a name";t.color=t.color||this.palette.color(t.name),t.data=t.data||[],0===t.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})}):0===t.data.length&&t.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},addData:function(t,i){var n=this.getIndex();e.keys(t).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(e){e.data.push({x:i||(n*this.timeInterval||1)+this.timeBase,y:t[e.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var t={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(e){var i={color:e.color,name:e.name,data:[]};e.data.forEach(function(t){i.data.push({x:t.x,y:t.y})}),t.items.push(i)}),t},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),e.Series.zeroFill=function(t){e.Series.fill(t,0)},e.Series.fill=function(t,e){for(var i,n=0,r=t.map(function(t){return t.data});n<Math.max.apply(null,r.map(function(t){return t.length}));)i=Math.min.apply(null,r.filter(function(t){return t[n]}).map(function(t){return t[n].x})),r.forEach(function(t){t[n]&&t[n].x==i||t.splice(n,0,{x:i,y:e})}),n++},e.namespace("Rickshaw.Series.FixedDuration"),e.Series.FixedDuration=e.Class.create(e.Series,{initialize:function(t,i,n){if(n=n||{},"undefined"==typeof n.timeInterval)throw new Error("FixedDuration series requires timeInterval");if("undefined"==typeof n.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new e.Color.Palette(i),this.timeBase="undefined"==typeof n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,"undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var r=this.maxDataPoints-this.currentSize-1;r>1;r--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((r-1)*this.timeInterval||1)+this.timeBase,y:0,i:r})},this)},addData:function($super,t,e){if($super(t,e),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),e});